(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function ep(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fc={exports:{}},Br={},pc={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),tp=Symbol.for("react.portal"),np=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),sp=Symbol.for("react.profiler"),rp=Symbol.for("react.provider"),lp=Symbol.for("react.context"),op=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),up=Symbol.for("react.memo"),hp=Symbol.for("react.lazy"),tu=Symbol.iterator;function cp(t){return t===null||typeof t!="object"?null:(t=tu&&t[tu]||t["@@iterator"],typeof t=="function"?t:null)}var mc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gc=Object.assign,vc={};function vi(t,e,n){this.props=t,this.context=e,this.refs=vc,this.updater=n||mc}vi.prototype.isReactComponent={};vi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yc(){}yc.prototype=vi.prototype;function qo(t,e,n){this.props=t,this.context=e,this.refs=vc,this.updater=n||mc}var ea=qo.prototype=new yc;ea.constructor=qo;gc(ea,vi.prototype);ea.isPureReactComponent=!0;var nu=Array.isArray,xc=Object.prototype.hasOwnProperty,ta={current:null},wc={key:!0,ref:!0,__self:!0,__source:!0};function _c(t,e,n){var i,s={},r=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(r=""+e.key),e)xc.call(e,i)&&!wc.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:ms,type:t,key:r,ref:l,props:s,_owner:ta.current}}function dp(t,e){return{$$typeof:ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function na(t){return typeof t=="object"&&t!==null&&t.$$typeof===ms}function fp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iu=/\/+/g;function al(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fp(""+t.key):e.toString(36)}function Gs(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(r){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case ms:case tp:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+al(l,0):i,nu(s)?(n="",t!=null&&(n=t.replace(iu,"$&/")+"/"),Gs(s,e,n,"",function(h){return h})):s!=null&&(na(s)&&(s=dp(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(iu,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",nu(t))for(var a=0;a<t.length;a++){r=t[a];var u=i+al(r,a);l+=Gs(r,e,n,u,s)}else if(u=cp(t),typeof u=="function")for(t=u.call(t),a=0;!(r=t.next()).done;)r=r.value,u=i+al(r,a++),l+=Gs(r,e,n,u,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function bs(t,e,n){if(t==null)return t;var i=[],s=0;return Gs(t,i,"","",function(r){return e.call(n,r,s++)}),i}function pp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},Xs={transition:null},mp={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:Xs,ReactCurrentOwner:ta};function Sc(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:bs,forEach:function(t,e,n){bs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bs(t,function(){e++}),e},toArray:function(t){return bs(t,function(e){return e})||[]},only:function(t){if(!na(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=vi;J.Fragment=np;J.Profiler=sp;J.PureComponent=qo;J.StrictMode=ip;J.Suspense=ap;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp;J.act=Sc;J.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=gc({},t.props),s=t.key,r=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,l=ta.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)xc.call(e,u)&&!wc.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:ms,type:t.type,key:s,ref:r,props:i,_owner:l}};J.createContext=function(t){return t={$$typeof:lp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rp,_context:t},t.Consumer=t};J.createElement=_c;J.createFactory=function(t){var e=_c.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:op,render:t}};J.isValidElement=na;J.lazy=function(t){return{$$typeof:hp,_payload:{_status:-1,_result:t},_init:pp}};J.memo=function(t,e){return{$$typeof:up,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Xs.transition;Xs.transition={};try{t()}finally{Xs.transition=e}};J.unstable_act=Sc;J.useCallback=function(t,e){return Ue.current.useCallback(t,e)};J.useContext=function(t){return Ue.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};J.useEffect=function(t,e){return Ue.current.useEffect(t,e)};J.useId=function(){return Ue.current.useId()};J.useImperativeHandle=function(t,e,n){return Ue.current.useImperativeHandle(t,e,n)};J.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return Ue.current.useMemo(t,e)};J.useReducer=function(t,e,n){return Ue.current.useReducer(t,e,n)};J.useRef=function(t){return Ue.current.useRef(t)};J.useState=function(t){return Ue.current.useState(t)};J.useSyncExternalStore=function(t,e,n){return Ue.current.useSyncExternalStore(t,e,n)};J.useTransition=function(){return Ue.current.useTransition()};J.version="18.3.1";pc.exports=J;var z=pc.exports;const gp=ep(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp=z,yp=Symbol.for("react.element"),xp=Symbol.for("react.fragment"),wp=Object.prototype.hasOwnProperty,_p=vp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sp={key:!0,ref:!0,__self:!0,__source:!0};function jc(t,e,n){var i,s={},r=null,l=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)wp.call(e,i)&&!Sp.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:yp,type:t,key:r,ref:l,props:s,_owner:_p.current}}Br.Fragment=xp;Br.jsx=jc;Br.jsxs=jc;fc.exports=Br;var o=fc.exports,eo={},kc={exports:{}},it={},bc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,S){var W=N.length;N.push(S);e:for(;0<W;){var Y=W-1>>>1,G=N[Y];if(0<s(G,S))N[Y]=S,N[W]=G,W=Y;else break e}}function n(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var S=N[0],W=N.pop();if(W!==S){N[0]=W;e:for(var Y=0,G=N.length,Ae=G>>>1;Y<Ae;){var je=2*(Y+1)-1,xe=N[je],U=je+1,ne=N[U];if(0>s(xe,W))U<G&&0>s(ne,xe)?(N[Y]=ne,N[U]=W,Y=U):(N[Y]=xe,N[je]=W,Y=je);else if(U<G&&0>s(ne,W))N[Y]=ne,N[U]=W,Y=U;else break e}}return S}function s(N,S){var W=N.sortIndex-S.sortIndex;return W!==0?W:N.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var l=Date,a=l.now();t.unstable_now=function(){return l.now()-a}}var u=[],h=[],c=1,d=null,f=3,g=!1,v=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(N){for(var S=n(h);S!==null;){if(S.callback===null)i(h);else if(S.startTime<=N)i(h),S.sortIndex=S.expirationTime,e(u,S);else break;S=n(h)}}function j(N){if(x=!1,y(N),!v)if(n(u)!==null)v=!0,L(b);else{var S=n(h);S!==null&&E(j,S.startTime-N)}}function b(N,S){v=!1,x&&(x=!1,m(_),_=-1),g=!0;var W=f;try{for(y(S),d=n(u);d!==null&&(!(d.expirationTime>S)||N&&!A());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,f=d.priorityLevel;var G=Y(d.expirationTime<=S);S=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(u)&&i(u),y(S)}else i(u);d=n(u)}if(d!==null)var Ae=!0;else{var je=n(h);je!==null&&E(j,je.startTime-S),Ae=!1}return Ae}finally{d=null,f=W,g=!1}}var M=!1,k=null,_=-1,C=5,F=-1;function A(){return!(t.unstable_now()-F<C)}function K(){if(k!==null){var N=t.unstable_now();F=N;var S=!0;try{S=k(!0,N)}finally{S?ee():(M=!1,k=null)}}else M=!1}var ee;if(typeof p=="function")ee=function(){p(K)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,X=Q.port2;Q.port1.onmessage=K,ee=function(){X.postMessage(null)}}else ee=function(){P(K,0)};function L(N){k=N,M||(M=!0,ee())}function E(N,S){_=P(function(){N(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,L(b))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(N){switch(f){case 1:case 2:case 3:var S=3;break;default:S=f}var W=f;f=S;try{return N()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,S){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var W=f;f=N;try{return S()}finally{f=W}},t.unstable_scheduleCallback=function(N,S,W){var Y=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,N){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=W+G,N={id:c++,callback:S,priorityLevel:N,startTime:W,expirationTime:G,sortIndex:-1},W>Y?(N.sortIndex=W,e(h,N),n(u)===null&&N===n(h)&&(x?(m(_),_=-1):x=!0,E(j,W-Y))):(N.sortIndex=G,e(u,N),v||g||(v=!0,L(b))),N},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(N){var S=f;return function(){var W=f;f=S;try{return N.apply(this,arguments)}finally{f=W}}}})(Mc);bc.exports=Mc;var jp=bc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=z,nt=jp;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cc=new Set,Ji={};function zn(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ji[t]=e,t=0;t<e.length;t++)Cc.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=Object.prototype.hasOwnProperty,bp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,su={},ru={};function Mp(t){return to.call(ru,t)?!0:to.call(su,t)?!1:bp.test(t)?ru[t]=!0:(su[t]=!0,!1)}function Cp(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ep(t,e,n,i){if(e===null||typeof e>"u"||Cp(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ve(t,e,n,i,s,r,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=l}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new Ve(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new Ve(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new Ve(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new Ve(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new Ve(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new Ve(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new Ve(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new Ve(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new Ve(t,5,!1,t.toLowerCase(),null,!1,!1)});var ia=/[\-:]([a-z])/g;function sa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ia,sa);Le[e]=new Ve(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ia,sa);Le[e]=new Ve(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ia,sa);Le[e]=new Ve(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new Ve(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new Ve(t,1,!1,t.toLowerCase(),null,!0,!0)});function ra(t,e,n,i){var s=Le.hasOwnProperty(e)?Le[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ep(e,n,s,i)&&(n=null),i||s===null?Mp(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Dt=kp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ms=Symbol.for("react.element"),On=Symbol.for("react.portal"),$n=Symbol.for("react.fragment"),la=Symbol.for("react.strict_mode"),no=Symbol.for("react.profiler"),Ec=Symbol.for("react.provider"),Pc=Symbol.for("react.context"),oa=Symbol.for("react.forward_ref"),io=Symbol.for("react.suspense"),so=Symbol.for("react.suspense_list"),aa=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),Nc=Symbol.for("react.offscreen"),lu=Symbol.iterator;function _i(t){return t===null||typeof t!="object"?null:(t=lu&&t[lu]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,ul;function Ni(t){if(ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ul=e&&e[1]||""}return`
`+ul+t}var hl=!1;function cl(t,e){if(!t||hl)return"";hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=i.stack.split(`
`),l=s.length-1,a=r.length-1;1<=l&&0<=a&&s[l]!==r[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==r[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==r[a]){var u=`
`+s[l].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=l&&0<=a);break}}}finally{hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ni(t):""}function Pp(t){switch(t.tag){case 5:return Ni(t.type);case 16:return Ni("Lazy");case 13:return Ni("Suspense");case 19:return Ni("SuspenseList");case 0:case 2:case 15:return t=cl(t.type,!1),t;case 11:return t=cl(t.type.render,!1),t;case 1:return t=cl(t.type,!0),t;default:return""}}function ro(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $n:return"Fragment";case On:return"Portal";case no:return"Profiler";case la:return"StrictMode";case io:return"Suspense";case so:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pc:return(t.displayName||"Context")+".Consumer";case Ec:return(t._context.displayName||"Context")+".Provider";case oa:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case aa:return e=t.displayName||null,e!==null?e:ro(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return ro(t(e))}catch{}}return null}function Np(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ro(e);case 8:return e===la?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function on(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tp(t){var e=Tc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,r.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cs(t){t._valueTracker||(t._valueTracker=Tp(t))}function zc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Tc(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function hr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lo(t,e){var n=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ou(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=on(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Lc(t,e){e=e.checked,e!=null&&ra(t,"checked",e,!1)}function oo(t,e){Lc(t,e);var n=on(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ao(t,e.type,n):e.hasOwnProperty("defaultValue")&&ao(t,e.type,on(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function au(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ao(t,e,n){(e!=="number"||hr(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function qn(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+on(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Ti(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:on(n)}}function Rc(t,e){var n=on(e.value),i=on(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function hu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ic(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ho(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ic(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Es,Fc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Es=Es||document.createElement("div"),Es.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Es.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zp=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(t){zp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ri[e]=Ri[t]})});function Bc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ri.hasOwnProperty(t)&&Ri[t]?(""+e).trim():e+"px"}function Ac(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Bc(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var Lp=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(t,e){if(e){if(Lp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function fo(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var po=null;function ua(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mo=null,ei=null,ti=null;function cu(t){if(t=ys(t)){if(typeof mo!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Wr(e),mo(t.stateNode,t.type,e))}}function Oc(t){ei?ti?ti.push(t):ti=[t]:ei=t}function $c(){if(ei){var t=ei,e=ti;if(ti=ei=null,cu(t),e)for(t=0;t<e.length;t++)cu(e[t])}}function Dc(t,e){return t(e)}function Wc(){}var dl=!1;function Uc(t,e,n){if(dl)return t(e,n);dl=!0;try{return Dc(t,e,n)}finally{dl=!1,(ei!==null||ti!==null)&&(Wc(),$c())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var i=Wr(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var go=!1;if(Bt)try{var Si={};Object.defineProperty(Si,"passive",{get:function(){go=!0}}),window.addEventListener("test",Si,Si),window.removeEventListener("test",Si,Si)}catch{go=!1}function Rp(t,e,n,i,s,r,l,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(c){this.onError(c)}}var Ii=!1,cr=null,dr=!1,vo=null,Ip={onError:function(t){Ii=!0,cr=t}};function Fp(t,e,n,i,s,r,l,a,u){Ii=!1,cr=null,Rp.apply(Ip,arguments)}function Bp(t,e,n,i,s,r,l,a,u){if(Fp.apply(this,arguments),Ii){if(Ii){var h=cr;Ii=!1,cr=null}else throw Error(R(198));dr||(dr=!0,vo=h)}}function Ln(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function du(t){if(Ln(t)!==t)throw Error(R(188))}function Ap(t){var e=t.alternate;if(!e){if(e=Ln(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return du(s),t;if(r===i)return du(s),e;r=r.sibling}throw Error(R(188))}if(n.return!==i.return)n=s,i=r;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,i=r;break}if(a===i){l=!0,i=s,n=r;break}a=a.sibling}if(!l){for(a=r.child;a;){if(a===n){l=!0,n=r,i=s;break}if(a===i){l=!0,i=r,n=s;break}a=a.sibling}if(!l)throw Error(R(189))}}if(n.alternate!==i)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function Hc(t){return t=Ap(t),t!==null?Kc(t):null}function Kc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kc(t);if(e!==null)return e;t=t.sibling}return null}var Yc=nt.unstable_scheduleCallback,fu=nt.unstable_cancelCallback,Op=nt.unstable_shouldYield,$p=nt.unstable_requestPaint,we=nt.unstable_now,Dp=nt.unstable_getCurrentPriorityLevel,ha=nt.unstable_ImmediatePriority,Jc=nt.unstable_UserBlockingPriority,fr=nt.unstable_NormalPriority,Wp=nt.unstable_LowPriority,Qc=nt.unstable_IdlePriority,Ar=null,Ct=null;function Up(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Ar,t,void 0,(t.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:Kp,Vp=Math.log,Hp=Math.LN2;function Kp(t){return t>>>=0,t===0?32:31-(Vp(t)/Hp|0)|0}var Ps=64,Ns=4194304;function zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pr(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?i=zi(a):(r&=l,r!==0&&(i=zi(r)))}else l=n&~s,l!==0?i=zi(l):r!==0&&(i=zi(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-vt(e),s=1<<n,i|=t[n],e&=~s;return i}function Yp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var l=31-vt(r),a=1<<l,u=s[l];u===-1?(!(a&n)||a&i)&&(s[l]=Yp(a,e)):u<=e&&(t.expiredLanes|=a),r&=~a}}function yo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gc(){var t=Ps;return Ps<<=1,!(Ps&4194240)&&(Ps=64),t}function fl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vt(e),t[e]=n}function Qp(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vt(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function ca(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-vt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var te=0;function Xc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zc,da,qc,ed,td,xo=!1,Ts=[],Zt=null,qt=null,en=null,Xi=new Map,Zi=new Map,Yt=[],Gp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pu(t,e){switch(t){case"focusin":case"focusout":Zt=null;break;case"dragenter":case"dragleave":qt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":Xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(e.pointerId)}}function ji(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ys(e),e!==null&&da(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Xp(t,e,n,i,s){switch(e){case"focusin":return Zt=ji(Zt,t,e,n,i,s),!0;case"dragenter":return qt=ji(qt,t,e,n,i,s),!0;case"mouseover":return en=ji(en,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Xi.set(r,ji(Xi.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Zi.set(r,ji(Zi.get(r)||null,t,e,n,i,s)),!0}return!1}function nd(t){var e=gn(t.target);if(e!==null){var n=Ln(e);if(n!==null){if(e=n.tag,e===13){if(e=Vc(n),e!==null){t.blockedOn=e,td(t.priority,function(){qc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);po=i,n.target.dispatchEvent(i),po=null}else return e=ys(n),e!==null&&da(e),t.blockedOn=n,!1;e.shift()}return!0}function mu(t,e,n){Zs(t)&&n.delete(e)}function Zp(){xo=!1,Zt!==null&&Zs(Zt)&&(Zt=null),qt!==null&&Zs(qt)&&(qt=null),en!==null&&Zs(en)&&(en=null),Xi.forEach(mu),Zi.forEach(mu)}function ki(t,e){t.blockedOn===e&&(t.blockedOn=null,xo||(xo=!0,nt.unstable_scheduleCallback(nt.unstable_NormalPriority,Zp)))}function qi(t){function e(s){return ki(s,t)}if(0<Ts.length){ki(Ts[0],t);for(var n=1;n<Ts.length;n++){var i=Ts[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Zt!==null&&ki(Zt,t),qt!==null&&ki(qt,t),en!==null&&ki(en,t),Xi.forEach(e),Zi.forEach(e),n=0;n<Yt.length;n++)i=Yt[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)nd(n),n.blockedOn===null&&Yt.shift()}var ni=Dt.ReactCurrentBatchConfig,mr=!0;function qp(t,e,n,i){var s=te,r=ni.transition;ni.transition=null;try{te=1,fa(t,e,n,i)}finally{te=s,ni.transition=r}}function em(t,e,n,i){var s=te,r=ni.transition;ni.transition=null;try{te=4,fa(t,e,n,i)}finally{te=s,ni.transition=r}}function fa(t,e,n,i){if(mr){var s=wo(t,e,n,i);if(s===null)jl(t,e,i,gr,n),pu(t,i);else if(Xp(s,t,e,n,i))i.stopPropagation();else if(pu(t,i),e&4&&-1<Gp.indexOf(t)){for(;s!==null;){var r=ys(s);if(r!==null&&Zc(r),r=wo(t,e,n,i),r===null&&jl(t,e,i,gr,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else jl(t,e,i,null,n)}}var gr=null;function wo(t,e,n,i){if(gr=null,t=ua(i),t=gn(t),t!==null)if(e=Ln(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gr=t,null}function id(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dp()){case ha:return 1;case Jc:return 4;case fr:case Wp:return 16;case Qc:return 536870912;default:return 16}default:return 16}}var Qt=null,pa=null,qs=null;function sd(){if(qs)return qs;var t,e=pa,n=e.length,i,s="value"in Qt?Qt.value:Qt.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[r-i];i++);return qs=s.slice(t,1<i?1-i:void 0)}function er(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zs(){return!0}function gu(){return!1}function st(t){function e(n,i,s,r,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=l,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?zs:gu,this.isPropagationStopped=gu,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),e}var yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ma=st(yi),vs=ve({},yi,{view:0,detail:0}),tm=st(vs),pl,ml,bi,Or=ve({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(pl=t.screenX-bi.screenX,ml=t.screenY-bi.screenY):ml=pl=0,bi=t),pl)},movementY:function(t){return"movementY"in t?t.movementY:ml}}),vu=st(Or),nm=ve({},Or,{dataTransfer:0}),im=st(nm),sm=ve({},vs,{relatedTarget:0}),gl=st(sm),rm=ve({},yi,{animationName:0,elapsedTime:0,pseudoElement:0}),lm=st(rm),om=ve({},yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),am=st(om),um=ve({},yi,{data:0}),yu=st(um),hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dm[t])?!!e[t]:!1}function ga(){return fm}var pm=ve({},vs,{key:function(t){if(t.key){var e=hm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(t){return t.type==="keypress"?er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mm=st(pm),gm=ve({},Or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=st(gm),vm=ve({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),ym=st(vm),xm=ve({},yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),wm=st(xm),_m=ve({},Or,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sm=st(_m),jm=[9,13,27,32],va=Bt&&"CompositionEvent"in window,Fi=null;Bt&&"documentMode"in document&&(Fi=document.documentMode);var km=Bt&&"TextEvent"in window&&!Fi,rd=Bt&&(!va||Fi&&8<Fi&&11>=Fi),wu=" ",_u=!1;function ld(t,e){switch(t){case"keyup":return jm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function od(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dn=!1;function bm(t,e){switch(t){case"compositionend":return od(e);case"keypress":return e.which!==32?null:(_u=!0,wu);case"textInput":return t=e.data,t===wu&&_u?null:t;default:return null}}function Mm(t,e){if(Dn)return t==="compositionend"||!va&&ld(t,e)?(t=sd(),qs=pa=Qt=null,Dn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rd&&e.locale!=="ko"?null:e.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Cm[t.type]:e==="textarea"}function ad(t,e,n,i){Oc(i),e=vr(e,"onChange"),0<e.length&&(n=new ma("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Bi=null,es=null;function Em(t){xd(t,0)}function $r(t){var e=Vn(t);if(zc(e))return t}function Pm(t,e){if(t==="change")return e}var ud=!1;if(Bt){var vl;if(Bt){var yl="oninput"in document;if(!yl){var ju=document.createElement("div");ju.setAttribute("oninput","return;"),yl=typeof ju.oninput=="function"}vl=yl}else vl=!1;ud=vl&&(!document.documentMode||9<document.documentMode)}function ku(){Bi&&(Bi.detachEvent("onpropertychange",hd),es=Bi=null)}function hd(t){if(t.propertyName==="value"&&$r(es)){var e=[];ad(e,es,t,ua(t)),Uc(Em,e)}}function Nm(t,e,n){t==="focusin"?(ku(),Bi=e,es=n,Bi.attachEvent("onpropertychange",hd)):t==="focusout"&&ku()}function Tm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $r(es)}function zm(t,e){if(t==="click")return $r(e)}function Lm(t,e){if(t==="input"||t==="change")return $r(e)}function Rm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xt=typeof Object.is=="function"?Object.is:Rm;function ts(t,e){if(xt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!to.call(e,s)||!xt(t[s],e[s]))return!1}return!0}function bu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mu(t,e){var n=bu(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bu(n)}}function cd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dd(){for(var t=window,e=hr();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hr(t.document)}return e}function ya(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Im(t){var e=dd(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cd(n.ownerDocument.documentElement,n)){if(i!==null&&ya(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=Mu(n,r);var l=Mu(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fm=Bt&&"documentMode"in document&&11>=document.documentMode,Wn=null,_o=null,Ai=null,So=!1;function Cu(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;So||Wn==null||Wn!==hr(i)||(i=Wn,"selectionStart"in i&&ya(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ai&&ts(Ai,i)||(Ai=i,i=vr(_o,"onSelect"),0<i.length&&(e=new ma("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Wn)))}function Ls(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Un={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionend:Ls("Transition","TransitionEnd")},xl={},fd={};Bt&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function Dr(t){if(xl[t])return xl[t];if(!Un[t])return t;var e=Un[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fd)return xl[t]=e[n];return t}var pd=Dr("animationend"),md=Dr("animationiteration"),gd=Dr("animationstart"),vd=Dr("transitionend"),yd=new Map,Eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function un(t,e){yd.set(t,e),zn(e,[t])}for(var wl=0;wl<Eu.length;wl++){var _l=Eu[wl],Bm=_l.toLowerCase(),Am=_l[0].toUpperCase()+_l.slice(1);un(Bm,"on"+Am)}un(pd,"onAnimationEnd");un(md,"onAnimationIteration");un(gd,"onAnimationStart");un("dblclick","onDoubleClick");un("focusin","onFocus");un("focusout","onBlur");un(vd,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Om=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Pu(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Bp(i,e,void 0,t),t.currentTarget=null}function xd(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var l=i.length-1;0<=l;l--){var a=i[l],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==r&&s.isPropagationStopped())break e;Pu(s,a,h),r=u}else for(l=0;l<i.length;l++){if(a=i[l],u=a.instance,h=a.currentTarget,a=a.listener,u!==r&&s.isPropagationStopped())break e;Pu(s,a,h),r=u}}}if(dr)throw t=vo,dr=!1,vo=null,t}function he(t,e){var n=e[Co];n===void 0&&(n=e[Co]=new Set);var i=t+"__bubble";n.has(i)||(wd(e,t,2,!1),n.add(i))}function Sl(t,e,n){var i=0;e&&(i|=4),wd(n,t,i,e)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function ns(t){if(!t[Rs]){t[Rs]=!0,Cc.forEach(function(n){n!=="selectionchange"&&(Om.has(n)||Sl(n,!1,t),Sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rs]||(e[Rs]=!0,Sl("selectionchange",!1,e))}}function wd(t,e,n,i){switch(id(e)){case 1:var s=qp;break;case 4:s=em;break;default:s=fa}n=s.bind(null,e,n,t),s=void 0,!go||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function jl(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;l=l.return}for(;a!==null;){if(l=gn(a),l===null)return;if(u=l.tag,u===5||u===6){i=r=l;continue e}a=a.parentNode}}i=i.return}Uc(function(){var h=r,c=ua(n),d=[];e:{var f=yd.get(t);if(f!==void 0){var g=ma,v=t;switch(t){case"keypress":if(er(n)===0)break e;case"keydown":case"keyup":g=mm;break;case"focusin":v="focus",g=gl;break;case"focusout":v="blur",g=gl;break;case"beforeblur":case"afterblur":g=gl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=im;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ym;break;case pd:case md:case gd:g=lm;break;case vd:g=wm;break;case"scroll":g=tm;break;case"wheel":g=Sm;break;case"copy":case"cut":case"paste":g=am;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xu}var x=(e&4)!==0,P=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var p=h,y;p!==null;){y=p;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,m!==null&&(j=Gi(p,m),j!=null&&x.push(is(p,j,y)))),P)break;p=p.return}0<x.length&&(f=new g(f,v,null,n,c),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==po&&(v=n.relatedTarget||n.fromElement)&&(gn(v)||v[At]))break e;if((g||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=h,v=v?gn(v):null,v!==null&&(P=Ln(v),v!==P||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(x=vu,j="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=xu,j="onPointerLeave",m="onPointerEnter",p="pointer"),P=g==null?f:Vn(g),y=v==null?f:Vn(v),f=new x(j,p+"leave",g,n,c),f.target=P,f.relatedTarget=y,j=null,gn(c)===h&&(x=new x(m,p+"enter",v,n,c),x.target=y,x.relatedTarget=P,j=x),P=j,g&&v)t:{for(x=g,m=v,p=0,y=x;y;y=Fn(y))p++;for(y=0,j=m;j;j=Fn(j))y++;for(;0<p-y;)x=Fn(x),p--;for(;0<y-p;)m=Fn(m),y--;for(;p--;){if(x===m||m!==null&&x===m.alternate)break t;x=Fn(x),m=Fn(m)}x=null}else x=null;g!==null&&Nu(d,f,g,x,!1),v!==null&&P!==null&&Nu(d,P,v,x,!0)}}e:{if(f=h?Vn(h):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var b=Pm;else if(Su(f))if(ud)b=Lm;else{b=Tm;var M=Nm}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=zm);if(b&&(b=b(t,h))){ad(d,b,n,c);break e}M&&M(t,f,h),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&ao(f,"number",f.value)}switch(M=h?Vn(h):window,t){case"focusin":(Su(M)||M.contentEditable==="true")&&(Wn=M,_o=h,Ai=null);break;case"focusout":Ai=_o=Wn=null;break;case"mousedown":So=!0;break;case"contextmenu":case"mouseup":case"dragend":So=!1,Cu(d,n,c);break;case"selectionchange":if(Fm)break;case"keydown":case"keyup":Cu(d,n,c)}var k;if(va)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Dn?ld(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(rd&&n.locale!=="ko"&&(Dn||_!=="onCompositionStart"?_==="onCompositionEnd"&&Dn&&(k=sd()):(Qt=c,pa="value"in Qt?Qt.value:Qt.textContent,Dn=!0)),M=vr(h,_),0<M.length&&(_=new yu(_,t,null,n,c),d.push({event:_,listeners:M}),k?_.data=k:(k=od(n),k!==null&&(_.data=k)))),(k=km?bm(t,n):Mm(t,n))&&(h=vr(h,"onBeforeInput"),0<h.length&&(c=new yu("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:h}),c.data=k))}xd(d,e)})}function is(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vr(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Gi(t,n),r!=null&&i.unshift(is(t,r,s)),r=Gi(t,e),r!=null&&i.push(is(t,r,s))),t=t.return}return i}function Fn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nu(t,e,n,i,s){for(var r=e._reactName,l=[];n!==null&&n!==i;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&h!==null&&(a=h,s?(u=Gi(n,r),u!=null&&l.unshift(is(n,u,a))):s||(u=Gi(n,r),u!=null&&l.push(is(n,u,a)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var $m=/\r\n?/g,Dm=/\u0000|\uFFFD/g;function Tu(t){return(typeof t=="string"?t:""+t).replace($m,`
`).replace(Dm,"")}function Is(t,e,n){if(e=Tu(e),Tu(t)!==e&&n)throw Error(R(425))}function yr(){}var jo=null,ko=null;function bo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mo=typeof setTimeout=="function"?setTimeout:void 0,Wm=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,Um=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(t){return zu.resolve(null).then(t).catch(Vm)}:Mo;function Vm(t){setTimeout(function(){throw t})}function kl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),qi(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);qi(e)}function tn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Mt="__reactFiber$"+xi,ss="__reactProps$"+xi,At="__reactContainer$"+xi,Co="__reactEvents$"+xi,Hm="__reactListeners$"+xi,Km="__reactHandles$"+xi;function gn(t){var e=t[Mt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[At]||n[Mt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lu(t);t!==null;){if(n=t[Mt])return n;t=Lu(t)}return e}t=n,n=t.parentNode}return null}function ys(t){return t=t[Mt]||t[At],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Wr(t){return t[ss]||null}var Eo=[],Hn=-1;function hn(t){return{current:t}}function ce(t){0>Hn||(t.current=Eo[Hn],Eo[Hn]=null,Hn--)}function ue(t,e){Hn++,Eo[Hn]=t.current,t.current=e}var an={},Be=hn(an),Ye=hn(!1),Sn=an;function ai(t,e){var n=t.type.contextTypes;if(!n)return an;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Je(t){return t=t.childContextTypes,t!=null}function xr(){ce(Ye),ce(Be)}function Ru(t,e,n){if(Be.current!==an)throw Error(R(168));ue(Be,e),ue(Ye,n)}function _d(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(R(108,Np(t)||"Unknown",s));return ve({},n,i)}function wr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||an,Sn=Be.current,ue(Be,t),ue(Ye,Ye.current),!0}function Iu(t,e,n){var i=t.stateNode;if(!i)throw Error(R(169));n?(t=_d(t,e,Sn),i.__reactInternalMemoizedMergedChildContext=t,ce(Ye),ce(Be),ue(Be,t)):ce(Ye),ue(Ye,n)}var Tt=null,Ur=!1,bl=!1;function Sd(t){Tt===null?Tt=[t]:Tt.push(t)}function Ym(t){Ur=!0,Sd(t)}function cn(){if(!bl&&Tt!==null){bl=!0;var t=0,e=te;try{var n=Tt;for(te=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Tt=null,Ur=!1}catch(s){throw Tt!==null&&(Tt=Tt.slice(t+1)),Yc(ha,cn),s}finally{te=e,bl=!1}}return null}var Kn=[],Yn=0,_r=null,Sr=0,lt=[],ot=0,jn=null,zt=1,Lt="";function pn(t,e){Kn[Yn++]=Sr,Kn[Yn++]=_r,_r=t,Sr=e}function jd(t,e,n){lt[ot++]=zt,lt[ot++]=Lt,lt[ot++]=jn,jn=t;var i=zt;t=Lt;var s=32-vt(i)-1;i&=~(1<<s),n+=1;var r=32-vt(e)+s;if(30<r){var l=s-s%5;r=(i&(1<<l)-1).toString(32),i>>=l,s-=l,zt=1<<32-vt(e)+s|n<<s|i,Lt=r+t}else zt=1<<r|n<<s|i,Lt=t}function xa(t){t.return!==null&&(pn(t,1),jd(t,1,0))}function wa(t){for(;t===_r;)_r=Kn[--Yn],Kn[Yn]=null,Sr=Kn[--Yn],Kn[Yn]=null;for(;t===jn;)jn=lt[--ot],lt[ot]=null,Lt=lt[--ot],lt[ot]=null,zt=lt[--ot],lt[ot]=null}var et=null,qe=null,pe=!1,gt=null;function kd(t,e){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,et=t,qe=tn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,et=t,qe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=jn!==null?{id:zt,overflow:Lt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,et=t,qe=null,!0):!1;default:return!1}}function Po(t){return(t.mode&1)!==0&&(t.flags&128)===0}function No(t){if(pe){var e=qe;if(e){var n=e;if(!Fu(t,e)){if(Po(t))throw Error(R(418));e=tn(n.nextSibling);var i=et;e&&Fu(t,e)?kd(i,n):(t.flags=t.flags&-4097|2,pe=!1,et=t)}}else{if(Po(t))throw Error(R(418));t.flags=t.flags&-4097|2,pe=!1,et=t}}}function Bu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;et=t}function Fs(t){if(t!==et)return!1;if(!pe)return Bu(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bo(t.type,t.memoizedProps)),e&&(e=qe)){if(Po(t))throw bd(),Error(R(418));for(;e;)kd(t,e),e=tn(e.nextSibling)}if(Bu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qe=tn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qe=null}}else qe=et?tn(t.stateNode.nextSibling):null;return!0}function bd(){for(var t=qe;t;)t=tn(t.nextSibling)}function ui(){qe=et=null,pe=!1}function _a(t){gt===null?gt=[t]:gt.push(t)}var Jm=Dt.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var i=n.stateNode}if(!i)throw Error(R(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(l){var a=s.refs;l===null?delete a[r]:a[r]=l},e._stringRef=r,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function Bs(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Au(t){var e=t._init;return e(t._payload)}function Md(t){function e(m,p){if(t){var y=m.deletions;y===null?(m.deletions=[p],m.flags|=16):y.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function i(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=ln(m,p),m.index=0,m.sibling=null,m}function r(m,p,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<p?(m.flags|=2,p):y):(m.flags|=2,p)):(m.flags|=1048576,p)}function l(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,p,y,j){return p===null||p.tag!==6?(p=zl(y,m.mode,j),p.return=m,p):(p=s(p,y),p.return=m,p)}function u(m,p,y,j){var b=y.type;return b===$n?c(m,p,y.props.children,j,y.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ht&&Au(b)===p.type)?(j=s(p,y.props),j.ref=Mi(m,p,y),j.return=m,j):(j=or(y.type,y.key,y.props,null,m.mode,j),j.ref=Mi(m,p,y),j.return=m,j)}function h(m,p,y,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Ll(y,m.mode,j),p.return=m,p):(p=s(p,y.children||[]),p.return=m,p)}function c(m,p,y,j,b){return p===null||p.tag!==7?(p=wn(y,m.mode,j,b),p.return=m,p):(p=s(p,y),p.return=m,p)}function d(m,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=zl(""+p,m.mode,y),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ms:return y=or(p.type,p.key,p.props,null,m.mode,y),y.ref=Mi(m,null,p),y.return=m,y;case On:return p=Ll(p,m.mode,y),p.return=m,p;case Ht:var j=p._init;return d(m,j(p._payload),y)}if(Ti(p)||_i(p))return p=wn(p,m.mode,y,null),p.return=m,p;Bs(m,p)}return null}function f(m,p,y,j){var b=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:a(m,p,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ms:return y.key===b?u(m,p,y,j):null;case On:return y.key===b?h(m,p,y,j):null;case Ht:return b=y._init,f(m,p,b(y._payload),j)}if(Ti(y)||_i(y))return b!==null?null:c(m,p,y,j,null);Bs(m,y)}return null}function g(m,p,y,j,b){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(y)||null,a(p,m,""+j,b);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ms:return m=m.get(j.key===null?y:j.key)||null,u(p,m,j,b);case On:return m=m.get(j.key===null?y:j.key)||null,h(p,m,j,b);case Ht:var M=j._init;return g(m,p,y,M(j._payload),b)}if(Ti(j)||_i(j))return m=m.get(y)||null,c(p,m,j,b,null);Bs(p,j)}return null}function v(m,p,y,j){for(var b=null,M=null,k=p,_=p=0,C=null;k!==null&&_<y.length;_++){k.index>_?(C=k,k=null):C=k.sibling;var F=f(m,k,y[_],j);if(F===null){k===null&&(k=C);break}t&&k&&F.alternate===null&&e(m,k),p=r(F,p,_),M===null?b=F:M.sibling=F,M=F,k=C}if(_===y.length)return n(m,k),pe&&pn(m,_),b;if(k===null){for(;_<y.length;_++)k=d(m,y[_],j),k!==null&&(p=r(k,p,_),M===null?b=k:M.sibling=k,M=k);return pe&&pn(m,_),b}for(k=i(m,k);_<y.length;_++)C=g(k,m,_,y[_],j),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?_:C.key),p=r(C,p,_),M===null?b=C:M.sibling=C,M=C);return t&&k.forEach(function(A){return e(m,A)}),pe&&pn(m,_),b}function x(m,p,y,j){var b=_i(y);if(typeof b!="function")throw Error(R(150));if(y=b.call(y),y==null)throw Error(R(151));for(var M=b=null,k=p,_=p=0,C=null,F=y.next();k!==null&&!F.done;_++,F=y.next()){k.index>_?(C=k,k=null):C=k.sibling;var A=f(m,k,F.value,j);if(A===null){k===null&&(k=C);break}t&&k&&A.alternate===null&&e(m,k),p=r(A,p,_),M===null?b=A:M.sibling=A,M=A,k=C}if(F.done)return n(m,k),pe&&pn(m,_),b;if(k===null){for(;!F.done;_++,F=y.next())F=d(m,F.value,j),F!==null&&(p=r(F,p,_),M===null?b=F:M.sibling=F,M=F);return pe&&pn(m,_),b}for(k=i(m,k);!F.done;_++,F=y.next())F=g(k,m,_,F.value,j),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?_:F.key),p=r(F,p,_),M===null?b=F:M.sibling=F,M=F);return t&&k.forEach(function(K){return e(m,K)}),pe&&pn(m,_),b}function P(m,p,y,j){if(typeof y=="object"&&y!==null&&y.type===$n&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ms:e:{for(var b=y.key,M=p;M!==null;){if(M.key===b){if(b=y.type,b===$n){if(M.tag===7){n(m,M.sibling),p=s(M,y.props.children),p.return=m,m=p;break e}}else if(M.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ht&&Au(b)===M.type){n(m,M.sibling),p=s(M,y.props),p.ref=Mi(m,M,y),p.return=m,m=p;break e}n(m,M);break}else e(m,M);M=M.sibling}y.type===$n?(p=wn(y.props.children,m.mode,j,y.key),p.return=m,m=p):(j=or(y.type,y.key,y.props,null,m.mode,j),j.ref=Mi(m,p,y),j.return=m,m=j)}return l(m);case On:e:{for(M=y.key;p!==null;){if(p.key===M)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(m,p.sibling),p=s(p,y.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Ll(y,m.mode,j),p.return=m,m=p}return l(m);case Ht:return M=y._init,P(m,p,M(y._payload),j)}if(Ti(y))return v(m,p,y,j);if(_i(y))return x(m,p,y,j);Bs(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,y),p.return=m,m=p):(n(m,p),p=zl(y,m.mode,j),p.return=m,m=p),l(m)):n(m,p)}return P}var hi=Md(!0),Cd=Md(!1),jr=hn(null),kr=null,Jn=null,Sa=null;function ja(){Sa=Jn=kr=null}function ka(t){var e=jr.current;ce(jr),t._currentValue=e}function To(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ii(t,e){kr=t,Sa=Jn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ke=!0),t.firstContext=null)}function ht(t){var e=t._currentValue;if(Sa!==t)if(t={context:t,memoizedValue:e,next:null},Jn===null){if(kr===null)throw Error(R(308));Jn=t,kr.dependencies={lanes:0,firstContext:t}}else Jn=Jn.next=t;return e}var vn=null;function ba(t){vn===null?vn=[t]:vn.push(t)}function Ed(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,ba(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ot(t,i)}function Ot(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kt=!1;function Ma(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ft(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Z&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ot(t,n)}return s=i.interleaved,s===null?(e.next=e,ba(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ot(t,n)}function tr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ca(t,n)}}function Ou(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=l:r=r.next=l,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function br(t,e,n,i){var s=t.updateQueue;Kt=!1;var r=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,h=u.next;u.next=null,l===null?r=h:l.next=h,l=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==l&&(a===null?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=u))}if(r!==null){var d=s.baseState;l=0,c=h=u=null,a=r;do{var f=a.lane,g=a.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(f=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=ve({},d,f);break e;case 2:Kt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(h=c=g,u=d):c=c.next=g,l|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(u=d),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);bn|=l,t.lanes=l,t.memoizedState=d}}function $u(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(R(191,s));s.call(i)}}}var xs={},Et=hn(xs),rs=hn(xs),ls=hn(xs);function yn(t){if(t===xs)throw Error(R(174));return t}function Ca(t,e){switch(ue(ls,e),ue(rs,t),ue(Et,xs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ho(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ho(e,t)}ce(Et),ue(Et,e)}function ci(){ce(Et),ce(rs),ce(ls)}function Nd(t){yn(ls.current);var e=yn(Et.current),n=ho(e,t.type);e!==n&&(ue(rs,t),ue(Et,n))}function Ea(t){rs.current===t&&(ce(Et),ce(rs))}var me=hn(0);function Mr(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ml=[];function Pa(){for(var t=0;t<Ml.length;t++)Ml[t]._workInProgressVersionPrimary=null;Ml.length=0}var nr=Dt.ReactCurrentDispatcher,Cl=Dt.ReactCurrentBatchConfig,kn=0,ge=null,ke=null,Ce=null,Cr=!1,Oi=!1,os=0,Qm=0;function Re(){throw Error(R(321))}function Na(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xt(t[n],e[n]))return!1;return!0}function Ta(t,e,n,i,s,r){if(kn=r,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nr.current=t===null||t.memoizedState===null?qm:eg,t=n(i,s),Oi){r=0;do{if(Oi=!1,os=0,25<=r)throw Error(R(301));r+=1,Ce=ke=null,e.updateQueue=null,nr.current=tg,t=n(i,s)}while(Oi)}if(nr.current=Er,e=ke!==null&&ke.next!==null,kn=0,Ce=ke=ge=null,Cr=!1,e)throw Error(R(300));return t}function za(){var t=os!==0;return os=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?ge.memoizedState=Ce=t:Ce=Ce.next=t,Ce}function ct(){if(ke===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=ke.next;var e=Ce===null?ge.memoizedState:Ce.next;if(e!==null)Ce=e,ke=t;else{if(t===null)throw Error(R(310));ke=t,t={memoizedState:ke.memoizedState,baseState:ke.baseState,baseQueue:ke.baseQueue,queue:ke.queue,next:null},Ce===null?ge.memoizedState=Ce=t:Ce=Ce.next=t}return Ce}function as(t,e){return typeof e=="function"?e(t):e}function El(t){var e=ct(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var i=ke,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var l=s.next;s.next=r.next,r.next=l}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=l=null,u=null,h=r;do{var c=h.lane;if((kn&c)===c)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=d,l=i):u=u.next=d,ge.lanes|=c,bn|=c}h=h.next}while(h!==null&&h!==r);u===null?l=i:u.next=a,xt(i,e.memoizedState)||(Ke=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ge.lanes|=r,bn|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pl(t){var e=ct(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do r=t(r,l.action),l=l.next;while(l!==s);xt(r,e.memoizedState)||(Ke=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function Td(){}function zd(t,e){var n=ge,i=ct(),s=e(),r=!xt(i.memoizedState,s);if(r&&(i.memoizedState=s,Ke=!0),i=i.queue,La(Id.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,us(9,Rd.bind(null,n,i,s,e),void 0,null),Ee===null)throw Error(R(349));kn&30||Ld(n,e,s)}return s}function Ld(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rd(t,e,n,i){e.value=n,e.getSnapshot=i,Fd(e)&&Bd(t)}function Id(t,e,n){return n(function(){Fd(e)&&Bd(t)})}function Fd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xt(t,n)}catch{return!0}}function Bd(t){var e=Ot(t,1);e!==null&&yt(e,t,1,-1)}function Du(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:t},e.queue=t,t=t.dispatch=Zm.bind(null,ge,t),[e.memoizedState,t]}function us(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ge.updateQueue,e===null?(e={lastEffect:null,stores:null},ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ad(){return ct().memoizedState}function ir(t,e,n,i){var s=bt();ge.flags|=t,s.memoizedState=us(1|e,n,void 0,i===void 0?null:i)}function Vr(t,e,n,i){var s=ct();i=i===void 0?null:i;var r=void 0;if(ke!==null){var l=ke.memoizedState;if(r=l.destroy,i!==null&&Na(i,l.deps)){s.memoizedState=us(e,n,r,i);return}}ge.flags|=t,s.memoizedState=us(1|e,n,r,i)}function Wu(t,e){return ir(8390656,8,t,e)}function La(t,e){return Vr(2048,8,t,e)}function Od(t,e){return Vr(4,2,t,e)}function $d(t,e){return Vr(4,4,t,e)}function Dd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wd(t,e,n){return n=n!=null?n.concat([t]):null,Vr(4,4,Dd.bind(null,e,t),n)}function Ra(){}function Ud(t,e){var n=ct();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Na(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Vd(t,e){var n=ct();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Na(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Hd(t,e,n){return kn&21?(xt(n,e)||(n=Gc(),ge.lanes|=n,bn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ke=!0),t.memoizedState=n)}function Gm(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var i=Cl.transition;Cl.transition={};try{t(!1),e()}finally{te=n,Cl.transition=i}}function Kd(){return ct().memoizedState}function Xm(t,e,n){var i=rn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Yd(t))Jd(e,n);else if(n=Ed(t,e,n,i),n!==null){var s=De();yt(n,t,i,s),Qd(n,e,i)}}function Zm(t,e,n){var i=rn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yd(t))Jd(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var l=e.lastRenderedState,a=r(l,n);if(s.hasEagerState=!0,s.eagerState=a,xt(a,l)){var u=e.interleaved;u===null?(s.next=s,ba(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ed(t,e,s,i),n!==null&&(s=De(),yt(n,t,i,s),Qd(n,e,i))}}function Yd(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function Jd(t,e){Oi=Cr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qd(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ca(t,n)}}var Er={readContext:ht,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},qm={readContext:ht,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:ht,useEffect:Wu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ir(4194308,4,Dd.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ir(4194308,4,t,e)},useInsertionEffect:function(t,e){return ir(4,2,t,e)},useMemo:function(t,e){var n=bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=bt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Xm.bind(null,ge,t),[i.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:Du,useDebugValue:Ra,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=Du(!1),e=t[0];return t=Gm.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ge,s=bt();if(pe){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),Ee===null)throw Error(R(349));kn&30||Ld(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Wu(Id.bind(null,i,r,t),[t]),i.flags|=2048,us(9,Rd.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=bt(),e=Ee.identifierPrefix;if(pe){var n=Lt,i=zt;n=(i&~(1<<32-vt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=os++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eg={readContext:ht,useCallback:Ud,useContext:ht,useEffect:La,useImperativeHandle:Wd,useInsertionEffect:Od,useLayoutEffect:$d,useMemo:Vd,useReducer:El,useRef:Ad,useState:function(){return El(as)},useDebugValue:Ra,useDeferredValue:function(t){var e=ct();return Hd(e,ke.memoizedState,t)},useTransition:function(){var t=El(as)[0],e=ct().memoizedState;return[t,e]},useMutableSource:Td,useSyncExternalStore:zd,useId:Kd,unstable_isNewReconciler:!1},tg={readContext:ht,useCallback:Ud,useContext:ht,useEffect:La,useImperativeHandle:Wd,useInsertionEffect:Od,useLayoutEffect:$d,useMemo:Vd,useReducer:Pl,useRef:Ad,useState:function(){return Pl(as)},useDebugValue:Ra,useDeferredValue:function(t){var e=ct();return ke===null?e.memoizedState=t:Hd(e,ke.memoizedState,t)},useTransition:function(){var t=Pl(as)[0],e=ct().memoizedState;return[t,e]},useMutableSource:Td,useSyncExternalStore:zd,useId:Kd,unstable_isNewReconciler:!1};function pt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zo(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hr={isMounted:function(t){return(t=t._reactInternals)?Ln(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=De(),s=rn(t),r=Ft(i,s);r.payload=e,n!=null&&(r.callback=n),e=nn(t,r,s),e!==null&&(yt(e,t,s,i),tr(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=De(),s=rn(t),r=Ft(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=nn(t,r,s),e!==null&&(yt(e,t,s,i),tr(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=De(),i=rn(t),s=Ft(n,i);s.tag=2,e!=null&&(s.callback=e),e=nn(t,s,i),e!==null&&(yt(e,t,i,n),tr(e,t,i))}};function Uu(t,e,n,i,s,r,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,l):e.prototype&&e.prototype.isPureReactComponent?!ts(n,i)||!ts(s,r):!0}function Gd(t,e,n){var i=!1,s=an,r=e.contextType;return typeof r=="object"&&r!==null?r=ht(r):(s=Je(e)?Sn:Be.current,i=e.contextTypes,r=(i=i!=null)?ai(t,s):an),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hr,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function Vu(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Hr.enqueueReplaceState(e,e.state,null)}function Lo(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ma(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=ht(r):(r=Je(e)?Sn:Be.current,s.context=ai(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(zo(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hr.enqueueReplaceState(s,s.state,null),br(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function di(t,e){try{var n="",i=e;do n+=Pp(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Nl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ro(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ng=typeof WeakMap=="function"?WeakMap:Map;function Xd(t,e,n){n=Ft(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Nr||(Nr=!0,Vo=i),Ro(t,e)},n}function Zd(t,e,n){n=Ft(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Ro(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Ro(t,e),typeof i!="function"&&(sn===null?sn=new Set([this]):sn.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Hu(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ng;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=gg.bind(null,t,e,n),e.then(t,t))}function Ku(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yu(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ft(-1,1),e.tag=2,nn(n,e,1))),n.lanes|=1),t)}var ig=Dt.ReactCurrentOwner,Ke=!1;function $e(t,e,n,i){e.child=t===null?Cd(e,null,n,i):hi(e,t.child,n,i)}function Ju(t,e,n,i,s){n=n.render;var r=e.ref;return ii(e,s),i=Ta(t,e,n,i,r,s),n=za(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$t(t,e,s)):(pe&&n&&xa(e),e.flags|=1,$e(t,e,i,s),e.child)}function Qu(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Wa(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,qd(t,e,r,i,s)):(t=or(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var l=r.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(l,i)&&t.ref===e.ref)return $t(t,e,s)}return e.flags|=1,t=ln(r,i),t.ref=e.ref,t.return=e,e.child=t}function qd(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(ts(r,i)&&t.ref===e.ref)if(Ke=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Ke=!0);else return e.lanes=t.lanes,$t(t,e,s)}return Io(t,e,n,i,s)}function ef(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Gn,Ze),Ze|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Gn,Ze),Ze|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ue(Gn,Ze),Ze|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ue(Gn,Ze),Ze|=i;return $e(t,e,s,n),e.child}function tf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Io(t,e,n,i,s){var r=Je(n)?Sn:Be.current;return r=ai(e,r),ii(e,s),n=Ta(t,e,n,i,r,s),i=za(),t!==null&&!Ke?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$t(t,e,s)):(pe&&i&&xa(e),e.flags|=1,$e(t,e,n,s),e.child)}function Gu(t,e,n,i,s){if(Je(n)){var r=!0;wr(e)}else r=!1;if(ii(e,s),e.stateNode===null)sr(t,e),Gd(e,n,i),Lo(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,a=e.memoizedProps;l.props=a;var u=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=ht(h):(h=Je(n)?Sn:Be.current,h=ai(e,h));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==i||u!==h)&&Vu(e,l,i,h),Kt=!1;var f=e.memoizedState;l.state=f,br(e,i,l,s),u=e.memoizedState,a!==i||f!==u||Ye.current||Kt?(typeof c=="function"&&(zo(e,n,c,i),u=e.memoizedState),(a=Kt||Uu(e,n,a,i,f,u,h))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),l.props=i,l.state=u,l.context=h,i=a):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Pd(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:pt(e.type,a),l.props=h,d=e.pendingProps,f=l.context,u=n.contextType,typeof u=="object"&&u!==null?u=ht(u):(u=Je(n)?Sn:Be.current,u=ai(e,u));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||f!==u)&&Vu(e,l,i,u),Kt=!1,f=e.memoizedState,l.state=f,br(e,i,l,s);var v=e.memoizedState;a!==d||f!==v||Ye.current||Kt?(typeof g=="function"&&(zo(e,n,g,i),v=e.memoizedState),(h=Kt||Uu(e,n,h,i,f,v,u)||!1)?(c||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,v,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,v,u)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),l.props=i,l.state=v,l.context=u,i=h):(typeof l.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Fo(t,e,n,i,r,s)}function Fo(t,e,n,i,s,r){tf(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&Iu(e,n,!1),$t(t,e,r);i=e.stateNode,ig.current=e;var a=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=hi(e,t.child,null,r),e.child=hi(e,null,a,r)):$e(t,e,a,r),e.memoizedState=i.state,s&&Iu(e,n,!0),e.child}function nf(t){var e=t.stateNode;e.pendingContext?Ru(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ru(t,e.context,!1),Ca(t,e.containerInfo)}function Xu(t,e,n,i,s){return ui(),_a(s),e.flags|=256,$e(t,e,n,i),e.child}var Bo={dehydrated:null,treeContext:null,retryLane:0};function Ao(t){return{baseLanes:t,cachePool:null,transitions:null}}function sf(t,e,n){var i=e.pendingProps,s=me.current,r=!1,l=(e.flags&128)!==0,a;if((a=l)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ue(me,s&1),t===null)return No(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,r?(i=e.mode,r=e.child,l={mode:"hidden",children:l},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=l):r=Jr(l,i,0,null),t=wn(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Ao(n),e.memoizedState=Bo,t):Ia(e,l));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return sg(t,e,l,i,a,s,n);if(r){r=i.fallback,l=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=ln(s,u),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ln(a,r):(r=wn(r,l,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,l=t.child.memoizedState,l=l===null?Ao(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},r.memoizedState=l,r.childLanes=t.childLanes&~n,e.memoizedState=Bo,i}return r=t.child,t=r.sibling,i=ln(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ia(t,e){return e=Jr({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function As(t,e,n,i){return i!==null&&_a(i),hi(e,t.child,null,n),t=Ia(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sg(t,e,n,i,s,r,l){if(n)return e.flags&256?(e.flags&=-257,i=Nl(Error(R(422))),As(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Jr({mode:"visible",children:i.children},s,0,null),r=wn(r,s,l,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&hi(e,t.child,null,l),e.child.memoizedState=Ao(l),e.memoizedState=Bo,r);if(!(e.mode&1))return As(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(R(419)),i=Nl(r,i,void 0),As(t,e,l,i)}if(a=(l&t.childLanes)!==0,Ke||a){if(i=Ee,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Ot(t,s),yt(i,t,s,-1))}return Da(),i=Nl(Error(R(421))),As(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=vg.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,qe=tn(s.nextSibling),et=e,pe=!0,gt=null,t!==null&&(lt[ot++]=zt,lt[ot++]=Lt,lt[ot++]=jn,zt=t.id,Lt=t.overflow,jn=e),e=Ia(e,i.children),e.flags|=4096,e)}function Zu(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),To(t.return,e,n)}function Tl(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function rf(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if($e(t,e,i.children,n),i=me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zu(t,n,e);else if(t.tag===19)Zu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ue(me,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mr(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Tl(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mr(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Tl(e,!0,n,null,r);break;case"together":Tl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $t(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=ln(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ln(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rg(t,e,n){switch(e.tag){case 3:nf(e),ui();break;case 5:Nd(e);break;case 1:Je(e.type)&&wr(e);break;case 4:Ca(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ue(jr,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ue(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?sf(t,e,n):(ue(me,me.current&1),t=$t(t,e,n),t!==null?t.sibling:null);ue(me,me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return rf(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(me,me.current),i)break;return null;case 22:case 23:return e.lanes=0,ef(t,e,n)}return $t(t,e,n)}var lf,Oo,of,af;lf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oo=function(){};of=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,yn(Et.current);var r=null;switch(n){case"input":s=lo(t,s),i=lo(t,i),r=[];break;case"select":s=ve({},s,{value:void 0}),i=ve({},i,{value:void 0}),r=[];break;case"textarea":s=uo(t,s),i=uo(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=yr)}co(n,i);var l;n=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ji.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var u=i[h];if(a=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(l in a)!a.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in u)u.hasOwnProperty(l)&&a[l]!==u[l]&&(n||(n={}),n[l]=u[l])}else n||(r||(r=[]),r.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(r=r||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ji.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&he("scroll",t),r||a===u||(r=[])):(r=r||[]).push(h,u))}n&&(r=r||[]).push("style",n);var h=r;(e.updateQueue=h)&&(e.flags|=4)}};af=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ci(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function lg(t,e,n){var i=e.pendingProps;switch(wa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return Je(e.type)&&xr(),Ie(e),null;case 3:return i=e.stateNode,ci(),ce(Ye),ce(Be),Pa(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Fs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gt!==null&&(Yo(gt),gt=null))),Oo(t,e),Ie(e),null;case 5:Ea(e);var s=yn(ls.current);if(n=e.type,t!==null&&e.stateNode!=null)of(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(R(166));return Ie(e),null}if(t=yn(Et.current),Fs(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[Mt]=e,i[ss]=r,t=(e.mode&1)!==0,n){case"dialog":he("cancel",i),he("close",i);break;case"iframe":case"object":case"embed":he("load",i);break;case"video":case"audio":for(s=0;s<Li.length;s++)he(Li[s],i);break;case"source":he("error",i);break;case"img":case"image":case"link":he("error",i),he("load",i);break;case"details":he("toggle",i);break;case"input":ou(i,r),he("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},he("invalid",i);break;case"textarea":uu(i,r),he("invalid",i)}co(n,r),s=null;for(var l in r)if(r.hasOwnProperty(l)){var a=r[l];l==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Is(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Is(i.textContent,a,t),s=["children",""+a]):Ji.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&he("scroll",i)}switch(n){case"input":Cs(i),au(i,r,!0);break;case"textarea":Cs(i),hu(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=yr)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ic(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Mt]=e,t[ss]=i,lf(t,e,!1,!1),e.stateNode=t;e:{switch(l=fo(n,i),n){case"dialog":he("cancel",t),he("close",t),s=i;break;case"iframe":case"object":case"embed":he("load",t),s=i;break;case"video":case"audio":for(s=0;s<Li.length;s++)he(Li[s],t);s=i;break;case"source":he("error",t),s=i;break;case"img":case"image":case"link":he("error",t),he("load",t),s=i;break;case"details":he("toggle",t),s=i;break;case"input":ou(t,i),s=lo(t,i),he("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=ve({},i,{value:void 0}),he("invalid",t);break;case"textarea":uu(t,i),s=uo(t,i),he("invalid",t);break;default:s=i}co(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];r==="style"?Ac(t,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fc(t,u)):r==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Qi(t,u):typeof u=="number"&&Qi(t,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ji.hasOwnProperty(r)?u!=null&&r==="onScroll"&&he("scroll",t):u!=null&&ra(t,r,u,l))}switch(n){case"input":Cs(t),au(t,i,!1);break;case"textarea":Cs(t),hu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+on(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?qn(t,!!i.multiple,r,!1):i.defaultValue!=null&&qn(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)af(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(R(166));if(n=yn(ls.current),yn(Et.current),Fs(e)){if(i=e.stateNode,n=e.memoizedProps,i[Mt]=e,(r=i.nodeValue!==n)&&(t=et,t!==null))switch(t.tag){case 3:Is(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Is(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Mt]=e,e.stateNode=i}return Ie(e),null;case 13:if(ce(me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&qe!==null&&e.mode&1&&!(e.flags&128))bd(),ui(),e.flags|=98560,r=!1;else if(r=Fs(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(R(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(R(317));r[Mt]=e}else ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),r=!1}else gt!==null&&(Yo(gt),gt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?be===0&&(be=3):Da())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return ci(),Oo(t,e),t===null&&ns(e.stateNode.containerInfo),Ie(e),null;case 10:return ka(e.type._context),Ie(e),null;case 17:return Je(e.type)&&xr(),Ie(e),null;case 19:if(ce(me),r=e.memoizedState,r===null)return Ie(e),null;if(i=(e.flags&128)!==0,l=r.rendering,l===null)if(i)Ci(r,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=Mr(t),l!==null){for(e.flags|=128,Ci(r,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,l=r.alternate,l===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,t=l.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(me,me.current&1|2),e.child}t=t.sibling}r.tail!==null&&we()>fi&&(e.flags|=128,i=!0,Ci(r,!1),e.lanes=4194304)}else{if(!i)if(t=Mr(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ci(r,!0),r.tail===null&&r.tailMode==="hidden"&&!l.alternate&&!pe)return Ie(e),null}else 2*we()-r.renderingStartTime>fi&&n!==1073741824&&(e.flags|=128,i=!0,Ci(r,!1),e.lanes=4194304);r.isBackwards?(l.sibling=e.child,e.child=l):(n=r.last,n!==null?n.sibling=l:e.child=l,r.last=l)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=we(),e.sibling=null,n=me.current,ue(me,i?n&1|2:n&1),e):(Ie(e),null);case 22:case 23:return $a(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ze&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function og(t,e){switch(wa(e),e.tag){case 1:return Je(e.type)&&xr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ci(),ce(Ye),ce(Be),Pa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ea(e),null;case 13:if(ce(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(me),null;case 4:return ci(),null;case 10:return ka(e.type._context),null;case 22:case 23:return $a(),null;case 24:return null;default:return null}}var Os=!1,Fe=!1,ag=typeof WeakSet=="function"?WeakSet:Set,D=null;function Qn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ye(t,e,i)}else n.current=null}function $o(t,e,n){try{n()}catch(i){ye(t,e,i)}}var qu=!1;function ug(t,e){if(jo=mr,t=dd(),ya(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var l=0,a=-1,u=-1,h=0,c=0,d=t,f=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=l+s),d!==r||i!==0&&d.nodeType!==3||(u=l+i),d.nodeType===3&&(l+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++h===s&&(a=l),f===r&&++c===i&&(u=l),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ko={focusedElem:t,selectionRange:n},mr=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,P=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:pt(e.type,x),P);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(j){ye(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=qu,qu=!1,v}function $i(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&$o(e,n,r)}s=s.next}while(s!==i)}}function Kr(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Do(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uf(t){var e=t.alternate;e!==null&&(t.alternate=null,uf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mt],delete e[ss],delete e[Co],delete e[Hm],delete e[Km])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hf(t){return t.tag===5||t.tag===3||t.tag===4}function eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wo(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yr));else if(i!==4&&(t=t.child,t!==null))for(Wo(t,e,n),t=t.sibling;t!==null;)Wo(t,e,n),t=t.sibling}function Uo(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Uo(t,e,n),t=t.sibling;t!==null;)Uo(t,e,n),t=t.sibling}var Pe=null,mt=!1;function Ut(t,e,n){for(n=n.child;n!==null;)cf(t,e,n),n=n.sibling}function cf(t,e,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Ar,n)}catch{}switch(n.tag){case 5:Fe||Qn(n,e);case 6:var i=Pe,s=mt;Pe=null,Ut(t,e,n),Pe=i,mt=s,Pe!==null&&(mt?(t=Pe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pe.removeChild(n.stateNode));break;case 18:Pe!==null&&(mt?(t=Pe,n=n.stateNode,t.nodeType===8?kl(t.parentNode,n):t.nodeType===1&&kl(t,n),qi(t)):kl(Pe,n.stateNode));break;case 4:i=Pe,s=mt,Pe=n.stateNode.containerInfo,mt=!0,Ut(t,e,n),Pe=i,mt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,l=r.destroy;r=r.tag,l!==void 0&&(r&2||r&4)&&$o(n,e,l),s=s.next}while(s!==i)}Ut(t,e,n);break;case 1:if(!Fe&&(Qn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ye(n,e,a)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(Fe=(i=Fe)||n.memoizedState!==null,Ut(t,e,n),Fe=i):Ut(t,e,n);break;default:Ut(t,e,n)}}function th(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ag),e.forEach(function(i){var s=yg.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function ft(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,l=e,a=l;e:for(;a!==null;){switch(a.tag){case 5:Pe=a.stateNode,mt=!1;break e;case 3:Pe=a.stateNode.containerInfo,mt=!0;break e;case 4:Pe=a.stateNode.containerInfo,mt=!0;break e}a=a.return}if(Pe===null)throw Error(R(160));cf(r,l,s),Pe=null,mt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ye(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)df(e,t),e=e.sibling}function df(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ft(e,t),jt(t),i&4){try{$i(3,t,t.return),Kr(3,t)}catch(x){ye(t,t.return,x)}try{$i(5,t,t.return)}catch(x){ye(t,t.return,x)}}break;case 1:ft(e,t),jt(t),i&512&&n!==null&&Qn(n,n.return);break;case 5:if(ft(e,t),jt(t),i&512&&n!==null&&Qn(n,n.return),t.flags&32){var s=t.stateNode;try{Qi(s,"")}catch(x){ye(t,t.return,x)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,l=n!==null?n.memoizedProps:r,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Lc(s,r),fo(a,l);var h=fo(a,r);for(l=0;l<u.length;l+=2){var c=u[l],d=u[l+1];c==="style"?Ac(s,d):c==="dangerouslySetInnerHTML"?Fc(s,d):c==="children"?Qi(s,d):ra(s,c,d,h)}switch(a){case"input":oo(s,r);break;case"textarea":Rc(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?qn(s,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?qn(s,!!r.multiple,r.defaultValue,!0):qn(s,!!r.multiple,r.multiple?[]:"",!1))}s[ss]=r}catch(x){ye(t,t.return,x)}}break;case 6:if(ft(e,t),jt(t),i&4){if(t.stateNode===null)throw Error(R(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(x){ye(t,t.return,x)}}break;case 3:if(ft(e,t),jt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{qi(e.containerInfo)}catch(x){ye(t,t.return,x)}break;case 4:ft(e,t),jt(t);break;case 13:ft(e,t),jt(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Aa=we())),i&4&&th(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Fe=(h=Fe)||c,ft(e,t),Fe=h):ft(e,t),jt(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!c&&t.mode&1)for(D=t,c=t.child;c!==null;){for(d=D=c;D!==null;){switch(f=D,g=f.child,f.tag){case 0:case 11:case 14:case 15:$i(4,f,f.return);break;case 1:Qn(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){ye(i,n,x)}}break;case 5:Qn(f,f.return);break;case 22:if(f.memoizedState!==null){ih(d);continue}}g!==null?(g.return=f,D=g):ih(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,u=d.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Bc("display",l))}catch(x){ye(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(x){ye(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ft(e,t),jt(t),i&4&&th(t);break;case 21:break;default:ft(e,t),jt(t)}}function jt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hf(n)){var i=n;break e}n=n.return}throw Error(R(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Qi(s,""),i.flags&=-33);var r=eh(t);Uo(t,r,s);break;case 3:case 4:var l=i.stateNode.containerInfo,a=eh(t);Wo(t,a,l);break;default:throw Error(R(161))}}catch(u){ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hg(t,e,n){D=t,ff(t)}function ff(t,e,n){for(var i=(t.mode&1)!==0;D!==null;){var s=D,r=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Os;if(!l){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Fe;a=Os;var h=Fe;if(Os=l,(Fe=u)&&!h)for(D=s;D!==null;)l=D,u=l.child,l.tag===22&&l.memoizedState!==null?sh(s):u!==null?(u.return=l,D=u):sh(s);for(;r!==null;)D=r,ff(r),r=r.sibling;D=s,Os=a,Fe=h}nh(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,D=r):nh(t)}}function nh(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fe||Kr(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Fe)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pt(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&$u(e,r,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$u(e,l,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var c=h.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&qi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Fe||e.flags&512&&Do(e)}catch(f){ye(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function ih(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function sh(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kr(4,e)}catch(u){ye(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){ye(e,s,u)}}var r=e.return;try{Do(e)}catch(u){ye(e,r,u)}break;case 5:var l=e.return;try{Do(e)}catch(u){ye(e,l,u)}}}catch(u){ye(e,e.return,u)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var cg=Math.ceil,Pr=Dt.ReactCurrentDispatcher,Fa=Dt.ReactCurrentOwner,ut=Dt.ReactCurrentBatchConfig,Z=0,Ee=null,Se=null,ze=0,Ze=0,Gn=hn(0),be=0,hs=null,bn=0,Yr=0,Ba=0,Di=null,He=null,Aa=0,fi=1/0,Nt=null,Nr=!1,Vo=null,sn=null,$s=!1,Gt=null,Tr=0,Wi=0,Ho=null,rr=-1,lr=0;function De(){return Z&6?we():rr!==-1?rr:rr=we()}function rn(t){return t.mode&1?Z&2&&ze!==0?ze&-ze:Jm.transition!==null?(lr===0&&(lr=Gc()),lr):(t=te,t!==0||(t=window.event,t=t===void 0?16:id(t.type)),t):1}function yt(t,e,n,i){if(50<Wi)throw Wi=0,Ho=null,Error(R(185));gs(t,n,i),(!(Z&2)||t!==Ee)&&(t===Ee&&(!(Z&2)&&(Yr|=n),be===4&&Jt(t,ze)),Qe(t,i),n===1&&Z===0&&!(e.mode&1)&&(fi=we()+500,Ur&&cn()))}function Qe(t,e){var n=t.callbackNode;Jp(t,e);var i=pr(t,t===Ee?ze:0);if(i===0)n!==null&&fu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&fu(n),e===1)t.tag===0?Ym(rh.bind(null,t)):Sd(rh.bind(null,t)),Um(function(){!(Z&6)&&cn()}),n=null;else{switch(Xc(i)){case 1:n=ha;break;case 4:n=Jc;break;case 16:n=fr;break;case 536870912:n=Qc;break;default:n=fr}n=_f(n,pf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pf(t,e){if(rr=-1,lr=0,Z&6)throw Error(R(327));var n=t.callbackNode;if(si()&&t.callbackNode!==n)return null;var i=pr(t,t===Ee?ze:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zr(t,i);else{e=i;var s=Z;Z|=2;var r=gf();(Ee!==t||ze!==e)&&(Nt=null,fi=we()+500,xn(t,e));do try{pg();break}catch(a){mf(t,a)}while(!0);ja(),Pr.current=r,Z=s,Se!==null?e=0:(Ee=null,ze=0,e=be)}if(e!==0){if(e===2&&(s=yo(t),s!==0&&(i=s,e=Ko(t,s))),e===1)throw n=hs,xn(t,0),Jt(t,i),Qe(t,we()),n;if(e===6)Jt(t,i);else{if(s=t.current.alternate,!(i&30)&&!dg(s)&&(e=zr(t,i),e===2&&(r=yo(t),r!==0&&(i=r,e=Ko(t,r))),e===1))throw n=hs,xn(t,0),Jt(t,i),Qe(t,we()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(R(345));case 2:mn(t,He,Nt);break;case 3:if(Jt(t,i),(i&130023424)===i&&(e=Aa+500-we(),10<e)){if(pr(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){De(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mo(mn.bind(null,t,He,Nt),e);break}mn(t,He,Nt);break;case 4:if(Jt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-vt(i);r=1<<l,l=e[l],l>s&&(s=l),i&=~r}if(i=s,i=we()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*cg(i/1960))-i,10<i){t.timeoutHandle=Mo(mn.bind(null,t,He,Nt),i);break}mn(t,He,Nt);break;case 5:mn(t,He,Nt);break;default:throw Error(R(329))}}}return Qe(t,we()),t.callbackNode===n?pf.bind(null,t):null}function Ko(t,e){var n=Di;return t.current.memoizedState.isDehydrated&&(xn(t,e).flags|=256),t=zr(t,e),t!==2&&(e=He,He=n,e!==null&&Yo(e)),t}function Yo(t){He===null?He=t:He.push.apply(He,t)}function dg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!xt(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~Ba,e&=~Yr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vt(e),i=1<<n;t[n]=-1,e&=~i}}function rh(t){if(Z&6)throw Error(R(327));si();var e=pr(t,0);if(!(e&1))return Qe(t,we()),null;var n=zr(t,e);if(t.tag!==0&&n===2){var i=yo(t);i!==0&&(e=i,n=Ko(t,i))}if(n===1)throw n=hs,xn(t,0),Jt(t,e),Qe(t,we()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mn(t,He,Nt),Qe(t,we()),null}function Oa(t,e){var n=Z;Z|=1;try{return t(e)}finally{Z=n,Z===0&&(fi=we()+500,Ur&&cn())}}function Mn(t){Gt!==null&&Gt.tag===0&&!(Z&6)&&si();var e=Z;Z|=1;var n=ut.transition,i=te;try{if(ut.transition=null,te=1,t)return t()}finally{te=i,ut.transition=n,Z=e,!(Z&6)&&cn()}}function $a(){Ze=Gn.current,ce(Gn)}function xn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Wm(n)),Se!==null)for(n=Se.return;n!==null;){var i=n;switch(wa(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&xr();break;case 3:ci(),ce(Ye),ce(Be),Pa();break;case 5:Ea(i);break;case 4:ci();break;case 13:ce(me);break;case 19:ce(me);break;case 10:ka(i.type._context);break;case 22:case 23:$a()}n=n.return}if(Ee=t,Se=t=ln(t.current,null),ze=Ze=e,be=0,hs=null,Ba=Yr=bn=0,He=Di=null,vn!==null){for(e=0;e<vn.length;e++)if(n=vn[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var l=r.next;r.next=s,i.next=l}n.pending=i}vn=null}return t}function mf(t,e){do{var n=Se;try{if(ja(),nr.current=Er,Cr){for(var i=ge.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Cr=!1}if(kn=0,Ce=ke=ge=null,Oi=!1,os=0,Fa.current=null,n===null||n.return===null){be=1,hs=e,Se=null;break}e:{var r=t,l=n.return,a=n,u=e;if(e=ze,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Ku(l);if(g!==null){g.flags&=-257,Yu(g,l,a,r,e),g.mode&1&&Hu(r,h,e),e=g,u=h;var v=e.updateQueue;if(v===null){var x=new Set;x.add(u),e.updateQueue=x}else v.add(u);break e}else{if(!(e&1)){Hu(r,h,e),Da();break e}u=Error(R(426))}}else if(pe&&a.mode&1){var P=Ku(l);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Yu(P,l,a,r,e),_a(di(u,a));break e}}r=u=di(u,a),be!==4&&(be=2),Di===null?Di=[r]:Di.push(r),r=l;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var m=Xd(r,u,e);Ou(r,m);break e;case 1:a=u;var p=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(sn===null||!sn.has(y)))){r.flags|=65536,e&=-e,r.lanes|=e;var j=Zd(r,a,e);Ou(r,j);break e}}r=r.return}while(r!==null)}yf(n)}catch(b){e=b,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function gf(){var t=Pr.current;return Pr.current=Er,t===null?Er:t}function Da(){(be===0||be===3||be===2)&&(be=4),Ee===null||!(bn&268435455)&&!(Yr&268435455)||Jt(Ee,ze)}function zr(t,e){var n=Z;Z|=2;var i=gf();(Ee!==t||ze!==e)&&(Nt=null,xn(t,e));do try{fg();break}catch(s){mf(t,s)}while(!0);if(ja(),Z=n,Pr.current=i,Se!==null)throw Error(R(261));return Ee=null,ze=0,be}function fg(){for(;Se!==null;)vf(Se)}function pg(){for(;Se!==null&&!Op();)vf(Se)}function vf(t){var e=wf(t.alternate,t,Ze);t.memoizedProps=t.pendingProps,e===null?yf(t):Se=e,Fa.current=null}function yf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=og(n,e),n!==null){n.flags&=32767,Se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,Se=null;return}}else if(n=lg(n,e,Ze),n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);be===0&&(be=5)}function mn(t,e,n){var i=te,s=ut.transition;try{ut.transition=null,te=1,mg(t,e,n,i)}finally{ut.transition=s,te=i}return null}function mg(t,e,n,i){do si();while(Gt!==null);if(Z&6)throw Error(R(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(Qp(t,r),t===Ee&&(Se=Ee=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$s||($s=!0,_f(fr,function(){return si(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=ut.transition,ut.transition=null;var l=te;te=1;var a=Z;Z|=4,Fa.current=null,ug(t,n),df(n,t),Im(ko),mr=!!jo,ko=jo=null,t.current=n,hg(n),$p(),Z=a,te=l,ut.transition=r}else t.current=n;if($s&&($s=!1,Gt=t,Tr=s),r=t.pendingLanes,r===0&&(sn=null),Up(n.stateNode),Qe(t,we()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Nr)throw Nr=!1,t=Vo,Vo=null,t;return Tr&1&&t.tag!==0&&si(),r=t.pendingLanes,r&1?t===Ho?Wi++:(Wi=0,Ho=t):Wi=0,cn(),null}function si(){if(Gt!==null){var t=Xc(Tr),e=ut.transition,n=te;try{if(ut.transition=null,te=16>t?16:t,Gt===null)var i=!1;else{if(t=Gt,Gt=null,Tr=0,Z&6)throw Error(R(331));var s=Z;for(Z|=4,D=t.current;D!==null;){var r=D,l=r.child;if(D.flags&16){var a=r.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(D=h;D!==null;){var c=D;switch(c.tag){case 0:case 11:case 15:$i(8,c,r)}var d=c.child;if(d!==null)d.return=c,D=d;else for(;D!==null;){c=D;var f=c.sibling,g=c.return;if(uf(c),c===h){D=null;break}if(f!==null){f.return=g,D=f;break}D=g}}}var v=r.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var P=x.sibling;x.sibling=null,x=P}while(x!==null)}}D=r}}if(r.subtreeFlags&2064&&l!==null)l.return=r,D=l;else e:for(;D!==null;){if(r=D,r.flags&2048)switch(r.tag){case 0:case 11:case 15:$i(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,D=m;break e}D=r.return}}var p=t.current;for(D=p;D!==null;){l=D;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,D=y;else e:for(l=p;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kr(9,a)}}catch(b){ye(a,a.return,b)}if(a===l){D=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,D=j;break e}D=a.return}}if(Z=s,cn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Ar,t)}catch{}i=!0}return i}finally{te=n,ut.transition=e}}return!1}function lh(t,e,n){e=di(n,e),e=Xd(t,e,1),t=nn(t,e,1),e=De(),t!==null&&(gs(t,1,e),Qe(t,e))}function ye(t,e,n){if(t.tag===3)lh(t,t,n);else for(;e!==null;){if(e.tag===3){lh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(sn===null||!sn.has(i))){t=di(n,t),t=Zd(e,t,1),e=nn(e,t,1),t=De(),e!==null&&(gs(e,1,t),Qe(e,t));break}}e=e.return}}function gg(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=De(),t.pingedLanes|=t.suspendedLanes&n,Ee===t&&(ze&n)===n&&(be===4||be===3&&(ze&130023424)===ze&&500>we()-Aa?xn(t,0):Ba|=n),Qe(t,e)}function xf(t,e){e===0&&(t.mode&1?(e=Ns,Ns<<=1,!(Ns&130023424)&&(Ns=4194304)):e=1);var n=De();t=Ot(t,e),t!==null&&(gs(t,e,n),Qe(t,n))}function vg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xf(t,n)}function yg(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(R(314))}i!==null&&i.delete(e),xf(t,n)}var wf;wf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ye.current)Ke=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ke=!1,rg(t,e,n);Ke=!!(t.flags&131072)}else Ke=!1,pe&&e.flags&1048576&&jd(e,Sr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;sr(t,e),t=e.pendingProps;var s=ai(e,Be.current);ii(e,n),s=Ta(null,e,i,t,s,n);var r=za();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(i)?(r=!0,wr(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ma(e),s.updater=Hr,e.stateNode=s,s._reactInternals=e,Lo(e,i,t,n),e=Fo(null,e,i,!0,r,n)):(e.tag=0,pe&&r&&xa(e),$e(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(sr(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wg(i),t=pt(i,t),s){case 0:e=Io(null,e,i,t,n);break e;case 1:e=Gu(null,e,i,t,n);break e;case 11:e=Ju(null,e,i,t,n);break e;case 14:e=Qu(null,e,i,pt(i.type,t),n);break e}throw Error(R(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pt(i,s),Io(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pt(i,s),Gu(t,e,i,s,n);case 3:e:{if(nf(e),t===null)throw Error(R(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Pd(t,e),br(e,i,null,n);var l=e.memoizedState;if(i=l.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=di(Error(R(423)),e),e=Xu(t,e,i,n,s);break e}else if(i!==s){s=di(Error(R(424)),e),e=Xu(t,e,i,n,s);break e}else for(qe=tn(e.stateNode.containerInfo.firstChild),et=e,pe=!0,gt=null,n=Cd(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ui(),i===s){e=$t(t,e,n);break e}$e(t,e,i,n)}e=e.child}return e;case 5:return Nd(e),t===null&&No(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,l=s.children,bo(i,s)?l=null:r!==null&&bo(i,r)&&(e.flags|=32),tf(t,e),$e(t,e,l,n),e.child;case 6:return t===null&&No(e),null;case 13:return sf(t,e,n);case 4:return Ca(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=hi(e,null,i,n):$e(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pt(i,s),Ju(t,e,i,s,n);case 7:return $e(t,e,e.pendingProps,n),e.child;case 8:return $e(t,e,e.pendingProps.children,n),e.child;case 12:return $e(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,l=s.value,ue(jr,i._currentValue),i._currentValue=l,r!==null)if(xt(r.value,l)){if(r.children===s.children&&!Ye.current){e=$t(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){l=r.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(r.tag===1){u=Ft(-1,n&-n),u.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var c=h.pending;c===null?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),To(r.return,n,e),a.lanes|=n;break}u=u.next}}else if(r.tag===10)l=r.type===e.type?null:r.child;else if(r.tag===18){if(l=r.return,l===null)throw Error(R(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),To(l,n,e),l=r.sibling}else l=r.child;if(l!==null)l.return=r;else for(l=r;l!==null;){if(l===e){l=null;break}if(r=l.sibling,r!==null){r.return=l.return,l=r;break}l=l.return}r=l}$e(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ii(e,n),s=ht(s),i=i(s),e.flags|=1,$e(t,e,i,n),e.child;case 14:return i=e.type,s=pt(i,e.pendingProps),s=pt(i.type,s),Qu(t,e,i,s,n);case 15:return qd(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pt(i,s),sr(t,e),e.tag=1,Je(i)?(t=!0,wr(e)):t=!1,ii(e,n),Gd(e,i,s),Lo(e,i,s,n),Fo(null,e,i,!0,t,n);case 19:return rf(t,e,n);case 22:return ef(t,e,n)}throw Error(R(156,e.tag))};function _f(t,e){return Yc(t,e)}function xg(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,n,i){return new xg(t,e,n,i)}function Wa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wg(t){if(typeof t=="function")return Wa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===oa)return 11;if(t===aa)return 14}return 2}function ln(t,e){var n=t.alternate;return n===null?(n=at(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function or(t,e,n,i,s,r){var l=2;if(i=t,typeof t=="function")Wa(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case $n:return wn(n.children,s,r,e);case la:l=8,s|=8;break;case no:return t=at(12,n,e,s|2),t.elementType=no,t.lanes=r,t;case io:return t=at(13,n,e,s),t.elementType=io,t.lanes=r,t;case so:return t=at(19,n,e,s),t.elementType=so,t.lanes=r,t;case Nc:return Jr(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ec:l=10;break e;case Pc:l=9;break e;case oa:l=11;break e;case aa:l=14;break e;case Ht:l=16,i=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=at(l,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function wn(t,e,n,i){return t=at(7,t,i,e),t.lanes=n,t}function Jr(t,e,n,i){return t=at(22,t,i,e),t.elementType=Nc,t.lanes=n,t.stateNode={isHidden:!1},t}function zl(t,e,n){return t=at(6,t,null,e),t.lanes=n,t}function Ll(t,e,n){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function _g(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ua(t,e,n,i,s,r,l,a,u){return t=new _g(t,e,n,a,u),e===1?(e=1,r===!0&&(e|=8)):e=0,r=at(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ma(r),t}function Sg(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Sf(t){if(!t)return an;t=t._reactInternals;e:{if(Ln(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Je(n))return _d(t,n,e)}return e}function jf(t,e,n,i,s,r,l,a,u){return t=Ua(n,i,!0,t,s,r,l,a,u),t.context=Sf(null),n=t.current,i=De(),s=rn(n),r=Ft(i,s),r.callback=e??null,nn(n,r,s),t.current.lanes=s,gs(t,s,i),Qe(t,i),t}function Qr(t,e,n,i){var s=e.current,r=De(),l=rn(s);return n=Sf(n),e.context===null?e.context=n:e.pendingContext=n,e=Ft(r,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=nn(s,e,l),t!==null&&(yt(t,s,l,r),tr(t,s,l)),l}function Lr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Va(t,e){oh(t,e),(t=t.alternate)&&oh(t,e)}function jg(){return null}var kf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ha(t){this._internalRoot=t}Gr.prototype.render=Ha.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Qr(t,e,null,null)};Gr.prototype.unmount=Ha.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mn(function(){Qr(null,t,null,null)}),e[At]=null}};function Gr(t){this._internalRoot=t}Gr.prototype.unstable_scheduleHydration=function(t){if(t){var e=ed();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yt.length&&e!==0&&e<Yt[n].priority;n++);Yt.splice(n,0,t),n===0&&nd(t)}};function Ka(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xr(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ah(){}function kg(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var h=Lr(l);r.call(h)}}var l=jf(e,i,t,0,null,!1,!1,"",ah);return t._reactRootContainer=l,t[At]=l.current,ns(t.nodeType===8?t.parentNode:t),Mn(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var h=Lr(u);a.call(h)}}var u=Ua(t,0,!1,null,null,!1,!1,"",ah);return t._reactRootContainer=u,t[At]=u.current,ns(t.nodeType===8?t.parentNode:t),Mn(function(){Qr(e,u,n,i)}),u}function Zr(t,e,n,i,s){var r=n._reactRootContainer;if(r){var l=r;if(typeof s=="function"){var a=s;s=function(){var u=Lr(l);a.call(u)}}Qr(e,l,t,s)}else l=kg(n,e,t,s,i);return Lr(l)}Zc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zi(e.pendingLanes);n!==0&&(ca(e,n|1),Qe(e,we()),!(Z&6)&&(fi=we()+500,cn()))}break;case 13:Mn(function(){var i=Ot(t,1);if(i!==null){var s=De();yt(i,t,1,s)}}),Va(t,1)}};da=function(t){if(t.tag===13){var e=Ot(t,134217728);if(e!==null){var n=De();yt(e,t,134217728,n)}Va(t,134217728)}};qc=function(t){if(t.tag===13){var e=rn(t),n=Ot(t,e);if(n!==null){var i=De();yt(n,t,e,i)}Va(t,e)}};ed=function(){return te};td=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};mo=function(t,e,n){switch(e){case"input":if(oo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Wr(i);if(!s)throw Error(R(90));zc(i),oo(i,s)}}}break;case"textarea":Rc(t,n);break;case"select":e=n.value,e!=null&&qn(t,!!n.multiple,e,!1)}};Dc=Oa;Wc=Mn;var bg={usingClientEntryPoint:!1,Events:[ys,Vn,Wr,Oc,$c,Oa]},Ei={findFiberByHostInstance:gn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mg={bundleType:Ei.bundleType,version:Ei.version,rendererPackageName:Ei.rendererPackageName,rendererConfig:Ei.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hc(t),t===null?null:t.stateNode},findFiberByHostInstance:Ei.findFiberByHostInstance||jg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ds=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ds.isDisabled&&Ds.supportsFiber)try{Ar=Ds.inject(Mg),Ct=Ds}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bg;it.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ka(e))throw Error(R(200));return Sg(t,e,null,n)};it.createRoot=function(t,e){if(!Ka(t))throw Error(R(299));var n=!1,i="",s=kf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ua(t,1,!1,null,null,n,!1,i,s),t[At]=e.current,ns(t.nodeType===8?t.parentNode:t),new Ha(e)};it.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Hc(e),t=t===null?null:t.stateNode,t};it.flushSync=function(t){return Mn(t)};it.hydrate=function(t,e,n){if(!Xr(e))throw Error(R(200));return Zr(null,t,e,!0,n)};it.hydrateRoot=function(t,e,n){if(!Ka(t))throw Error(R(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",l=kf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=jf(e,null,t,1,n??null,s,!1,r,l),t[At]=e.current,ns(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gr(e)};it.render=function(t,e,n){if(!Xr(e))throw Error(R(200));return Zr(null,t,e,!1,n)};it.unmountComponentAtNode=function(t){if(!Xr(t))throw Error(R(40));return t._reactRootContainer?(Mn(function(){Zr(null,null,t,!1,function(){t._reactRootContainer=null,t[At]=null})}),!0):!1};it.unstable_batchedUpdates=Oa;it.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Xr(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return Zr(t,e,n,!1,i)};it.version="18.3.1-next-f1338f8080-20240426";function bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bf)}catch(t){console.error(t)}}bf(),kc.exports=it;var Cg=kc.exports,uh=Cg;eo.createRoot=uh.createRoot,eo.hydrateRoot=uh.hydrateRoot;function le(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function _n(t,e){return t.width===e.width&&t.height===e.height}var Eg=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Pg(t){return new Eg(t)}var Ng=function(){function t(e,n,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=le({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(r){return r},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return le({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=le(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;_n(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,i=le(this._transformBitmapSize(e,this._canvasElementClientSize)),s=_n(this.bitmapSize,i)?null:i;n===null&&s===null||n!==null&&s!==null&&_n(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}zg().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=hh(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Pg(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var i=hh(this._canvasElement);if(i!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:i.devicePixelRatio,r=this._canvasElement.getClientRects(),l=r[0]!==void 0?Lg(r[0],s):le({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(l)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var i=n.find(function(l){return l.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],r=le({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Tg(t,e){return new Ng(t,e.transform,e.options)}function hh(t){return t.ownerDocument.defaultView}function zg(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Lg(t,e){return le({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Rg=function(){function t(e,n,i){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Cn(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new Rg(s,n,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.1.0
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Mf={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var ch,Ui;function En(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function Cf(t,e,n,i){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(i,e+s),t.stroke()}function Te(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ge(t){if(t===void 0)throw new Error("Value is undefined");return t}function T(t){if(t===null)throw new Error("Value is null");return t}function Xt(t){return T(Ge(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(ch||(ch={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Ui||(Ui={}));class _e{constructor(){this.t=[]}i(e,n,i){const s={h:e,l:n,o:i===!0};this.t.push(s)}_(e){const n=this.t.findIndex(i=>e===i.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,i){const s=[...this.t];this.t=this.t.filter(r=>!r.o),s.forEach(r=>r.h(e,n,i))}v(){return this.t.length>0}m(){this.t=[]}}function tt(t,...e){for(const n of e)for(const i in n)n[i]!==void 0&&Object.prototype.hasOwnProperty.call(n,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof n[i]!="object"||t[i]===void 0||Array.isArray(n[i])?t[i]=n[i]:tt(t[i],n[i]));return t}function Pn(t){return typeof t=="number"&&isFinite(t)}function cs(t){return typeof t=="number"&&t%1==0}function ws(t){return typeof t=="string"}function Ws(t){return typeof t=="boolean"}function Rt(t){const e=t;if(!e||typeof e!="object")return e;let n,i,s;for(i in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],n[i]=s&&typeof s=="object"?Rt(s):s);return n}function dh(t){return t!==null}function ds(t){return t===null?void 0:t}const Ef="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function fs(t,e,n){return e===void 0&&(e=Ef),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class Ig{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),i=this.W();return e.k===n&&e.T===i||(e.k=n,e.T=i,e.P=fs(n,i),e.A=2.5/12*n,e.I=e.A,e.V=n/12*e.C,e.B=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Rl(t){return t<0?0:t>255?255:Math.round(t)||0}function fh(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Fg{constructor(e,n){this.q=new Map,this.j=e,n&&(this.q=n)}Y(e,n){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${n*s})`}Z(e){const n=this.K(e);return{G:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,X:fh(n)>160?"black":"white"}}J(e){return fh(this.K(e))}tt(e,n,i){const[s,r,l,a]=this.K(e),[u,h,c,d]=this.K(n),f=[Rl(s+i*(u-s)),Rl(r+i*(h-r)),Rl(l+i*(c-l)),(g=a+i*(d-a),g<=0||g>1?Math.min(Math.max(g,0),1):Math.round(1e4*g)/1e4)];var g;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const i=function(l){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=l;const u=window.getComputedStyle(a).color;return document.body.removeChild(a),u}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.j.length)for(const l of this.j){const a=l(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const r=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,r),r}}class Bg{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,i){this.it.forEach(s=>{s.nt(e,n,i)})}}class Rn{nt(e,n,i){e.useBitmapCoordinateSpace(s=>this.et(s,n,i))}}class Ag extends Rn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,r=this.rt,l=Math.max(1,Math.floor(n))%2/2,a=u=>{e.beginPath();for(let h=s.to-1;h>=s.from;--h){const c=r.ot[h],d=Math.round(c._t*n)+l,f=c.ut*i,g=u*i+l;e.moveTo(d,f),e.arc(d,f,g,0,2*Math.PI)}e.fill()};r.ct>0&&(e.fillStyle=r.dt,a(r.ft+r.ct)),e.fillStyle=r.vt,a(r.ft)}}function Og(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const $g={from:0,to:1};class Dg{constructor(e,n,i){this.Mt=new Bg,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.yt=i,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map(Og),this.bt=this.St.map(n=>{const i=new Ag;return i.ht(n),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),n=this.yt.Vt(),i=this.Ct.Bt(),s=this.O.Et();this.Pt(),n.forEach((r,l)=>{const a=this.St[l],u=r.At(i),h=r.Lt();!e&&u!==null&&r.It()&&h!==null?(a.vt=u.zt,a.ft=u.ft,a.ct=u.Ot,a.ot[0].gt=u.gt,a.ot[0].ut=r.Ft().Nt(u.gt,h.Wt),a.dt=u.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=i,a.ot[0]._t=s.qt(i),a.lt=$g):a.lt=null})}}class Wg extends Rn{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=this.jt.Yt.It,l=this.jt.Kt.It;if(!r&&!l)return;const a=Math.round(this.jt._t*i),u=Math.round(this.jt.ut*s);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*i),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,En(e,this.jt.Yt.Zt),function(h,c,d,f){h.beginPath();const g=h.lineWidth%2?.5:0;h.moveTo(c+g,d),h.lineTo(c+g,f),h.stroke()}(e,a,0,n.height)),l&&u>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*s),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,En(e,this.jt.Kt.Zt),Cf(e,u,0,n.width))}}class Ug{constructor(e,n){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new Wg(this.Gt),this.Jt=e,this.yt=n}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),n=this.yt.Qt().N().crosshair,i=this.Gt;if(n.mode===2)return i.Kt.It=!1,void(i.Yt.It=!1);i.Kt.It=e&&this.Jt.ti(this.yt),i.Yt.It=e&&this.Jt.ii(),i.Kt.ct=n.horzLine.width,i.Kt.Zt=n.horzLine.style,i.Kt.R=n.horzLine.color,i.Yt.ct=n.vertLine.width,i.Yt.Zt=n.vertLine.style,i.Yt.R=n.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function Vg(t,e,n,i,s,r){t.fillRect(e+r,n,i-2*r,r),t.fillRect(e+r,n+s-r,i-2*r,r),t.fillRect(e,n,r,s),t.fillRect(e+i-r,n,r,s)}function qr(t,e,n,i,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,n,i,s),t.restore()}function ph(t,e,n,i,s,r){t.beginPath(),t.roundRect?t.roundRect(e,n,i,s,r):(t.lineTo(e+i-r[1],n),r[1]!==0&&t.arcTo(e+i,n,e+i,n+r[1],r[1]),t.lineTo(e+i,n+s-r[2]),r[2]!==0&&t.arcTo(e+i,n+s,e+i-r[2],n+s,r[2]),t.lineTo(e+r[3],n+s),r[3]!==0&&t.arcTo(e,n+s,e,n+s-r[3],r[3]),t.lineTo(e,n+r[0]),r[0]!==0&&t.arcTo(e,n,e+r[0],n,r[0]))}function mh(t,e,n,i,s,r,l=0,a=[0,0,0,0],u=""){if(t.save(),!l||!u||u===r)return ph(t,e,n,i,s,a),t.fillStyle=r,t.fill(),void t.restore();const h=l/2;var c;ph(t,e+h,n+h,i-l,s-l,(c=-h,a.map(d=>d===0?d:d+c))),r!=="transparent"&&(t.fillStyle=r,t.fill()),u!=="transparent"&&(t.lineWidth=l,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function Pf(t,e,n,i,s,r,l){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,l),t.fillStyle=a,t.fillRect(e,n,i,s),t.restore()}class gh{constructor(e,n){this.ht(e,n)}ht(e,n){this.jt=e,this.ei=n}$t(e,n){return this.jt.It?e.k+e.A+e.I:0}nt(e,n,i,s){if(!this.jt.It||this.jt.ri.length===0)return;const r=this.jt.R,l=this.ei.G,a=e.useBitmapCoordinateSpace(u=>{const h=u.context;h.font=n.P;const c=this.hi(u,n,i,s),d=c.ai;return c.li?mh(h,d.oi,d._i,d.ui,d.ci,l,d.di,[d.ft,0,0,d.ft],l):mh(h,d.fi,d._i,d.ui,d.ci,l,d.di,[0,d.ft,d.ft,0],l),this.jt.pi&&(h.fillStyle=r,h.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.jt.Mi&&(h.fillStyle=n.D,h.fillRect(c.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),c});e.useMediaCoordinateSpace(({context:u})=>{const h=a.xi;u.font=n.P,u.textAlign=a.li?"right":"left",u.textBaseline="middle",u.fillStyle=r,u.fillText(this.jt.ri,h.Ci,(h._i+h.Si)/2+h.yi)})}hi(e,n,i,s){const{context:r,bitmapSize:l,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:h}=e,c=this.jt.pi||!this.jt.ki?n.C:0,d=this.jt.Pi?n.S:0,f=n.A+this.ei.Ti,g=n.I+this.ei.Ri,v=n.V,x=n.B,P=this.jt.ri,m=n.k,p=i.Di(r,P),y=Math.ceil(i.Ii(r,P)),j=m+f+g,b=n.S+v+x+y+c,M=Math.max(1,Math.floor(h));let k=Math.round(j*h);k%2!=M%2&&(k+=1);const _=d>0?Math.max(1,Math.floor(d*u)):0,C=Math.round(b*u),F=Math.round(c*u),A=this.ei.Vi??this.ei.Bi??this.ei.Ei,K=Math.round(A*h)-Math.floor(.5*h),ee=Math.floor(K+M/2-k/2),Q=ee+k,X=s==="right",L=X?a.width-d:d,E=X?l.width-_:_;let N,S,W;return X?(N=E-C,S=E-F,W=L-c-v-d):(N=E+C,S=E+F,W=L+c+v),{li:X,ai:{_i:ee,mi:K,Si:Q,ui:C,ci:k,ft:2*u,di:_,oi:N,fi:E,wi:S,gi:M,bi:l.width},xi:{_i:ee/h,Si:Q/h,Ci:W,yi:p}}}}class el{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||gh)(this.Li,this.Ai),this.Ni=new(e||gh)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Oi.$t(e,n),this.Ni.$t(e,n))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class Hg extends el{constructor(e,n,i){super(),this.Jt=e,this.Ki=n,this.Zi=i}Yi(e,n,i){if(e.It=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const r=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||r===null)return;const l=this.Ki.Xi().Z(s.labelBackgroundColor);i.G=l.G,e.R=l.X;const a=2/12*this.Ki.k();i.Ti=a,i.Ri=a;const u=this.Zi(this.Ki);i.Ei=u.Ei,e.ri=this.Ki.Ji(u.gt,r),e.It=!0}}const Kg=/[1-9]/g;class Nf{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,n){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.P,Math.round(n.Qi.Ii(f,T(this.jt).ri,Kg))));if(i<=0)return;const s=n.ts,r=i+2*s,l=r/2,a=this.jt.ss;let u=this.jt.Ei,h=Math.floor(u-l)+.5;h<0?(u+=Math.abs(0-h),h=Math.floor(u-l)+.5):h+r>a&&(u-=Math.abs(a-(h+r)),h=Math.floor(u-l)+.5);const c=h+r,d=Math.ceil(0+n.S+n.C+n.A+n.k+n.I);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:g,verticalPixelRatio:v})=>{const x=T(this.jt);f.fillStyle=x.G;const P=Math.round(h*g),m=Math.round(0*v),p=Math.round(c*g),y=Math.round(d*v),j=Math.round(2*g);if(f.beginPath(),f.moveTo(P,m),f.lineTo(P,y-j),f.arcTo(P,y,P+j,y,j),f.lineTo(p-j,y),f.arcTo(p,y,p,y-j,j),f.lineTo(p,m),f.fill(),x.pi){const b=Math.round(x.Ei*g),M=m,k=Math.round((M+n.C)*v);f.fillStyle=x.R;const _=Math.max(1,Math.floor(g)),C=Math.floor(.5*g);f.fillRect(b-C,M,_,k-M)}}),e.useMediaCoordinateSpace(({context:f})=>{const g=T(this.jt),v=0+n.S+n.C+n.A+n.k/2;f.font=n.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=g.R;const x=n.Qi.Di(f,"Apr0");f.translate(h+s,v+x),f.fillText(g.ri,0,0)})}}class Yg{constructor(e,n,i){this.xt=!0,this.Xt=new Nf,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=n,this.Zi=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const i=this.ns.Et();if(i.Gi())return;e.ss=i.ss();const s=this.Zi();if(s===null)return;e.Ei=s.Ei;const r=i.es(this.Ct.Bt());e.ri=i.rs(T(r)),e.It=!0;const l=this.ns.Xi().Z(n.labelBackgroundColor);e.G=l.G,e.R=l.X,e.pi=i.N().ticksVisible}}class Tf{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var vh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(vh||(vh={}));class Jg extends Tf{constructor(e,n){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=n,this.Ts=((s,r)=>l=>{const a=r(),u=s();if(l===T(this.yt).Rs())return{gt:u,Ei:a};{const h=T(l.Lt());return{gt:l.Ds(a,h),Ei:a}}})(()=>this.ps,()=>this.Cs);const i=((s,r)=>()=>{const l=this.ns.Et().Is(s()),a=r();return l&&Number.isFinite(a)?{wt:l,Ei:a}:null})(()=>this.vs,()=>this.si());this.Vs=new Yg(this,e,i)}N(){return this.Ps}Bs(e,n){this.ys=e,this.ks=n}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,n,i){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,n,i)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const n=this.ns,i=n.Et();let s=null,r=null;for(const h of n.Us()){const c=h.qs().$s(e,-1);if(c){if(c.js===e)return e;(s===null||c.js>s)&&(s=c.js)}const d=h.qs().$s(e,1);if(d){if(d.js===e)return e;(r===null||d.js<r)&&(r=d.js)}}const l=[s,r].filter(dh);if(l.length===0)return e;const a=i.qt(e),u=l.map(h=>Math.abs(a-i.qt(h)));return l[u.indexOf(Math.min(...u))]}Ys(e){let n=this.bs.get(e);n||(n=new Ug(this,e),this.bs.set(e,n));let i=this.Ss.get(e);return i||(i=new Dg(this.ns,this,e),this.Ss.set(e,i)),[n,i]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,n){this.ws&&this.yt===e||this.gs.clear();const i=[];return this.yt===e&&i.push(this.Zs(this.gs,n,this.Ts)),i}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(e=>{var n,i;(n=this.bs.get(e))==null||n.kt(),(i=this.Ss.get(e))==null||i.kt()}),this.gs.forEach(e=>e.kt()),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,n,i){this.Qs(e,n,i)&&this.Ws()}Qs(e,n,i){const s=this.xs,r=this.Cs,l=this.ps,a=this.vs,u=this.yt,h=this.Js(i);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=i;const c=h!==null?h.Lt():null;return h!==null&&c!==null?(this.ps=n,this.Cs=h.Nt(n,c)):(this.ps=NaN,this.Cs=NaN),s!==this.xs||r!==this.Cs||a!==this.vs||l!==this.ps||u!==this.yt}Fs(){const e=this.ns.tn().map(i=>i.qs().sn()).filter(dh),n=e.length===0?null:Math.max(...e);this.vs=n!==null?n:NaN}Zs(e,n,i){let s=e.get(n);return s===void 0&&(s=new Hg(this,n,i),e.set(n,s)),s}}function tl(t){return t==="left"||t==="right"}class Ne{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,n){const i=function(s,r){return s===void 0?r:{an:Math.max(s.an,r.an),ln:s.ln||r.ln}}(this.nn.get(e),n);this.nn.set(e,i)}_n(){return this.rn}un(e){const n=this.nn.get(e);return n===void 0?{an:this.rn}:{an:Math.max(this.rn,n.an),ln:n.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const n of e.en)this.xn(n);this.rn=Math.max(this.rn,e.rn),e.nn.forEach((n,i)=>{this.hn(i,n)})}static Cn(){return new Ne(2)}static yn(){return new Ne(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex(n=>n.fn===5);e!==-1&&this.en.splice(e,1)}}class zf{formatTickmarks(e){return e.map(n=>this.format(n))}}const yh=".";function It(t,e){if(!Pn(t))return"n/a";if(!cs(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class nl extends zf{constructor(e,n){if(super(),n||(n=1),Pn(e)&&cs(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=n,this.Pn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const n=this.Ki/this.kn;let i=Math.floor(e),s="";const r=this.Rn!==void 0?this.Rn:NaN;if(n>1){let l=+(Math.round(e*n)-i*n).toFixed(this.Rn);l>=n&&(l-=n,i+=1),s=yh+It(+l.toFixed(this.Rn)*this.kn,r)}else i=Math.round(i*n)/n,r>0&&(s=yh+It(0,r));return i.toFixed(0)+s}}class Lf extends nl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Qg extends zf{constructor(e){super(),this.Dn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.In(e):e<999995?n+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.In(e/1e9)+"B")}In(e){let n;const i=Math.pow(10,this.Dn);return n=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,r)=>r)}}const Gg=/[2-9]/g;class ps{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,n,i){return this.Nn(e,n,i).width}Di(e,n,i){const s=this.Nn(e,n,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Nn(e,n,i){const s=i||Gg,r=String(n).replace(s,"0");if(this.Ln.has(r))return Ge(this.Ln.get(r)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const l=e.measureText(r);return e.restore(),l.width===0&&n.length||(this.Ln.set(r,{Fn:l,Wn:this.Bn}),this.An[this.Bn]=r,this.Vn++,this.Bn++),l}}class Xg{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,n,i){this.Hn=e,this.M=n,this.Un=i}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class Rf{constructor(e,n,i){this.jn=e,this.$n=new ps(50),this.Yn=n,this.O=i,this.F=-1,this.Xt=new Xg(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const n=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(n===null)return null;const i=e.Xn(n);if(i==="overlay")return null;const s=this.O.Jn();return s.k!==this.F&&(this.F=s.k,this.$n.On()),this.Xt.qn(this.jn.ji(),s,i),this.Xt}}class Zg extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,n){var l;if(!((l=this.jt)!=null&&l.It))return null;const{ut:i,ct:s,te:r}=this.jt;return n>=i-s-7&&n<=i+s+7?{ie:this.jt,te:r}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null||this.jt.It===!1)return;const r=Math.round(this.jt.ut*s);r<0||r>n.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*i),En(e,this.jt.Zt),Cf(e,r,0,n.width))}}class Ya{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new Zg,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class qg extends Ya{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),n=e.ae().ae;if(n!==2&&n!==3)return;const i=this.ee.N();if(!i.baseLineVisible||!this.ee.It())return;const s=this.ee.Lt();s!==null&&(this.se.It=!0,this.se.ut=e.Nt(s.Wt,s.Wt),this.se.R=i.baseLineColor,this.se.ct=i.baseLineWidth,this.se.Zt=i.baseLineStyle)}}class ev extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){const s=this.jt;if(s===null)return;const r=Math.max(1,Math.floor(n)),l=r%2/2,a=Math.round(s.oe.x*n)+l,u=s.oe.y*i;e.fillStyle=s._e,e.beginPath();const h=Math.max(2,1.5*s.ue)*n;e.arc(a,u,h,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.ce,e.beginPath(),e.arc(a,u,s.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=s.de,e.beginPath(),e.arc(a,u,s.ft*n+r/2,0,2*Math.PI,!1),e.stroke()}}const tv=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class nv{constructor(e){this.Xt=new ev,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),n=this.Ce-e;if(n>0)return void(n<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),n=e.Ie(),i=this.ye.Lt();if(n===null||i===null)return;const s=this.ye.Ve(!0);if(s.Be||!n.Ee(s.js))return;const r={x:e.qt(s.js),y:this.ye.Ft().Nt(s.gt,i.Wt)},l=s.R,a=this.ye.N().lineWidth,u=this.Ae(this.Le(),l);this.Xt.ht({_e:l,ue:a,ce:u.ce,de:u.de,ft:u.ft,oe:r})}De(){const e=this.Xt.le();if(e!==null){const n=this.Ae(this.Le(),e._e);e.ce=n.ce,e.de=n.de,e.ft=n.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,n,i,s){const r=i+(s-i)*n;return this.ye.Qt().Xi().Y(e,r)}Ae(e,n){const i=e%2600/2600;let s;for(const h of tv)if(i>=h.fe&&i<=h.pe){s=h;break}Te(s!==void 0,"Last price animation internal logic error");const r=(i-s.fe)/(s.pe-s.fe);return{ce:this.ze(n,r,s.we,s.ge),de:this.ze(n,r,s.Me,s.be),ft:(l=r,a=s.ve,u=s.me,a+(u-a)*l)};var l,a,u}}class iv extends Ya{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const n=this.ee.N();if(!n.priceLineVisible||!this.ee.It())return;const i=this.ee.Ve(n.priceLineSource===0);i.Be||(e.It=!0,e.ut=i.Ei,e.R=this.ee.Oe(i.R),e.ct=n.priceLineWidth,e.Zt=n.priceLineStyle)}}class sv extends el{constructor(e){super(),this.Jt=e}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.Jt;if(!s.It())return;const r=s.N(),l=r.lastValueVisible,a=s.Ne()!=="",u=r.seriesLastValueMode===0,h=s.Ve(!1);if(h.Be)return;l&&(e.ri=this.Fe(h,l,u),e.It=e.ri.length!==0),(a||u)&&(n.ri=this.We(h,l,a,u),n.It=n.ri.length>0);const c=s.Oe(h.R),d=this.Jt.Qt().Xi().Z(c);i.G=d.G,i.Ei=h.Ei,n.Ht=s.Qt().Ut(h.Ei/s.Ft().$t()),e.Ht=c,e.R=d.X,n.R=d.X}We(e,n,i,s){let r="";const l=this.Jt.Ne();return i&&l.length!==0&&(r+=`${l} `),n&&s&&(r+=this.Jt.Ft().He()?e.Ue:e.$e),r.trim()}Fe(e,n,i){return n?i?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}}function xh(t,e,n,i){const s=Number.isFinite(e),r=Number.isFinite(n);return s&&r?t(e,n):s||r?s?e:n:i}class We{constructor(e,n){this.qe=e,this.je=n}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new We(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new We(xh(Math.min,this.Ze(),e.Ze(),-1/0),xh(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!Pn(e)||this.je-this.qe===0)return;const n=.5*(this.je+this.qe);let i=this.je-n,s=this.qe-n;i*=e,s*=e,this.je=n+i,this.qe=n+s}Qe(e){Pn(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new We(e.minValue,e.maxValue)}}class Rr{constructor(e,n){this.sr=e,this.nr=n||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Rr(We.ir(e.priceRange),e.margins)}}const rv=[2,4,8,16,32,64,128,256,512],lv="Custom series with conflation reducer must have a priceValueBuilder method";class ov extends Ya{constructor(e,n){super(e),this.hr=n}he(){const e=this.se;e.It=!1;const n=this.hr.N();if(!this.ee.It()||!n.lineVisible)return;const i=this.hr.ar();i!==null&&(e.It=!0,e.ut=i,e.R=n.color,e.ct=n.lineWidth,e.Zt=n.lineStyle,e.te=this.hr.N().id)}}class av extends el{constructor(e,n){super(),this.ye=e,this.hr=n}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.hr.N(),r=s.axisLabelVisible,l=s.title!=="",a=this.ye;if(!r||!a.It())return;const u=this.hr.ar();if(u===null)return;l&&(n.ri=s.title,n.It=!0),n.Ht=a.Qt().Ut(u/a.Ft().$t()),e.ri=this.lr(s.price),e.It=!0;const h=this.ye.Qt().Xi().Z(s.axisLabelColor||s.color);i.G=h.G;const c=s.axisLabelTextColor||h.X;e.R=c,n.R=c,i.Ei=u}lr(e){const n=this.ye.Lt();return n===null?"":this.ye.Ft().Ji(e,n.Wt)}}class uv{constructor(e,n){this.ye=e,this.Ps=n,this._r=new ov(e,this),this.jn=new av(e,this),this.ur=new Rf(this.jn,e,e.Qt())}cr(e){tt(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,n=e.Ft();if(e.Qt().Et().Gi()||n.Gi())return null;const i=e.Lt();return i===null?null:n.Nt(this.Ps.price,i.Wt)}}class hv{constructor(){this.wr=new WeakMap}gr(e,n,i){const s=1/n*i;if(e>=s)return 1;const r=s/e,l=Math.pow(2,Math.floor(Math.log2(r)));return Math.min(l,512)}Mr(e,n,i,s=!1,r){if(e.length===0||n<=1)return e;const l=this.br(n);if(l<=1)return e;const a=this.Sr(e);let u=a.Cr.get(l);return u!==void 0||(u=this.yr(e,l,i,s,r,a.Cr),a.Cr.set(l,u)),u}kr(e,n,i,s,r=!1,l){if(i<1||e.length===0)return e;const a=this.Sr(e),u=a.Cr.get(i);if(!u)return this.Mr(e,i,s,r,l);const h=this.Pr(e,n,i,u,r,s,l);return a.Cr.set(i,h),h}br(e){if(e<=2)return 2;for(const n of rv)if(e<=n)return n;return 512}Tr(e){if(e.length===0)return 0;const n=e[0],i=e[e.length-1];return 31*e.length+17*n.js+13*i.js}yr(e,n,i,s=!1,r,l=new Map){if(n===2)return this.Rr(e,2,i,s,r);const a=n/2;let u=l.get(a);return u||(u=this.yr(e,a,i,s,r,l),l.set(a,u)),this.Dr(u,i,s,r)}Rr(e,n,i,s=!1,r){const l=this.Ir(e,n,i,s,r);return this.Vr(l,s)}Dr(e,n,i=!1,s){const r=this.Ir(e,2,n,i,s);return this.Vr(r,i)}Ir(e,n,i,s=!1,r){const l=[];for(let a=0;a<e.length;a+=n)if(e.length-a>=n){const u=this.Br(e[a],e[a+1],i,s,r);u.Er=!1,l.push(u)}else if(l.length===0)l.push(this.Ar(e[a],!0));else{const u=l[l.length-1];l[l.length-1]=this.Lr(u,e[a],i,s,r)}return l}zr(e,n){return(e??1)+(n??1)}Br(e,n,i,s=!1,r){if(!s||!i||!r){const h=e.Wt[1]>n.Wt[1]?e.Wt[1]:n.Wt[1],c=e.Wt[2]<n.Wt[2]?e.Wt[2]:n.Wt[2];return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:h,$r:c,qr:n.Wt[3],jr:this.zr(e.jr,n.jr),Yr:void 0,Er:!1}}const l=i(this.Kr(e,r),this.Kr(n,r)),a=r(l),u=a.length?a[a.length-1]:0;return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],u),$r:Math.min(e.Wt[2],u),qr:u,jr:this.zr(e.jr,n.jr),Yr:l,Er:!1}}Lr(e,n,i,s=!1,r){if(!s||!i||!r)return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:e.Ur>n.Wt[1]?e.Ur:n.Wt[1],$r:e.$r<n.Wt[2]?e.$r:n.Wt[2],qr:n.Wt[3],jr:e.jr+(n.jr??1),Yr:e.Yr,Er:!1};const l=e.Yr,a=this.Kr(n,r),u=l?{data:l,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:r(l)}:null,h=u?i(u,a):a.data,c=u?r(h):a.priceValues,d=c.length?c[c.length-1]:0;return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:Math.max(e.Ur,d),$r:Math.min(e.$r,d),qr:d,jr:e.jr+(n.jr??1),Yr:h,Er:!1}}Zr(e,n,i,s,r,l,a=!1,u){const h=n===s?r:e[n];if(i-n==1)return this.Ar(h,!0);const c=n+1===s?r:e[n+1];let d=this.Br(h,c,l,a,u);for(let f=n+2;f<i;f++){const g=f===s?r:e[f];d=this.Lr(d,g,l,a,u)}return d}Kr(e,n){const i=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:n(i)}}Xr(e,n=!1){const i=n===!0,s=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[i?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:i?s?e.Yr:{wt:e.Fr}:void 0}}Vr(e,n=!1){return e.map(i=>this.Xr(i,n))}Pr(e,n,i,s,r=!1,l,a){if(s.length===0)return s;const u=e.length-1,h=Math.floor(u/i)*i;if(Math.min(h+i,e.length)-h<i&&e.length>i){const c=e.slice();return c[c.length-1]=n,this.Mr(c,i,l,r,a)}if(Math.floor((u-1)/i)===Math.floor(u/i)||s.length===1){const c=Math.min(h+i,e.length),d=c-h;if(d<=0)return s;const f=d===1?this.Ar(h===u?n:e[h],!0):this.Zr(e,h,c,u,n,l,r,a);return s[s.length-1]=this.Xr(f,r),s}{const c=e.slice();return c[c.length-1]=n,this.Mr(c,i,l,r,a)}}Ar(e,n=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:n}}Sr(e){const n=this.Jr(e),i=this.Tr(e);return n.Qr!==i&&(n.Cr.clear(),n.Qr=i),n}Jr(e){let n=this.wr.get(e);return n===void 0&&(n={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,n)),n}}class cv extends Tf{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const dv={Bar:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,l=T(t(n,i)),a=Xt(l.Wt[0])<=Xt(l.Wt[3]);return{th:l.R??(a?s:r)}},Candlestick:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,l=e.borderUpColor,a=e.borderDownColor,u=e.wickUpColor,h=e.wickDownColor,c=T(t(n,i)),d=Xt(c.Wt[0])<=Xt(c.Wt[3]);return{th:c.R??(d?s:r),ih:c.Ht??(d?l:a),sh:c.nh??(d?u:h)}},Custom:(t,e,n,i)=>({th:T(t(n,i)).R??e.color}),Area:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.vt??e.lineColor,vt:s.vt??e.lineColor,eh:s.eh??e.topColor,rh:s.rh??e.bottomColor}},Baseline:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:s.hh??e.topLineColor,ah:s.ah??e.bottomLineColor,oh:s.oh??e.topFillColor1,_h:s._h??e.topFillColor2,uh:s.uh??e.bottomFillColor1,dh:s.dh??e.bottomFillColor2}},Line:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.R??e.color,vt:s.R??e.color}},Histogram:(t,e,n,i)=>({th:T(t(n,i)).R??e.color})};class fv{constructor(e){this.fh=(n,i)=>i!==void 0?i.Wt:this.ye.qs().ph(n),this.ye=e,this.mh=dv[e.wh()]}gh(e,n){return this.mh(this.fh,this.ye.N(),e,n)}}function If(t,e,n,i,s=0,r=e.length){let l=r-s;for(;0<l;){const a=l>>1,u=s+a;i(e[u],n)===t?(s=u+1,l-=a+1):l=a}return s}const pi=If.bind(null,!0),Ff=If.bind(null,!1);var wh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(wh||(wh={}));const Vt=30;class pv{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,n=0){const i=this.Th(e,n);return i===null?null:{...this.Rh(i),js:this.Ph(i)}}Dh(){return this.Mh}Ih(e,n,i){if(this.Gi())return null;let s=null;for(const r of i)s=Us(s,this.Vh(e,n,r));return s}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map(n=>n.js)}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,n){const i=this.Eh(e);if(i===null&&n!==0)switch(n){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return i}Ah(e){let n=this.zh(e);return n>0&&(n-=1),n!==this.Mh.length&&this.Ph(n)<e?n:null}Lh(e){const n=this.Oh(e);return n!==this.Mh.length&&e<this.Ph(n)?n:null}Eh(e){const n=this.zh(e);return n===this.Mh.length||e<this.Mh[n].js?null:n}zh(e){return pi(this.Mh,e,(n,i)=>n.js<i)}Oh(e){return Ff(this.Mh,e,(n,i)=>n.js>i)}Nh(e,n,i){let s=null;for(let r=e;r<n;r++){const l=this.Mh[r].Wt[i];Number.isNaN(l)||(s===null?s={Fh:l,Wh:l}:(l<s.Fh&&(s.Fh=l),l>s.Wh&&(s.Wh=l)))}return s}Vh(e,n,i){if(this.Gi())return null;let s=null;const r=T(this.kh()),l=T(this.sn()),a=Math.max(e,r),u=Math.min(n,l),h=Math.ceil(a/Vt)*Vt,c=Math.max(h,Math.floor(u/Vt)*Vt);{const f=this.zh(a),g=this.Oh(Math.min(u,h,n));s=Us(s,this.Nh(f,g,i))}let d=this.bh.get(i);d===void 0&&(d=new Map,this.bh.set(i,d));for(let f=Math.max(h+1,a);f<c;f+=Vt){const g=Math.floor(f/Vt);let v=d.get(g);if(v===void 0){const x=this.zh(g*Vt),P=this.Oh((g+1)*Vt-1);v=this.Nh(x,P,i),d.set(g,v)}s=Us(s,v)}{const f=this.zh(c),g=this.Oh(u);s=Us(s,this.Nh(f,g,i))}return s}}function Us(t,e){return t===null?e:e===null?t:{Fh:Math.min(t.Fh,e.Fh),Wh:Math.max(t.Wh,e.Wh)}}function Il(){return new pv}const Ir={setLineStyle:En};class mv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Ir)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Ir)}}class gv{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new mv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}class Bf{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){var e,n;(n=(e=this.Zh).updateAllViews)==null||n.call(e)}Ys(){var i,s,r;const e=((s=(i=this.Zh).paneViews)==null?void 0:s.call(i))??[];if(((r=this.Kh)==null?void 0:r.qh)===e)return this.Kh.jh;const n=e.map(l=>new gv(l));return this.Kh={qh:e,jh:n},n}Qn(e,n){var i,s;return((s=(i=this.Zh).hitTest)==null?void 0:s.call(i,e,n))??null}}let vv=class extends Bf{ds(){return[]}};class yv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Ir)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Ir)}}class _h{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new yv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}function Af(t){var e,n,i;return{ri:t.text(),Ei:t.coordinate(),Vi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),G:t.backColor(),It:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((i=t.tickVisible)==null?void 0:i.call(t))??!0}}class xv{constructor(e,n){this.Xt=new Nf,this.Xh=e,this.Jh=n}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...Af(this.Xh)}),this.Xt}}class wv extends el{constructor(e,n){super(),this.Xh=e,this.Ki=n}Yi(e,n,i){const s=Af(this.Xh);i.G=s.G,e.R=s.R;const r=2/12*this.Ki.k();i.Ti=r,i.Ri=r,i.Ei=s.Ei,i.Vi=s.Vi,e.ri=s.ri,e.It=s.It,e.pi=s.pi}}class _v extends Bf{constructor(e,n){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=n}fs(){var s,r,l;const e=((r=(s=this.Zh).timeAxisViews)==null?void 0:r.call(s))??[];if(((l=this.Qh)==null?void 0:l.qh)===e)return this.Qh.jh;const n=this.ye.Qt().Et(),i=e.map(a=>new xv(a,n));return this.Qh={qh:e,jh:i},i}Ks(){var s,r,l;const e=((r=(s=this.Zh).priceAxisViews)==null?void 0:r.call(s))??[];if(((l=this.ta)==null?void 0:l.qh)===e)return this.ta.jh;const n=this.ye.Ft(),i=e.map(a=>new wv(a,n));return this.ta={qh:e,jh:i},i}na(){var i,s,r;const e=((s=(i=this.Zh).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.ia)==null?void 0:r.qh)===e)return this.ia.jh;const n=e.map(l=>new _h(l));return this.ia={qh:e,jh:n},n}ea(){var i,s,r;const e=((s=(i=this.Zh).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.sa)==null?void 0:r.qh)===e)return this.sa.jh;const n=e.map(l=>new _h(l));return this.sa={qh:e,jh:n},n}ra(e,n){var i,s;return((s=(i=this.Zh).autoscaleInfo)==null?void 0:s.call(i,e,n))??null}}function Fl(t,e,n,i){t.forEach(s=>{e(s).forEach(r=>{r.Yh()===n&&i.push(r)})})}function Bl(t){return t.Ys()}function Sv(t){return t.na()}function jv(t){return t.ea()}const kv=["Area","Line","Baseline"];class il extends cv{constructor(e,n,i,s,r){super(e),this.jt=Il(),this._r=new iv(this),this.ha=[],this.aa=new qg(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new hv,this.da=new Map,this.fa=null,this.Ps=i,this.pa=n;const l=new sv(this);if(this.gs=[l],this.ur=new Rf(l,this,e),kv.includes(this.pa)&&(this.la=new nv(this)),this.va(),this.$h=s(this,this.Qt(),r),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const n={Be:!0},i=this.Ft();if(this.Qt().Et().Gi()||i.Gi()||this.jt.Gi())return n;const s=this.Qt().Et().Ie(),r=this.Lt();if(s===null||r===null)return n;let l,a;if(e){const d=this.jt.Ch();if(d===null)return n;l=d,a=d.js}else{const d=this.jt.$s(s.bi(),-1);if(d===null||(l=this.jt.ph(d.js),l===null))return n;a=d.js}const u=l.Wt[3],h=this.ga().gh(a,{Wt:l}),c=i.Nt(u,r.Wt);return{Be:!1,gt:u,ri:i.Ji(u,r.Wt),Ue:i.Ma(u),$e:i.ba(u,r.Wt),R:h.th,Ei:c,js:a}}ga(){return this.oa!==null||(this.oa=new fv(this)),this.oa}N(){return this.Ps}cr(e){const n=this.Qt(),{priceScaleId:i,visible:s,priceFormat:r}=e;i!==void 0&&i!==this.Ps.priceScaleId&&n.Sa(this,i),s!==void 0&&s!==this.Ps.visible&&n.xa();const l=e.conflationThresholdFactor!==void 0;tt(this.Ps,e),l&&(this.da.clear(),this.Qt().dr()),r!==void 0&&(this.va(),n.Ca()),n.ya(this),n.ka(),this.$h.kt("options")}ht(e,n){this.jt.ht(e),this.da.clear();const i=this.Qt().Et().N();i.enableConflation&&i.precomputeConflationOnInit&&this.Pa(i.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(n&&n.Ta?this.la.Pe():e.length===0&&this.la.ke());const s=this.Qt().Kn(this);this.Qt().Ra(s),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const n=new uv(this,e);return this.ha.push(n),this.Qt().ya(this),n}Ia(e){const n=this.ha.indexOf(e);n!==-1&&this.ha.splice(n,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const n=e.Aa();return this.jt.$s(n,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const n=this.za();if(!this.da.has(n))return;const i=this.pa==="Custom",s=i&&this.fa||void 0,r=i&&this.$h.Oa?u=>{const h=u,c=this.$h.Oa(h);return Array.isArray(c)?c:[typeof c=="number"?c:0]}:void 0,l=this.ca.kr(this.jt.Dh(),e,n,s,i,r),a=Il();a.ht(l),this.da.set(n,a)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const n=this.za(),i=this.da.get(n);return i||(this.Fa(n),this.da.get(n)??this.jt)}Wa(e){const n=this.jt.ph(e);return n===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3]}:n.Wt[3]}Ha(e){const n=[];Fl(this.ua,Bl,"top",n);const i=this.la;return i!==null&&i.It()&&(this._a===null&&i.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),i.Te(),n.unshift(i)),n}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const n=this.ha.map(i=>i.pr());return e.push(...n),Fl(this.ua,Bl,"normal",e),e}qa(){return this.ja(Bl,"bottom")}Ya(e){return this.ja(Sv,e)}Ka(e){return this.ja(jv,e)}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}ds(){return[this.ur,...this.ha.map(e=>e.vr())]}Ks(e,n){if(n!==this.hs&&!this.$a())return[];const i=[...this.gs];for(const s of this.ha)i.push(s.mr());return this.ua.forEach(s=>{i.push(...s.Ks())}),i}fs(){const e=[];return this.ua.forEach(n=>{e.push(...n.fs())}),e}ra(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.Ga(e,n);return s===null?null:s.tr()});return Rr.ir(i)}return this.Ga(e,n)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){var e;this.$h.kt();for(const n of this.gs)n.kt();for(const n of this.ha)n.kt();this._r.kt(),this.aa.kt(),(e=this.la)==null||e.kt(),this.ua.forEach(n=>n.Ws())}Ft(){return T(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.jt.ph(e);return n===null?null:{gt:n.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new _v(e,this))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e)}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!tl(this.Ft().ol())}Ga(e,n){if(!cs(e)||!cs(n)||this.jt.Gi())return null;const i=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],s=this.jt.Ih(e,n,i);let r=s!==null?new We(s.Fh,s.Wh):null,l=null;if(this.wh()==="Histogram"){const a=this.Ps.base,u=new We(a,a);r=r!==null?r.Sn(u):u}return this.ua.forEach(a=>{const u=a.ra(e,n);if(u!=null&&u.priceRange){const h=new We(u.priceRange.minValue,u.priceRange.maxValue);r=r!==null?r.Sn(h):h}u!=null&&u.margins&&(l=u.margins)}),new Rr(r,l)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.Ja=new Qg(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new Lf(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new nl(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,n){const i=[];return Fl(this.ua,e,n,i),i}za(){const{ul:e,cl:n,dl:i}=this.fl();return this.ca.gr(e,n,i)}fl(){const e=this.Qt().Et(),n=e.ul(),i=window.devicePixelRatio||1,s=e.N().conflationThresholdFactor;return{ul:n,cl:i,dl:this.Ps.conflationThresholdFactor??s??1}}pl(e){const n=this.jt.Dh();let i;if(this.pa==="Custom"&&this.fa!==null){const r=this.rl();if(!r)throw new Error(lv);i=this.ca.Mr(n,e,this.fa,!0,l=>r(l))}else i=this.ca.Mr(n,e);const s=Il();return s.ht(i),s}Fa(e){const n=this.pl(e);this.da.set(e,n)}Pa(e){var i;if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const n=this.Qt().Et().vl();for(const s of n){const r=()=>{this.ml(s)},l=typeof window=="object"&&window||typeof self=="object"&&self;(i=l==null?void 0:l.gl)!=null&&i.wl?l.gl.wl(()=>{r()},{Ml:e}):Promise.resolve().then(()=>r())}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const n=this.pl(e);this.da.set(e,n)}}const bv=[3],Mv=[0,1,2,3];class Cv{constructor(e){this.Ps=e}bl(e,n,i){let s=e;if(this.Ps.mode===0)return s;const r=i.Rs(),l=r.Lt();if(l===null)return s;const a=r.Nt(e,l),u=i.Sl().filter(c=>c instanceof il).reduce((c,d)=>{if(i.Zn(d)||!d.It())return c;const f=d.Ft(),g=d.qs();if(f.Gi()||!g.Ee(n))return c;const v=g.ph(n);if(v===null)return c;const x=Xt(d.Lt()),P=this.Ps.mode===3?Mv:bv;return c.concat(P.map(m=>f.Nt(v.Wt[m],x.Wt)))},[]);if(u.length===0)return s;u.sort((c,d)=>Math.abs(c-a)-Math.abs(d-a));const h=u[0];return s=r.Ds(h,l),s}}function Vi(t,e,n){return Math.min(Math.max(t,e),n)}function Vs(t,e,n){return e-t<=n}function Ja(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Ev extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=Math.max(1,Math.floor(i));e.lineWidth=r,function(l,a){l.save(),l.lineWidth%2&&l.translate(.5,.5),a(),l.restore()}(e,()=>{const l=T(this.jt);if(l.xl){e.strokeStyle=l.Cl,En(e,l.yl),e.beginPath();for(const a of l.kl){const u=Math.round(a.Pl*i);e.moveTo(u,-r),e.lineTo(u,n.height+r)}e.stroke()}if(l.Tl){e.strokeStyle=l.Rl,En(e,l.Dl),e.beginPath();for(const a of l.Il){const u=Math.round(a.Pl*s);e.moveTo(-r,u),e.lineTo(n.width+r,u)}e.stroke()}})}}class Pv{constructor(e){this.Xt=new Ev,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,n={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(i=>({Pl:i.coord}))};this.Xt.ht(n),this.xt=!1}return this.Xt}}class Nv{constructor(e){this.$h=new Pv(e)}pr(){return this.$h}}const Al={Bl:4,El:1e-4};function Xn(t,e){const n=100*(t-e)/e;return e<0?-n:n}function Tv(t,e){const n=Xn(t.Ze(),e),i=Xn(t.Ge(),e);return new We(n,i)}function Hi(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function zv(t,e){const n=Hi(t.Ze(),e),i=Hi(t.Ge(),e);return new We(n,i)}function Fr(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.log10(n+e.El)+e.Bl;return t<0?-i:i}function Ki(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.pow(10,n-e.Bl)-e.El;return t<0?-i:i}function Pi(t,e){if(t===null)return null;const n=Fr(t.Ze(),e),i=Fr(t.Ge(),e);return new We(n,i)}function Zn(t,e){if(t===null)return null;const n=Ki(t.Ze(),e),i=Ki(t.Ge(),e);return new We(n,i)}function Ol(t){if(t===null)return Al;const e=Math.abs(t.Ge()-t.Ze());if(e>=1||e<1e-15)return Al;const n=Math.ceil(Math.abs(Math.log10(e))),i=Al.Bl+n;return{Bl:i,El:1/Math.pow(10,i)}}class $l{constructor(e,n){if(this.Al=e,this.Ll=n,function(i){if(i<0)return!1;if(i>1e18)return!0;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let i=this.Al;i!==1;){if(i%2==0)this.zl.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),i/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,n,i){const s=this.Al===0?0:1/this.Al;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),l=0,a=this.Ll[0];for(;;){const d=Vs(r,s,1e-14)&&r>s+1e-14,f=Vs(r,i*a,1e-14),g=Vs(r,1,1e-14);if(!(d&&f&&g))break;r/=a,a=this.Ll[++l%this.Ll.length]}if(r<=s+1e-14&&(r=s),r=Math.max(1,r),this.zl.length>0&&(u=r,h=1,c=1e-14,Math.abs(u-h)<c))for(l=0,a=this.zl[0];Vs(r,i*a,1e-14)&&r>s+1e-14;)r/=a,a=this.zl[++l%this.zl.length];var u,h,c;return r}}class Sh{constructor(e,n,i,s){this.Nl=[],this.Ki=e,this.Al=n,this.Fl=i,this.Wl=s}Ol(e,n){if(e<n)throw new Error("high < low");const i=this.Ki.$t(),s=(e-n)*this.Hl()/i,r=new $l(this.Al,[2,2.5,2]),l=new $l(this.Al,[2,2,2.5]),a=new $l(this.Al,[2.5,2,2]),u=[];return u.push(r.Ol(e,n,s),l.Ol(e,n,s),a.Ol(e,n,s)),function(h){if(h.length<1)throw Error("array is empty");let c=h[0];for(let d=1;d<h.length;++d)h[d]<c&&(c=h[d]);return c}(u)}Ul(){const e=this.Ki,n=e.Lt();if(n===null)return void(this.Nl=[]);const i=e.$t(),s=this.Fl(i-1,n),r=this.Fl(0,n),l=this.Ki.N().entireTextOnly?this.$l()/2:0,a=l,u=i-1-l,h=Math.max(s,r),c=Math.min(s,r);if(h===c)return void(this.Nl=[]);const d=this.Ol(h,c);if(this.ql(n,d,h,c,a,u),e.jl()&&this.Yl(d,c,h)){const v=this.Ki.Kl();this.Zl(n,d,a,u,v,2*v)}const f=this.Nl.map(v=>v.Gl),g=this.Ki.Xl(f);for(let v=0;v<this.Nl.length;v++)this.Nl[v].Jl=g[v]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,n,i,s,r,l){const a=this.Nl,u=this.Ki;let h=i%n;h+=h<0?n:0;const c=i>=s?1:-1;let d=null,f=0;for(let g=i-h;g>s;g-=n){const v=this.Wl(g,e,!0);d!==null&&Math.abs(v-d)<this.Hl()||v<r||v>l||(f<a.length?(a[f].Pl=v,a[f].Jl=u.Ql(g),a[f].Gl=g):a.push({Pl:v,Jl:u.Ql(g),Gl:g}),f++,d=v,u.io()&&(n=this.Ol(g*c,s)))}a.length=f}Zl(e,n,i,s,r,l){const a=this.Nl,u=this.so(e,i,r,l),h=this.so(e,s,-l,-r),c=this.Wl(0,e,!0)-this.Wl(n,e,!0);a.length>0&&a[0].Pl-u.Pl<c/2&&a.shift(),a.length>0&&h.Pl-a[a.length-1].Pl<c/2&&a.pop(),a.unshift(u),a.push(h)}so(e,n,i,s){const r=(i+s)/2,l=this.Fl(n+i,e),a=this.Fl(n+s,e),u=Math.min(l,a),h=Math.max(l,a),c=Math.max(.1,this.Ol(h,u)),d=this.Fl(n+r,e),f=d-d%c,g=this.Wl(f,e,!0);return{Jl:this.Ki.Ql(f),Pl:g,Gl:f}}Yl(e,n,i){let s=Xt(this.Ki.er());return this.Ki.io()&&(s=Zn(s,this.Ki.no())),s.Ze()-n<e&&i-s.Ge()<e}}function Of(t){return t.slice().sort((e,n)=>T(e._s())-T(n._s()))}var jh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(jh||(jh={}));const kh=new Lf,bh=new nl(100,1);class Lv{constructor(e,n,i,s,r){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new _e,this.fo=new _e,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=bh,this.So=Ol(null),this.xo=e,this.Ps=n,this.Co=i,this.yo=s,this.ko=r,this.Po=new Sh(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(tt(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const n=Ge(e.scaleMargins.top),i=Ge(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(n+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+i}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const n=this.ae();let i=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),n.ae===1&&e.ae!==n.ae&&(function(r,l){if(r===null)return!1;const a=Ki(r.Ze(),l),u=Ki(r.Ge(),l);return isFinite(a)&&isFinite(u)}(this.sr,this.So)?(i=Zn(this.sr,this.So),i!==null&&this.Lo(i)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==n.ae&&(i=Pi(this.sr,this.So),i!==null&&this.Lo(i));const s=n.ae!==this.Ps.mode;s&&(n.ae===2||this.He())&&this._l(),s&&(n.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&n.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(n,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,n){const i=this.sr;(n||i===null&&e!==null||i!==null&&!i.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,n){return this.He()?e=Xn(e,n):this.Eo()&&(e=Hi(e,n)),this.Ro(e,n)}Yo(e,n,i){this.Uo();const s=this.Ho(),r=T(this.er()),l=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-l),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,g=this.Ko();for(let v=d;v<f;v++){const x=e[v],P=x.gt;if(isNaN(P))continue;let m=P;g!==null&&(m=g(x.gt,n));const p=s+c*(m-l),y=h?p:this.eo-1-p;x.ut=y}}Zo(e,n,i){this.Uo();const s=this.Ho(),r=T(this.er()),l=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-l),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,g=this.Ko();for(let v=d;v<f;v++){const x=e[v];let P=x.Hr,m=x.Ur,p=x.$r,y=x.qr;g!==null&&(P=g(x.Hr,n),m=g(x.Ur,n),p=g(x.$r,n),y=g(x.qr,n));let j=s+c*(P-l),b=h?j:this.eo-1-j;x.Go=b,j=s+c*(m-l),b=h?j:this.eo-1-j,x.Xo=b,j=s+c*(p-l),b=h?j:this.eo-1-j,x.Jo=b,j=s+c*(y-l),b=h?j:this.eo-1-j,x.Qo=b}}Ds(e,n){const i=this.To(e,n);return this.t_(i,n)}t_(e,n){let i=e;return this.He()?i=function(s,r){return r<0&&(s=-s),s/100*r+r}(i,n):this.Eo()&&(i=function(s,r){return s-=100,r<0&&(s=-s),s/100*r+r}(i,n)),i}Sl(){return this.po}Dt(){return this.mo||(this.mo=Of(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const n of this.po){const i=n.Lt();i!==null&&(e===null||i.Ea<e.Ea)&&(e=i)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const n=this.Po.Vl();return this.wo={Vl:n,e_:e},this.do.p(),n}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=T(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let n=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const i=T(this.ho).Ke();n=Math.max(n,.1),i.Je(n),this.Lo(i)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=T(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const n=T(this.er()).Xe()/(this.Fo()-1);let i=e-this.bo;this.Ao()&&(i*=-1);const s=i*n,r=T(this.ho).Ke();r.Qe(s),this.Lo(r,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,n){switch(this.Ps.mode){case 2:return this.c_(Xn(e,n));case 3:return this.Xa().format(Hi(e,n));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,T(this.vo).Xa())}ba(e,n){return e=Xn(e,n),this.c_(e,kh)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach(e=>e.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const i of this.po)i._s()<e&&(e=i._s(),this.vo=i);let n=100;this.vo!==null&&(n=Math.round(this.vo.qh())),this.Ja=bh,this.He()?(this.Ja=kh,n=100):this.Eo()?(this.Ja=new nl(100,1),n=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new Sh(this,n,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,n){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?Fr(e,this.So):e;const i=T(this.er()),s=this.Ho()+(this.Fo()-1)*(e-i.Ze())/i.Xe();return this.jo(s)}To(e,n){if(this.Uo(),this.Gi())return 0;const i=this.jo(e),s=T(this.er()),r=s.Ze()+s.Xe()*((i-this.Ho())/(this.Fo()-1));return this.io()?Ki(r,this.So):r}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let n=null;const i=this.p_();let s=0,r=0;for(const u of i){if(!u.It())continue;const h=u.Lt();if(h===null)continue;const c=u.ra(e.Aa(),e.bi());let d=c&&c.er();if(d!==null){switch(this.Ps.mode){case 1:d=Pi(d,this.So);break;case 2:d=Tv(d,h.Wt);break;case 3:d=zv(d,h.Wt)}if(n=n===null?d:n.Sn(T(d)),c!==null){const f=c.rr();f!==null&&(s=Math.max(s,f.above),r=Math.max(r,f.below))}}}if(this.jl()&&(s=Math.max(s,this.Kl()),r=Math.max(r,this.Kl())),s===this.uo&&r===this.co||(this.uo=s,this.co=r,this.wo=null,this.Io()),n!==null){if(n.Ze()===n.Ge()){const u=5*this.m_();this.io()&&(n=Zn(n,this.So)),n=new We(n.Ze()-u,n.Ge()+u),this.io()&&(n=Pi(n,this.So))}if(this.io()){const u=Zn(n,this.So),h=Ol(u);if(l=h,a=this.So,l.Bl!==a.Bl||l.El!==a.El){const c=this.ho!==null?Zn(this.ho,this.So):null;this.So=h,n=Pi(u,h),c!==null&&(this.ho=Pi(c,h))}}this.Lo(n)}else this.sr===null&&(this.Lo(new We(-.5,.5)),this.So=Ol(null));var l,a}Ko(){return this.He()?Xn:this.Eo()?Hi:this.io()?e=>Fr(e,this.So):null}g_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.format(e)):n(e)}M_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.formatTickmarks(e)):n(e)}lr(e,n){return this.g_(e,this.yo.priceFormatter,n)}f_(e,n){const i=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),n)}c_(e,n){return this.g_(e,this.yo.percentageFormatter,n)}d_(e,n){const i=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),n)}}function Mh(t){return t instanceof il}class Ch{constructor(e,n){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new _e,this.ua=[],this.Jh=e,this.ns=n,this.k_=new Nv(this);const i=n.N();this.P_=this.T_("left",i.leftPriceScale),this.R_=this.T_("right",i.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(i)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const n=Array.from(this.b_.values());for(const i of n){const s=T(i[0].Ft());s.cr(e.overlayPriceScales),e.localization&&s._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?Ge(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(e=>{e.m&&e.m()}),this.ua=this.ua.filter(e=>{const n=e.Gh();return n.detached&&n.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach(n=>{if(this.Zn(n)){const i=n.Ft();i!==null&&i.No(e)}}),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(Mh)}Sl(){return this.po}Zn(e){const n=e.Ft();return n===null||this.P_!==n&&this.R_!==n}i_(e,n,i){this.W_(e,n,i?e._s():this.po.length)}n_(e,n){const i=this.po.indexOf(e);Te(i!==-1,"removeDataSource: invalid data source"),this.po.splice(i,1),n||this.po.forEach((l,a)=>l.us(a));const s=T(e.Ft()).ol();if(this.b_.has(s)){const l=Ge(this.b_.get(s)),a=l.indexOf(e);a!==-1&&(l.splice(a,1),l.length===0&&this.b_.delete(s))}const r=e.Ft();r&&r.Sl().indexOf(e)>=0&&(r.n_(e),this.H_(r)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,n){e.h_(n)}Y_(e,n){e.a_(n),this.z_()}K_(e){e.l_()}Z_(e,n){e.o_(n)}G_(e,n){e.__(n),this.z_()}X_(e){e.u_()}z_(){this.po.forEach(e=>{e.Ws()})}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const n=this.Jh.Ie();e.Do({ln:!0}),n!==null&&e.v_(n),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(e=>{this.Zn(e)&&this.H_(e.Ft())}),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=Of(this.po)),this.mo}su(e,n){n=Vi(n,0,this.po.length-1);const i=this.po.indexOf(e);Te(i!==-1,"setSeriesOrder: invalid data source"),this.po.splice(i,1),this.po.splice(n,0,e),this.po.forEach((s,r)=>s.us(r)),this.mo=null;for(const s of[this.P_,this.R_])s.s_(),s._l();this.ns.dr()}Vt(){return this.Dt().filter(Mh)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new vv(e))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}J_(e){const n=e.p_();if(n&&n.length>0&&!this.Jh.Gi()){const i=this.Jh.Ie();i!==null&&e.v_(i)}e.Ws()}W_(e,n,i){let s=this.V_(n);if(s===null&&(s=this.T_(n,this.ns.N().overlayPriceScales)),this.po.splice(i,0,e),!tl(n)){const r=this.b_.get(n)||[];r.push(e),this.b_.set(n,r)}e.us(i),s.i_(e),e.cs(s),this.H_(s),this.mo=null}D_(e,n,i){n.ae!==i.ae&&this.J_(e)}T_(e,n){const i={visible:!0,autoScale:!0,...Rt(n)},s=new Lv(e,i,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return s.No(this.$t()),s}}function Hs(t){return{hu:t.hu,au:{te:t.lu.externalId},ou:t.lu.cursorStyle}}function Rv(t,e,n,i){for(const s of t){const r=s.Tt(i);if(r!==null&&r.Qn){const l=r.Qn(e,n);if(l!==null)return{_u:s,au:l}}}return null}function Iv(t){return t.Ys!==void 0}function $f(t,e,n){const i=[t,...t.Dt()],s=function(r,l,a){var f;let u,h;for(const g of r){const v=((f=g.Za)==null?void 0:f.call(g,l,a))??[];for(const x of v)c=x.zOrder,d=u==null?void 0:u.zOrder,(!d||c==="top"&&d!=="top"||c==="normal"&&d==="bottom")&&(u=x,h=g)}var c,d;return u&&h?{lu:u,hu:h}:null}(i,e,n);if((s==null?void 0:s.lu.zOrder)==="top")return Hs(s);for(const r of i){if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&!s.lu.isBackground)return Hs(s);if(Iv(r)){const l=Rv(r.Ys(t),e,n,t);if(l!==null)return{hu:r,_u:l._u,au:l.au}}if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&s.lu.isBackground)return Hs(s)}return s!=null&&s.lu?Hs(s):null}class Fv{constructor(e,n,i=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=n,this.zn=i}du(e){const n=e.time,i=this.cu.cacheKey(n),s=this.Ln.get(i);if(s!==void 0)return s.fu;if(this.Vn===this.zn){const l=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(Ge(l)),this.En++,this.Vn--}const r=this.uu(e);return this.Ln.set(i,{fu:r,Wn:this.Bn}),this.An.set(this.Bn,i),this.Vn++,this.Bn++,r}}class ri{constructor(e,n){Te(e<=n,"right should be >= left"),this.pu=e,this.vu=n}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function Eh(t,e){return t===null||e===null?t===e:t.Ye(e)}class Bv{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,n){this.Su(n),this.Ln=null;for(let i=n;i<e.length;++i){const s=e[i];let r=this.wu.get(s.timeWeight);r===void 0&&(r=[],this.wu.set(s.timeWeight,r)),r.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}xu(e,n,i,s,r){const l=Math.ceil(n/e);return this.Ln!==null&&this.Ln.Cu===l&&r===this.Ln.yu&&i===this.Ln.ku||(this.Ln={yu:r,ku:i,Vl:this.Pu(l,i,s),Cu:l}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const n=[];this.wu.forEach((i,s)=>{e<=i[0].index?n.push(s):i.splice(pi(i,e,r=>r.index<e),1/0)});for(const i of n)this.wu.delete(i)}Pu(e,n,i){let s=[];const r=l=>!n||i.has(l.index);for(const l of Array.from(this.wu.keys()).sort((a,u)=>u-a)){if(!this.wu.get(l))continue;const a=s;s=[];const u=a.length;let h=0;const c=Ge(this.wu.get(l)),d=c.length;let f=1/0,g=-1/0;for(let v=0;v<d;v++){const x=c[v],P=x.index;for(;h<u;){const m=a[h],p=m.index;if(!(p<P&&r(m))){f=p;break}h++,s.push(m),g=p,f=1/0}if(f-P>=e&&P-g>=e&&r(x))s.push(x),g=P;else if(this.gu)return a}for(;h<u;h++)r(a[h])&&s.push(a[h])}return s}}class li{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new ri(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new li(null)}}function Av(t,e){return t.weight>e.weight?t:e}class Ov{constructor(e,n,i,s){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new Bv,this.Au=new Map,this.Lu=li.Iu(),this.zu=!0,this.Ou=new _e,this.Nu=new _e,this.Fu=new _e,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=n,this.yo=i,this.Yu=n.rightOffset,this.Ku=n.barSpacing,this.ns=e,this.Zu(n),this.cu=s,this.Gu(),this.Eu.Mu(n.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){tt(this.yo,e),this.tc(),this.Gu()}cr(e,n){tt(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){var n;return((n=this.Bu[e])==null?void 0:n.time)??null}es(e){return this.Bu[e]??null}ec(e,n){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return n?this.Bu.length-1:null;const i=pi(this.Bu,this.cu.key(e),(s,r)=>this.cu.key(s.time)<r);return this.cu.key(e)<this.cu.key(this.Bu[i].time)?n?i:null:i}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const n={from:e.Aa(),to:e.bi()};return this.oc(n)}oc(e){const n=Math.round(e.from),i=Math.round(e.to),s=T(this._c()),r=T(this.uc());return{from:T(this.es(Math.max(s,n))),to:T(this.es(Math.min(r,i)))}}cc(e){return{from:T(this.ec(e.from,!0)),to:T(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const n=this.ac(),i=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.Ku*e/i;this.Ku=s}if(this.Ps.fixLeftEdge&&n!==null&&n.Aa()<=0){const s=i-e;this.Yu-=Math.round(s/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!cs(e))return 0;const n=this.vc()+this.Yu-e;return this.S_-(n+.5)*this.Ku-1}mc(e,n){const i=this.vc(),s=n===void 0?0:n.from,r=n===void 0?e.length:n.to;for(let l=s;l<r;l++){const a=e[l].wt,u=i+this.Yu-a,h=this.S_-(u+.5)*this.Ku-1;e[l]._t=h}}wc(e,n){const i=Math.ceil(this.gc(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(i)?this.bc(i):i}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const n=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const i=this.Yu*n/this.Ku;this.Yu=i}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,n=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(n/e),s=T(this.Ie()),r=Math.max(s.Aa(),s.Aa()-i),l=Math.max(s.bi(),s.bi()-i),a=this.Eu.xu(e,n,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),u=this._c()+i,h=this.uc()-i,c=this.yc(),d=this.Ps.fixLeftEdge||c,f=this.Ps.fixRightEdge||c;let g=0;for(const v of a){if(!(r<=v.index&&v.index<=l))continue;let x;g<this.qu.length?(x=this.qu[g],x.coord=this.qt(v.index),x.label=this.kc(v),x.weight=v.weight):(x={needAlignCoordinate:!1,coord:this.qt(v.index),label:this.kc(v),weight:v.weight},this.qu.push(x)),this.Ku>n/2&&!c?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&v.index<=u||f&&v.index>=h,g++}return this.qu.length=g,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,n){const i=this.gc(e),s=this.ul(),r=s+n*(s/10);this.gn(r),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(i-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const n=Vi(this.S_-e,0,this.S_),i=Vi(this.S_-T(this.Mo),0,this.S_);n!==0&&i!==0&&this.gn(this.Wu.ul*n/i)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const n=(this.bo-e)/this.ul();this.Yu=T(this.Wu).Cc+n,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.Yu,s=performance.now();this.ns.vn({Ec:r=>(r-s)/n>=1,Ac:r=>{const l=(r-s)/n;return l>=1?e:i+(e-i)*l}})}kt(e,n){this.zu=!0,this.Bu=e,this.Eu.bu(e,n),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,n){const i=e.mu(),s=n&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-s)/i),this.Yu=e.bi()-this.vc(),n&&(this.Yu=s?s/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),n=this.uc();if(e===null||n===null)return;const i=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new ri(e,n+i),!0)}Wc(e){const n=new ri(e.from,e.to);this.Nc(n)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const n of e)for(const i of n.ll())this.Uu.set(i,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),n=this.Ps.minBarSpacing;if(n>=e)return[1];const i=[1];let s=2;for(;s<=512;)n<e/s&&i.push(s),s*=2;return i}yc(){const e=this.ns.N().handleScroll,n=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const n=this.Uc(e),i=this.vc()+this.Yu-n;return Math.round(1e6*i)/1e6}xc(e){const n=this.Ku;this.Ku=e,this.dc(),n!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(li.Iu());const e=this.vc(),n=this.S_/this.Ku,i=this.Yu+e,s=new ri(i-n+1,i);this.qc(new li(s))}dc(){const e=Vi(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const n=e/this.Ku,i=Math.pow(2,Math.floor(Math.log2(n)));this.ju=Math.min(i,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const n=this.Zc();this.Yu>n&&(this.Yu=n,this.zu=!0)}Kc(){const e=this._c(),n=this.Vu;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let n=this.Au.get(e.weight);return n===void 0&&(n=new Fv(i=>this.Gc(i),this.cu),this.Au.set(e.weight,n)),n.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const n=this.Lu;this.Lu=e,Eh(n.Ru(),this.Lu.Ru())||this.Ou.p(),Eh(n.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const n=this.Ie();if(n===null)return;const i=n.Aa()-e;if(i<0){const s=this.Yu-i-1;this.Mn(s)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const n=function*(s){const r=Math.round(s),l=r<s;let a=1;for(;;)l?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(e),i=this.uc();for(;i;){const s=n.next().value;if(this.Uu.get(s))return s;if(s<0||s>i)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(n)}}}var Ph,Nh,Th,zh,Lh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Ph||(Ph={}));class $v{constructor(e,n,i){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new _e,this.nd=new _e,this.ed=null,this.rd=e,this.Ps=n,this.cu=i,this.ko=new Fg(this.Ps.layout.colorParsers),this.hd=new Ig(this),this.Jh=new Ov(this,n.timeScale,this.Ps.localization,i),this.Ct=new Jg(this,n.crosshair),this.ad=new Cv(n.crosshair),n.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ne.yn())}dr(){this.dd(Ne.Cn())}Ua(){this.dd(new Ne(1))}ya(e){const n=this.fd(e);this.dd(n)}pd(){return this.td}vd(e){var i,s,r,l;if(((i=this.td)==null?void 0:i.hu)===(e==null?void 0:e.hu)&&((r=(s=this.td)==null?void 0:s.au)==null?void 0:r.te)===((l=e==null?void 0:e.au)==null?void 0:l.te))return;const n=this.td;this.td=e,n!==null&&this.ya(n.hu),e!==null&&e.hu!==(n==null?void 0:n.hu)&&this.ya(e.hu)}N(){return this.Ps}cr(e){tt(this.Ps,e),this.Xc.forEach(n=>n.I_(e)),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,n,i=0){const s=this.Xc[i];if(s===void 0)return;if(e==="left")return tt(this.Ps,{leftPriceScale:n}),s.I_({leftPriceScale:n}),this.sd.p(),void this.Ca();if(e==="right")return tt(this.Ps,{rightPriceScale:n}),s.I_({rightPriceScale:n}),this.sd.p(),void this.Ca();const r=this.wd(e,i);r!==null&&(r.Ft.cr(n),this.sd.p())}wd(e,n){const i=this.Xc[n];if(i===void 0)return null;const s=i.V_(e);return s!==null?{Gs:i,Ft:s}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,n){e.No(n),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach(n=>n.L_(e)),this.Sc()}Sd(e){this.Xc.length!==1&&(Te(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,n){if(this.Xc.length<2)return;Te(e>=0&&e<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc.reduce((d,f)=>d+f.E_(),0),r=this.Xc.reduce((d,f)=>d+f.$t(),0),l=r-30*(this.Xc.length-1);n=Math.min(l,Math.max(30,n));const a=s/r,u=i.$t();i.A_(n*a);let h=n-u,c=this.Xc.length-1;for(const d of this.Xc)if(d!==i){const f=Math.min(l,Math.max(30,d.$t()-h/c));h-=d.$t()-f,c-=1;const g=f*a;d.A_(g)}this.Ca()}Cd(e,n){Te(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc[n];this.Xc[e]=s,this.Xc[n]=i,this.Ca()}yd(e,n){if(Te(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index"),e===n)return;const[i]=this.Xc.splice(e,1);this.Xc.splice(n,0,i),this.Ca()}j_(e,n,i){e.j_(n,i)}Y_(e,n,i){e.Y_(n,i),this.ka(),this.dd(this.kd(e,2))}K_(e,n){e.K_(n),this.dd(this.kd(e,2))}Z_(e,n,i){n.Vo()||e.Z_(n,i)}G_(e,n,i){n.Vo()||(e.G_(n,i),this.ka(),this.dd(this.kd(e,2)))}X_(e,n){n.Vo()||(e.X_(n),this.dd(this.kd(e,2)))}Q_(e,n){e.Q_(n),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,n){const i=this.Et();if(i.Gi()||n===0)return;const s=i.ss();e=Math.max(1,Math.min(e,s)),i.Rc(e,n),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter(e=>e.It())),this.Qc}xa(){this.Qc=null}Ad(e,n,i,s,r){this.Ct.Bs(e,n);let l=NaN,a=this.Jh.wc(e,!0);const u=this.Jh.Ie();u!==null&&(a=Math.min(Math.max(u.Aa(),a),u.bi())),a=this.Ct.Hs(a);const h=s.Rs(),c=h.Lt();if(c!==null&&(l=h.Ds(n,c)),l=this.ad.bl(l,a,s),this.Ct.zs(a,l,s),this.Ua(),!r){const d=$f(s,e,n);this.vd(d&&{hu:d.hu,au:d.au,ou:d.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:n},i)}}Ld(e,n,i){const s=i.Rs(),r=s.Lt(),l=s.Nt(e,T(r)),a=this.Jh.ec(n,!0),u=this.Jh.qt(T(a));this.Ad(u,l,null,i,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const n=this.Ct.As(),i=this.Ct.Ls();this.Ad(n,i,null,e)}this.Ct.Ws()}Od(e,n,i){const s=this.Jh.Is(0);n!==void 0&&i!==void 0&&this.Jh.kt(n,i);const r=this.Jh.Is(0),l=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&s!==null&&r!==null){const u=a.Ee(l),h=this.cu.key(s)>this.cu.key(r),c=e!==null&&e>l&&!h,d=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=u&&(i!==void 0||d)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(c&&!f){const g=e-l;this.Jh.Mn(this.Jh.Cc()-g)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if(function(i){return i instanceof Ch}(e))return e;const n=this.Xc.find(i=>i.Dt().includes(e));return n===void 0?null:n}Sc(){this.Xc.forEach(e=>e.iu()),this.ka()}m(){this.Xc.forEach(e=>e.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,n){const i=this.ld(n);this.Wd(e,i),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const n=this.Kn(e),i=this.Jc.indexOf(e);Te(i!==-1,"Series not found");const s=T(n);this.Jc.splice(i,1),s.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(s)}Sa(e,n){const i=T(this.Kn(e));i.n_(e,!0),i.i_(e,n,!0)}Fc(){const e=Ne.Cn();e.cn(),this.dd(e)}$d(e){const n=Ne.Cn();n.pn(e),this.dd(n)}wn(){const e=Ne.Cn();e.wn(),this.dd(e)}gn(e){const n=Ne.Cn();n.gn(e),this.dd(n)}Mn(e){const n=Ne.Cn();n.Mn(e),this.dd(n)}vn(e){const n=Ne.Cn();n.vn(e),this.dd(n)}dn(){const e=Ne.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,n){if(Te(n>=0,"Index should be greater or equal to 0"),n===this.Yd(e))return;const i=T(this.Kn(e));i.n_(e);const s=this.ld(n);this.Wd(e,s),i.Sl().length===0&&this.Ud(i),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const n=this.ud,i=this.od;if(n===i)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==i||this.ed.rh!==n)this.ed={eh:i,rh:n,Zd:new Map};else{const r=this.ed.Zd.get(e);if(r!==void 0)return r}const s=this.ko.tt(i,n,e/100);return this.ed.Zd.set(e,s),s}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const n=new Ch(this.Jh,this);this.Xc.push(n);const i=e??this.Xc.length-1,s=Ne.yn();return s.hn(i,{an:0,ln:!0}),this.dd(s),n}ld(e){return Te(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex(n=>n.F_().includes(e))}kd(e,n){const i=new Ne(n);if(e!==null){const s=this.Xc.indexOf(e);i.hn(s,{an:n})}return i}fd(e,n){return n===void 0&&(n=2),this.kd(this.Kn(e),n)}dd(e){this.rd&&this.rd(e),this.Xc.forEach(n=>n.eu().pr().kt())}Wd(e,n){const i=e.N().priceScaleId,s=i!==void 0?i:this.qd();n.i_(e,s),tl(s)||e.cr(e.N())}_d(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function Df(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Jo(t){return!Pn(t)&&!ws(t)}function Wf(t){return Pn(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Nh||(Nh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Th||(Th={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(zh||(zh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Lh||(Lh={}));const Rh=t=>t.getUTCFullYear();function Dv(t,e,n){return e.replace(/yyyy/g,(i=>It(Rh(i),4))(t)).replace(/yy/g,(i=>It(Rh(i)%100,2))(t)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(i=>It((s=>s.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>It((s=>s.getUTCDate())(i),2))(t))}class Uf{constructor(e="yyyy-MM-dd",n="default"){this.Qd=e,this.tf=n}du(e){return Dv(e,this.Qd,this.tf)}}class Wv{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",It(e.getUTCHours(),2)).replace("%m",It(e.getUTCMinutes(),2)).replace("%s",It(e.getUTCSeconds(),2))}}const Uv={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Vv{constructor(e={}){const n={...Uv,...e};this.hf=new Uf(n.sf,n.rf),this.af=new Wv(n.nf),this.lf=n.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function Ks(t){return 60*t*60*1e3}function Dl(t){return 60*t*1e3}const Ys=[{_f:(Ih=1,1e3*Ih),uf:10},{_f:Dl(1),uf:20},{_f:Dl(5),uf:21},{_f:Dl(30),uf:22},{_f:Ks(1),uf:30},{_f:Ks(3),uf:31},{_f:Ks(6),uf:32},{_f:Ks(12),uf:33}];var Ih;function Fh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Ys.length-1;n>=0;--n)if(Math.floor(e.getTime()/Ys[n]._f)!==Math.floor(t.getTime()/Ys[n]._f))return Ys[n].uf;return 0}function Wl(t){let e=t;if(ws(t)&&(e=Qa(t)),!Jo(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(n.getTime()/1e3),df:e}}function Bh(t){if(!Wf(t))throw new Error("time must be of type isUTCTimestamp");return{cf:t}}function Qa(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Ah(t){ws(t.time)&&(t.time=Qa(t.time))}class Oh{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(Ah)}(e):Ah(e)}createConverterToInternalObj(e){return T(function(n){return n.length===0?null:Jo(n[0].time)||ws(n[0].time)?Wl:Bh}(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.df===void 0?new Date(1e3*n.cf).getTime():new Date(Date.UTC(n.df.year,n.df.month-1,n.df.day)).getTime()}convertHorzItemToInternal(e){return Wf(n=e)?Bh(n):Jo(n)?Wl(n):Wl(Qa(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Vv({sf:n,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new Uf(n,e.locale)}formatHorzItem(e){const n=e;return this.ff.du(new Date(1e3*n.cf))}formatTickmark(e,n){const i=function(r,l,a){switch(r){case 0:case 10:return l?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return l?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const r=s.tickMarkFormatter(e.originalTime,i,n.locale);if(r!==null)return r}return function(r,l,a){const u={};switch(l){case 0:u.year="numeric";break;case 1:u.month="short";break;case 2:u.day="numeric";break;case 3:u.hour12=!1,u.hour="2-digit",u.minute="2-digit";break;case 4:u.hour12=!1,u.hour="2-digit",u.minute="2-digit",u.second="2-digit"}const h=r.df===void 0?new Date(1e3*r.cf):new Date(Date.UTC(r.df.year,r.df.month-1,r.df.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(a,u)}(e.time,i,n.locale)}maxTickMarkWeight(e){let n=e.reduce(Av,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(i,s=0){if(i.length===0)return;let r=s===0?null:i[s-1].time.cf,l=r!==null?new Date(1e3*r):null,a=0;for(let u=s;u<i.length;++u){const h=i[u],c=new Date(1e3*h.time.cf);l!==null&&(h.timeWeight=Fh(c,l)),a+=h.time.cf-(r||h.time.cf),r=h.time.cf,l=c}if(s===0&&i.length>1){const u=Math.ceil(a/(i.length-1)),h=new Date(1e3*(i[0].time.cf-u));i[0].timeWeight=Fh(new Date(1e3*i[0].time.cf),h)}})(e,n)}static pf(e){return tt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const mi=typeof window<"u";function $h(){return!!mi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Ul(){return!!mi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Qo(t){return t+t%2}function Hv(t){mi&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class sl{constructor(e,n,i){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Ul(),this.Uf=s=>{this.$f(s)},this.qf=s=>{if(this.jf(s)){const r=this.Yf(s);if(++this.gf,this.Mf&&this.gf>1){const{Kf:l}=this.Zf(kt(s),this.bf);l<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}}else{const r=this.Yf(s);if(++this.vf,this.mf&&this.vf>1){const{Kf:l}=this.Zf(kt(s),this.wf);l<5&&!this.Pf&&this.tp(r,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=n,this.Ps=i,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const n=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",n)},this.np.addEventListener("mousemove",n),this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const n=this.Yf(e);this.tp(n,this.Jf.op),this.Hf=!0}_p(e){const n=Vl(e.changedTouches,T(this.Wf));if(n===null||(this.Ff=Js(e),this.Af!==null)||this.Of)return;this.zf=!0;const i=this.Zf(kt(n),T(this.yf)),{up:s,cp:r,Kf:l}=i;if(this.kf||!(l<5)){if(!this.kf){const a=.5*s,u=r>=a&&!this.Ps.dp(),h=a>r&&!this.Ps.fp();u||h||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(e,n);this.Gf(a,this.Jf.pp),Bn(e)}}}vp(e){if(e.button!==0)return;const n=this.Zf(kt(e),T(this.Cf)),{Kf:i}=n;if(i>=5&&(this.Pf=!0,this.sp()),this.Pf){const s=this.Yf(e);this.tp(s,this.Jf.mp)}}Zf(e,n){const i=Math.abs(n._t-e._t),s=Math.abs(n.ut-e.ut);return{up:i,cp:s,Kf:i+s}}wp(e){let n=Vl(e.changedTouches,T(this.Wf));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Wf=null,this.Ff=Js(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const i=this.Yf(e,n);if(this.Gf(i,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:s}=this.Zf(kt(n),this.bf);s<30&&!this.Tf&&this.Gf(i,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(i,this.Jf.Mp),this.Jf.Mp&&Bn(e));this.gf===0&&Bn(e),e.touches.length===0&&this.xf&&(this.xf=!1,Bn(e))}$f(e){if(e.button!==0)return;const n=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),$h()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(n,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:i}=this.Zf(kt(e),this.wf);i<5&&!this.Pf&&this.tp(n,this.Jf.ip),this.sp()}else this.Pf||this.tp(n,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const n=e.changedTouches[0];this.Wf=n.identifier,this.Ff=Js(e);const i=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=kt(n),this.Ef&&(this.Ef(),this.Ef=null);{const r=this._p.bind(this),l=this.wp.bind(this);this.Ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",l)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",l,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const s=this.Yf(e,n);this.Gf(s,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=kt(n))}kp(e){if(e.button!==0)return;const n=this.np.ownerDocument.documentElement;$h()&&n.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=kt(e),this.Bf&&(this.Bf(),this.Bf=null);{const s=this.vp.bind(this),r=this.$f.bind(this);this.Bf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",r)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",r)}if(this.Nf=!0,this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=kt(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,n=i=>{this.Jf.Tp&&(i.composed&&this.np.contains(i.composedPath()[0])||i.target&&this.np.contains(i.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",n)},this.Rf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Ul()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Hv(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",e=>this.Ep(e.touches),{passive:!0}),this.np.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const n=Dh(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,n),Bn(e)}},{passive:!1}),this.np.addEventListener("touchend",e=>{this.Ep(e.touches)}))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const n=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Lf=Dh(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const n=this.Yf(e);this.tp(n,this.Jf.zp),this.Hf=!Ul()}Cp(e){const n=Vl(e.touches,T(this.Wf));if(n===null)return;const i=this.Yf(e,n);this.Gf(i,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Js(e)<this.Ff+500}Gf(e,n){n&&n.call(this.Jf,e)}tp(e,n){n&&n.call(this.Jf,e)}Yf(e,n){const i=n||e,s=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:i.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Bn(e)}}}}function Dh(t,e){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function Bn(t){t.cancelable&&t.preventDefault()}function kt(t){return{_t:t.pageX,ut:t.pageY}}function Js(t){return t.timeStamp||performance.now()}function Vl(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class Kv{constructor(e,n,i){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[n],this.Gp=e.Zp()[i],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return le({width:this.Kp.sv().width,height:1})}nv(){return le({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,n,i){const s=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(n,i,s.width,s.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.Jp.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Jp.appendChild(i);const r={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new sl(i,r,{dp:()=>!1,fp:()=>!0}),this.Up={hv:i,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const n=this.Kp.cv().E_()+this.Gp.cv().E_(),i=n/(this.Kp.sv().height+this.Gp.sv().height),s=30*i;n<=2*s||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:n-s,vv:n,mv:i,wv:s},this.Up.rv.style.display="block")}_v(e){const n=this.jp;if(n===null)return;const i=(e.pageY-n.dv)*n.mv,s=Vi(n.fv+i,n.wv,n.pv);this.Kp.cv().A_(s),this.Gp.cv().A_(n.vv-s),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function Hl(t,e){return t.gv-e.gv}function Kl(t,e,n){const i=(t.gv-e.gv)/(t.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),n)}class Yv{constructor(e,n,i,s){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=n,this.Rv=i,this.kn=s}Dv(e,n){if(this.Mv!==null){if(this.Mv.wt===n)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:n,gv:e}}fe(e,n){if(this.Mv===null||this.bv===null||n-this.Mv.wt>50)return;let i=0;const s=Kl(this.Mv,this.bv,this.Tv),r=Hl(this.Mv,this.bv),l=[s],a=[r];if(i+=r,this.Sv!==null){const h=Kl(this.bv,this.Sv,this.Tv);if(Math.sign(h)===Math.sign(s)){const c=Hl(this.bv,this.Sv);if(l.push(h),a.push(c),i+=c,this.xv!==null){const d=Kl(this.Sv,this.xv,this.Tv);if(Math.sign(d)===Math.sign(s)){const f=Hl(this.Sv,this.xv);l.push(d),a.push(f),i+=f}}}}let u=0;for(let h=0;h<l.length;++h)u+=a[h]/i*l[h];Math.abs(u)<this.Pv||(this.Cv={gv:e,wt:n},this.kv=u,this.yv=function(h,c){const d=Math.log(c);return Math.log(1*d/-h)/d}(Math.abs(u),this.Rv))}Ac(e){const n=T(this.Cv),i=e-n.wt;return n.gv+this.kv*(Math.pow(this.Rv,i)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const n=e-T(this.Cv).wt;return Math.min(n,this.yv)}}class Jv{constructor(e,n){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=n,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Nn(t,e){const n=T(t.ownerDocument).createElement("canvas");t.appendChild(n);const i=Tg(n,{options:{allowResizeObserver:!0},transform:(s,r)=>({width:Math.max(s.width,r.width),height:Math.max(s.height,r.height)})});return i.resizeCanvasElement(e),i}function Tn(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Go(t,e,n,i){t.Uh&&t.Uh(e,n,i)}function ar(t,e,n,i){t.nt(e,n,i)}function Xo(t,e,n,i){const s=t(n,i);for(const r of s){const l=r.Tt(i);l!==null&&e(l)}}function Yl(t,e){return n=>{var i,s;return function(r){return r.Ft!==void 0}(n)?(((i=n.Ft())==null?void 0:i.ol())??"")!==e?[]:((s=n.Ya)==null?void 0:s.call(n,t))??[]:[]}}function Wh(t,e,n,i){if(!t.length)return;let s=0;const r=t[0].$t(i,!0);let l=e===1?n/2-(t[0].Hi()-r/2):t[0].Hi()-r/2-n/2;l=Math.max(0,l);for(let a=1;a<t.length;a++){const u=t[a],h=t[a-1],c=h.$t(i,!1),d=u.Hi(),f=h.Hi();if(e===1?d>f-c:d<f+c){const g=f-c*e;u.Ui(g);const v=g-e*c/2;if((e===1?v<0:v>n)&&l>0){const x=e===1?-1-v:v-n,P=Math.min(x,l);for(let m=s;m<t.length;m++)t[m].Ui(t[m].Hi()+e*P);l-=P}}else s=a,l=e===1?f-c-d:d-(f+c)}}class Uh{constructor(e,n,i,s){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new ps(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=n,this.Co=n.layout,this.hd=i,this.Jv=s==="left",this.Qv=Yl("normal",s),this.tm=Yl("top",s),this.im=Yl("bottom",s),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Nn(this.Jp,le({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=Nn(this.Jp,le({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const l=this.nm.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new sl(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Tn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Tn(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const n=this.lm(),i=T(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));i.save();const s=this.Ki.Vl();i.font=this._m(),s.length>0&&(e=Math.max(this.qv.Ii(i,s[0].Jl),this.qv.Ii(i,s[s.length-1].Jl)));const r=this.um();for(let h=r.length;h--;){const c=this.qv.Ii(i,r[h].ri());c>e&&(e=c)}const l=this.Ki.Lt();if(l!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const h=this.Ki.Ds(1,l),c=this.Ki.Ds(this.Uv.height-2,l);e=Math.max(e,this.qv.Ii(i,this.Ki.Ji(Math.floor(Math.min(h,c))+.11111111111111,l)),this.qv.Ii(i,this.Ki.Ji(Math.ceil(Math.max(h,c))-.11111111111111,l)))}var a;i.restore();const u=e||34;return Qo(Math.ceil(n.S+n.C+n.V+n.B+5+u))}dm(e){this.Uv!==null&&_n(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return T(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,T(this.Ft()))}pm(e){if(this.Uv===null)return;const n={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const s=Cn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r)}),this.yt.Mm(s,this.im),this.bm(s),this.yt.Mm(s,this.Qv),this.Sm(s))}this.nm.applySuggestedBitmapSize();const i=Cn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.xm(i),this.yt.Mm(i,this.tm))}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const l=this.nm.canvasElement;e.drawImage(l,n,i)}}kt(){var e;(e=this.Ki)==null||e.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!0,n.j_(i,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv(),s=this.Ki;n.Y_(i,s,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv(),i=this.Ki;this.$v&&(this.$v=!1,e.K_(n,i))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!1,n.K_(i,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],n=this.Ki===null?void 0:this.Ki;return(i=>{for(let s=0;s<i.length;++s){const r=i[s].Ks(this.yt.cv(),n);for(let l=0;l<r.length;l++)e.push(r[l])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.yt.cv().Qt(),l=r.$(),a=r.Kd();l===a?qr(e,0,0,i,s,l):Pf(e,0,0,i,s,l,a)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const s=Math.max(1,Math.floor(this.lm().S*i));let r;r=this.Jv?n.width-s:0,e.fillRect(r,0,s,n.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const n=this.Ki.Vl(),i=this.Ki.N(),s=this.lm(),r=this.Jv?this.Uv.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:a,verticalPixelRatio:u})=>{l.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(u)),c=Math.floor(.5*u),d=Math.round(s.C*a);l.beginPath();for(const f of n)l.rect(Math.floor(r*a),Math.round(f.Pl*u)-c,d,h);l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{l.font=this._m(),l.fillStyle=i.textColor??this.Co.textColor,l.textAlign=this.Jv?"right":"left",l.textBaseline="middle";const a=this.Jv?Math.round(r-s.V):Math.round(r+s.C+s.V),u=n.map(h=>this.qv.Di(l,h.Jl));for(let h=n.length;h--;){const c=n[h];l.fillText(c.Jl,a,c.Pl+u[h])}})}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const n=[],i=this.Ki.Dt().slice(),s=this.yt.cv(),r=this.lm();this.Ki===s.Gn()&&this.yt.cv().Dt().forEach(u=>{s.Zn(u)&&i.push(u)});const l=this.Ki.Sl()[0],a=this.Ki;i.forEach(u=>{const h=u.Ks(s,a);h.forEach(c=>{c.$i()&&c.Wi()===null&&(c.Ui(null),n.push(c))}),l===u&&h.length>0&&(e=h[0].Ei())}),this.Ki.N().alignLabels&&this.ym(n,r,e)}ym(e,n,i){if(this.Uv===null)return;const s=e.filter(l=>l.Ei()<=i),r=e.filter(l=>l.Ei()>i);s.sort((l,a)=>a.Ei()-l.Ei()),s.length&&r.length&&r.push(s[0]),r.sort((l,a)=>l.Ei()-a.Ei());for(const l of e){const a=Math.floor(l.$t(n)/2),u=l.Ei();u>-a&&u<a&&l.Ui(a),u>this.Uv.height-a&&u<this.Uv.height+a&&l.Ui(this.Uv.height-a)}Wh(s,1,this.Uv.height,n),Wh(r,-1,this.Uv.height,n)}Sm(e){if(this.Uv===null)return;const n=this.um(),i=this.lm(),s=this.Jv?"right":"left";n.forEach(r=>{r.qi()&&r.Tt(T(this.Ki)).nt(e,i,this.qv,s)})}xm(e){if(this.Uv===null||this.Ki===null)return;const n=this.yt.Gv().Qt(),i=[],s=this.yt.cv(),r=n.gd().Ks(s,this.Ki);r.length&&i.push(r);const l=this.lm(),a=this.Jv?"right":"left";i.forEach(u=>{u.forEach(h=>{h.Tt(T(this.Ki)).nt(e,l,this.qv,a)})})}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return fs(this.Co.fontSize,this.Co.fontFamily)}}function Qv(t,e){var n;return((n=t.qa)==null?void 0:n.call(t,e))??[]}function Vh(t,e){var n;return((n=t.Ys)==null?void 0:n.call(t,e))??[]}function Hh(t,e){var n;return((n=t.ds)==null?void 0:n.call(t,e))??[]}function Gv(t,e){var n;return((n=t.Ha)==null?void 0:n.call(t,e))??[]}class Ga{constructor(e,n){this.Uv=le({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new _e,this.Vm=new _e,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=n,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(i),this.sm=Nn(i,le({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Nn(i,le({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new sl(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Tn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Tn(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return T(this.Nm)}qm(e){var n;this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(Ga.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new Jv(this.Wm,this.Lv),this.Tm.kt()):((n=this.Tm)==null||n.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(T(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(T(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const n={x:e.localX,y:e.localY};this.iw(n,n,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,n){if(!this.Lv.N().handleScale.pinch)return;const i=5*(n-this.Bm);this.Bm=n,this.ns().Td(e._t,i)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const n=this.ns().gd();this.Am!==null&&n.It()&&(this.zm={x:n.si(),y:n.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const n=e.localX,i=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const s=T(this.zm),r=s.x+(n-this.Am.x),l=s.y+(i-this.Am.y);this.Zm(r,l,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,n){const i=this.Nm;return i===null?null:$f(i,e,n)}hw(e,n){T(n==="left"?this.km:this.Pm).dm(le({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){_n(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=T(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const n of e.Sl())if(e.Zn(n)){const i=n.Ft();i!==null&&e.H_(i),n.Ws()}for(const n of e.ru())n.Ws()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const l=this.nm.canvasElement;e!==null&&e.drawImage(l,n,i)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const n={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=Cn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r)}),this.Nm&&(this.lw(s,Qv),this.ow(s),this.lw(s,Vh),this.lw(s,Hh)))}this.nm.applySuggestedBitmapSize();const i=Cn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this._w(i),this.lw(i,Gv),this.lw(i,Hh))}uw(){return this.km}cw(){return this.Pm}Mm(e,n){this.lw(e,n)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,n){const i=n.localX,s=n.localY;e.v()&&e.p(this.ns().Et().wc(i),{x:i,y:s},n)}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.ns(),l=r.$(),a=r.Kd();l===a?qr(e,0,0,i,s,a):Pf(e,0,0,i,s,l,a)}ow(e){const n=T(this.Nm),i=n.eu().pr().Tt(n);i!==null&&i.nt(e,!1)}_w(e){this.dw(e,Vh,ar,this.ns().gd())}lw(e,n){const i=T(this.Nm),s=i.Dt(),r=i.ru();for(const l of r)this.dw(e,n,Go,l);for(const l of s)this.dw(e,n,Go,l);for(const l of r)this.dw(e,n,ar,l);for(const l of s)this.dw(e,n,ar,l)}dw(e,n,i,s){const r=T(this.Nm),l=r.Qt().pd(),a=l!==null&&l.hu===s,u=l!==null&&a&&l.au!==void 0?l.au.ie:void 0;Xo(n,h=>i(h,e,a,u),s,r)}jm(){if(this.Nm===null)return;const e=this.Lv,n=this.Nm.U_().N().visible,i=this.Nm.q_().N().visible;n||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),i||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const s=e.Qt().Nd();n&&this.km===null&&(this.km=new Uh(this,e.N(),s,"left"),this.Hm.appendChild(this.km.iv())),i&&this.Pm===null&&(this.Pm=new Uh(this,e.N(),s,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,n,i){e=Math.max(0,Math.min(e,this.Uv.width-1)),n=Math.max(0,Math.min(n,this.Uv.height-1)),this.ns().Ad(e,n,i,T(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,n,i){this.Am=e,this.Lm=!1,this.Zm(n.x,n.y,i);const s=this.ns().gd();this.zm={x:s.si(),y:s.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const n=this.ns(),i=this.cv();if(n.X_(i,i.Rs()),this.Rm=null,this.Dm=!1,n.Vd(),this.Om!==null){const s=performance.now(),r=n.Et();this.Om.fe(r.Cc(),s),this.Om.Ec(s)||n.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)T(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const n=this.ns(),i=n.Et();if(i.Gi())return;const s=this.Lv.N(),r=s.handleScroll,l=s.kineticScroll;if((!r.pressedMouseMove||e.Np)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Np))return;const a=this.Nm.Rs(),u=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:u,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&l.touch||!e.Np&&l.mouse){const h=i.ul();this.Om=new Yv(.2/h,7/h,.997,15/h),this.Om.Dv(i.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||n.Z_(this.Nm,a,e.localY),n.Dd(e.localX),this.Dm=!0}this.Dm&&(a.Gi()||n.G_(this.Nm,a,e.localY),n.Id(e.localX),this.Om!==null&&this.Om.Dv(i.Cc(),u))}}class Kh{constructor(e,n,i,s,r){this.xt=!0,this.Uv=le({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=i.Nd,this.Ps=n,this.ww=s,this.gw=r,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Nn(this.Jp,le({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Tn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){_n(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const n=Cn(this.sm,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(i=>{this.wm(i),this.gm(i)})}nv(){return this.sm.bitmapSize}ev(e,n,i){const s=this.nv();s.width>0&&s.height>0&&e.drawImage(this.sm.canvasElement,n,i)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.hd.N().S*i),l=Math.floor(this.hd.N().S*s),a=this.Jv?n.width-r:0;e.fillRect(a,0,r,l)}wm({context:e,bitmapSize:n}){qr(e,0,0,n.width,n.height,this.gw())}}function Xa(t){return e=>{var n;return((n=e.Ka)==null?void 0:n.call(e,t))??[]}}const Xv=Xa("normal"),Zv=Xa("top"),qv=Xa("bottom");class ey{constructor(e,n){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=le({width:0,height:0}),this.xw=new _e,this.qv=new ps(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=n,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Nn(this.kw,le({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const i=this.sm.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.nm=Nn(this.kw,le({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const s=this.nm.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new sl(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Tn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Tn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,n,i){_n(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(le({width:n,height:e.height})),this.bw!==null&&this.bw.dm(le({width:i,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const l=this.nm.canvasElement;e.drawImage(l,n,i)}}pm(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=Cn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r),this.Aw(s,qv)}),this.bm(s),this.Aw(s,Xv)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const i=Cn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],i),this.Aw(i,Zv))}Aw(e,n){const i=this.Lv.Qt().tn();for(const s of i)Xo(n,r=>Go(r,e,!1,void 0),s,void 0);for(const s of i)Xo(n,r=>ar(r,e,!1,void 0),s,void 0)}wm({context:e,bitmapSize:n}){qr(e,0,0,n.width,n.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:n,verticalPixelRatio:i}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const s=Math.max(1,Math.floor(this.Bw().S*i));e.fillRect(0,0,n.width,s)}}bm(e){const n=this.Lv.Qt().Et(),i=n.Vl();if(!i||i.length===0)return;const s=this.cu.maxTickMarkWeight(i),r=this.Bw(),l=n.N();l.borderVisible&&l.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:u,verticalPixelRatio:h})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const c=Math.max(1,Math.floor(u)),d=Math.floor(.5*u);a.beginPath();const f=Math.round(r.C*h);for(let g=i.length;g--;){const v=Math.round(i[g].coord*u);a.rect(v-d,0,c,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const u=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const h of i)if(h.weight<s){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const h of i)if(h.weight>=s){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}})}Ow(e,n,i){const s=this.qv.Ii(e,i),r=s/2,l=Math.floor(n-r)+.5;return l<0?n+=Math.abs(0-l):l+s>this.Uv.width&&(n-=Math.abs(this.Uv.width-(l+s))),n}Lw(e,n){const i=this.Bw();for(const s of e)for(const r of s.fs())r.Tt().nt(n,i)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return fs(this.F(),this.Ps.fontFamily)}Nw(){return fs(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new ps,Ew:0});const e=this.M,n=this._m();if(e.P!==n){const i=this.F();e.k=i,e.P=n,e.A=3*i/12,e.I=3*i/12,e.ts=9*i/12,e.L=0,e.Ew=4*i/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),n=e.N();n.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),n.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const i={Nd:this.Lv.Qt().Nd()},s=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,r=()=>e.Kd();n.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new Kh("left",n,i,s,r),this.Cw.appendChild(this.Mw.iv())),n.rightPriceScale.visible&&this.bw===null&&(this.bw=new Kh("right",n,i,s,r),this.yw.appendChild(this.bw.iv()))}}var dc;const ty=!!mi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!mi&&((dc=navigator==null?void 0:navigator.userAgentData)!=null&&dc.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class ny{constructor(e,n,i){var s;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new _e,this.Vm=new _e,this.nd=new _e,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=n,this.cu=i,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(s=this.Vv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Jl(this.Ps)&&this.Jw(!0),this.ns=new $v(this.rd.bind(this),this.Ps,i),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new ey(this,this.cu),this.Zw.appendChild(this.tg.iv());const r=n.autoSize&&this.ig();let l=this.Ps.width,a=this.Ps.height;if(r||l===0||a===0){const u=e.getBoundingClientRect();l=l||u.width,a=a||u.height}this.sg(l,a),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],T(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,n,i=!1){if(this.eo===n&&this.S_===e)return;const s=function(a){const u=Math.floor(a.width),h=Math.floor(a.height);return le({width:u-u%2,height:h-h%2})}(le({width:e,height:n}));this.eo=s.height,this.S_=s.width;const r=this.eo+"px",l=this.S_+"px";T(this.Vv).style.height=r,T(this.Vv).style.width=l,this.Zw.style.height=r,this.Zw.style.width=l,i?this.lg(Ne.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=Ne.yn());for(let n=0;n<this.Fw.length;n++)this.Fw[n].pm(e.un(n).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){var s;const n=Jl(this.Ps);this.ns.cr(e);const i=Jl(this.Ps);i!==n&&this.Jw(i),(s=e.layout)!=null&&s.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const n=this.cg(null),i=document.createElement("canvas");i.width=n.width,i.height=n.height;const s=T(i.getContext("2d"));return this.cg(s,e),i}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:T(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return Ge(this.Fw[e]).sv()}og(){this.Ww.forEach(e=>{e.kt()})}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,n){let i=0,s=0;const r=this.Fw[0],l=(u,h)=>{let c=0;for(let d=0;d<this.Fw.length;d++){const f=this.Fw[d],g=T(u==="left"?f.uw():f.cw()),v=g.nv();if(e!==null&&g.ev(e,h,c,n),c+=v.height,d<this.Fw.length-1){const x=this.Ww[d],P=x.nv();e!==null&&x.ev(e,h,c),c+=P.height}}};this.fg()&&(l("left",0),i+=T(r.uw()).nv().width);for(let u=0;u<this.Fw.length;u++){const h=this.Fw[u],c=h.nv();if(e!==null&&h.ev(e,i,s,n),s+=c.height,u<this.Fw.length-1){const d=this.Ww[u],f=d.nv();e!==null&&d.ev(e,i,s),s+=f.height}}i+=r.nv().width,this.pg()&&(l("right",i),i+=T(r.cw()).nv().width);const a=(u,h,c)=>{T(u==="left"?this.tg.Tw():this.tg.Rw()).ev(T(e),h,c)};if(this.Ps.timeScale.visible){const u=this.tg.nv();if(e!==null){let h=0;this.fg()&&(a("left",h,s),h=T(r.uw()).nv().width),this.tg.ev(e,h,s,n),h+=u.width,this.pg()&&a("right",h,s)}s+=u.height}return le({width:i,height:s})}Mg(){let e=0,n=0,i=0;for(const P of this.Fw)this.fg()&&(n=Math.max(n,T(P.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(i=Math.max(i,T(P.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=P.E_();n=Qo(n),i=Qo(i);const s=this.S_,r=this.eo,l=Math.max(s-n-i,0),a=1*this.Ww.length,u=this.Ps.timeScale.visible;let h=u?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var c;h=(c=h)+c%2;const d=a+h,f=r<d?0:r-d,g=f/e;let v=0;const x=window.devicePixelRatio||1;for(let P=0;P<this.Fw.length;++P){const m=this.Fw[P];m.qm(this.ns.Xs()[P]);let p=0,y=0;y=P===this.Fw.length-1?Math.ceil((f-v)*x)/x:Math.round(m.E_()*g*x)/x,p=Math.max(y,2),v+=p,m.dm(le({width:l,height:p})),this.fg()&&m.hw(n,"left"),this.pg()&&m.hw(i,"right"),m.cv()&&this.ns.bd(m.cv(),p)}this.tg.Iw(le({width:u?l:0,height:h}),u?n:0,u?i:0),this.ns.L_(l),this.Uw!==n&&(this.Uw=n),this.$w!==i&&(this.$w=i)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return ty?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.bg(e),i=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(s)*Math.min(1,Math.abs(s)),l=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(l,r)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*i)}lg(e,n){var s;const i=e._n();i===3&&this.Sg(),i!==3&&i!==2||(this.xg(e),this.Cg(e,n),this.tg.kt(),this.Fw.forEach(r=>{r.Ym()}),((s=this.qw)==null?void 0:s._n())===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,n),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,n){for(const i of e.bn())this.xn(i,n)}xg(e){const n=this.ns.Xs();for(let i=0;i<n.length;i++)e.un(i).ln&&n[i].tu()}xn(e,n){const i=this.ns.Et();switch(e.fn){case 0:i.Fc();break;case 1:i.Wc(e.Wt);break;case 2:i.gn(e.Wt);break;case 3:i.Mn(e.Wt);break;case 4:i.Pc();break;case 5:e.Wt.Ec(n)||i.Mn(e.Wt.Ac(n))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(n=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const i=this.qw;this.qw=null,this.lg(i,n);for(const s of i.bn())if(s.fn===5&&!s.Wt.Ec(n)){this.Qt().vn(s.Wt);break}}}))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),n=e.length,i=this.Fw.length;for(let s=n;s<i;s++){const r=Ge(this.Fw.pop());this.Zw.removeChild(r.iv()),r.nw().u(this),r.ew().u(this),r.m();const l=this.Ww.pop();l!==void 0&&this.hg(l)}for(let s=i;s<n;s++){const r=new Ga(this,e[s]);if(r.nw().i(this.yg.bind(this,r),this),r.ew().i(this.kg.bind(this,r),this),this.Fw.push(r),s>0){const l=new Kv(this,s-1,s);this.Ww.push(l),this.Zw.insertBefore(l.iv(),this.tg.iv())}this.Zw.insertBefore(r.iv(),this.tg.iv())}for(let s=0;s<n;s++){const r=e[s],l=this.Fw[s];l.cv()!==r?l.qm(r):l.$m()}this.eg(),this.Mg()}Pg(e,n,i,s){var d;const r=new Map;e!==null&&this.ns.tn().forEach(f=>{const g=f.qs().$s(e);g!==null&&r.set(f,g)});let l;if(e!==null){const f=(d=this.ns.Et().es(e))==null?void 0:d.originalTime;f!==void 0&&(l=f)}const a=this.Qt().pd(),u=a!==null&&a.hu instanceof il?a.hu:void 0,h=a!==null&&a.au!==void 0?a.au.te:void 0,c=this.Tg(s);return{Gr:l,js:e??void 0,Rg:n??void 0,Dg:c!==-1?c:void 0,Ig:u,Vg:r,Bg:h,Eg:i??void 0}}Tg(e){let n=-1;if(e)n=this.Fw.indexOf(e);else{const i=this.Qt().gd().Gs();i!==null&&(n=this.Qt().Xs().indexOf(i))}return n}yg(e,n,i,s){this.Im.p(()=>this.Pg(n,i,s,e))}kg(e,n,i,s){this.Vm.p(()=>this.Pg(n,i,s,e))}Qw(e,n,i){var s;this.mg(((s=this.Qt().pd())==null?void 0:s.ou)??null),this.nd.p(()=>this.Pg(e,n,i))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.sg(n.contentRect.width,n.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Jl(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function iy(t){return t.open===void 0&&t.value===void 0}function sy(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Yh(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.color!==void 0&&(r.R=n.color),r}function ry(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.lineColor!==void 0&&(r.vt=n.lineColor),n.topColor!==void 0&&(r.eh=n.topColor),n.bottomColor!==void 0&&(r.rh=n.bottomColor),r}function ly(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.topLineColor!==void 0&&(r.hh=n.topLineColor),n.bottomLineColor!==void 0&&(r.ah=n.bottomLineColor),n.topFillColor1!==void 0&&(r.oh=n.topFillColor1),n.topFillColor2!==void 0&&(r._h=n.topFillColor2),n.bottomFillColor1!==void 0&&(r.uh=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(r.dh=n.bottomFillColor2),r}function oy(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),s}function ay(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),n.borderColor!==void 0&&(s.Ht=n.borderColor),n.wickColor!==void 0&&(s.nh=n.wickColor),s}function uy(t,e,n,i,s){const r=Ge(s)(n),l=Math.max(...r),a=Math.min(...r),u=r[r.length-1],h=[u,l,a,u],{time:c,color:d,...f}=n;return{js:e,wt:t,Wt:h,Gr:i,le:f,R:d}}function An(t){return t.Wt!==void 0}function Jh(t,e){return e.customValues!==void 0&&(t.Ag=e.customValues),t}function fn(t){return(e,n,i,s,r,l)=>function(a,u){return u?u(a):iy(a)}(i,l)?Jh({wt:e,js:n,Gr:s},i):Jh(t(e,n,i,s,r),i)}function Qh(t){return{Candlestick:fn(ay),Bar:fn(oy),Area:fn(ry),Baseline:fn(ly),Histogram:fn(Yh),Line:fn(Yh),Custom:fn(uy)}[t]}function Gh(t){return{js:0,Lg:new Map,Ea:t}}function Xh(t,e){if(t!==void 0&&t.length!==0)return{zg:e.key(t[0].wt),Og:e.key(t[t.length-1].wt)}}function Zh(t){let e;return t.forEach(n=>{e===void 0&&(e=n.Gr)}),Ge(e)}class hy{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,n){let i=this.Ng.size!==0,s=!1;const r=this.Fg.get(e);if(r!==void 0)if(this.Fg.size===1)i=!1,s=!0,this.Ng.clear();else for(const u of this.Hg)u.pointData.Lg.delete(e)&&(s=!0);let l=[];if(n.length!==0){const u=n.map(g=>g.time),h=this.cu.createConverterToInternalObj(n),c=Qh(e.wh()),d=e.rl(),f=e.hl();l=n.map((g,v)=>{const x=h(g.time),P=this.cu.key(x);let m=this.Ng.get(P);m===void 0&&(m=Gh(x),this.Ng.set(P,m),s=!0);const p=c(x,m.js,g,u[v],d,f);return m.Lg.set(e,p),p})}i&&this.$g(),this.qg(e,l);let a=-1;if(s){const u=[];this.Ng.forEach(h=>{u.push({timeWeight:0,time:h.Ea,pointData:h,originalTime:Zh(h.Lg)})}),u.sort((h,c)=>this.cu.key(h.time)-this.cu.key(c.time)),a=this.jg(u)}return this.Yg(e,a,function(u,h,c){const d=Xh(u,c),f=Xh(h,c);if(d!==void 0&&f!==void 0)return{Kg:!1,Ta:d.Og>=f.Og&&d.zg>=f.zg}}(this.Fg.get(e),r,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,n,i){if(i&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const s=n;(function(m){m.Gr===void 0&&(m.Gr=m.time)})(s),this.cu.preprocessData(n);const r=this.cu.createConverterToInternalObj([n])(n.time),l=this.Wg.get(e);if(!i&&l!==void 0&&this.cu.key(r)<this.cu.key(l))throw new Error(`Cannot update oldest data, last time=${l}, new time=${r}`);let a=this.Ng.get(this.cu.key(r));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const u=a===void 0;a===void 0&&(a=Gh(r),this.Ng.set(this.cu.key(r),a));const h=Qh(e.wh()),c=e.rl(),d=e.hl(),f=h(r,a.js,n,s.Gr,c,d),g=!i&&!u&&l!==void 0&&this.cu.key(r)===this.cu.key(l);a.Lg.set(e,f),i?this.Gg(e,f,a.js):g&&e.La()&&An(f)?(e.kr(f),this.Xg(e,f)):this.Xg(e,f);const v={Ta:An(f),Kg:i};if(!u)return this.Yg(e,-1,v);const x={timeWeight:0,time:a.Ea,pointData:a,originalTime:Zh(a.Lg)},P=pi(this.Hg,this.cu.key(x.time),(m,p)=>this.cu.key(m.time)<p);this.Hg.splice(P,0,x);for(let m=P;m<this.Hg.length;++m)Qs(this.Hg[m].pointData,m);return this.cu.fillWeightsForPoints(this.Hg,P),this.Yg(e,P,v)}Jg(e,n){const i=this.Fg.get(e);if(i===void 0||n<=0)return[[],this.Qg()];n=Math.min(n,i.length);const s=i.splice(-n).reverse();i.length===0?this.Wg.delete(e):this.Wg.set(e,i[i.length-1].wt);for(const r of s){const l=this.Ng.get(this.cu.key(r.wt));if(l&&(l.Lg.delete(e),l.Lg.size===0)){this.Ng.delete(this.cu.key(l.Ea)),this.Hg.splice(l.js,1);for(let a=l.js;a<this.Hg.length;++a)Qs(this.Hg[a].pointData,a)}}return[s,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,n){let i=this.Fg.get(e);i===void 0&&(i=[],this.Fg.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.cu.key(n.wt)>this.cu.key(s.wt)?An(n)&&i.push(n):An(n)?i[i.length-1]=n:i.splice(-1,1),this.Wg.set(e,n.wt)}Gg(e,n,i){const s=this.Fg.get(e);if(s===void 0)return;const r=pi(s,i,(l,a)=>l.js<a);An(n)?s[r]=n:s.splice(r,1)}qg(e,n){n.length!==0?(this.Fg.set(e,n.filter(An)),this.Wg.set(e,n[n.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let n=-1;for(let i=0;i<this.Hg.length&&i<e.length;++i){const s=this.Hg[i],r=e[i];if(this.cu.key(s.time)!==this.cu.key(r.time)){n=i;break}r.timeWeight=s.timeWeight,Qs(r.pointData,i)}if(n===-1&&this.Hg.length!==e.length&&(n=Math.min(this.Hg.length,e.length)),n===-1)return-1;for(let i=n;i<e.length;++i)Qs(e[i].pointData,i);return this.cu.fillWeightsForPoints(e,n),this.Hg=e,n}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].js))}),e}Yg(e,n,i){const s=this.Qg();if(n!==-1)this.Fg.forEach((r,l)=>{s.F_.set(l,{le:r,iM:l===e?i:void 0})}),this.Fg.has(e)||s.F_.set(e,{le:[],iM:i}),s.Et.sM=this.Hg,s.Et.nM=n;else{const r=this.Fg.get(e);s.F_.set(e,{le:r||[],iM:i})}return s}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Qs(t,e){t.js=e,t.Lg.forEach(n=>{n.js=e})}function cy(t,e){return t.wt<e}function dy(t,e){return e<t.wt}function Vf(t,e,n){const i=e.Aa(),s=e.bi(),r=pi(t,i,cy),l=Ff(t,s,dy);if(!n)return{from:r,to:l};let a=r,u=l;return r>0&&r<t.length&&t[r].wt>=i&&(a=r-1),l>0&&l<t.length&&t[l-1].wt<=s&&(u=l+1),{from:a,to:u}}class Za{constructor(e,n,i){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=n,this._M=i}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map(e=>({...e,...this.ee.ga().gh(e.wt)}))}fM(){this.lM=null}uM(){const e=this.re.Et(),n=e.N().enableConflation?e.Hc():0;n!==this.oM&&(this.rM=!0,this.oM=n),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),n=this.re.Et();if(this.fM(),n.Gi()||e.Gi())return;const i=n.Ie();if(i===null||this.ee.qs().yh()===0)return;const s=this.ee.Lt();s!==null&&(this.lM=Vf(this.aM,i,this._M),this.mM(e,n,s.Wt),this.wM())}}class fy{constructor(e,n){this.gM=e,this.Ki=n}nt(e,n,i){this.gM.draw(e,this.Ki,n,i)}}class py extends Za{constructor(e,n,i){super(e,n,!1),this.$h=i,this.cM=new fy(this.$h.renderer(),s=>{const r=e.Lt();return r===null?null:e.Ft().Nt(s,r.Wt)})}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>({wt:n.js,_t:NaN,...e.gh(n.js),MM:n.le}))}mM(e,n){n.mc(this.aM,ds(this.lM))}wM(){this.$h.update({bars:this.aM.map(my),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function my(t){return{x:t._t,time:t.wt,originalData:t.MM,barColor:t.th}}const gy={color:"#2196f3"},vy=(t,e,n)=>{const i=Xt(n);return new py(t,e,i)};function qa(t){const e={value:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function qh(t){const e=qa(t);return t.R!==void 0&&(e.color=t.R),e}function yy(t){const e=qa(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.eh!==void 0&&(e.topColor=t.eh),t.rh!==void 0&&(e.bottomColor=t.rh),e}function xy(t){const e=qa(t);return t.hh!==void 0&&(e.topLineColor=t.hh),t.ah!==void 0&&(e.bottomLineColor=t.ah),t.oh!==void 0&&(e.topFillColor1=t.oh),t._h!==void 0&&(e.topFillColor2=t._h),t.uh!==void 0&&(e.bottomFillColor1=t.uh),t.dh!==void 0&&(e.bottomFillColor2=t.dh),e}function Hf(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function wy(t){const e=Hf(t);return t.R!==void 0&&(e.color=t.R),e}function _y(t){const e=Hf(t),{R:n,Ht:i,nh:s}=t;return n!==void 0&&(e.color=n),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function ur(t){return{Area:yy,Line:qh,Baseline:xy,Histogram:qh,Bar:wy,Candlestick:_y,Custom:Sy}[t]}function Sy(t){const e=t.Gr;return{...t.le,time:e}}const jy={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},ky={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},by={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ef,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Ql={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},My={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function ec(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:by,crosshair:jy,grid:ky,overlayPriceScales:{...Ql},leftPriceScale:{...Ql,visible:!1},rightPriceScale:{...Ql,visible:!0},timeScale:My,localization:{locale:mi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Kf{constructor(e,n,i){this.Yp=e,this.bM=n,this.SM=i??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return tl(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new We(e.from,e.to))}getVisibleRange(){let e,n,i=this.Ki().er();if(i===null)return null;if(this.Ki().io()){const s=this.Ki().m_(),r=Df(s);i=Zn(i,this.Ki().no()),e=Number((Math.round(i.Ze()/s)*s).toFixed(r)),n=Number((Math.round(i.Ge()/s)*s).toFixed(r))}else e=i.Ze(),n=i.Ge();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return T(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class Cy{constructor(e,n,i,s){this.Yp=e,this.yt=i,this.xM=n,this.CM=s}getHeight(){return this.yt.$t()}setHeight(e){const n=this.Yp.Qt(),i=n.Gd(this.yt);n.xd(i,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const n=this.paneIndex();n!==e&&(Te(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(n,e))}getSeries(){return this.yt.F_().map(e=>this.xM(e))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Kf(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,n={},i=0){return this.CM.addCustomSeries(e,n,i)}addSeries(e,n={}){return this.CM.addSeries(e,n,this.paneIndex())}}const Ey={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class tc{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class Py{constructor(e,n,i,s,r,l){this.kM=new _e,this.ee=e,this.PM=n,this.TM=i,this.cu=r,this.CM=s,this.RM=l}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Ds(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new li(new ri(e.from,e.to)).Ru(),i=this.ee.qs();if(i.Gi())return null;const s=i.$s(n.Aa(),1),r=i.$s(n.bi(),-1),l=T(i.kh()),a=T(i.sn());if(s!==null&&r!==null&&s.js>r.js)return{barsBefore:e.from-l,barsAfter:a-e.to};const u={barsBefore:s===null||s.js===l?e.from-l:s.js-l,barsAfter:r===null||r.js===a?a-e.to:a-r.js};return s!==null&&r!==null&&(u.from=s.Gr,u.to=r.Gr),u}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,n=!1){this.ee.wh(),this.PM.VM(this.ee,e,n),this.IM("update")}pop(e=1){const n=this.PM.BM(this.ee,e);n.length!==0&&this.IM("update");const i=ur(this.seriesType());return n.map(s=>i(s))}dataByIndex(e,n){const i=this.ee.qs().$s(e,n);return i===null?null:ur(this.seriesType())(i)}data(){const e=ur(this.seriesType());return this.ee.qs().Dh().map(n=>e(n))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return Rt(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const n=tt(Rt(Ey),e),i=this.ee.Da(n);return new tc(i)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map(e=>new tc(e))}seriesType(){return this.ee.wh()}lastValueData(e){const n=this.ee.Ve(e);return n.Be?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,n=T(this.ee.Qt().Kn(e));return this.RM(n)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const n=this.ee.Qt().Kn(this.ee);n!==null&&n.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class Ny{constructor(e,n,i){this.EM=new _e,this.Nu=new _e,this.xw=new _e,this.ns=e,this.Jh=e.Et(),this.tg=n,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=i}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,n){n?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},i=this.Jh.cc(n);this.ns.$d(i)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){Te(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const n=this.ns.Et();return n.Gi()?null:n.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,n){const i=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(i,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.Jh.qt(n)}coordinateToTime(e){const n=this.ns.Et(),i=n.wc(e),s=n.es(i);return s===null?null:s.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...Rt(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function nc(t){return function(e){if(Ws(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;Ws(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Ws(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;Ws(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class Ty{constructor(e,n,i){this.OM=new Map,this.NM=new Map,this.FM=new _e,this.WM=new _e,this.HM=new _e,this.Xc=new WeakMap,this.UM=new hy(n);const s=i===void 0?Rt(ec()):tt(Rt(ec()),nc(i));this.$M=n,this.Yp=new ny(e,s,n),this.Yp.nw().i(l=>{this.FM.v()&&this.FM.p(this.qM(l()))},this),this.Yp.ew().i(l=>{this.WM.v()&&this.WM.p(this.qM(l()))},this),this.Yp.Md().i(l=>{this.HM.v()&&this.HM.p(this.qM(l()))},this);const r=this.Yp.Qt();this.jM=new Ny(r,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,n,i){this.autoSizeActive()||this.Yp.sg(e,n,i)}addCustomSeries(e,n={},i=0){const s=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...gy,...r.defaultOptions()},YM:vy,KM:r}))(Xt(e));return this.ZM(s,n,i)}addSeries(e,n={},i=0){return this.ZM(e,n,i)}removeSeries(e){const n=Ge(this.OM.get(e)),i=this.UM.Hd(n);this.Yp.Qt().Hd(n),this.GM(i),this.OM.delete(e),this.NM.delete(n)}DM(e,n){this.GM(this.UM.Ug(e,n))}VM(e,n,i){this.GM(this.UM.Zg(e,n,i))}BM(e,n){const[i,s]=this.UM.Jg(e,n);return i.length!==0&&this.GM(s),i}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,n=0){return new Kf(this.Yp,e,n)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(nc(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,n=!1){let i,s;try{n||(i=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),s=this.Yp.ug(e)}finally{n||i===void 0||this.Yp.Qt().cr({crosshair:{mode:i}})}return s}addPane(e=!1){const n=this.Yp.Qt().Xd();return n.O_(e),this.XM(n)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,n){this.Yp.Qt().Cd(e,n)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(e=>this.XM(e))}paneSize(e=0){const n=this.Yp.gg(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,i){const s=this.OM.get(i);if(s===void 0)return;const r=this.Yp.Qt().Kn(s);r!==null&&this.Yp.Qt().Ld(e,n,r)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,n={},i=0){Te(e.YM!==void 0),function(u){if(u===void 0||u.type==="custom")return;const h=u;h.minMove!==void 0&&h.precision===void 0&&(h.precision=Df(h.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(u){u.borderColor!==void 0&&(u.borderUpColor=u.borderColor,u.borderDownColor=u.borderColor),u.wickColor!==void 0&&(u.wickUpColor=u.wickColor,u.wickDownColor=u.wickColor)}(n);const s=tt(Rt(Mf),Rt(e.defaultOptions),n),r=e.YM,l=new il(this.Yp.Qt(),e.type,s,r,e.KM);this.Yp.Qt().Fd(l,i);const a=new Py(l,this,this,this,this.$M,u=>this.XM(u));return this.OM.set(a,l),this.NM.set(l,a),a}GM(e){const n=this.Yp.Qt();n.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach((i,s)=>s.ht(i.le,i.iM)),n.Et().Ju(),n.Sc()}JM(e){return Ge(this.NM.get(e))}qM(e){const n=new Map;e.Vg.forEach((s,r)=>{const l=r.wh(),a=ur(l)(s);if(l!=="Custom")Te(sy(a));else{const u=r.hl();Te(!u||u(a)===!1)}n.set(this.JM(r),a)});const i=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:i,hoveredObjectId:e.Bg,seriesData:n,sourceEvent:e.Eg}}XM(e){let n=this.Xc.get(e);return n||(n=new Cy(this.Yp,i=>this.JM(i),e,this),this.Xc.set(e,n)),n}}function zy(t){if(ws(t)){const e=document.getElementById(t);return Te(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function Ly(t,e,n){const i=zy(t),s=new Ty(i,e,n);return e.setOptions(s.options()),s}function Ry(t,e){return Ly(t,new Oh,Oh.pf(e))}class Iy extends Za{constructor(e,n){super(e,n,!0)}mM(e,n,i){n.mc(this.aM,ds(this.lM)),e.Yo(this.aM,i,ds(this.lM))}QM(e,n){return{wt:e,gt:n,_t:NaN,ut:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>{let i;if((n.jr??1)>1){const s=n.Wt[1],r=n.Wt[2],l=n.Wt[3];i=Math.abs(s-l)>Math.abs(r-l)?s:r}else i=n.Wt[3];return this.tb(n.js,i,e)})}}function Fy(t,e,n,i,s,r,l){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:a,horizontalPixelRatio:u,verticalPixelRatio:h}=t,c=e[i.from];let d=r(t,c),f=c;if(i.to-i.from<2){const g=s/2;a.beginPath();const v={_t:c._t-g,ut:c.ut},x={_t:c._t+g,ut:c.ut};a.moveTo(v._t*u,v.ut*h),a.lineTo(x._t*u,x.ut*h),l(t,d,v,x)}else{const g=(x,P)=>{l(t,d,f,P),a.beginPath(),d=x,f=P};let v=f;a.beginPath(),a.moveTo(c._t*u,c.ut*h);for(let x=i.from+1;x<i.to;++x){v=e[x];const P=r(t,v);switch(n){case 0:a.lineTo(v._t*u,v.ut*h);break;case 1:a.lineTo(v._t*u,e[x-1].ut*h),P!==d&&(g(P,v),a.lineTo(v._t*u,e[x-1].ut*h)),a.lineTo(v._t*u,v.ut*h);break;case 2:{const[m,p]=By(e,x-1,x);a.bezierCurveTo(m._t*u,m.ut*h,p._t*u,p.ut*h,v._t*u,v.ut*h);break}}n!==1&&P!==d&&(g(P,v),a.moveTo(v._t*u,v.ut*h))}(f!==v||f===v&&n===1)&&l(t,d,f,v)}}const ic=6;function Gl(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function sc(t,e){return{_t:t._t/e,ut:t.ut/e}}function By(t,e,n){const i=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var r,l;return[(r=t[e],l=sc(Gl(t[n],t[i]),ic),{_t:r._t+l._t,ut:r.ut+l.ut}),Gl(t[n],sc(Gl(t[s],t[e]),ic))]}function Ay(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class Oy extends Rn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:i,ib:s,sb:r,ct:l,Zt:a,nb:u}=this.rt;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineWidth=l*e.verticalPixelRatio,En(h,a),h.lineJoin="round";const c=this.eb.bind(this);r!==void 0&&Fy(e,n,r,i,s,c,Ay),u&&function(d,f,g,v,x){if(v.to-v.from<=0)return;const{horizontalPixelRatio:P,verticalPixelRatio:m,context:p}=d;let y=null;const j=Math.max(1,Math.floor(P))%2/2,b=g*m+j;for(let M=v.to-1;M>=v.from;--M){const k=f[M];if(k){const _=x(d,k);_!==y&&(p.beginPath(),y!==null&&p.fill(),p.fillStyle=_,y=_);const C=Math.round(k._t*P)+j,F=k.ut*m;p.moveTo(C,F),p.arc(C,F,b,0,2*Math.PI)}}p.fill()}(e,n,u,i,c)}}class $y extends Oy{eb(e,n){return n.vt}}class Dy extends Iy{constructor(){super(...arguments),this.cM=new $y}tb(e,n,i){return{...this.QM(e,n),...i.gh(e)}}wM(){const e=this.ee.N(),n={ot:this.aM,Zt:e.lineStyle,sb:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,nb:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(n)}}const Xl={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(t,e)=>new Dy(t,e)};class Wy extends Za{constructor(e,n){super(e,n,!1)}mM(e,n,i){n.mc(this.aM,ds(this.lM)),e.Zo(this.aM,i,ds(this.lM))}Lb(e,n,i){return{wt:e,Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>this.tb(n.js,n,e))}}class Uy extends Rn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(e){this.jt=e}et(e){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:n}=e;this.Ib=function(r,l){if(r>=2.5&&r<=4)return Math.floor(3*l);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),u=Math.floor(r*a*l),h=Math.floor(r*l),c=Math.min(u,h);return Math.max(Math.floor(l),c)}(this.jt.ul,n),this.Ib>=2&&Math.floor(n)%2!=this.Ib%2&&this.Ib--;const i=this.jt.qs;this.jt.zb&&this.Ob(e,i,this.jt.lt),this.jt.Mi&&this.gm(e,i,this.jt.lt);const s=this.Nb(n);(!this.jt.Mi||this.Ib>2*s)&&this.Fb(e,i,this.jt.lt)}Ob(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:l}=e;let a="",u=Math.min(Math.floor(r),Math.floor(this.jt.ul*r));u=Math.max(Math.floor(r),Math.min(u,this.Ib));const h=Math.floor(.5*u);let c=null;for(let d=i.from;d<i.to;d++){const f=n[d];f.sh!==a&&(s.fillStyle=f.sh,a=f.sh);const g=Math.round(Math.min(f.Go,f.Qo)*l),v=Math.round(Math.max(f.Go,f.Qo)*l),x=Math.round(f.Xo*l),P=Math.round(f.Jo*l);let m=Math.round(r*f._t)-h;const p=m+u-1;c!==null&&(m=Math.max(c+1,m),m=Math.min(m,p));const y=p-m+1;s.fillRect(m,x,y,g-x),s.fillRect(m,v+1,y,P-v),c=p}}Nb(e){let n=Math.floor(1*e);this.Ib<=2*n&&(n=Math.floor(.5*(this.Ib-1)));const i=Math.max(Math.floor(e),n);return this.Ib<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}gm(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:l}=e;let a="";const u=this.Nb(r);let h=null;for(let c=i.from;c<i.to;c++){const d=n[c];d.ih!==a&&(s.fillStyle=d.ih,a=d.ih);let f=Math.round(d._t*r)-Math.floor(.5*this.Ib);const g=f+this.Ib-1,v=Math.round(Math.min(d.Go,d.Qo)*l),x=Math.round(Math.max(d.Go,d.Qo)*l);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,g)),this.jt.ul*r>2*u)Vg(s,f,v,g-f+1,x-v+1,u);else{const P=g-f+1;s.fillRect(f,v,P,x-v+1)}h=g}}Fb(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:l}=e;let a="";const u=this.Nb(r);for(let h=i.from;h<i.to;h++){const c=n[h];let d=Math.round(Math.min(c.Go,c.Qo)*l),f=Math.round(Math.max(c.Go,c.Qo)*l),g=Math.round(c._t*r)-Math.floor(.5*this.Ib),v=g+this.Ib-1;if(c.th!==a){const x=c.th;s.fillStyle=x,a=x}this.jt.Mi&&(g+=u,d+=u,v-=u,f-=u),d>f||s.fillRect(g,d,v-g+1,f-d+1)}}}class Vy extends Wy{constructor(){super(...arguments),this.cM=new Uy}tb(e,n,i){return{...this.Lb(e,n,i),...i.gh(e)}}wM(){const e=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:e.wickVisible,Mi:e.borderVisible,lt:this.lM})}}const Hy={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(t,e)=>new Vy(t,e)};class Ky{constructor(e,n){this.ee=e,this.Zh=n,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(e){this.Zh&&this.Zh.cr&&this.Zh.cr(e)}jb(){this.ee.attachPrimitive(this.Zh)}}const Yy={autoScale:!0,zOrder:"normal"};function Yi(t,e){return Ja(Math.min(Math.max(t,12),30)*e)}function gi(t,e){switch(t){case"arrowDown":case"arrowUp":return Yi(e,1);case"circle":return Yi(e,.8);case"square":return Yi(e,.7)}}function Yf(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(Yi(t,1))}function Jf(t){return Math.max(Yi(t,.1),3)}function rc(t,e,n){return e?t:n?Math.ceil(t/2):0}function lc(t,e,n,i){const s=(gi("arrowUp",i)-1)/2*n.pS,r=(Ja(i/2)-1)/2*n.pS;e.beginPath(),t?(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut-s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut+s),e.lineTo(n._t-r,n.ut+s),e.lineTo(n._t-r,n.ut)):(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut+s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut-s),e.lineTo(n._t-r,n.ut-s),e.lineTo(n._t-r,n.ut)),e.fill()}function oc(t,e,n,i,s,r){const l=(gi("arrowUp",i)-1)/2,a=(Ja(i/2)-1)/2;return s>=e-a-2&&s<=e+a+2&&r>=(t?n:n-l)-2&&r<=(t?n+l:n)+2?!0:(()=>{if(s<e-l-3||s>e+l+3||r<(t?n-l-3:n)||r>(t?n:n+l+3))return!1;const u=Math.abs(s-e);return Math.abs(r-n)+3>=u/2})()}class Jy{constructor(){this.jt=null,this.$n=new ps,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(e){this.jt=e}qn(e,n,i){this.F===e&&this.W===n||(this.F=e,this.W=n,this.jv=fs(e,n),this.$n.On()),this.vS=i}Qn(e,n){if(this.jt===null||this.jt.lt===null)return null;for(let i=this.jt.lt.from;i<this.jt.lt.to;i++){const s=this.jt.ot[i];if(s&&Gy(s,e,n))return{zOrder:"normal",externalId:s.te??""}}return null}draw(e){this.vS!=="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}drawBackground(e){this.vS==="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.jt!==null&&this.jt.lt!==null){e.textBaseline="middle",e.font=this.jv;for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){const r=this.jt.ot[s];r.ri!==void 0&&(r.ri.ss=this.$n.Ii(e,r.ri.mS),r.ri.$t=this.F,r.ri._t=r._t-r.ri.ss/2),Qy(r,e,n,i)}}}}function Qy(t,e,n,i){e.fillStyle=t.R,t.ri!==void 0&&function(s,r,l,a,u,h){s.save(),s.scale(u,h),s.fillText(r,l,a),s.restore()}(e,t.ri.mS,t.ri._t,t.ri.ut,n,i),function(s,r,l){if(s.yh!==0){switch(s.wS){case"arrowDown":return void lc(!1,r,l,s.yh);case"arrowUp":return void lc(!0,r,l,s.yh);case"circle":return void function(a,u,h){const c=(gi("circle",h)-1)/2;a.beginPath(),a.arc(u._t,u.ut,c*u.pS,0,2*Math.PI,!1),a.fill()}(r,l,s.yh);case"square":return void function(a,u,h){const c=gi("square",h),d=(c-1)*u.pS/2,f=u._t-d,g=u.ut-d;a.fillRect(f,g,c*u.pS,c*u.pS)}(r,l,s.yh)}s.wS}}(t,e,function(s,r,l){const a=Math.max(1,Math.floor(r))%2/2;return{_t:Math.round(s._t*r)+a,ut:s.ut*l,pS:r}}(t,n,i))}function Gy(t,e,n){return!(t.ri===void 0||!function(i,s,r,l,a,u){const h=l/2;return a>=i&&a<=i+r&&u>=s-h&&u<=s+h}(t.ri._t,t.ri.ut,t.ri.ss,t.ri.$t,e,n))||function(i,s,r){if(i.yh===0)return!1;switch(i.wS){case"arrowDown":return oc(!0,i._t,i.ut,i.yh,s,r);case"arrowUp":return oc(!1,i._t,i.ut,i.yh,s,r);case"circle":return function(l,a,u,h,c){const d=2+gi("circle",u)/2,f=l-h,g=a-c;return Math.sqrt(f*f+g*g)<=d}(i._t,i.ut,i.yh,s,r);case"square":return function(l,a,u,h,c){const d=gi("square",u),f=(d-1)/2,g=l-f,v=a-f;return h>=g&&h<=g+d&&c>=v&&c<=v+d}(i._t,i.ut,i.yh,s,r)}}(t,e,n)}function ac(t){return t==="atPriceTop"||t==="atPriceBottom"||t==="atPriceMiddle"}function Xy(t,e,n,i,s,r,l,a){const u=function(v,x,P){if(ac(x.position)&&x.price!==void 0)return x.price;if("value"in(m=v)&&typeof m.value=="number")return v.value;var m;if(function(p){return"open"in p&&"high"in p&&"low"in p&&"close"in p}(v)){if(x.position==="inBar")return v.close;if(x.position==="aboveBar")return P?v.low:v.high;if(x.position==="belowBar")return P?v.high:v.low}}(n,e,l.priceScale().options().invertScale);if(u===void 0)return;const h=ac(e.position),c=a.timeScale(),d=Pn(e.size)?Math.max(e.size,0):1,f=Yf(c.options().barSpacing)*d,g=f/2;switch(t.yh=f,e.position){case"inBar":case"atPriceMiddle":return t.ut=T(l.priceToCoordinate(u)),void(t.ri!==void 0&&(t.ri.ut=t.ut+g+r+.6*s));case"aboveBar":case"atPriceTop":{const v=h?0:i.gS;return t.ut=T(l.priceToCoordinate(u))-g-v,t.ri!==void 0&&(t.ri.ut=t.ut-g-.6*s,i.gS+=1.2*s),void(h||(i.gS+=f+r))}case"belowBar":case"atPriceBottom":{const v=h?0:i.MS;return t.ut=T(l.priceToCoordinate(u))+g+v,t.ri!==void 0&&(t.ri.ut=t.ut+g+r+.6*s,i.MS+=1.2*s),void(h||(i.MS+=f+r))}}}class Zy{constructor(e,n,i){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new Jy,this.ye=e,this.Lv=n,this.jt={ot:[],lt:null},this.Ps=i}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const e=this.Lv.options().layout;return this.Xt.qn(e.fontSize,e.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(e){this.bS=e,this.kt("data")}kt(e){this.xt=!0,e==="data"&&(this.SS=!0)}yS(e){this.xt=!0,this.Ps=e}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const e=this.Lv.timeScale(),n=this.bS;this.SS&&(this.jt.ot=n.map(h=>({wt:h.time,_t:0,ut:0,yh:0,wS:h.shape,R:h.color,te:h.id,kS:h.kS,ri:void 0})),this.SS=!1);const i=this.Lv.options().layout;this.jt.lt=null;const s=e.getVisibleLogicalRange();if(s===null)return;const r=new ri(Math.floor(s.from),Math.ceil(s.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let l=NaN;const a=Jf(e.options().barSpacing),u={gS:a,MS:a};this.jt.lt=Vf(this.jt.ot,r,!0);for(let h=this.jt.lt.from;h<this.jt.lt.to;h++){const c=n[h];c.time!==l&&(u.gS=a,u.MS=a,l=c.time);const d=this.jt.ot[h];d._t=T(e.logicalToCoordinate(c.time)),c.text!==void 0&&c.text.length>0&&(d.ri={mS:c.text,_t:0,ut:0,ss:0,$t:0});const f=this.ye.dataByIndex(c.time,0);f!==null&&Xy(d,c,f,u,i.fontSize,a,this.ye,this.Lv)}this.xt=!1}}function uc(t){return{...Yy,...t}}class qy{constructor(e){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=uc(e)}attached(e){this.ES(),this.Lv=e.chart,this.ye=e.series,this.$h=new Zy(this.ye,T(this.Lv),this.Ps),this.dS=e.requestUpdate,this.ye.subscribeDataChanged(n=>this.IM(n)),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(e){this.BS=!0,this.bS=e,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(e,n){var i;return this.$h?((i=this.$h.renderer())==null?void 0:i.Qn(e,n))??null:null}autoscaleInfo(e,n){if(this.Ps.autoScale&&this.$h){const i=this.zS();if(i)return{priceRange:null,margins:i}}return null}cr(e){this.Ps=uc({...this.Ps,...e}),this.Jb&&this.Jb()}zS(){const e=T(this.Lv).timeScale().options().barSpacing;if(this.RS||e!==this.VS){if(this.VS=e,this.bS.length>0){const n=Jf(e),i=1.5*Yf(e)+2*n,s=this.OS();this.DS={above:rc(i,s.aboveBar,s.inBar),below:rc(i,s.belowBar,s.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){var s;if(!this.BS||!this.Lv||!this.ye)return;const e=this.Lv.timeScale(),n=(s=this.ye)==null?void 0:s.data();if(e.getVisibleLogicalRange()==null||!this.ye||n.length===0)return void(this.PS=[]);const i=e.timeToIndex(T(n[0].time),!0);this.PS=this.bS.map((r,l)=>{const a=e.timeToIndex(r.time,!0),u=a<i?1:-1,h=T(this.ye).dataByIndex(a,u),c={time:e.timeToIndex(T(h).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,kS:l,text:r.text,size:r.size,price:r.price,Gr:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return{...c,position:r.position,price:r.price}}return{...c,position:r.position,price:r.price}}),this.BS=!1}LS(e){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(e))}IM(e){this.BS=!0,this.Jb()}}class e0 extends Ky{constructor(e,n,i){super(e,n),i&&this.setMarkers(i)}setMarkers(e){this.Zh.CS(e)}markers(){return this.Zh.AS()}}function t0(t,e,n){return new e0(t,new qy({}))}({...Mf});const q="/api";async function oe(t,e){const n=await fetch(t,e);if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return n.json()}async function n0(){return oe(`${q}/profiles`)}async function Qf(t){return oe(`${q}/profiles/${encodeURIComponent(t)}`)}async function eu(t,e){await oe(`${q}/profiles/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_data:e})})}async function i0(t){return oe(`${q}/profiles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})}async function s0(t){return oe(`${q}/profiles?path=${encodeURIComponent(t)}`,{method:"DELETE"})}async function r0(t){return oe(`${q}/auth/check?profile_path=${encodeURIComponent(t)}`)}async function l0(t,e){return oe(`${q}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function Zo(t,e,n){return oe(`${q}/auth/set-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,current_password:e,new_password:n})})}async function o0(t,e){return oe(`${q}/auth/remove-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function a0(){return oe(`${q}/presets`)}async function u0(t,e){return oe(`${q}/presets/${t}/preview?profile_path=${encodeURIComponent(e)}`)}async function h0(t,e,n){const i={preset_id:t};return n&&Object.keys(n).length>0&&(i.options=n),oe(`${q}/presets/${t}/apply?profile_path=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}async function c0(t){return oe(`${q}/runtime/${t}`)}async function hc(t,e,n){await oe(`${q}/runtime/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,kill_switch:n})})}async function d0(t,e){return oe(`${q}/loop/${t}/start?profile_path=${encodeURIComponent(e)}`,{method:"POST"})}async function f0(t){return oe(`${q}/loop/${t}/stop`,{method:"POST"})}async function p0(t,e=100){return oe(`${q}/loop/${t}/log?lines=${e}`)}async function Gf(t,e=50,n){const i=new URLSearchParams({limit:String(e)});n&&i.set("profile_path",n);const s=`${q}/data/${t}/trades?${i}`,r=await oe(s);return r!=null&&typeof r=="object"&&"trades"in r&&Array.isArray(r.trades)?{trades:r.trades,display_currency:r.display_currency}:{trades:Array.isArray(r)?r:[],display_currency:void 0}}async function m0(t,e=50){return oe(`${q}/data/${t}/executions?limit=${e}`)}async function g0(t){return oe(`${q}/data/${t}/rejection-breakdown`)}async function v0(t,e){const n=e?`${q}/data/${t}/stats?profile_path=${encodeURIComponent(e)}`:`${q}/data/${t}/stats`;return oe(n)}async function y0(t,e){const n=e?`${q}/data/${t}/stats-by-preset?profile_path=${encodeURIComponent(e)}`:`${q}/data/${t}/stats-by-preset`;return oe(n)}async function x0(t,e){const n=e?`${q}/data/${t}/mt5-report?profile_path=${encodeURIComponent(e)}`:`${q}/data/${t}/mt5-report`,i=await fetch(n);if(!i.ok)return null;const s=await i.json();return(s==null?void 0:s.source)==="mt5"?s:null}async function w0(t,e,n){return oe(`${q}/trades/${t}/${e}/close?profile_path=${encodeURIComponent(n)}`,{method:"POST"})}async function _0(t,e,n=!0){const i=new URLSearchParams({profile_path:e});return n&&i.set("force_profit_refresh","true"),oe(`${q}/data/${t}/sync-trades?${i}`,{method:"POST"})}async function S0(t,e){return oe(`${q}/data/${t}/technical-analysis?profile_path=${encodeURIComponent(e)}`)}async function j0(t){return oe(`${q}/runtime/${t}/temp-settings`)}async function cc(t,e){await oe(`${q}/runtime/${t}/temp-settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}const k0=()=>{try{const t=sessionStorage.getItem("unlockedProfiles");return t?new Set(JSON.parse(t)):new Set}catch{return new Set}},Zl=t=>{sessionStorage.setItem("unlockedProfiles",JSON.stringify([...t]))};function b0(){const[t,e]=z.useState("run"),[n,i]=z.useState([]),[s,r]=z.useState(null),[l,a]=z.useState(null),[u,h]=z.useState(!1),[c,d]=z.useState(""),[f,g]=z.useState(null),[v,x]=z.useState(!1),[P,m]=z.useState(!1),[p,y]=z.useState(""),[j,b]=z.useState(""),[M,k]=z.useState(null),[_,C]=z.useState(!1),[F,A]=z.useState({}),[K,ee]=z.useState(k0),[Q,X]=z.useState(""),[L,E]=z.useState(null),[N,S]=z.useState(!1),W=async()=>{try{const U=await n0();i(U);const ne={};await Promise.all(U.map(async ie=>{try{const{has_password:Wt}=await r0(ie.path);ne[ie.path]=Wt}catch{ne[ie.path]=!1}})),A(ne),r(ie=>U.length===0?null:ie&&U.some(Wt=>Wt.path===ie.path)?ie:U[0])}catch(U){a(U.message)}};z.useEffect(()=>{W()},[]);const Y=s&&F[s.path]&&!K.has(s.path),G=async()=>{if(s){E(null),S(!0);try{const{success:U}=await l0(s.path,Q);if(U){const ne=new Set(K);ne.add(s.path),ee(ne),Zl(ne),X("")}else E("Incorrect password")}catch(U){E(U.message)}finally{S(!1)}}},Ae=()=>{if(!s)return;const U=new Set(K);U.delete(s.path),ee(U),Zl(U),X(""),E(null)},je=async()=>{const U=c.trim();if(!U){g("Enter a name");return}if(P){if(!p||p.length<4){g("Password must be at least 4 characters");return}if(p!==j){g("Passwords do not match");return}}g(null),x(!0);try{const ne=await i0(U);if(P&&p){await Zo(ne.path,null,p);const ie=new Set(K);ie.add(ne.path),ee(ie),Zl(ie)}await W(),r(ne),d(""),y(""),b(""),m(!1),h(!1)}catch(ne){g(ne.message)}finally{x(!1)}},xe=async()=>{if(M){C(!0);try{await s0(M.path),W(),k(null)}catch(U){a(U.message)}finally{C(!1)}}};return o.jsxs("div",{className:"app",children:[o.jsxs("aside",{className:"sidebar",children:[o.jsx("h1",{children:"USDJPY Assistant"}),o.jsx("p",{className:"subtitle",children:"Trading Bot Dashboard"}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Account"}),o.jsx("select",{value:(s==null?void 0:s.path)||"",onChange:U=>{const ne=n.find(ie=>ie.path===U.target.value);r(ne||null),X(""),E(null)},children:n.map(U=>o.jsxs("option",{value:U.path,children:[F[U.path]?" ":"",U.name]},U.path))}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[o.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{h(!u),g(null),d(""),y(""),b(""),m(!1)},children:"Add account"}),o.jsx("button",{type:"button",className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>s&&k(s),disabled:!s||n.length===0,children:"Remove account"}),s&&F[s.path]&&K.has(s.path)&&o.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:Ae,children:"Lock"})]})]}),u&&o.jsxs("div",{className:"card",style:{marginTop:12,padding:12},children:[o.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[o.jsx("label",{children:"New account name"}),o.jsx("input",{type:"text",value:c,onChange:U=>d(U.target.value),placeholder:"e.g. uncle_demo"})]}),o.jsx("div",{className:"form-group",style:{marginBottom:8},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:P,onChange:U=>m(U.target.checked),style:{width:"auto"}}),"Set password (recommended)"]})}),P&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[o.jsx("label",{children:"Password"}),o.jsx("input",{type:"password",value:p,onChange:U=>y(U.target.value),placeholder:"Min 4 characters"})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[o.jsx("label",{children:"Confirm password"}),o.jsx("input",{type:"password",value:j,onChange:U=>b(U.target.value),placeholder:"Confirm password"})]}),o.jsx("p",{style:{fontSize:"0.7rem",color:"var(--warning)",marginBottom:8,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."})]}),f&&o.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginBottom:8},children:f}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"btn btn-primary",style:{fontSize:"0.8rem"},onClick:je,disabled:v,children:v?"Creating":"Create"}),o.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem"},onClick:()=>{h(!1),g(null),d(""),y(""),b(""),m(!1)},disabled:v,children:"Cancel"})]})]}),M&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[o.jsx("h3",{className:"card-title",children:"Remove account"}),o.jsxs("p",{style:{marginBottom:16},children:["Remove ",o.jsx("strong",{children:M.name}),"? This will delete the profile file. Logs and trade history for this account are kept."]}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{type:"button",className:"btn btn-danger",onClick:xe,disabled:_,children:_?"Removing":"Remove"}),o.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(null),disabled:_,children:"Cancel"})]})]})}),o.jsxs("nav",{style:{marginTop:24},children:[o.jsx("button",{className:`nav-item ${t==="run"?"active":""}`,onClick:()=>e("run"),children:"Run / Status"}),o.jsx("button",{className:`nav-item ${t==="analysis"?"active":""}`,onClick:()=>e("analysis"),children:"Analysis"}),o.jsx("button",{className:`nav-item ${t==="presets"?"active":""}`,onClick:()=>e("presets"),children:"Presets"}),o.jsx("button",{className:`nav-item ${t==="profile"?"active":""}`,onClick:()=>e("profile"),children:"Profile Editor"}),o.jsx("button",{className:`nav-item ${t==="logs"?"active":""}`,onClick:()=>e("logs"),children:"Logs & Stats"}),o.jsx("button",{className:`nav-item ${t==="guide"?"active":""}`,onClick:()=>e("guide"),children:"Help / Guide"})]})]}),o.jsxs("main",{className:"main-content",children:[l&&o.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[o.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",l]}),o.jsx("button",{className:"btn btn-secondary",onClick:()=>a(null),children:"Dismiss"})]}),s?Y?o.jsxs("div",{className:"card",style:{maxWidth:400,margin:"40px auto",textAlign:"center"},children:[o.jsx("h2",{style:{marginBottom:16},children:"Profile Locked"}),o.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:[o.jsx("strong",{children:s.name})," is password-protected. Enter your password to continue."]}),o.jsxs("div",{className:"form-group",style:{marginBottom:16,textAlign:"left"},children:[o.jsx("label",{children:"Password"}),o.jsx("input",{type:"password",value:Q,onChange:U=>X(U.target.value),onKeyDown:U=>U.key==="Enter"&&G(),placeholder:"Enter password",autoFocus:!0})]}),L&&o.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:L}),o.jsx("button",{className:"btn btn-primary",onClick:G,disabled:N||!Q,style:{width:"100%",marginBottom:16},children:N?"Unlocking...":"Unlock"}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"There is no forgot-password option. If you've lost your password, contact the administrator."})]}):o.jsxs(o.Fragment,{children:[t==="run"&&o.jsx(M0,{profile:s}),t==="analysis"&&o.jsx(E0,{profile:s}),t==="presets"&&o.jsx(N0,{profile:s}),t==="profile"&&o.jsx(T0,{profile:s,authStatus:F,onAuthChange:W}),t==="logs"&&o.jsx(z0,{profile:s}),t==="guide"&&o.jsx(L0,{})]}):o.jsx("div",{className:"card",children:o.jsxs("p",{children:["No accounts yet. Use ",o.jsx("strong",{children:"Add account"})," in the sidebar to create one, or add a profile JSON in the profiles/ folder."]})})]})]})}function M0({profile:t}){const[e,n]=z.useState(null),[i,s]=z.useState(""),[r,l]=z.useState(!1),a=()=>{c0(t.name).then(n).catch(console.error),p0(t.name,50).then(f=>s(f.content)).catch(console.error)};z.useEffect(()=>{a();const f=setInterval(a,3e3);return()=>clearInterval(f)},[t.name]);const u=async f=>{e&&(await hc(t.name,f,e.kill_switch),a())},h=async f=>{e&&(await hc(t.name,e.mode,f),a())},c=async()=>{l(!0);try{await d0(t.name,t.path),a()}finally{l(!1)}},d=async()=>{l(!0);try{await f0(t.name),a()}finally{l(!1)}};return o.jsxs("div",{children:[o.jsx("h2",{className:"page-title",children:"Run / Status"}),o.jsxs("div",{className:"grid-2",children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Loop Control"}),o.jsxs("div",{className:"flex-between mb-4",children:[o.jsx("span",{children:"Status:"}),e!=null&&e.loop_running?o.jsxs("span",{className:"status status-running",children:[o.jsx("span",{className:"status-dot"}),"Running"]}):o.jsxs("span",{className:"status status-stopped",children:[o.jsx("span",{className:"status-dot"}),"Stopped"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-success",onClick:c,disabled:r||(e==null?void 0:e.loop_running),children:"Start Loop"}),o.jsx("button",{className:"btn btn-danger",onClick:d,disabled:r||!(e!=null&&e.loop_running),children:"Stop Loop"})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Runtime Settings"}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Mode"}),o.jsxs("select",{value:(e==null?void 0:e.mode)||"DISARMED",onChange:f=>u(f.target.value),children:[o.jsx("option",{value:"DISARMED",children:"DISARMED"}),o.jsx("option",{value:"ARMED_MANUAL_CONFIRM",children:"ARMED_MANUAL_CONFIRM"}),o.jsx("option",{value:"ARMED_AUTO_DEMO",children:"ARMED_AUTO_DEMO"})]})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.kill_switch)||!1,onChange:f=>h(f.target.checked),style:{width:"auto"}}),"Kill Switch (disable all execution)"]})})]})]}),o.jsxs("div",{className:"card mt-4",children:[o.jsx("h3",{className:"card-title",children:"Loop Log (last 50 lines)"}),o.jsx("div",{className:"log-viewer",children:i||"(no log yet)"})]})]})}function C0({ohlc:t,trades:e,emaFast:n,emaSlow:i,emaStack:s,height:r=300}){const l=z.useRef(null),a=z.useRef(null),u=z.useRef(null);return z.useEffect(()=>{if(!l.current||t.length===0)return;const h=Ry(l.current,{width:l.current.clientWidth,height:r,layout:{background:{color:"#1a1a2e"},textColor:"#d1d5db"},grid:{vertLines:{color:"#2d2d44"},horzLines:{color:"#2d2d44"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2d2d44"},timeScale:{borderColor:"#2d2d44",timeVisible:!0,secondsVisible:!1}});a.current=h;const c=h.addSeries(Hy,{upColor:"#10b981",downColor:"#ef4444",borderUpColor:"#10b981",borderDownColor:"#ef4444",wickUpColor:"#10b981",wickDownColor:"#ef4444"});u.current=c;const d=t.map(b=>({time:b.time,open:b.open,high:b.high,low:b.low,close:b.close}));c.setData(d);const f={lastValueVisible:!1,priceLineVisible:!1},g={ema8:"#f59e0b",ema13:"#3b82f6",ema21:"#8b5cf6",ema34:"#06b6d4",ema50:"#10b981",ema89:"#6366f1",ema200:"#a855f7"};n&&n.length>0&&h.addSeries(Xl,{color:"#3b82f6",lineWidth:2,title:"EMA Fast",...f}).setData(n.map(M=>({time:M.time,value:M.value}))),i&&i.length>0&&h.addSeries(Xl,{color:"#10b981",lineWidth:2,title:"SMA Slow",...f}).setData(i.map(M=>({time:M.time,value:M.value}))),s&&Object.entries(s).forEach(([b,M])=>{if(M&&M.length>0){const k=g[b]||"#94a3b8";h.addSeries(Xl,{color:k,lineWidth:1,title:b.toUpperCase(),...f}).setData(M.map(C=>({time:C.time,value:C.value})))}});const v=[];e.forEach(b=>{const M=b.side.toLowerCase()==="buy",C=M?"#3b82f6":"#ef4444";b.entry_time!=null&&v.push({time:b.entry_time,position:M?"belowBar":"aboveBar",color:C,shape:M?"arrowUp":"arrowDown",text:""}),b.exit_time!=null&&v.push({time:b.exit_time,position:M?"aboveBar":"belowBar",color:C,shape:"circle",text:""})}),v.length>0&&t0(c).setMarkers(v);const x="#3b82f6",P="#ef4444",m="#10b981",p="#ef4444";e.filter(b=>b.exit_time==null&&b.exit_price==null).forEach(b=>{const k=b.side.toLowerCase()==="buy"?x:P;b.entry_price!=null&&c.createPriceLine({price:b.entry_price,color:k,lineWidth:1,lineStyle:Ui.Solid,axisLabelVisible:!0,title:"Entry"}),b.target_price!=null&&c.createPriceLine({price:b.target_price,color:m,lineWidth:1,lineStyle:Ui.Solid,axisLabelVisible:!0,title:"TP"}),b.stop_price!=null&&c.createPriceLine({price:b.stop_price,color:p,lineWidth:1,lineStyle:Ui.Solid,axisLabelVisible:!0,title:"SL"})}),h.timeScale().fitContent();const j=()=>{l.current&&a.current&&a.current.applyOptions({width:l.current.clientWidth})};return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j),h.remove()}},[t,e,n,i,s,r]),t.length===0?o.jsx("div",{style:{height:r,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)",borderRadius:6,color:"var(--text-secondary)"},children:"No chart data available"}):o.jsx("div",{ref:l,style:{width:"100%",height:r,borderRadius:6,overflow:"hidden"}})}function E0({profile:t}){const[e,n]=z.useState(null),[i,s]=z.useState(!0),[r,l]=z.useState(null),[a,u]=z.useState(null),[h,c]=z.useState(null),[d,f]=z.useState(null),[g,v]=z.useState([]),x=async()=>{try{const[_,C]=await Promise.all([S0(t.name,t.path),Gf(t.name,50).then(A=>A.trades).catch(()=>[])]);n(_);const F=C.filter(A=>A.trade_id&&A.entry_price).map(A=>{const K=A.timestamp_utc,ee=A.exit_timestamp_utc,Q=K?Math.floor(new Date(K).getTime()/1e3):void 0,X=ee?Math.floor(new Date(ee).getTime()/1e3):void 0;return{trade_id:String(A.trade_id),entry_price:Number(A.entry_price),stop_price:A.stop_price!=null?Number(A.stop_price):null,target_price:A.target_price!=null?Number(A.target_price):null,side:String(A.side||"buy"),entry_time:Q,exit_time:X,exit_price:A.exit_price!=null?Number(A.exit_price):void 0}});v(F),l(null),f(new Date)}catch(_){l(_.message)}finally{s(!1)}};z.useEffect(()=>{s(!0),x();const _=setInterval(x,3e4);return()=>clearInterval(_)},[t.name,t.path]);const P=_=>{u(a===_?null:_)},m=_=>{const C={bull:{bg:"rgba(16, 185, 129, 0.2)",color:"var(--success)"},bear:{bg:"rgba(239, 68, 68, 0.2)",color:"var(--danger)"},sideways:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"},unknown:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"}},F=C[_]||C.unknown;return o.jsx("span",{style:{padding:"4px 10px",borderRadius:4,background:F.bg,color:F.color,fontWeight:600,fontSize:"0.85rem",textTransform:"uppercase"},children:_})},p=_=>{const C={oversold:"var(--success)",overbought:"var(--danger)",neutral:"var(--text-secondary)"};return o.jsxs("span",{children:[o.jsx("span",{style:{color:C[_.zone]||"inherit"},children:_.zone.charAt(0).toUpperCase()+_.zone.slice(1)}),_.value!==null&&o.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",_.value.toFixed(1),")"]})]})},y=_=>{const C={positive:"var(--success)",negative:"var(--danger)",neutral:"var(--text-secondary)"};return o.jsx("span",{style:{color:C[_.direction]||"inherit"},children:_.direction.charAt(0).toUpperCase()+_.direction.slice(1)})},j=_=>{const C={elevated:"var(--warning)",low:"var(--accent)",normal:"var(--text-secondary)"};return o.jsxs("span",{children:[o.jsx("span",{style:{color:C[_.state]||"inherit"},children:_.state.charAt(0).toUpperCase()+_.state.slice(1)}),_.value_pips!==null&&o.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",_.value_pips," pips)"]})]})},b=["H4","H1","M30","M15","M5","M3","M1"],M={H4:"4H",H1:"1H",M30:"30m",M15:"15m",M5:"5m",M3:"3m",M1:"1m"},k=_=>{const C=[];if(_.ema_stack&&Object.keys(_.ema_stack).length>0){const F=Object.keys(_.ema_stack).map(A=>A.replace(/^ema/i,"")).filter(Boolean).sort((A,K)=>parseInt(A,10)-parseInt(K,10));F.length>0&&C.push(`EMA ${F.join("/")}`)}return _.ema_fast&&_.ema_fast.length>0&&_.ema_slow&&_.ema_slow.length>0&&C.push("SMA slow"),C.length>0?C.join("  "):""};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex-between mb-4",children:[o.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Technical Analysis"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[d&&o.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:["Updated: ",d.toLocaleTimeString()]}),o.jsx("button",{className:"btn btn-secondary",onClick:x,disabled:i,children:i?"Loading...":"Refresh"})]})]}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16,fontSize:"0.9rem"},children:"Real-time technical analysis across multiple timeframes. Auto-refreshes every 30 seconds. Click on a timeframe to expand detailed view."}),r&&o.jsx("div",{className:"card mb-4",style:{borderColor:"var(--danger)"},children:o.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",r]})}),(e==null?void 0:e.current_tick)&&o.jsx("div",{className:"card mb-4",children:o.jsxs("div",{className:"grid-3",children:[o.jsxs("div",{className:"stat-box",children:[o.jsx("div",{className:"stat-value",children:e.current_tick.bid.toFixed(3)}),o.jsx("div",{className:"stat-label",children:"Bid"})]}),o.jsxs("div",{className:"stat-box",children:[o.jsx("div",{className:"stat-value",children:e.current_tick.ask.toFixed(3)}),o.jsx("div",{className:"stat-label",children:"Ask"})]}),o.jsxs("div",{className:"stat-box",children:[o.jsxs("div",{className:"stat-value",style:{color:e.current_tick.spread_pips>1?"var(--warning)":"var(--success)"},children:[e.current_tick.spread_pips," pips"]}),o.jsx("div",{className:"stat-label",children:"Spread"})]})]})}),e&&b.map(_=>{var A,K,ee,Q,X,L,E,N;const C=e.timeframes[_];if(!C)return null;const F=a===_;return o.jsxs("div",{className:"card mb-4",children:[o.jsxs("div",{className:"flex-between",style:{marginBottom:F?16:0},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:0,fontSize:"1.1rem",minWidth:40},children:_}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:M[_]||_})]}),m(C.regime)]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),p(C.rsi)]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),y(C.macd)]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),j(C.atr)]}),o.jsx("button",{type:"button",onClick:()=>P(_),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"var(--accent)",fontSize:"0.9rem"},"aria-label":F?"Collapse chart":"Expand chart",children:F?"":""})]})]}),!F&&o.jsx("p",{style:{margin:"12px 0 0 0",color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:C.summary}),F&&o.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{style:{marginBottom:16},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:8,marginBottom:12},children:[o.jsxs("h4",{style:{margin:0,color:"var(--accent)",fontSize:"0.9rem"},children:[_," Chart (",M[_]||_,")"]}),k(C)&&o.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:k(C)}),g.length>0&&o.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["(",g.filter(S=>!S.exit_time).length," open, ",g.length," total)"]}),o.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem",marginLeft:"auto"},onClick:()=>c(h===_?null:_),children:h===_?"Shrink":"Enlarge"})]}),o.jsx(C0,{ohlc:C.ohlc||[],trades:g,emaFast:C.ema_fast,emaSlow:C.ema_slow,emaStack:C.ema_stack,height:h===_?520:280})]}),o.jsx("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:16,borderLeft:"4px solid var(--accent)"},children:o.jsx("p",{style:{margin:0,fontSize:"0.95rem"},children:C.summary})}),o.jsxs("div",{className:"grid-2",children:[o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"RSI (14)"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((A=C.rsi.value)==null?void 0:A.toFixed(2))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Zone:"}),o.jsx("span",{style:{marginLeft:8},children:p(C.rsi)})]})]}),o.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[C.rsi.zone==="oversold"&&"Price may be undervalued. Potential buy opportunity if trend supports.",C.rsi.zone==="overbought"&&"Price may be overextended. Consider caution with longs.",C.rsi.zone==="neutral"&&"Momentum is balanced. Follow the trend direction."]})]}),o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"MACD (12,26,9)"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Line:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((K=C.macd.line)==null?void 0:K.toFixed(5))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Signal:"}),o.jsx("span",{style:{marginLeft:8},children:((ee=C.macd.signal)==null?void 0:ee.toFixed(5))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Histogram:"}),o.jsx("span",{style:{marginLeft:8,color:C.macd.histogram&&C.macd.histogram>0?"var(--success)":"var(--danger)"},children:((Q=C.macd.histogram)==null?void 0:Q.toFixed(5))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Direction:"}),o.jsx("span",{style:{marginLeft:8},children:y(C.macd)})]})]})]}),o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"ATR (14)"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((X=C.atr.value)==null?void 0:X.toFixed(5))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Pips:"}),o.jsx("span",{style:{marginLeft:8},children:C.atr.value_pips??"-"})]})]}),o.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[C.atr.state==="elevated"&&"Volatility is high. Consider wider stops and smaller position sizes.",C.atr.state==="low"&&"Volatility is low. Smaller moves expected, watch for breakouts.",C.atr.state==="normal"&&"Volatility is within normal range."]})]}),(()=>{const S=C.bollinger;return!S||typeof S!="object"?null:o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Bollinger Bands (20, 2)"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Upper:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:S.upper!=null?Number(S.upper).toFixed(5):"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Middle:"}),o.jsx("span",{style:{marginLeft:8},children:S.middle!=null?Number(S.middle).toFixed(5):"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Lower:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:S.lower!=null?Number(S.lower).toFixed(5):"-"})]})]}),o.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Price relative to bands indicates volatility and potential mean reversion. For display only; not used in automation."})]})})(),typeof C.vwap=="number"&&o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"VWAP"}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:Number(C.vwap).toFixed(5)})]}),o.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Volume-weighted average price (uses tick volume when available). For display only; not used in automation."})]}),o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Price Levels (100-bar)"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Current:"}),o.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((L=C.price.current)==null?void 0:L.toFixed(3))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent High:"}),o.jsx("span",{style:{marginLeft:8,color:"var(--success)"},children:((E=C.price.recent_high)==null?void 0:E.toFixed(3))??"-"})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent Low:"}),o.jsx("span",{style:{marginLeft:8,color:"var(--danger)"},children:((N=C.price.recent_low)==null?void 0:N.toFixed(3))??"-"})]})]}),o.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:C.price.current&&C.price.recent_high&&C.price.recent_low&&o.jsxs(o.Fragment,{children:["Price is ",((C.price.current-C.price.recent_low)/(C.price.recent_high-C.price.recent_low)*100).toFixed(0),"% of the way from recent low to high."]})})]})]})]})]},_)}),i&&!e&&o.jsx("div",{className:"card",children:o.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center"},children:"Loading technical analysis..."})})]})}const ql={scalper:{default:{label:"Default (5, 9, 13)",values:[5,9,13]},alt1:{label:"Ultra-fast (3, 5, 8)",values:[3,5,8]},alt2:{label:"Standard (8, 13, 21)",values:[8,13,21]}},day_trader:{default:{label:"Default (13, 21, 34)",values:[13,21,34]},alt1:{label:"Faster (8, 13, 21)",values:[8,13,21]},alt2:{label:"Slower (21, 34, 55)",values:[21,34,55]}},swing_trader:{default:{label:"Default (21, 50, 100)",values:[21,50,100]},alt1:{label:"Classic (20, 50, 200)",values:[20,50,200]},alt2:{label:"Medium (34, 89, 144)",values:[34,89,144]}}};function re({label:t,value:e,onAdjust:n,onChange:i,step:s=1,min:r,max:l}){if(e==null)return null;const a=u=>{const h=parseFloat(u.target.value);if(!isNaN(h)&&i){let c=h;r!==void 0&&(c=Math.max(r,c)),l!==void 0&&(c=Math.min(l,c)),i(c)}};return o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--bg-secondary)",borderRadius:6,border:"1px solid var(--border)"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:t}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("button",{onClick:()=>n(-1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),o.jsx("input",{type:"number",value:s<1?e.toFixed(2):e,onChange:a,step:s,min:r,max:l,style:{width:60,textAlign:"center",fontWeight:600,fontFamily:"monospace",padding:"4px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",fontSize:"0.85rem"}}),o.jsx("button",{onClick:()=>n(1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})}function P0({profile:t,currentProfile:e,onComplete:n}){var X,L,E,N,S,W,Y,G,Ae,je,xe,U,ne,ie,Wt,_s,Ss,js,Xe,rt,B;const[i,s]=z.useState(1),[r,l]=z.useState({tradingStyle:null,riskTolerance:null,entryStyle:null,emaStack:"default",multipleStrategyA:null,multipleStrategyB:null}),[a,u]=z.useState(!1),[h,c]=z.useState(!1),[d,f]=z.useState(!1),[g,v]=z.useState(null),[x,P]=z.useState(null),m=r.entryStyle==="multiple"?[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Choose Strategies",description:"Pick two strategies to combine"},{num:5,title:"Review",description:"Review your configuration"},{num:6,title:"Fine-Tune",description:"Adjust individual settings"}]:[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Review",description:"Review your configuration"},{num:5,title:"Fine-Tune",description:"Adjust individual settings"}],[p,y]=z.useState(null),j=r.entryStyle==="multiple"?6:5;z.useEffect(()=>{r.entryStyle!=="multiple"&&i>5&&s(5)},[r.entryStyle,i]);const b=()=>{switch(i){case 1:return r.tradingStyle!==null;case 2:return r.riskTolerance!==null;case 3:return r.entryStyle!==null;case 4:return r.entryStyle==="multiple"?r.multipleStrategyA!==null&&r.multipleStrategyB!==null&&r.multipleStrategyA!==r.multipleStrategyB:!0;default:return!0}},M=()=>{const w=e,V={schema_version:1,profile_name:t.name,symbol:(w==null?void 0:w.symbol)??"USDJPY",pip_size:.01,broker_type:(w==null?void 0:w.broker_type)??"mt5",oanda_token:(w==null?void 0:w.oanda_token)??null,oanda_account_id:(w==null?void 0:w.oanda_account_id)??null,oanda_environment:(w==null?void 0:w.oanda_environment)??"practice",display_currency:(w==null?void 0:w.display_currency)??"USD",deposit_amount:(w==null?void 0:w.deposit_amount)??null,leverage_ratio:(w==null?void 0:w.leverage_ratio)??null,created_utc:(w==null?void 0:w.created_utc)??new Date().toISOString().slice(0,19).replace("T"," ")+"Z",risk:{},strategy:{timeframes:{},setups:{},filters:{alignment:{enabled:!1,method:"score",weights:{H4:1,M15:1,M1:1},min_score_to_trade:-3},ema_stack_filter:{enabled:!1,timeframe:"M1",periods:[8,13,21],min_separation_pips:0},atr_filter:{enabled:!1,timeframe:"M1",atr_period:14,min_atr_pips:0,max_atr_pips:null}}},trade_management:{target:{}},execution:{policies:[],loop_poll_seconds:5,loop_poll_seconds_fast:2}},I=V.risk,O=V.strategy,H=O.timeframes,de=O.setups,ae=V.trade_management.target,fe=V.execution,se=(()=>{var Pt;if(!r.tradingStyle)return[8,13,21];const wi=ql[r.tradingStyle],In=r.emaStack||"default";return((Pt=wi[In])==null?void 0:Pt.values)||wi.default.values})();switch(r.tradingStyle){case"scalper":H.M1={ema_fast:9,sma_slow:21,ema_stack:se},H.M15={ema_fast:9,sma_slow:21,ema_stack:se},H.H4={ema_fast:13,sma_slow:30,ema_stack:se},de.m1_cross_entry={enabled:!0,timeframe:"M1",ema:se[0],sma:se[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:3}},ae.mode="fixed_pips",ae.pips_default=8,ae.rr_default=1,fe.loop_poll_seconds=3,fe.loop_poll_seconds_fast=1;break;case"day_trader":H.M1={ema_fast:13,sma_slow:30,ema_stack:se},H.M15={ema_fast:13,sma_slow:30,ema_stack:se},H.H4={ema_fast:13,sma_slow:30,ema_stack:se},de.m15_cross_entry={enabled:!0,timeframe:"M15",ema:se[0],sma:se[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:5}},ae.mode="fixed_pips",ae.pips_default=15,ae.rr_default=1.5,fe.loop_poll_seconds=10,fe.loop_poll_seconds_fast=5;break;case"swing_trader":H.M1={ema_fast:21,sma_slow:50,ema_stack:se},H.M15={ema_fast:21,sma_slow:50,ema_stack:se},H.H4={ema_fast:21,sma_slow:50,ema_stack:se},de.h4_cross_entry={enabled:!0,timeframe:"H4",ema:se[0],sma:se[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:2}},ae.mode="fixed_pips",ae.pips_default=30,ae.rr_default=2,fe.loop_poll_seconds=60,fe.loop_poll_seconds_fast=30;break}const $=(e==null?void 0:e.risk)||{},dt=$.max_lots??.1,dn=$.max_spread_pips??2,rl=$.max_trades_per_day??10,ll=$.min_stop_pips,ol=typeof ll=="number"&&ll>=0?Math.max(1,Math.min(100,ll)):10;switch(r.riskTolerance){case"conservative":I.max_lots=Math.round(dt*.35*100)/100||.05,I.max_spread_pips=Math.round(dn*.25*10)/10||.5,I.min_stop_pips=ol,I.max_trades_per_day=Math.max(1,Math.round(rl*.5)),I.max_open_trades=1,I.cooldown_minutes_after_loss=15,I.require_stop=!0,I.risk_per_trade_pct=.5,I.max_daily_loss_pct=2;break;case"moderate":I.max_lots=Math.round(dt*.67*100)/100||.1,I.max_spread_pips=Math.round(dn*.5*10)/10||.8,I.min_stop_pips=ol,I.max_trades_per_day=Math.max(1,Math.round(rl*1)),I.max_open_trades=2,I.cooldown_minutes_after_loss=5,I.require_stop=!0,I.risk_per_trade_pct=1,I.max_daily_loss_pct=4;break;case"aggressive":I.max_lots=Math.round(dt*1*100)/100||.15,I.max_spread_pips=Math.round(dn*.6*10)/10||1.2,I.min_stop_pips=ol,I.max_trades_per_day=Math.max(1,Math.round(rl*1)),I.max_open_trades=3,I.cooldown_minutes_after_loss=0,I.require_stop=!0,I.risk_per_trade_pct=2,I.max_daily_loss_pct=6;break}const Oe=[],ks=Object.keys(de)[0]||"m1_cross_entry",wt=r.tradingStyle==="swing_trader"?"H4":r.tradingStyle==="day_trader"?"M15":"M1",_t=ae.pips_default,St=I.min_stop_pips;switch(r.entryStyle){case"ema_cross":Oe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:ks});break;case"rsi_dips":Oe.push({type:"indicator_based",id:"custom_rsi_buy",enabled:!0,timeframe:wt,regime:"bull",side:"buy",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"oversold",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:_t,sl_pips:St}),Oe.push({type:"indicator_based",id:"custom_rsi_sell",enabled:!0,timeframe:wt,regime:"bear",side:"sell",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"overbought",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:_t,sl_pips:St});break;case"price_levels":O.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Oe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:ks});break;case"bollinger_bands":Oe.push({type:"bollinger_bands",id:"custom_bb_buy",enabled:!0,timeframe:wt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:_t,sl_pips:St}),Oe.push({type:"bollinger_bands",id:"custom_bb_sell",enabled:!0,timeframe:wt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:_t,sl_pips:St});break;case"vwap":Oe.push({type:"vwap",id:"custom_vwap_buy",enabled:!0,timeframe:wt,trigger:"cross_above",side:"buy",tp_pips:_t,sl_pips:St}),Oe.push({type:"vwap",id:"custom_vwap_sell",enabled:!0,timeframe:wt,trigger:"cross_below",side:"sell",tp_pips:_t,sl_pips:St});break;case"multiple":{const wi=(In,Pt)=>{if(In==="ema_cross"){Oe.push({type:"confirmed_cross",id:`${Pt}_ema_cross`,enabled:!0,setup_id:ks});return}if(In==="price_levels"){O.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Oe.push({type:"confirmed_cross",id:`${Pt}_confirmed_cross`,enabled:!0,setup_id:ks});return}if(In==="bollinger_bands"){Oe.push({type:"bollinger_bands",id:`${Pt}_bb_buy`,enabled:!0,timeframe:wt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:_t,sl_pips:St}),Oe.push({type:"bollinger_bands",id:`${Pt}_bb_sell`,enabled:!0,timeframe:wt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:_t,sl_pips:St});return}In==="vwap"&&(Oe.push({type:"vwap",id:`${Pt}_vwap_buy`,enabled:!0,timeframe:wt,trigger:"cross_above",side:"buy",tp_pips:_t,sl_pips:St}),Oe.push({type:"vwap",id:`${Pt}_vwap_sell`,enabled:!0,timeframe:wt,trigger:"cross_below",side:"sell",tp_pips:_t,sl_pips:St}))};r.multipleStrategyA&&wi(r.multipleStrategyA,"custom_ms_a"),r.multipleStrategyB&&wi(r.multipleStrategyB,"custom_ms_b");break}}fe.policies=Oe;const Xf=r.tradingStyle==="scalper"?"Scalp":r.tradingStyle==="day_trader"?"DayT":"Swing",Zf=r.riskTolerance==="conservative"?"Cons":r.riskTolerance==="moderate"?"Mod":"Agg",qf=r.entryStyle==="ema_cross"?"EMAC":r.entryStyle==="rsi_dips"?"RSI":r.entryStyle==="price_levels"?"PL":r.entryStyle==="bollinger_bands"?"BB":r.entryStyle==="vwap"?"VWAP":"MS";return V.active_preset_name=`Custom: ${Xf}/${Zf}/${qf}`,V},k=()=>{if(i<j&&s(i+1),i===3&&r.entryStyle!=="multiple"||i===4&&r.entryStyle==="multiple"){const w=M();P(w),y(JSON.parse(JSON.stringify(w)))}},_=()=>{i>1&&s(i-1)},C=async()=>{f(!0),v(null);try{const w=JSON.parse(JSON.stringify(p||x||M())),V=(e==null?void 0:e.risk)||{},I=w.risk||{};w.risk=V;const O=(H,de)=>typeof H=="number"&&typeof de=="number"?Math.min(H,de):H;w.effective_risk={...I,max_lots:O(I.max_lots??.1,V.max_lots??1),max_spread_pips:O(I.max_spread_pips??2,V.max_spread_pips??5),max_trades_per_day:O(I.max_trades_per_day??10,V.max_trades_per_day??100),max_open_trades:O(I.max_open_trades??2,V.max_open_trades??10)},w.broker_type=(e==null?void 0:e.broker_type)??"mt5",w.oanda_token=(e==null?void 0:e.oanda_token)??null,w.oanda_account_id=(e==null?void 0:e.oanda_account_id)??null,w.oanda_environment=(e==null?void 0:e.oanda_environment)??"practice",w.display_currency=(e==null?void 0:e.display_currency)??"USD",w.deposit_amount=(e==null?void 0:e.deposit_amount)??null,w.leverage_ratio=(e==null?void 0:e.leverage_ratio)??null,e!=null&&e.created_utc&&(w.created_utc=e.created_utc),await eu(t.path,w),n()}catch(w){v(w.message)}finally{f(!1)}},F=()=>{x&&y(JSON.parse(JSON.stringify(x)))},A=(w,V)=>{if(!p)return;const I=JSON.parse(JSON.stringify(p));let O=I;for(let H=0;H<w.length-1;H++)O[w[H]]===void 0&&(O[w[H]]={}),O=O[w[H]];O[w[w.length-1]]=V,y(I)},K=(w,V,I,O,H)=>{if(!p)return;let de=p;for(let Me=0;Me<w.length-1;Me++)if(de=de[w[Me]],!de)return;const ae=de[w[w.length-1]];if(typeof ae!="number")return;let fe=ae+V*(H||1);I!==void 0&&(fe=Math.max(I,fe)),O!==void 0&&(fe=Math.min(O,fe)),A(w,Number(fe.toFixed(4)))},ee=(()=>{if(i!==5||!p||!e)return!1;const w=e.risk||{},V=w.max_lots,I=w.max_spread_pips,O=w.max_trades_per_day,H=p.risk||{},de=H.max_lots,ae=H.max_spread_pips,fe=H.max_trades_per_day,Me=V!=null&&de!=null&&de>V,se=I!=null&&ae!=null&&ae>I,$=O!=null&&fe!=null&&fe>O;return Me||se||$})(),Q=({selected:w,onClick:V,title:I,description:O,icon:H,details:de})=>o.jsxs("div",{onClick:V,style:{padding:20,borderRadius:8,border:`2px solid ${w?"var(--accent)":"var(--border)"}`,background:w?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",cursor:"pointer",transition:"all 0.2s ease"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:H}),o.jsx("h4",{style:{margin:0,color:w?"var(--accent)":"var(--text-primary)"},children:I})]}),o.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:O}),de&&o.jsx("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.8rem",color:"var(--text-secondary)"},children:de.map((ae,fe)=>o.jsx("li",{children:ae},fe))})]});return o.jsxs("div",{children:[o.jsx("div",{className:"card mb-4",children:o.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:m.map(w=>o.jsxs("div",{style:{flex:1,textAlign:"center",opacity:w.num<=i?1:.5},children:[o.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:w.num<i?"var(--success)":w.num===i?"var(--accent)":"var(--bg-tertiary)",color:w.num<=i?"white":"var(--text-secondary)",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:600,marginBottom:8},children:w.num<i?"":w.num}),o.jsx("div",{style:{fontSize:"0.85rem",fontWeight:w.num===i?600:400},children:w.title})]},w.num))})}),i===1&&o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Step 1: Trading Style"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How do you want to trade? This determines the timeframe focus and trade duration."}),o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsx(Q,{selected:r.tradingStyle==="scalper",onClick:()=>l({...r,tradingStyle:"scalper"}),title:"Scalper",icon:"",description:"Quick trades (1-5 minutes), small profits, many opportunities",details:["Focuses on M1 (1-minute) chart","8 pip profit targets","Fast polling (1-3 seconds)","Best for active monitoring"]}),o.jsx(Q,{selected:r.tradingStyle==="day_trader",onClick:()=>l({...r,tradingStyle:"day_trader"}),title:"Day Trader",icon:"",description:"Trades within the day (5-60 minutes), moderate targets",details:["Focuses on M15 (15-minute) chart","15 pip profit targets","Moderate polling (5-10 seconds)","Good balance of activity and patience"]}),o.jsx(Q,{selected:r.tradingStyle==="swing_trader",onClick:()=>l({...r,tradingStyle:"swing_trader"}),title:"Swing Trader",icon:"",description:"Hold for hours or days, larger moves, fewer trades",details:["Focuses on H4 (4-hour) chart","30+ pip profit targets","Slow polling (30-60 seconds)","Minimal monitoring needed"]})]}),r.tradingStyle&&o.jsxs("div",{style:{marginTop:20},children:[o.jsxs("button",{type:"button",onClick:()=>c(!h),style:{background:"transparent",border:"none",color:"var(--accent)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,padding:0},children:[o.jsx("span",{style:{transform:h?"rotate(90deg)":"rotate(0)",transition:"transform 0.2s"},children:""}),"Advanced: EMA Stack (optional)"]}),h&&o.jsxs("div",{style:{marginTop:12,padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"3px solid var(--accent)"},children:[o.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:"The EMA Stack defines the moving average periods used for trend detection. Leave as default unless you have a specific preference."}),o.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[o.jsxs("label",{children:["EMA Stack for ",r.tradingStyle==="scalper"?"Scalping":r.tradingStyle==="day_trader"?"Day Trading":"Swing Trading"]}),o.jsx("select",{value:r.emaStack||"default",onChange:w=>l({...r,emaStack:w.target.value}),children:r.tradingStyle&&Object.entries(ql[r.tradingStyle]).map(([w,V])=>o.jsx("option",{value:w,children:V.label},w))})]}),o.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Current selection: ",r.tradingStyle&&r.emaStack&&((X=ql[r.tradingStyle][r.emaStack])==null?void 0:X.values.join(", "))," EMA periods"]})]})]})]}),i===2&&(()=>{const w=(e==null?void 0:e.risk)||{},V=w.max_lots??.1,I=w.max_spread_pips??2,O=w.max_trades_per_day??10,H=Math.round(V*.35*100)/100||.05,de=Math.max(1,Math.round(O*.5)),ae=Math.round(I*.25*10)/10||.5,fe=Math.round(V*.67*100)/100||.1,Me=Math.max(1,Math.round(O*1)),se=Math.round(I*.5*10)/10||.8,$=Math.round(V*1*100)/100||.15,dt=Math.max(1,Math.round(O*1)),dn=Math.round(I*.6*10)/10||1.2;return o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Step 2: Risk Tolerance"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How much risk are you comfortable with per trade? Values scale from your Profile Editor limits."}),o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsx(Q,{selected:r.riskTolerance==="conservative",onClick:()=>l({...r,riskTolerance:"conservative"}),title:"Conservative",icon:"",description:"Lower risk, smaller positions, strict filters",details:[`${H} lots per trade`,`Max ${de} trades per day`,`${ae} pip max spread`,"15 min cooldown after loss","2% max daily loss"]}),o.jsx(Q,{selected:r.riskTolerance==="moderate",onClick:()=>l({...r,riskTolerance:"moderate"}),title:"Moderate",icon:"",description:"Balanced risk and reward",details:[`${fe} lots per trade`,`Max ${Me} trades per day`,`${se} pip max spread`,"5 min cooldown after loss","4% max daily loss"]}),o.jsx(Q,{selected:r.riskTolerance==="aggressive",onClick:()=>l({...r,riskTolerance:"aggressive"}),title:"Aggressive",icon:"",description:"Higher risk for potentially higher returns",details:[`${$} lots per trade`,`Max ${dt} trades per day`,`${dn} pip max spread`,"No cooldown after loss","6% max daily loss"]})]})]})})(),i===3&&o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Step 3: Entry Style"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How should the bot decide when to enter a trade?"}),o.jsxs("div",{style:{display:"grid",gap:16},children:[o.jsx(Q,{selected:r.entryStyle==="ema_cross",onClick:()=>l({...r,entryStyle:"ema_cross",multipleStrategyA:null,multipleStrategyB:null}),title:"EMA Cross",icon:"",description:"Buy or sell based on EMA/SMA cross direction",details:["BUY: EMA crosses above SMA","SELL: EMA crosses below SMA","Waits for confirmation bar","Works in both trends"]}),o.jsx(Q,{selected:r.entryStyle==="rsi_dips",onClick:()=>l({...r,entryStyle:"rsi_dips",multipleStrategyA:null,multipleStrategyB:null}),title:"RSI Dips",icon:"",description:"Buy oversold dips, sell overbought rallies",details:["BUY: RSI < 30 in uptrend","SELL: RSI > 70 in downtrend","Mean-reversion style","MACD confirmation included"]}),o.jsx(Q,{selected:r.entryStyle==="price_levels",onClick:()=>l({...r,entryStyle:"price_levels",multipleStrategyA:null,multipleStrategyB:null}),title:"Price Levels",icon:"",description:"EMA cross with multi-timeframe alignment filter",details:["Bi-directional EMA cross","Requires H4/M15/M1 agreement","Higher quality signals","Fewer but better trades"]}),o.jsx(Q,{selected:r.entryStyle==="bollinger_bands",onClick:()=>l({...r,entryStyle:"bollinger_bands",multipleStrategyA:null,multipleStrategyB:null}),title:"Bollinger Bands",icon:"",description:"Mean reversion at lower/upper band",details:["BUY: price at/below lower band in uptrend","SELL: price at/above upper band in downtrend","M15, 20-period, 2 std dev","Clear levels for entry"]}),o.jsx(Q,{selected:r.entryStyle==="vwap",onClick:()=>l({...r,entryStyle:"vwap",multipleStrategyA:null,multipleStrategyB:null}),title:"VWAP",icon:"",description:"Entries on price vs VWAP",details:["BUY: price crosses above VWAP","SELL: price crosses below VWAP","Volume-weighted average price","Good for intraday trend"]}),o.jsx(Q,{selected:r.entryStyle==="multiple",onClick:()=>l({...r,entryStyle:"multiple"}),title:"Multiple Strategies",icon:"",description:"Combine two strategies of your choice (EMA Cross, Price Levels, Bollinger Bands, or VWAP)",details:["Pick Strategy A and Strategy B in the next step","EMA Cross, Price Levels, Bollinger Bands, VWAP","Maximum flexibility","Good for active traders"]})]})]}),i===4&&r.entryStyle==="multiple"&&o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Step 4: Choose two strategies to combine"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Select Strategy A and Strategy B. They must be different. RSI is not available in combinations."}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:16},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy A"}),o.jsxs("select",{value:r.multipleStrategyA??"",onChange:w=>l({...r,multipleStrategyA:w.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[o.jsx("option",{value:"",children:" Select "}),o.jsx("option",{value:"ema_cross",children:"EMA Cross"}),o.jsx("option",{value:"price_levels",children:"Price Levels"}),o.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),o.jsx("option",{value:"vwap",children:"VWAP"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy B"}),o.jsxs("select",{value:r.multipleStrategyB??"",onChange:w=>l({...r,multipleStrategyB:w.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[o.jsx("option",{value:"",children:" Select "}),o.jsx("option",{value:"ema_cross",children:"EMA Cross"}),o.jsx("option",{value:"price_levels",children:"Price Levels"}),o.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),o.jsx("option",{value:"vwap",children:"VWAP"})]})]})]}),r.multipleStrategyA&&r.multipleStrategyB&&r.multipleStrategyA===r.multipleStrategyB&&o.jsx("p",{style:{color:"var(--danger)",fontSize:"0.9rem",marginTop:8},children:"Please choose two different strategies."})]}),(i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple")&&o.jsx("div",{children:o.jsxs("div",{className:"card mb-4",children:[o.jsx("h3",{className:"card-title",children:r.entryStyle==="multiple"?"Step 5: Review & Save":"Step 4: Review & Save"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Review your custom configuration before saving."}),o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"4px solid var(--accent)",marginBottom:20},children:[o.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Your Configuration Summary"}),o.jsxs("div",{className:"grid-3",children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Style:"}),o.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.tradingStyle==="scalper"&&" Scalper",r.tradingStyle==="day_trader"&&" Day Trader",r.tradingStyle==="swing_trader"&&" Swing Trader"]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Risk:"}),o.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.riskTolerance==="conservative"&&" Conservative",r.riskTolerance==="moderate"&&" Moderate",r.riskTolerance==="aggressive"&&" Aggressive"]})]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Entry:"}),o.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.entryStyle==="ema_cross"&&" EMA Cross",r.entryStyle==="rsi_dips"&&" RSI Dips",r.entryStyle==="price_levels"&&" Price Levels",r.entryStyle==="bollinger_bands"&&" Bollinger Bands",r.entryStyle==="vwap"&&" VWAP",r.entryStyle==="multiple"&&r.multipleStrategyA&&r.multipleStrategyB&&o.jsxs(o.Fragment,{children:[" Multiple (",r.multipleStrategyA.replace("_"," "),"+",r.multipleStrategyB.replace("_"," "),")"]}),r.entryStyle==="multiple"&&(!r.multipleStrategyA||!r.multipleStrategyB)&&" Multiple"]})]})]})]}),x&&o.jsxs("div",{style:{marginBottom:20},children:[o.jsx("h4",{style:{marginBottom:12},children:"What this means:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"var(--text-secondary)",lineHeight:1.8},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Position Size:"})," ",String(((L=x.risk)==null?void 0:L.max_lots)??"-")," lots per trade"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Profit Target:"})," ",String(((N=(E=x.trade_management)==null?void 0:E.target)==null?void 0:N.pips_default)??"-")," pips"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Max Trades/Day:"})," ",String(((S=x.risk)==null?void 0:S.max_trades_per_day)??"-")]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Polling Speed:"})," Every ",String(((W=x.execution)==null?void 0:W.loop_poll_seconds)??"-")," seconds"]})]})]}),o.jsx("div",{style:{marginBottom:20},children:o.jsxs("button",{className:"btn btn-secondary",style:{fontSize:"0.85rem"},onClick:()=>u(!a),children:[a?"Hide":"Show"," Advanced Settings"]})}),a&&x&&o.jsxs("div",{style:{marginBottom:20},children:[o.jsx("h4",{style:{marginBottom:12},children:"Full Configuration (JSON):"}),o.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(x,null,2)}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:"For advanced customization, edit the profile directly in the Profile Editor after saving."})]}),g&&o.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginBottom:16},children:o.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",g]})})]})}),(i===5&&r.entryStyle!=="multiple"||i===6&&r.entryStyle==="multiple")&&p&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[o.jsx("h3",{className:"card-title",style:{margin:0},children:r.entryStyle==="multiple"?"Step 6: Fine-Tune Settings":"Step 5: Fine-Tune Settings"}),o.jsx("button",{className:"btn btn-secondary",onClick:F,style:{fontSize:"0.8rem"},children:"Reset to Wizard Defaults"})]}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Adjust any settings using the +/- buttons or type directly. These values come from your wizard choices."}),ee&&o.jsxs("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.15)",border:"1px solid var(--danger)",borderRadius:8,marginBottom:20},children:[o.jsx("strong",{style:{color:"var(--danger)"},children:"Profile limit exceeded"}),o.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"You have violated your Profile Editor risk settings. This change cannot be made until you update your risk settings in the Profile Editor."})]}),o.jsxs("div",{style:{marginBottom:20},children:[o.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Risk Settings"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[o.jsx(re,{label:"Max Lots",value:(Y=p.risk)==null?void 0:Y.max_lots,onAdjust:w=>K(["risk","max_lots"],w,.01,10,.01),onChange:w=>A(["risk","max_lots"],w),step:.01,min:.01,max:10}),o.jsx(re,{label:"Min Stop Pips",value:(G=p.risk)==null?void 0:G.min_stop_pips,onAdjust:w=>K(["risk","min_stop_pips"],w,1,100,1),onChange:w=>A(["risk","min_stop_pips"],w),step:1,min:1,max:100}),o.jsx(re,{label:"Max Spread Pips",value:(Ae=p.risk)==null?void 0:Ae.max_spread_pips,onAdjust:w=>K(["risk","max_spread_pips"],w,.1,5,.1),onChange:w=>A(["risk","max_spread_pips"],w),step:.1,min:.1,max:5}),o.jsx(re,{label:"Max Trades/Day",value:(je=p.risk)==null?void 0:je.max_trades_per_day,onAdjust:w=>K(["risk","max_trades_per_day"],w,1,100,1),onChange:w=>A(["risk","max_trades_per_day"],w),step:1,min:1,max:100}),o.jsx(re,{label:"Max Open Trades",value:(xe=p.risk)==null?void 0:xe.max_open_trades,onAdjust:w=>K(["risk","max_open_trades"],w,1,10,1),onChange:w=>A(["risk","max_open_trades"],w),step:1,min:1,max:10}),o.jsx(re,{label:"Loss Cooldown (min)",value:(U=p.risk)==null?void 0:U.cooldown_minutes_after_loss,onAdjust:w=>K(["risk","cooldown_minutes_after_loss"],w,0,60,1),onChange:w=>A(["risk","cooldown_minutes_after_loss"],w),step:1,min:0,max:60}),o.jsx(re,{label:"Max Daily Loss %",value:(ne=p.risk)==null?void 0:ne.max_daily_loss_pct,onAdjust:w=>K(["risk","max_daily_loss_pct"],w,.5,20,.5),onChange:w=>A(["risk","max_daily_loss_pct"],w),step:.5,min:.5,max:20})]})]}),o.jsxs("div",{style:{marginBottom:20},children:[o.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Profit Target"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[o.jsx(re,{label:"Target Pips",value:(Wt=(ie=p.trade_management)==null?void 0:ie.target)==null?void 0:Wt.pips_default,onAdjust:w=>K(["trade_management","target","pips_default"],w,1,100,1),onChange:w=>A(["trade_management","target","pips_default"],w),step:1,min:1,max:100}),o.jsx(re,{label:"R:R Ratio",value:(Ss=(_s=p.trade_management)==null?void 0:_s.target)==null?void 0:Ss.rr_default,onAdjust:w=>K(["trade_management","target","rr_default"],w,.5,5,.1),onChange:w=>A(["trade_management","target","rr_default"],w),step:.1,min:.5,max:5})]})]}),o.jsxs("div",{style:{marginBottom:20},children:[o.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Execution"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[o.jsx(re,{label:"Poll Interval (sec)",value:(js=p.execution)==null?void 0:js.loop_poll_seconds,onAdjust:w=>K(["execution","loop_poll_seconds"],w,1,120,1),onChange:w=>A(["execution","loop_poll_seconds"],w),step:1,min:1,max:120}),o.jsx(re,{label:"Fast Poll (sec)",value:(Xe=p.execution)==null?void 0:Xe.loop_poll_seconds_fast,onAdjust:w=>K(["execution","loop_poll_seconds_fast"],w,1,60,1),onChange:w=>A(["execution","loop_poll_seconds_fast"],w),step:1,min:1,max:60})]})]}),(B=(rt=p.execution)==null?void 0:rt.policies)==null?void 0:B.map((w,V)=>o.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsxs("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.9rem"},children:["Policy: ",w.id," (",w.type,")"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:10},children:[w.type==="indicator_based"&&o.jsxs(o.Fragment,{children:[o.jsx(re,{label:"RSI Period",value:w.rsi_period,onAdjust:I=>{const O=p.execution.policies;O[V].rsi_period=Math.max(2,Math.min(50,w.rsi_period+I)),A(["execution","policies"],O)},onChange:I=>{const O=p.execution.policies;O[V].rsi_period=Math.max(2,Math.min(50,I)),A(["execution","policies"],O)},step:1,min:2,max:50}),o.jsx(re,{label:"RSI Oversold",value:w.rsi_oversold,onAdjust:I=>{const O=p.execution.policies;O[V].rsi_oversold=Math.max(10,Math.min(50,w.rsi_oversold+I)),A(["execution","policies"],O)},onChange:I=>{const O=p.execution.policies;O[V].rsi_oversold=Math.max(10,Math.min(50,I)),A(["execution","policies"],O)},step:1,min:10,max:50}),o.jsx(re,{label:"RSI Overbought",value:w.rsi_overbought,onAdjust:I=>{const O=p.execution.policies;O[V].rsi_overbought=Math.max(50,Math.min(90,w.rsi_overbought+I)),A(["execution","policies"],O)},onChange:I=>{const O=p.execution.policies;O[V].rsi_overbought=Math.max(50,Math.min(90,I)),A(["execution","policies"],O)},step:1,min:50,max:90}),o.jsx(re,{label:"TP Pips",value:w.tp_pips,onAdjust:I=>{const O=p.execution.policies;O[V].tp_pips=Math.max(1,Math.min(100,w.tp_pips+I)),A(["execution","policies"],O)},onChange:I=>{const O=p.execution.policies;O[V].tp_pips=Math.max(1,Math.min(100,I)),A(["execution","policies"],O)},step:1,min:1,max:100}),o.jsx(re,{label:"SL Pips",value:w.sl_pips,onAdjust:I=>{const O=p.execution.policies;O[V].sl_pips=Math.max(1,Math.min(100,w.sl_pips+I)),A(["execution","policies"],O)},onChange:I=>{const O=p.execution.policies;O[V].sl_pips=Math.max(1,Math.min(100,I)),A(["execution","policies"],O)},step:1,min:1,max:100}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Side:"}),o.jsx("span",{style:{fontWeight:600,color:w.side==="buy"?"var(--success)":"var(--danger)"},children:w.side.toUpperCase()})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Regime:"}),o.jsx("span",{style:{fontWeight:600},children:w.regime})]})]}),w.type==="confirmed_cross"&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[o.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Setup:"}),o.jsx("span",{style:{fontWeight:600},children:w.setup_id}),o.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"(bi-directional)"})]})]})]},V)),g&&o.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginTop:16},children:o.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",g]})})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[o.jsx("button",{className:"btn btn-secondary",onClick:_,disabled:i===1,children:" Back"}),o.jsxs("div",{style:{display:"flex",gap:12},children:[i<j&&o.jsx("button",{className:"btn btn-primary",onClick:k,disabled:!b(),children:i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple"?"Fine-Tune Settings ":"Next "}),(i>=4&&r.entryStyle!=="multiple"||i>=5&&r.entryStyle==="multiple")&&o.jsx("button",{className:"btn btn-success",onClick:C,disabled:d||ee,style:{minWidth:160},children:d?"Saving...":" Save Configuration"})]})]})]})}function N0({profile:t}){const[e,n]=z.useState([]),[i,s]=z.useState(null),[r,l]=z.useState(null),[a,u]=z.useState(null),[h,c]=z.useState(!1),[d,f]=z.useState(null),[g,v]=z.useState(null),[x,P]=z.useState(!1),[m,p]=z.useState(!0),[y,j]=z.useState(null),[b,M]=z.useState(""),[k,_]=z.useState(""),[C,F]=z.useState(""),[A,K]=z.useState(""),[ee,Q]=z.useState(!1),[X,L]=z.useState(null),[E,N]=z.useState(null),[S,W]=z.useState(!1),[Y,G]=z.useState(null),Ae=()=>{Qf(t.path).then(B=>{v(B),N(JSON.parse(JSON.stringify(B)))}).catch(console.error)},je=()=>{j0(t.name).then(B=>{var w,V,I,O;j(B),M(((w=B.temp_m5_trend_ema_fast)==null?void 0:w.toString())||""),_(((V=B.temp_m5_trend_ema_slow)==null?void 0:V.toString())||""),F(((I=B.temp_m1_zone_entry_ema_slow)==null?void 0:I.toString())||""),K(((O=B.temp_m1_pullback_cross_ema_slow)==null?void 0:O.toString())||"")}).catch(console.error)},xe=(B,w)=>{if(!E)return;const V=JSON.parse(JSON.stringify(E));let I=V;for(let O=0;O<B.length-1;O++){const H=B[O];I[H]===void 0&&(I[H]={}),I=I[H]}I[B[B.length-1]]=w,N(V)},U=(B,w,V)=>{if(!E)return;const I=JSON.parse(JSON.stringify(E)),O=I.execution||{},H=O.policies||[];H[B]&&(H[B][w]=V,I.execution={...O,policies:H},N(I))},ne=async()=>{if(E){W(!0),G(null);try{await eu(t.path,E),G("Settings saved!"),v(E),setTimeout(()=>G(null),3e3)}catch(B){G(`Error: ${B.message}`)}finally{W(!1)}}},ie=(B,w,V,I,O=1)=>{if(!E)return;let H=E;for(const fe of B.slice(0,-1))if(H=H[fe],!H)return;const de=H[B[B.length-1]]??0,ae=Math.max(V,Math.min(I,de+w*O));xe(B,O<1?Math.round(ae*100)/100:Math.round(ae))};z.useEffect(()=>{a0().then(B=>{n(B)}).catch(console.error),Ae(),je()},[t.path]),z.useEffect(()=>{i&&i!=="custom"?u0(i,t.path).then(B=>u(B)).catch(console.error):u(null)},[i,t.path]);const Wt=async()=>{if(!(!i||i==="custom")){c(!0);try{const B=i==="vwap_trend"?{vwap_session_filter_enabled:m}:void 0;await h0(i,t.path,B),f(`Preset "${i}" applied successfully!`),Ae(),setTimeout(()=>f(null),3e3)}catch(B){f(`Error: ${B.message}`)}finally{c(!1)}}},_s=(B,w)=>{w.stopPropagation(),l(r===B?null:B)},Ss=async()=>{Q(!0),L(null);try{await cc(t.name,{temp_m5_trend_ema_fast:b?parseInt(b,10):null,temp_m5_trend_ema_slow:k?parseInt(k,10):null,temp_m1_zone_entry_ema_slow:C?parseInt(C,10):null,temp_m1_pullback_cross_ema_slow:A?parseInt(A,10):null}),L("Settings applied! Will be used on next trade evaluation."),je()}catch(B){L(`Error: ${B.message}`)}finally{Q(!1)}},js=async()=>{Q(!0),L(null);try{await cc(t.name,{temp_m5_trend_ema_fast:null,temp_m5_trend_ema_slow:null,temp_m1_zone_entry_ema_slow:null,temp_m1_pullback_cross_ema_slow:null}),M(""),_(""),F(""),K(""),L("Settings cleared. Using preset defaults."),je()}catch(B){L(`Error: ${B.message}`)}finally{Q(!1)}},Xe=e.find(B=>B.id===i),rt=g==null?void 0:g.active_preset_name;return o.jsxs("div",{children:[o.jsx("h2",{className:"page-title",children:"Presets"}),o.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:'Select a preset to preview changes, then apply to your profile. Click "Pros & Cons" to see details.'}),rt&&o.jsxs("div",{className:"card mb-4",style:{borderColor:"var(--accent)",borderWidth:2,background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, var(--bg-secondary) 100%)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:4},children:"ACTIVE PRESET"}),o.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--accent)"},children:rt})]}),o.jsx("button",{className:"btn btn-secondary",onClick:()=>P(!x),style:{fontSize:"0.8rem"},children:x?"Hide Settings":"View Settings"})]}),x&&E&&(()=>{const B=E.risk||{},w=E.effective_risk||{},V=E.execution||{},I=V.policies||[],H=(E.trade_management||{}).target||{},de=rt==="kt_cg_trial_2",ae=rt==="kt_cg_counter_trend_pullback",fe=de||ae,Me=I.find($=>$.type==="kt_cg_hybrid"||$.type==="kt_cg_counter_trend_pullback"),se=I.findIndex($=>$.type==="kt_cg_hybrid"||$.type==="kt_cg_counter_trend_pullback");return o.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[o.jsx("div",{style:{marginBottom:12,fontSize:"0.8rem",color:"var(--text-secondary)"},children:'Adjust settings below. Changes are saved when you click "Save Settings".'}),o.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:8},children:"Risk Settings"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:8,marginBottom:16},children:[o.jsx(re,{label:"Max Lots",value:w.max_lots??B.max_lots,onAdjust:$=>ie(["effective_risk","max_lots"],$,.01,10,.01),onChange:$=>xe(["effective_risk","max_lots"],$),step:.01,min:.01,max:10}),o.jsx(re,{label:"Min Stop Pips",value:w.min_stop_pips??B.min_stop_pips,onAdjust:$=>ie(["effective_risk","min_stop_pips"],$,1,100,1),onChange:$=>xe(["effective_risk","min_stop_pips"],$),step:1,min:1,max:100}),o.jsx(re,{label:"Max Spread Pips",value:w.max_spread_pips??B.max_spread_pips,onAdjust:$=>ie(["effective_risk","max_spread_pips"],$,.1,20,.1),onChange:$=>xe(["effective_risk","max_spread_pips"],$),step:.1,min:.1,max:20}),o.jsx(re,{label:"Max Trades/Day",value:w.max_trades_per_day??B.max_trades_per_day,onAdjust:$=>ie(["effective_risk","max_trades_per_day"],$,1,200,1),onChange:$=>xe(["effective_risk","max_trades_per_day"],$),step:1,min:1,max:200}),o.jsx(re,{label:"Max Open Trades",value:w.max_open_trades??B.max_open_trades,onAdjust:$=>ie(["effective_risk","max_open_trades"],$,1,50,1),onChange:$=>xe(["effective_risk","max_open_trades"],$),step:1,min:1,max:50}),o.jsx(re,{label:"Cooldown (min)",value:w.cooldown_minutes_after_loss??B.cooldown_minutes_after_loss??0,onAdjust:$=>ie(["effective_risk","cooldown_minutes_after_loss"],$,0,120,1),onChange:$=>xe(["effective_risk","cooldown_minutes_after_loss"],$),step:1,min:0,max:120}),o.jsx(re,{label:"Target Pips",value:H.pips_default,onAdjust:$=>ie(["trade_management","target","pips_default"],$,.5,100,.5),onChange:$=>xe(["trade_management","target","pips_default"],$),step:.5,min:.5,max:100}),o.jsx(re,{label:"Poll Interval (s)",value:V.loop_poll_seconds,onAdjust:$=>ie(["execution","loop_poll_seconds"],$,.5,60,.5),onChange:$=>xe(["execution","loop_poll_seconds"],$),step:.5,min:.5,max:60})]}),fe&&Me&&o.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[o.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:8},children:"Swing Level Danger Zone Settings"}),o.jsx("div",{style:{marginBottom:12},children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"0.85rem"},children:[o.jsx("input",{type:"checkbox",checked:Me.swing_level_filter_enabled??!1,onChange:$=>U(se,"swing_level_filter_enabled",$.target.checked),style:{width:"auto"}}),"Enable Swing High/Low Danger Zone Filter"]})}),Me.swing_level_filter_enabled&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:8},children:[o.jsx(re,{label:"Danger Zone %",value:(Me.swing_danger_zone_pct??.15)*100,onAdjust:$=>{const dt=(Me.swing_danger_zone_pct??.15)*100,dn=Math.max(1,Math.min(50,dt+$));U(se,"swing_danger_zone_pct",dn/100)},onChange:$=>U(se,"swing_danger_zone_pct",Math.max(.01,Math.min(.5,$/100))),step:1,min:1,max:50}),o.jsx(re,{label:"Lookback Bars",value:Me.swing_lookback_bars??100,onAdjust:$=>{const dt=Me.swing_lookback_bars??100;U(se,"swing_lookback_bars",Math.max(10,Math.min(500,dt+$*10)))},onChange:$=>U(se,"swing_lookback_bars",Math.max(10,Math.min(500,$))),step:10,min:10,max:500}),o.jsx(re,{label:"Confirmation Bars",value:Me.swing_confirmation_bars??5,onAdjust:$=>{const dt=Me.swing_confirmation_bars??5;U(se,"swing_confirmation_bars",Math.max(1,Math.min(20,dt+$)))},onChange:$=>U(se,"swing_confirmation_bars",Math.max(1,Math.min(20,$))),step:1,min:1,max:20})]})]}),ae&&o.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[o.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600,marginBottom:8},children:"EMA Override Settings (Trial #3)"}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:12},children:"Override EMA periods for KT/CG Counter-Trend Pullback. Leave blank to use preset defaults."}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(160px, 1fr))",gap:8},children:[o.jsxs("div",{style:{marginBottom:4},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",display:"block",marginBottom:2},children:"M5 Trend - Fast EMA (default: 9)"}),o.jsx("input",{type:"number",value:b,onChange:$=>M($.target.value),placeholder:"9",min:1,max:200,style:{padding:"4px 8px",fontSize:"0.8rem",width:"100%"}})]}),o.jsxs("div",{style:{marginBottom:4},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",display:"block",marginBottom:2},children:"M5 Trend - Slow EMA (default: 21)"}),o.jsx("input",{type:"number",value:k,onChange:$=>_($.target.value),placeholder:"21",min:1,max:200,style:{padding:"4px 8px",fontSize:"0.8rem",width:"100%"}})]}),o.jsxs("div",{style:{marginBottom:4},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",display:"block",marginBottom:2},children:"M1 Zone Entry - Slow EMA (default: 13)"}),o.jsx("input",{type:"number",value:C,onChange:$=>F($.target.value),placeholder:"13",min:1,max:200,style:{padding:"4px 8px",fontSize:"0.8rem",width:"100%"}})]}),o.jsxs("div",{style:{marginBottom:4},children:[o.jsx("label",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",display:"block",marginBottom:2},children:"M1 Pullback Cross - Slow EMA (default: 15)"}),o.jsx("input",{type:"number",value:A,onChange:$=>K($.target.value),placeholder:"15",min:1,max:200,style:{padding:"4px 8px",fontSize:"0.8rem",width:"100%"}})]})]}),X&&o.jsx("p",{style:{fontSize:"0.75rem",marginTop:8,color:X.startsWith("Error")?"var(--danger)":"var(--success)"},children:X}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:12},children:[o.jsx("button",{className:"btn btn-primary",onClick:Ss,disabled:ee,style:{fontSize:"0.75rem",padding:"6px 12px"},children:ee?"Applying...":"Apply EMA Overrides"}),o.jsx("button",{className:"btn btn-secondary",onClick:js,disabled:ee,style:{fontSize:"0.75rem",padding:"6px 12px"},children:"Clear (Use Defaults)"})]}),y&&(y.temp_m5_trend_ema_fast||y.temp_m5_trend_ema_slow||y.temp_m1_zone_entry_ema_slow||y.temp_m1_pullback_cross_ema_slow)&&o.jsxs("div",{style:{marginTop:12,padding:8,background:"var(--bg-tertiary)",borderRadius:4,fontSize:"0.75rem"},children:[o.jsx("strong",{children:"Currently Active EMA Overrides:"}),o.jsxs("ul",{style:{margin:"4px 0 0 16px",padding:0},children:[y.temp_m5_trend_ema_fast&&o.jsxs("li",{children:["M5 Fast EMA: ",y.temp_m5_trend_ema_fast]}),y.temp_m5_trend_ema_slow&&o.jsxs("li",{children:["M5 Slow EMA: ",y.temp_m5_trend_ema_slow]}),y.temp_m1_zone_entry_ema_slow&&o.jsxs("li",{children:["M1 Zone Slow EMA: ",y.temp_m1_zone_entry_ema_slow]}),y.temp_m1_pullback_cross_ema_slow&&o.jsxs("li",{children:["M1 Pullback Slow EMA: ",y.temp_m1_pullback_cross_ema_slow]})]})]})]}),o.jsxs("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid var(--border)",display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{className:"btn btn-success",onClick:ne,disabled:S,style:{fontSize:"0.85rem"},children:S?"Saving...":"Save Settings"}),Y&&o.jsx("span",{style:{fontSize:"0.8rem",color:Y.startsWith("Error")?"var(--danger)":"var(--success)"},children:Y})]})]})})()]}),d&&o.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:o.jsx("p",{children:d})}),o.jsxs("div",{className:"grid-3 mb-4",children:[e.map(B=>{const w=rt===B.id;return o.jsxs("div",{className:`preset-card ${i===B.id?"selected":""}`,onClick:()=>s(B.id),style:w?{borderColor:"var(--success)",borderWidth:2}:{},children:[w&&o.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),o.jsx("div",{className:"preset-name",children:B.name}),o.jsx("div",{className:"preset-description",children:B.description}),o.jsx("button",{className:"btn btn-secondary",style:{marginTop:8,fontSize:"0.75rem",padding:"4px 8px"},onClick:V=>_s(B.id,V),children:r===B.id?"Hide":"Pros & Cons"}),r===B.id&&o.jsxs("div",{className:"proscons-dropdown",style:{marginTop:12,textAlign:"left"},children:[B.pros.length>0&&o.jsxs("div",{style:{marginBottom:8},children:[o.jsx("div",{style:{fontWeight:600,color:"var(--success)",fontSize:"0.8rem",marginBottom:4},children:"Pros"}),o.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:B.pros.map((V,I)=>o.jsx("li",{style:{marginBottom:2},children:V},I))})]}),B.cons.length>0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,color:"var(--warning)",fontSize:"0.8rem",marginBottom:4},children:"Cons"}),o.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:B.cons.map((V,I)=>o.jsx("li",{style:{marginBottom:2},children:V},I))})]})]})]},B.id)}),(()=>{const B=rt==null?void 0:rt.startsWith("Custom:");return o.jsxs("div",{className:`preset-card ${i==="custom"?"selected":""}`,onClick:()=>s("custom"),style:{borderStyle:"dashed",...B?{borderColor:"var(--success)",borderWidth:2}:{}},children:[B&&o.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),o.jsx("div",{className:"preset-name",children:"Custom"}),o.jsx("div",{className:"preset-description",children:B?`Currently running: ${rt}`:"Use the wizard to create a custom configuration."})]})})()]}),i&&i!=="custom"&&a&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex-between mb-4",children:[o.jsxs("h3",{className:"card-title",style:{margin:0},children:["Preview: ",(Xe==null?void 0:Xe.name)||i]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[i==="vwap_trend"&&o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:"0.9rem"},children:[o.jsx("span",{style:{color:"var(--text-secondary)"},children:"Optional: Session Filter (London + NY)"}),o.jsxs("select",{value:m?"on":"off",onChange:B=>p(B.target.value==="on"),title:"Turn On to only allow trades during London (816 UTC) or NY (1321 UTC) sessions; Off to trade any time.",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)"},children:[o.jsx("option",{value:"on",children:"On"}),o.jsx("option",{value:"off",children:"Off"})]})]}),o.jsx("button",{className:"btn btn-primary",onClick:Wt,disabled:h,children:h?"Applying...":"Apply Preset"})]})]}),Xe&&(Xe.pros.length>0||Xe.cons.length>0)&&o.jsxs("div",{className:"grid-2 mb-4",children:[Xe.pros.length>0&&o.jsxs("div",{style:{padding:12,background:"rgba(16, 185, 129, 0.1)",borderRadius:6,border:"1px solid var(--success)"},children:[o.jsx("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:8,fontSize:"0.85rem"},children:"Pros"}),o.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:Xe.pros.map((B,w)=>o.jsx("li",{style:{marginBottom:4},children:B},w))})]}),Xe.cons.length>0&&o.jsxs("div",{style:{padding:12,background:"rgba(245, 158, 11, 0.1)",borderRadius:6,border:"1px solid var(--warning)"},children:[o.jsx("div",{style:{fontWeight:600,color:"var(--warning)",marginBottom:8,fontSize:"0.85rem"},children:"Cons"}),o.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:Xe.cons.map((B,w)=>o.jsx("li",{style:{marginBottom:4},children:B},w))})]})]}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12,fontSize:"0.8rem"},children:"These settings will be changed when you apply:"}),o.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(a.changes||a,null,2)})]}),i==="custom"&&o.jsx(P0,{profile:t,currentProfile:g,onComplete:()=>{f("Custom configuration saved!"),setTimeout(()=>f(null),3e3)}})]})}function T0({profile:t,authStatus:e,onAuthChange:n}){const[i,s]=z.useState(null),[r,l]=z.useState(!1),[a,u]=z.useState(null),[h,c]=z.useState(null),[d,f]=z.useState(0),[g,v]=z.useState(null),[x,P]=z.useState(""),[m,p]=z.useState(""),[y,j]=z.useState(""),[b,M]=z.useState(null),[k,_]=z.useState(!1),C=e[t.path]||!1,F=()=>{v(null),P(""),p(""),j(""),M(null)},A=async()=>{if(!m||m.length<4){M("Password must be at least 4 characters");return}if(m!==y){M("Passwords do not match");return}_(!0),M(null);try{await Zo(t.path,null,m),n(),F(),u("Password set successfully!"),setTimeout(()=>u(null),3e3)}catch(S){M(S.message)}finally{_(!1)}},K=async()=>{if(!x){M("Enter current password");return}if(!m||m.length<4){M("New password must be at least 4 characters");return}if(m!==y){M("New passwords do not match");return}_(!0),M(null);try{await Zo(t.path,x,m),n(),F(),u("Password changed successfully!"),setTimeout(()=>u(null),3e3)}catch(S){M(S.message)}finally{_(!1)}},ee=async()=>{if(!x){M("Enter current password");return}_(!0),M(null);try{await o0(t.path,x),n(),F(),u("Password removed. Profile is now non-secure."),setTimeout(()=>u(null),3e3)}catch(S){M(S.message)}finally{_(!1)}};z.useEffect(()=>{s(null),c(null),Qf(t.path).then(S=>{s(S),c(null)}).catch(S=>{c(S.message),s(null)})},[t.path,d]);const Q=async()=>{if(i){l(!0),u(null);try{await eu(t.path,i),u("Profile saved!"),setTimeout(()=>u(null),2e3)}catch(S){u(`Error: ${S.message}`)}finally{l(!1)}}};if(!i)return o.jsxs("div",{children:[o.jsx("h2",{className:"page-title",children:"Profile Editor"}),h?o.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[o.jsxs("p",{style:{color:"var(--danger)"},children:["Failed to load profile: ",h]}),o.jsx("button",{className:"btn btn-primary",onClick:()=>f(S=>S+1),children:"Retry"})]}):o.jsx("div",{className:"card",children:"Loading profile..."})]});const X=i.risk||{},L=i.execution||{},E=(S,W,Y)=>{s({...i,[S]:{...i[S]||{},[W]:Y}})},N=(S,W)=>{s({...i,[S]:W})};return o.jsxs("div",{children:[o.jsx("h2",{className:"page-title",children:"Profile Editor"}),a&&o.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:o.jsx("p",{children:a})}),o.jsxs("div",{className:"grid-2",children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Basic Settings"}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Symbol"}),o.jsx("input",{value:i.symbol||"",onChange:S=>s({...i,symbol:S.target.value})})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Pip Size"}),o.jsx("input",{type:"number",step:"0.001",value:i.pip_size||.01,onChange:S=>s({...i,pip_size:parseFloat(S.target.value)})})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Account Settings"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Deposit amount and leverage ratio for your reference."}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Deposit Amount ($)"}),o.jsx("input",{type:"number",placeholder:"e.g., 100000",value:i.deposit_amount||"",onChange:S=>N("deposit_amount",S.target.value?parseFloat(S.target.value):null)})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Leverage Ratio"}),o.jsxs("select",{value:i.leverage_ratio||"",onChange:S=>N("leverage_ratio",S.target.value?parseInt(S.target.value):null),children:[o.jsx("option",{value:"",children:"Select leverage..."}),o.jsx("option",{value:"50",children:"1:50"}),o.jsx("option",{value:"100",children:"1:100"}),o.jsx("option",{value:"200",children:"1:200"}),o.jsx("option",{value:"400",children:"1:400"}),o.jsx("option",{value:"500",children:"1:500"})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Display Currency (Stats & Logs)"}),o.jsxs("select",{value:i.display_currency||"USD",onChange:S=>N("display_currency",S.target.value),children:[o.jsx("option",{value:"USD",children:"USD"}),o.jsx("option",{value:"JPY",children:"JPY"})]}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Profits and balances will be shown in this currency. JPY uses current rate from your symbol."})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Broker Connection"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Choose MetaTrader 5 (Windows) or OANDA (works on Mac/Linux and PaaS like Railway). OANDA is available in Japan and Canada."}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Broker Type"}),o.jsxs("select",{value:i.broker_type||"mt5",onChange:S=>N("broker_type",S.target.value),children:[o.jsx("option",{value:"mt5",children:"MetaTrader 5 (MT5)"}),o.jsx("option",{value:"oanda",children:"OANDA"})]})]}),i.broker_type==="oanda"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"OANDA API Key"}),o.jsx("input",{type:"password",autoComplete:"off",placeholder:"Paste your OANDA API token",value:i.oanda_token||"",onChange:S=>N("oanda_token",S.target.value||null)}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Create a token in OANDA Practice or Live account: Account  Manage API Access."})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"OANDA Account ID (optional)"}),o.jsx("input",{type:"text",placeholder:"Leave blank to use first account",value:i.oanda_account_id||"",onChange:S=>N("oanda_account_id",S.target.value||null)})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"OANDA Environment"}),o.jsxs("select",{value:i.oanda_environment||"practice",onChange:S=>N("oanda_environment",S.target.value),children:[o.jsx("option",{value:"practice",children:"Practice (demo)"}),o.jsx("option",{value:"live",children:"Live"})]})]})]})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Risk Settings"}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16,marginTop:-8},children:"These limits are final and cannot be overridden by presets or the custom wizard."}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Max Lots"}),o.jsx("input",{type:"number",step:"0.01",value:X.max_lots||.1,onChange:S=>E("risk","max_lots",parseFloat(S.target.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Max Spread (pips)"}),o.jsx("input",{type:"number",step:"0.1",value:X.max_spread_pips||2,onChange:S=>E("risk","max_spread_pips",parseFloat(S.target.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Max Trades/Day"}),o.jsx("input",{type:"number",value:X.max_trades_per_day||10,onChange:S=>E("risk","max_trades_per_day",parseInt(S.target.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Max Open Trades"}),o.jsx("input",{type:"number",min:1,max:20,value:X.max_open_trades??2,onChange:S=>E("risk","max_open_trades",parseInt(S.target.value)||1)})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Min Stop Loss (pips)"}),o.jsx("input",{type:"number",step:"0.1",min:1,max:100,value:X.min_stop_pips??10,onChange:S=>E("risk","min_stop_pips",parseFloat(S.target.value)||10)}),o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Minimum stop loss distance. Presets may use higher values but never lower."})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Cooldown After Loss (minutes)"}),o.jsx("input",{type:"number",min:0,max:120,value:X.cooldown_minutes_after_loss??0,onChange:S=>E("risk","cooldown_minutes_after_loss",parseInt(S.target.value)||0)})]}),o.jsx("div",{className:"form-group",children:o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:X.require_stop||!1,onChange:S=>E("risk","require_stop",S.target.checked),style:{width:"auto"}}),"Require Stop Loss"]})})]})]}),o.jsxs("div",{className:"card mt-4",children:[o.jsx("h3",{className:"card-title",children:"Profile Security"}),C?o.jsxs(o.Fragment,{children:[o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile is protected by a password."}),o.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("button",{className:"btn btn-secondary",onClick:()=>v("change"),children:"Change Password"}),o.jsx("button",{className:"btn btn-danger",onClick:()=>v("remove"),children:"Remove Password"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile has no password. Anyone with access to this computer can open it."}),o.jsx("button",{className:"btn btn-primary",onClick:()=>v("add"),children:"Add Password"})]})]}),g&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[o.jsxs("h3",{className:"card-title",children:[g==="add"&&"Add Password",g==="change"&&"Change Password",g==="remove"&&"Remove Password"]}),(g==="change"||g==="remove")&&o.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[o.jsx("label",{children:"Current Password"}),o.jsx("input",{type:"password",value:x,onChange:S=>P(S.target.value),placeholder:"Enter current password"})]}),(g==="add"||g==="change")&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[o.jsx("label",{children:g==="change"?"New Password":"Password"}),o.jsx("input",{type:"password",value:m,onChange:S=>p(S.target.value),placeholder:"Min 4 characters"})]}),o.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[o.jsxs("label",{children:["Confirm ",g==="change"?"New ":"","Password"]}),o.jsx("input",{type:"password",value:y,onChange:S=>j(S.target.value),placeholder:"Confirm password"})]})]}),g==="remove"&&o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12},children:"This will remove password protection. Anyone with access to this computer will be able to open this profile."}),(g==="add"||g==="change")&&o.jsx("p",{style:{fontSize:"0.75rem",color:"var(--warning)",marginBottom:12,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."}),b&&o.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:b}),o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:g==="remove"?"btn btn-danger":"btn btn-primary",onClick:g==="add"?A:g==="change"?K:ee,disabled:k,children:k?"Processing...":g==="add"?"Set Password":g==="change"?"Change Password":"Remove Password"}),o.jsx("button",{className:"btn btn-secondary",onClick:F,disabled:k,children:"Cancel"})]})]})}),o.jsxs("div",{className:"card mt-4",children:[o.jsx("h3",{className:"card-title",children:"Execution Settings"}),o.jsxs("div",{className:"grid-2",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Loop Poll Seconds"}),o.jsx("input",{type:"number",step:"0.5",value:L.loop_poll_seconds||5,onChange:S=>E("execution","loop_poll_seconds",parseFloat(S.target.value))})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{children:"Fast Poll Seconds"}),o.jsx("input",{type:"number",step:"0.5",value:L.loop_poll_seconds_fast||2,onChange:S=>E("execution","loop_poll_seconds_fast",parseFloat(S.target.value))})]})]}),o.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:["Policies: ",(L.policies||[]).length," configured. Use the Streamlit UI or edit JSON directly for full policy management."]})]}),o.jsx("div",{className:"mt-4",children:o.jsx("button",{className:"btn btn-primary",onClick:Q,disabled:r,children:r?"Saving...":"Save Profile"})})]})}function z0({profile:t}){const[e,n]=z.useState(null),[i,s]=z.useState({}),[r,l]=z.useState([]),[a,u]=z.useState(void 0),[h,c]=z.useState([]),[d,f]=z.useState(!1),[g,v]=z.useState(null),[x,P]=z.useState(null),[m,p]=z.useState(null),[y,j]=z.useState(null),[b,M]=z.useState(null),[k,_]=z.useState(null),[C,F]=z.useState("summary"),A=()=>{v0(t.name,t.path).then(n).catch(console.error),g0(t.name).then(s).catch(console.error),Gf(t.name,20,t.path).then(L=>{l(L.trades),u(L.display_currency)}).catch(console.error),m0(t.name,20).then(c).catch(console.error),y0(t.name,t.path).then(j).catch(console.error),x0(t.name,t.path).then(L=>_(L??null)).catch(()=>_(null))};z.useEffect(()=>{A()},[t.name,t.path]);const K=async()=>{f(!0),v(null);try{const L=await _0(t.name,t.path),E=[];L.trades_updated>0&&E.push(`${L.trades_updated} trade(s) synced`),L.trades_imported&&L.trades_imported>0&&E.push(`${L.trades_imported} trade(s) imported from broker history`),L.position_ids_backfilled&&L.position_ids_backfilled>0&&E.push(`${L.position_ids_backfilled} position ID(s) backfilled`),L.profit_backfilled&&L.profit_backfilled>0&&E.push(`${L.profit_backfilled} profit(s) updated from broker`),E.length>0?(v(E.join(", ")),A()):v("All trades up to date"),setTimeout(()=>v(null),4e3)}catch(L){v(`Sync error: ${L.message}`)}finally{f(!1)}},ee=async L=>{const E=String(L.trade_id||"");if(E){P(E);try{const N=await w0(t.name,E,t.path);v(`Closed trade: ${N.pips>=0?"+":""}${N.pips.toFixed(2)} pips`),A(),setTimeout(()=>v(null),3e3)}catch(N){v(`Close error: ${N.message}`)}finally{P(null),p(null)}}},Q=Object.values(i).reduce((L,E)=>L+E,0),X=L=>L.exit_price===null||L.exit_price===void 0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex-between mb-4",children:[o.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Logs & Stats"}),o.jsx("button",{className:"btn btn-secondary",onClick:K,disabled:d,children:d?"Syncing...":"Sync from broker"})]}),g&&o.jsx("div",{className:"card mb-4",style:{borderColor:"var(--accent)"},children:o.jsx("p",{children:g})}),m&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:o.jsxs("div",{className:"card",style:{maxWidth:400,margin:0},children:[o.jsx("h3",{className:"card-title",children:"Confirm Close Trade"}),o.jsx("p",{style:{marginBottom:16},children:"Are you sure you want to close this trade?"}),o.jsx("div",{style:{background:"var(--bg-tertiary)",padding:12,borderRadius:6,marginBottom:16},children:o.jsxs("p",{style:{margin:0,fontSize:"0.9rem"},children:[o.jsx("strong",{children:"Side:"})," ",String(m.side||"").toUpperCase(),o.jsx("br",{}),o.jsx("strong",{children:"Entry:"})," ",typeof m.entry_price=="number"?m.entry_price.toFixed(3):"-",o.jsx("br",{}),o.jsx("strong",{children:"Size:"})," ",typeof m.size_lots=="number"?m.size_lots:"-"," lots"]})}),o.jsx("p",{style:{color:"var(--warning)",fontSize:"0.85rem",marginBottom:16},children:"This will send a close order to your broker immediately."}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn btn-danger",onClick:()=>ee(m),disabled:x!==null,children:x?"Closing...":"Close Trade"}),o.jsx("button",{className:"btn btn-secondary",onClick:()=>p(null),disabled:x!==null,children:"Cancel"})]})]})}),o.jsxs("div",{className:"card mb-4",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8},children:[o.jsx("h3",{className:"card-title",style:{margin:0},children:"Quick Stats"}),e&&e.source==="mt5"&&o.jsx("span",{style:{fontSize:"0.7rem",background:"var(--success)",color:"white",padding:"4px 8px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4,marginBottom:16},children:e&&e.source==="mt5"?"Stats from broker deal history (same as View  Reports in MT5)":"Stats from local records. Use a broker connection (MT5 or OANDA) to see live report data."}),o.jsxs("div",{className:"grid-3",children:[o.jsxs("div",{className:"stat-box",children:[o.jsx("div",{className:"stat-value",children:(e==null?void 0:e.closed_trades)||0}),o.jsx("div",{className:"stat-label",children:"Closed Trades"}),e&&e.wins!=null&&e.losses!=null&&o.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:[o.jsxs("span",{style:{color:"var(--success)"},children:[e.wins," W"]})," / ",o.jsxs("span",{style:{color:"var(--danger)"},children:[e.losses," L"]})]})]}),o.jsxs("div",{className:"stat-box",children:[o.jsx("div",{className:"stat-value",children:(e==null?void 0:e.win_rate)!=null?`${(e.win_rate*100).toFixed(1)}%`:"-"}),o.jsx("div",{className:"stat-label",children:"Win Rate"})]}),o.jsxs("div",{className:"stat-box",children:[o.jsx("div",{className:"stat-value",children:(e==null?void 0:e.avg_pips)!=null?e.avg_pips.toFixed(3):"-"}),o.jsx("div",{className:"stat-label",children:"Avg Pips"})]})]}),e&&e.total_profit!=null||e&&(e.total_commission!=null||e.total_swap!=null)?o.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)",display:"flex",flexWrap:"wrap",gap:24},children:[e&&e.total_profit!=null&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Total Profit"}),o.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:e.total_profit>=0?"var(--success)":"var(--danger)"},children:[e.total_profit>=0?"+":"",e.total_profit.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_commission!=null&&e.total_commission!==0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Commission"}),o.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_commission.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_swap!=null&&e.total_swap!==0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Swap"}),o.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_swap.toFixed(2)," ",e.display_currency||"USD"]})]})]}):null,e&&e.source==="database"&&e.trades_without_profit!=null&&e.trades_without_profit>0&&o.jsx("p",{style:{marginTop:12,marginBottom:0,fontSize:"0.85rem",color:"var(--warning)"},children:"Some trades lack profit data. Sync from broker and refresh to see stats from broker report."})]}),k&&o.jsxs("div",{className:"card mb-4",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[o.jsx("h3",{className:"card-title",style:{margin:0},children:"Account Report"}),o.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),o.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Balance, equity, and closed P/L from your broker (MT5 or OANDA)"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsxs("div",{onClick:()=>F(C==="summary"?null:"summary"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("strong",{children:"Summary"}),o.jsx("span",{children:C==="summary"?"":""})]}),C==="summary"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Balance"}),o.jsx("br",{}),k.summary.balance.toFixed(2)," ",k.display_currency||"USD"]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Equity"}),o.jsx("br",{}),k.summary.equity.toFixed(2)," ",k.display_currency||"USD"]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Margin"}),o.jsx("br",{}),k.summary.margin.toFixed(2)," ",k.display_currency||"USD"]}),o.jsxs("div",{children:[o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Free Margin"}),o.jsx("br",{}),k.summary.free_margin.toFixed(2)," ",k.display_currency||"USD"]})]})]}),o.jsxs("div",{onClick:()=>F(C==="closed"?null:"closed"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("strong",{children:"Closed P/L"}),o.jsx("span",{children:C==="closed"?"":""})]}),C==="closed"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12,fontSize:"0.9rem"},children:[o.jsxs("div",{children:["Total Profit: ",o.jsxs("span",{style:{color:k.closed_pl.total_profit>=0?"var(--success)":"var(--danger)",fontWeight:600},children:[k.closed_pl.total_profit>=0?"+":"",k.closed_pl.total_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),o.jsxs("div",{children:["Commission: ",k.closed_pl.total_commission.toFixed(2)," ",k.display_currency||"USD"]}),o.jsxs("div",{children:["Swap: ",k.closed_pl.total_swap.toFixed(2)," ",k.display_currency||"USD"]}),o.jsxs("div",{children:["Gross Profit: ",o.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.gross_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),o.jsxs("div",{children:["Gross Loss: ",o.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.gross_loss.toFixed(2)," ",k.display_currency||"USD"]})]}),o.jsxs("div",{children:["Profit Factor: ",k.closed_pl.profit_factor.toFixed(2)]}),o.jsxs("div",{children:["Largest Win: ",o.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.largest_profit_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),o.jsxs("div",{children:["Largest Loss: ",o.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.largest_loss_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),o.jsxs("div",{children:["Expected Payoff: ",k.closed_pl.expected_payoff.toFixed(2)," ",k.display_currency||"USD"]})]})]}),o.jsxs("div",{onClick:()=>F(C==="longshort"?null:"longshort"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("strong",{children:"Long / Short"}),o.jsx("span",{children:C==="longshort"?"":""})]}),C==="longshort"&&o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[o.jsxs("div",{children:["Long: ",k.long_short.long_wins,"W / ",k.long_short.long_trades-k.long_short.long_wins,"L (",(k.long_short.long_win_pct*100).toFixed(0),"% win)"]}),o.jsxs("div",{children:["Short: ",k.long_short.short_wins,"W / ",k.long_short.short_trades-k.long_short.short_wins,"L (",(k.long_short.short_win_pct*100).toFixed(0),"% win)"]})]})]})]})]}),y&&Object.keys(y.presets).length>0&&o.jsxs("div",{className:"card mb-4",children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[o.jsx("h3",{className:"card-title",style:{margin:0},children:"Performance by Preset"}),y.source==="mt5"&&o.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),o.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16,marginTop:8,fontSize:"0.85rem"},children:["Preset names come from your local DB; win/loss and profit use broker history when available. For best accuracy, run ",o.jsx("strong",{children:"Sync from broker"})," so closed trades have position IDs, then refresh."]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(y.presets).sort(([,L],[,E])=>(E.total_pips||0)-(L.total_pips||0)).map(([L,E])=>{var W,Y,G,Ae,je,xe,U;const N=b===L,S=((W=Object.entries(y.presets).sort(([,ne],[,ie])=>(ie.total_pips||0)-(ne.total_pips||0))[0])==null?void 0:W[0])===L;return o.jsxs("div",{style:{border:`1px solid ${S?"var(--success)":"var(--border)"}`,borderRadius:8,overflow:"hidden",background:S?"rgba(34, 197, 94, 0.05)":"var(--bg-secondary)"},children:[o.jsxs("div",{onClick:()=>M(N?null:L),style:{padding:16,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("span",{style:{fontWeight:600},children:L}),S&&o.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"BEST"})]}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4},children:[E.total_trades," trades | Win: ",E.win_rate!=null?`${(E.win_rate*100).toFixed(0)}%`:"-"," | Total: ",o.jsxs("span",{style:{color:(E.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[E.total_pips>=0?"+":"",((Y=E.total_pips)==null?void 0:Y.toFixed(1))||0," pips"]}),E.total_profit!=null&&o.jsxs(o.Fragment,{children:[" | Profit: ",o.jsxs("span",{style:{color:E.total_profit>=0?"var(--success)":"var(--danger)"},children:[E.total_profit>=0?"+":"",E.total_profit.toFixed(2)," ",y.display_currency||"USD"]})]}),E.total_commission!=null&&E.total_commission!==0&&o.jsxs(o.Fragment,{children:[" | Commission: ",E.total_commission.toFixed(2)," ",y.display_currency||"USD"]})]})]}),o.jsx("span",{style:{fontSize:"1.2rem"},children:N?"":""})]}),N&&o.jsx("div",{style:{padding:"0 16px 16px 16px",borderTop:"1px solid var(--border)",paddingTop:16},children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:12},children:[o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Trades"}),o.jsx("div",{style:{fontWeight:700},children:E.total_trades})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win / Loss"}),o.jsxs("div",{style:{fontWeight:700},children:[o.jsx("span",{style:{color:"var(--success)"},children:E.wins})," /",o.jsx("span",{style:{color:"var(--danger)"},children:E.losses})]})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Rate"}),o.jsx("div",{style:{fontWeight:700,color:(E.win_rate||0)>=.5?"var(--success)":"var(--warning)"},children:E.win_rate!=null?`${(E.win_rate*100).toFixed(1)}%`:"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Pips"}),o.jsxs("div",{style:{fontWeight:700,color:(E.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[E.total_pips>=0?"+":"",((G=E.total_pips)==null?void 0:G.toFixed(2))||0]})]}),E.total_profit!=null&&o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Profit"}),o.jsxs("div",{style:{fontWeight:700,color:E.total_profit>=0?"var(--success)":"var(--danger)"},children:[E.total_profit>=0?"+":"",E.total_profit.toFixed(2)," ",y.display_currency||"USD"]})]}),E.total_commission!=null&&E.total_commission!==0&&o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Commission"}),o.jsxs("div",{style:{fontWeight:700},children:[E.total_commission.toFixed(2)," ",y.display_currency||"USD"]})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg Pips"}),o.jsx("div",{style:{fontWeight:700},children:((Ae=E.avg_pips)==null?void 0:Ae.toFixed(2))||"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg R:R"}),o.jsx("div",{style:{fontWeight:700},children:((je=E.avg_rr)==null?void 0:je.toFixed(2))||"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Best Trade"}),o.jsx("div",{style:{fontWeight:700,color:"var(--success)"},children:E.best_trade!=null?`+${E.best_trade.toFixed(1)} pips`:"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Worst Trade"}),o.jsx("div",{style:{fontWeight:700,color:"var(--danger)"},children:E.worst_trade!=null?`${E.worst_trade.toFixed(1)} pips`:"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Streak"}),o.jsx("div",{style:{fontWeight:700},children:E.win_streak})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Loss Streak"}),o.jsx("div",{style:{fontWeight:700},children:E.loss_streak})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Profit Factor"}),o.jsx("div",{style:{fontWeight:700,color:(E.profit_factor||0)>=1?"var(--success)":"var(--danger)"},children:((xe=E.profit_factor)==null?void 0:xe.toFixed(2))||"-"})]}),o.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Max Drawdown"}),o.jsxs("div",{style:{fontWeight:700,color:"var(--warning)"},children:[((U=E.max_drawdown)==null?void 0:U.toFixed(1))||0," pips"]})]})]})})]},L)})})]}),o.jsxs("div",{className:"card mb-4",children:[o.jsx("h3",{className:"card-title",children:"Rejection Breakdown"}),Object.entries(i).length===0?o.jsx("p",{style:{color:"var(--text-secondary)"},children:"No executions yet."}):Object.entries(i).map(([L,E])=>o.jsxs("div",{className:"breakdown-bar",children:[o.jsx("span",{className:"breakdown-label",children:L}),o.jsxs("div",{className:"breakdown-value",children:[o.jsx("div",{className:"breakdown-fill",style:{width:`${E/Q*100}%`}}),o.jsx("span",{className:"breakdown-count",children:E})]})]},L))]}),o.jsxs("div",{className:"card mb-4",children:[o.jsx("h3",{className:"card-title",children:"Recent Trades"}),o.jsx("div",{className:"table-container",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Time"}),o.jsx("th",{children:"Side"}),o.jsx("th",{children:"Entry"}),o.jsx("th",{children:"Exit"}),o.jsx("th",{children:"Pips"}),o.jsx("th",{children:"R"}),o.jsx("th",{children:"Profit"}),o.jsx("th",{children:"Source"}),o.jsx("th",{children:"Exit Reason"}),o.jsx("th",{children:"Action"})]})}),o.jsx("tbody",{children:r.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No trades yet."})}):r.map((L,E)=>{const N=String(L.opened_by||""),S=String(L.exit_reason||""),Y=(G=>{if(!G)return{text:"-",color:"inherit"};switch(G){case"hit_take_profit":return{text:"TP",color:"var(--success)"};case"hit_stop_loss":return{text:"SL",color:"var(--danger)"};case"user_closed_early":return{text:"User",color:"var(--warning)"};case"UI_manual_close":return{text:"UI",color:"var(--accent)"};case"mt5_history_import":return{text:"Imported",color:"var(--text-secondary)"};default:return{text:G.replace(/_/g," "),color:"var(--text-secondary)"}}})(S);return o.jsxs("tr",{children:[o.jsx("td",{children:String(L.timestamp_utc||"").slice(0,19)}),o.jsx("td",{children:String(L.side||"")}),o.jsx("td",{children:typeof L.entry_price=="number"?L.entry_price.toFixed(3):"-"}),o.jsx("td",{children:typeof L.exit_price=="number"?L.exit_price.toFixed(3):"-"}),o.jsx("td",{style:{color:typeof L.pips=="number"?L.pips>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof L.pips=="number"?L.pips.toFixed(2):"-"}),o.jsx("td",{children:typeof L.r_multiple=="number"?L.r_multiple.toFixed(2):"-"}),o.jsx("td",{style:{color:typeof L.profit_display=="number"?L.profit_display>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof L.profit_display=="number"?`${L.profit_display>=0?"+":""}${L.profit_display.toFixed(2)} ${a||(e==null?void 0:e.display_currency)||"USD"}`:"-"}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 6px",borderRadius:4,background:N==="program"?"rgba(59, 130, 246, 0.2)":"rgba(156, 163, 175, 0.2)",color:N==="program"?"var(--accent)":"var(--text-secondary)"},children:N==="program"?"Bot":N==="manual"?"Manual":"-"})}),o.jsx("td",{children:o.jsx("span",{style:{fontSize:"0.75rem",color:Y.color},children:Y.text})}),o.jsx("td",{children:X(L)&&(L.mt5_order_id||L.mt5_position_id)?o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>p(L),disabled:x===String(L.trade_id),children:"Close"}):X(L)?o.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No position ID"}):o.jsx("span",{style:{color:"var(--success)",fontSize:"0.75rem"},children:"Closed"})})]},E)})})]})})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{className:"card-title",children:"Recent Executions"}),o.jsx("div",{className:"table-container",children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Time"}),o.jsx("th",{children:"Mode"}),o.jsx("th",{children:"Placed"}),o.jsx("th",{children:"Reason"})]})}),o.jsx("tbody",{children:h.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No executions yet."})}):h.map((L,E)=>o.jsxs("tr",{children:[o.jsx("td",{children:String(L.timestamp_utc||"").slice(0,19)}),o.jsx("td",{children:String(L.mode||"")}),o.jsx("td",{children:L.placed?"Yes":"No"}),o.jsx("td",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:String(L.reason||"")})]},E))})]})})]})]})}function L0(){const[t,e]=z.useState("quickstart"),n=s=>{e(t===s?null:s)},i=({id:s,title:r,icon:l,children:a})=>o.jsxs("div",{className:"card mb-4",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>n(s),children:[o.jsxs("h3",{className:"card-title",style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[o.jsx("span",{style:{fontSize:"1.3rem"},children:l}),r]}),o.jsx("span",{style:{color:"var(--accent)",fontSize:"1.2rem"},children:t===s?"":"+"})]}),t===s&&o.jsx("div",{style:{marginTop:16},children:a})]});return o.jsxs("div",{children:[o.jsx("h2",{className:"page-title",children:"Help / Guide"}),o.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:24},children:"Welcome to the USDJPY Trading Assistant! This guide will help you get started and understand how to use the bot effectively."}),o.jsxs(i,{id:"quickstart",title:"Quick Start (5 Steps)",icon:"",children:[o.jsx("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,marginBottom:16},children:o.jsxs("ol",{style:{margin:0,paddingLeft:24,lineHeight:2.2},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Select or create an account"})," using the sidebar dropdown. Each account has its own settings and trade history."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Go to Presets"})," and pick a preset that matches your style (start with ",o.jsx("em",{children:"Conservative Scalping"})," if unsure), then click ",o.jsx("strong",{children:"Apply Preset"}),"."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Go to Run / Status"}),", set the mode to ",o.jsx("strong",{children:"ARMED_AUTO_DEMO"}),", then click ",o.jsx("strong",{children:"Start Loop"}),"."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Watch the log"})," - the bot will show heartbeats every few seconds and log its trading decisions."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Check Logs & Stats"})," to see your trades, win rate, and performance metrics."]})]})}),o.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[o.jsx("strong",{children:"Tip:"})," The bot only trades on demo accounts for safety. For MT5, have the terminal running and connected; for OANDA, set your API key in Profile Editor."]})]}),o.jsxs(i,{id:"presets",title:"Understanding Presets",icon:"",children:[o.jsx("p",{style:{marginBottom:16},children:"Presets are pre-configured trading strategies. Each preset has different characteristics:"}),o.jsx("div",{className:"table-container",style:{marginBottom:16},children:o.jsxs("table",{children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Preset"}),o.jsx("th",{children:"Style"}),o.jsx("th",{children:"Trades/Day"}),o.jsx("th",{children:"Target"}),o.jsx("th",{children:"Risk Level"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("strong",{children:"Conservative Scalping"})}),o.jsx("td",{children:"Quick trades"}),o.jsx("td",{children:"5-10"}),o.jsx("td",{children:"8 pips"}),o.jsx("td",{style:{color:"var(--success)"},children:"Low"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("strong",{children:"Aggressive Scalping"})}),o.jsx("td",{children:"Quick trades"}),o.jsx("td",{children:"15-25"}),o.jsx("td",{children:"8 pips"}),o.jsx("td",{style:{color:"var(--danger)"},children:"High"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("strong",{children:"Moderate Swing"})}),o.jsx("td",{children:"Longer holds"}),o.jsx("td",{children:"2-5"}),o.jsx("td",{children:"20 pips"}),o.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("strong",{children:"RSI Mean Reversion"})}),o.jsx("td",{children:"Counter-trend"}),o.jsx("td",{children:"5-10"}),o.jsx("td",{children:"10 pips"}),o.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:o.jsx("strong",{children:"Custom"})}),o.jsx("td",{children:"Your choice"}),o.jsx("td",{children:"Variable"}),o.jsx("td",{children:"Variable"}),o.jsx("td",{children:"Configurable"})]})]})]})}),o.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[o.jsx("strong",{children:"Recommendation:"})," Start with ",o.jsx("em",{children:"Conservative Scalping"})," to see how the bot works with minimal risk. Once comfortable, try other presets or create a custom configuration."]})]}),o.jsx(i,{id:"dashboard",title:"Reading the Dashboard",icon:"",children:o.jsxs("div",{className:"grid-2",style:{gap:16},children:[o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Run / Status Page"}),o.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Loop Status:"})," Shows if the trading loop is running or stopped"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mode:"})," DISARMED (no trades), ARMED_MANUAL_CONFIRM (prompts before trading), ARMED_AUTO_DEMO (fully automated)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Kill Switch:"})," Emergency stop - prevents any new trades"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Loop Log:"})," Real-time output showing heartbeats and decisions"]})]})]}),o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Logs & Stats Page"}),o.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Quick Stats:"})," Closed trades, win rate, average pips"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Rejection Breakdown:"})," Why trades weren't taken (spread, filters, etc.)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Recent Trades:"})," Your trade history with P/L"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Sync from broker:"})," Updates trade data from your broker (MT5 or OANDA)"]})]})]})]})}),o.jsxs(i,{id:"analysis",title:"Technical Analysis Page",icon:"",children:[o.jsx("p",{style:{marginBottom:16},children:"The Analysis page provides real-time technical analysis across three timeframes (H4, M15, M1):"}),o.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:20,lineHeight:1.8},children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Regime:"})," Current market trend - BULL (uptrend), BEAR (downtrend), or SIDEWAYS"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"RSI:"})," Relative Strength Index - Oversold (below 30, potential buy), Overbought (above 70, potential sell), Neutral"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"MACD:"})," Momentum indicator - Positive (bullish momentum), Negative (bearish momentum)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"ATR:"})," Average True Range - Elevated (high volatility), Normal, Low (quiet market)"]})]}),o.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Click on any timeframe card to expand and see detailed indicator values. The page auto-refreshes every 30 seconds."})]}),o.jsx(i,{id:"faq",title:"Common Questions",icon:"",children:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"Why isn't the bot trading?"}),o.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Check these common reasons:",o.jsx("br",{})," ",o.jsx("strong",{children:"Spread too wide:"})," The bot waits for good spreads to avoid slippage",o.jsx("br",{})," ",o.jsx("strong",{children:"Alignment filters:"})," Multi-timeframe conditions must match",o.jsx("br",{})," ",o.jsx("strong",{children:"Max trades reached:"})," Daily trade limit hit",o.jsx("br",{})," ",o.jsx("strong",{children:"Kill switch on:"})," Check the Run page",o.jsx("br",{})," ",o.jsx("strong",{children:"Market closed:"})," Forex markets close on weekends"]})]}),o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"How do I close a trade?"}),o.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Go to ",o.jsx("strong",{children:"Logs & Stats"}),", find your open trade in the Recent Trades table, and click the ",o.jsx("strong",{children:"Close"})," button. You'll be asked to confirm before the close order is sent."]})]}),o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"What does the kill switch do?"}),o.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["The kill switch ",o.jsx("strong",{children:"immediately stops all new trades"})," from being placed. It does not close existing positions - use the Close button for that. Toggle it on if you need to pause the bot quickly."]})]}),o.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[o.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"My trade history is missing?"}),o.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Click ",o.jsx("strong",{children:"Sync from broker"})," on the Logs & Stats page. This will import any trades that were opened or closed in your broker platform, including trades closed by hitting TP/SL."]})]})]})}),o.jsx(i,{id:"glossary",title:"Glossary",icon:"",children:o.jsx("div",{className:"grid-2",style:{gap:12},children:[{term:"Pip",def:"Smallest price move. For USDJPY, 1 pip = 0.01 (e.g., 154.50 to 154.51)"},{term:"Lot",def:"Trade size. 0.01 = micro lot (1,000 units), 0.1 = mini lot (10,000 units), 1.0 = standard lot (100,000 units)"},{term:"Spread",def:"Difference between buy (ask) and sell (bid) price. Lower = better."},{term:"EMA",def:"Exponential Moving Average - weighted average of recent prices, responds quickly to changes"},{term:"SMA",def:"Simple Moving Average - equal-weighted average of prices over a period"},{term:"RSI",def:"Relative Strength Index (0-100). Below 30 = oversold, above 70 = overbought"},{term:"MACD",def:"Moving Average Convergence Divergence - momentum indicator showing trend direction"},{term:"ATR",def:"Average True Range - measures market volatility"},{term:"Regime",def:"Current market trend: bullish (up), bearish (down), or sideways"},{term:"Stop Loss (SL)",def:"Price level where trade closes to limit losses"},{term:"Take Profit (TP)",def:"Price level where trade closes to lock in profits"},{term:"R-Multiple",def:"Risk-adjusted return. R of 2 means you made 2x your risked amount"}].map((s,r)=>o.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[o.jsxs("strong",{style:{color:"var(--accent)"},children:[s.term,":"]}),o.jsx("span",{style:{marginLeft:8,color:"var(--text-secondary)",fontSize:"0.9rem"},children:s.def})]},r))})}),o.jsxs("div",{className:"card",style:{borderColor:"var(--warning)",background:"rgba(245, 158, 11, 0.1)"},children:[o.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--warning)",display:"flex",alignItems:"center",gap:8},children:" Important Safety Notice"}),o.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[o.jsxs("li",{children:["This bot is designed for ",o.jsx("strong",{children:"demo trading only"}),". It will refuse to trade on live accounts."]}),o.jsx("li",{children:"Trading carries risk. Past performance does not guarantee future results."}),o.jsx("li",{children:"Always monitor the bot and understand what it's doing before trusting it with larger positions."}),o.jsx("li",{children:"Start with conservative settings and small position sizes while you learn."})]})]})]})}eo.createRoot(document.getElementById("root")).render(o.jsx(gp.StrictMode,{children:o.jsx(b0,{})}));
