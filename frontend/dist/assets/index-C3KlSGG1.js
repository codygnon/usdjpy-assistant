(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function lp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vc={exports:{}},Or={},yc={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vn=Symbol.for("react.element"),op=Symbol.for("react.portal"),ap=Symbol.for("react.fragment"),up=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),cp=Symbol.for("react.provider"),dp=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),pp=Symbol.for("react.suspense"),mp=Symbol.for("react.memo"),gp=Symbol.for("react.lazy"),nu=Symbol.iterator;function vp(t){return t===null||typeof t!="object"?null:(t=nu&&t[nu]||t["@@iterator"],typeof t=="function"?t:null)}var xc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wc=Object.assign,_c={};function gs(t,e,i){this.props=t,this.context=e,this.refs=_c,this.updater=i||xc}gs.prototype.isReactComponent={};gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Sc(){}Sc.prototype=gs.prototype;function ia(t,e,i){this.props=t,this.context=e,this.refs=_c,this.updater=i||xc}var sa=ia.prototype=new Sc;sa.constructor=ia;wc(sa,gs.prototype);sa.isPureReactComponent=!0;var ru=Array.isArray,jc=Object.prototype.hasOwnProperty,na={current:null},bc={key:!0,ref:!0,__self:!0,__source:!0};function kc(t,e,i){var s,n={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)jc.call(e,s)&&!bc.hasOwnProperty(s)&&(n[s]=e[s]);var a=arguments.length-2;if(a===1)n.children=i;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];n.children=u}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)n[s]===void 0&&(n[s]=a[s]);return{$$typeof:vn,type:t,key:r,ref:o,props:n,_owner:na.current}}function yp(t,e){return{$$typeof:vn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ra(t){return typeof t=="object"&&t!==null&&t.$$typeof===vn}function xp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var lu=/\/+/g;function hl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xp(""+t.key):e.toString(36)}function qn(t,e,i,s,n){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vn:case op:o=!0}}if(o)return o=t,n=n(o),t=s===""?"."+hl(o,0):s,ru(n)?(i="",t!=null&&(i=t.replace(lu,"$&/")+"/"),qn(n,e,i,"",function(h){return h})):n!=null&&(ra(n)&&(n=yp(n,i+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(lu,"$&/")+"/")+t)),e.push(n)),1;if(o=0,s=s===""?".":s+":",ru(t))for(var a=0;a<t.length;a++){r=t[a];var u=s+hl(r,a);o+=qn(r,e,i,u,n)}else if(u=vp(t),typeof u=="function")for(t=u.call(t),a=0;!(r=t.next()).done;)r=r.value,u=s+hl(r,a++),o+=qn(r,e,i,u,n);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mn(t,e,i){if(t==null)return t;var s=[],n=0;return qn(t,s,"","",function(r){return e.call(i,r,n++)}),s}function wp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Zn={transition:null},_p={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Zn,ReactCurrentOwner:na};function Mc(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Mn,forEach:function(t,e,i){Mn(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Mn(t,function(){e++}),e},toArray:function(t){return Mn(t,function(e){return e})||[]},only:function(t){if(!ra(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=gs;Q.Fragment=ap;Q.Profiler=hp;Q.PureComponent=ia;Q.StrictMode=up;Q.Suspense=pp;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_p;Q.act=Mc;Q.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=wc({},t.props),n=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=na.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)jc.call(e,u)&&!bc.hasOwnProperty(u)&&(s[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)s.children=i;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];s.children=a}return{$$typeof:vn,type:t.type,key:n,ref:r,props:s,_owner:o}};Q.createContext=function(t){return t={$$typeof:dp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cp,_context:t},t.Consumer=t};Q.createElement=kc;Q.createFactory=function(t){var e=kc.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:fp,render:t}};Q.isValidElement=ra;Q.lazy=function(t){return{$$typeof:gp,_payload:{_status:-1,_result:t},_init:wp}};Q.memo=function(t,e){return{$$typeof:mp,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=Zn.transition;Zn.transition={};try{t()}finally{Zn.transition=e}};Q.unstable_act=Mc;Q.useCallback=function(t,e){return De.current.useCallback(t,e)};Q.useContext=function(t){return De.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return De.current.useDeferredValue(t)};Q.useEffect=function(t,e){return De.current.useEffect(t,e)};Q.useId=function(){return De.current.useId()};Q.useImperativeHandle=function(t,e,i){return De.current.useImperativeHandle(t,e,i)};Q.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return De.current.useMemo(t,e)};Q.useReducer=function(t,e,i){return De.current.useReducer(t,e,i)};Q.useRef=function(t){return De.current.useRef(t)};Q.useState=function(t){return De.current.useState(t)};Q.useSyncExternalStore=function(t,e,i){return De.current.useSyncExternalStore(t,e,i)};Q.useTransition=function(){return De.current.useTransition()};Q.version="18.3.1";yc.exports=Q;var z=yc.exports;const Sp=lp(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=z,bp=Symbol.for("react.element"),kp=Symbol.for("react.fragment"),Mp=Object.prototype.hasOwnProperty,Cp=jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ep={key:!0,ref:!0,__self:!0,__source:!0};function Cc(t,e,i){var s,n={},r=null,o=null;i!==void 0&&(r=""+i),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Mp.call(e,s)&&!Ep.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:bp,type:t,key:r,ref:o,props:n,_owner:Cp.current}}Or.Fragment=kp;Or.jsx=Cc;Or.jsxs=Cc;vc.exports=Or;var l=vc.exports,to={},Ec={exports:{}},et={},Pc={exports:{}},Nc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(S,w){var E=S.length;S.push(w);e:for(;0<E;){var V=E-1>>>1,F=S[V];if(0<n(F,w))S[V]=w,S[E]=F,E=V;else break e}}function i(S){return S.length===0?null:S[0]}function s(S){if(S.length===0)return null;var w=S[0],E=S.pop();if(E!==w){S[0]=E;e:for(var V=0,F=S.length,ie=F>>>1;V<ie;){var ne=2*(V+1)-1,fe=S[ne],O=ne+1,J=S[O];if(0>n(fe,E))O<F&&0>n(J,fe)?(S[V]=J,S[O]=E,V=O):(S[V]=fe,S[ne]=E,V=ne);else if(O<F&&0>n(J,E))S[V]=J,S[O]=E,V=O;else break e}}return w}function n(S,w){var E=S.sortIndex-w.sortIndex;return E!==0?E:S.id-w.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],c=1,d=null,f=3,m=!1,y=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(S){for(var w=i(h);w!==null;){if(w.callback===null)s(h);else if(w.startTime<=S)s(h),w.sortIndex=w.expirationTime,e(u,w);else break;w=i(h)}}function _(S){if(x=!1,v(S),!y)if(i(u)!==null)y=!0,L(M);else{var w=i(h);w!==null&&j(_,w.startTime-S)}}function M(S,w){y=!1,x&&(x=!1,g(T),T=-1),m=!0;var E=f;try{for(v(w),d=i(u);d!==null&&(!(d.expirationTime>w)||S&&!D());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var F=V(d.expirationTime<=w);w=t.unstable_now(),typeof F=="function"?d.callback=F:d===i(u)&&s(u),v(w)}else s(u);d=i(u)}if(d!==null)var ie=!0;else{var ne=i(h);ne!==null&&j(_,ne.startTime-w),ie=!1}return ie}finally{d=null,f=E,m=!1}}var C=!1,k=null,T=-1,W=5,B=-1;function D(){return!(t.unstable_now()-B<W)}function U(){if(k!==null){var S=t.unstable_now();B=S;var w=!0;try{w=k(!0,S)}finally{w?X():(C=!1,k=null)}}else C=!1}var X;if(typeof p=="function")X=function(){p(U)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,K=q.port2;q.port1.onmessage=U,X=function(){K.postMessage(null)}}else X=function(){P(U,0)};function L(S){k=S,C||(C=!0,X())}function j(S,w){T=P(function(){S(t.unstable_now())},w)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(S){S.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,L(M))},t.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<S?Math.floor(1e3/S):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(u)},t.unstable_next=function(S){switch(f){case 1:case 2:case 3:var w=3;break;default:w=f}var E=f;f=w;try{return S()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(S,w){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var E=f;f=S;try{return w()}finally{f=E}},t.unstable_scheduleCallback=function(S,w,E){var V=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?V+E:V):E=V,S){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=E+F,S={id:c++,callback:w,priorityLevel:S,startTime:E,expirationTime:F,sortIndex:-1},E>V?(S.sortIndex=E,e(h,S),i(u)===null&&S===i(h)&&(x?(g(T),T=-1):x=!0,j(_,E-V))):(S.sortIndex=F,e(u,S),y||m||(y=!0,L(M))),S},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(S){var w=f;return function(){var E=f;f=w;try{return S.apply(this,arguments)}finally{f=E}}}})(Nc);Pc.exports=Nc;var Pp=Pc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np=z,Ze=Pp;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tc=new Set,Js={};function zi(t,e){ls(t,e),ls(t+"Capture",e)}function ls(t,e){for(Js[t]=e,t=0;t<e.length;t++)Tc.add(e[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=Object.prototype.hasOwnProperty,Tp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ou={},au={};function zp(t){return io.call(au,t)?!0:io.call(ou,t)?!1:Tp.test(t)?au[t]=!0:(ou[t]=!0,!1)}function Rp(t,e,i,s){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Lp(t,e,i,s){if(e===null||typeof e>"u"||Rp(t,e,i,s))return!0;if(s)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,i,s,n,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var la=/[\-:]([a-z])/g;function oa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(la,oa);Ne[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(la,oa);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(la,oa);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function aa(t,e,i,s){var n=Ne.hasOwnProperty(e)?Ne[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Lp(e,i,n,s)&&(i=null),s||n===null?zp(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):n.mustUseProperty?t[n.propertyName]=i===null?n.type===3?!1:"":i:(e=n.attributeName,s=n.attributeNamespace,i===null?t.removeAttribute(e):(n=n.type,i=n===3||n===4&&i===!0?"":""+i,s?t.setAttributeNS(s,e,i):t.setAttribute(e,i))))}var At=Np.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cn=Symbol.for("react.element"),Fi=Symbol.for("react.portal"),Oi=Symbol.for("react.fragment"),ua=Symbol.for("react.strict_mode"),so=Symbol.for("react.profiler"),zc=Symbol.for("react.provider"),Rc=Symbol.for("react.context"),ha=Symbol.for("react.forward_ref"),no=Symbol.for("react.suspense"),ro=Symbol.for("react.suspense_list"),ca=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),Lc=Symbol.for("react.offscreen"),uu=Symbol.iterator;function Ss(t){return t===null||typeof t!="object"?null:(t=uu&&t[uu]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,cl;function Ts(t){if(cl===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);cl=e&&e[1]||""}return`
`+cl+t}var dl=!1;function fl(t,e){if(!t||dl)return"";dl=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var s=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){s=h}t.call(e.prototype)}else{try{throw Error()}catch(h){s=h}t()}}catch(h){if(h&&s&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),r=s.stack.split(`
`),o=n.length-1,a=r.length-1;1<=o&&0<=a&&n[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(n[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||n[o]!==r[a]){var u=`
`+n[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{dl=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Ts(t):""}function Bp(t){switch(t.tag){case 5:return Ts(t.type);case 16:return Ts("Lazy");case 13:return Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 2:case 15:return t=fl(t.type,!1),t;case 11:return t=fl(t.type.render,!1),t;case 1:return t=fl(t.type,!0),t;default:return""}}function lo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oi:return"Fragment";case Fi:return"Portal";case so:return"Profiler";case ua:return"StrictMode";case no:return"Suspense";case ro:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rc:return(t.displayName||"Context")+".Consumer";case zc:return(t._context.displayName||"Context")+".Provider";case ha:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ca:return e=t.displayName||null,e!==null?e:lo(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return lo(t(e))}catch{}}return null}function Ip(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lo(e);case 8:return e===ua?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ap(t){var e=Bc(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var n=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function En(t){t._valueTracker||(t._valueTracker=Ap(t))}function Ic(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),s="";return t&&(s=Bc(t)?t.checked?"true":"false":t.value),t=s,t!==i?(e.setValue(t),!0):!1}function dr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oo(t,e){var i=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function hu(t,e){var i=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;i=li(e.value!=null?e.value:i),t._wrapperState={initialChecked:s,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ac(t,e){e=e.checked,e!=null&&aa(t,"checked",e,!1)}function ao(t,e){Ac(t,e);var i=li(e.value),s=e.type;if(i!=null)s==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uo(t,e.type,i):e.hasOwnProperty("defaultValue")&&uo(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cu(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function uo(t,e,i){(e!=="number"||dr(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var zs=Array.isArray;function qi(t,e,i,s){if(t=t.options,e){e={};for(var n=0;n<i.length;n++)e["$"+i[n]]=!0;for(i=0;i<t.length;i++)n=e.hasOwnProperty("$"+t[i].value),t[i].selected!==n&&(t[i].selected=n),n&&s&&(t[i].defaultSelected=!0)}else{for(i=""+li(i),e=null,n=0;n<t.length;n++){if(t[n].value===i){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function ho(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function du(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(R(92));if(zs(i)){if(1<i.length)throw Error(R(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:li(i)}}function Fc(t,e){var i=li(e.value),s=li(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),s!=null&&(t.defaultValue=""+s)}function fu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Oc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function co(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Oc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pn,Dc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,i,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pn=Pn||document.createElement("div"),Pn.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gs(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fp=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(t){Fp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bs[e]=Bs[t]})});function $c(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||Bs.hasOwnProperty(t)&&Bs[t]?(""+e).trim():e+"px"}function Wc(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var s=i.indexOf("--")===0,n=$c(i,e[i],s);i==="float"&&(i="cssFloat"),s?t.setProperty(i,n):t[i]=n}}var Op=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fo(t,e){if(e){if(Op[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function po(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function da(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var go=null,Zi=null,es=null;function pu(t){if(t=wn(t)){if(typeof go!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Ur(e),go(t.stateNode,t.type,e))}}function Vc(t){Zi?es?es.push(t):es=[t]:Zi=t}function Uc(){if(Zi){var t=Zi,e=es;if(es=Zi=null,pu(t),e)for(t=0;t<e.length;t++)pu(e[t])}}function Hc(t,e){return t(e)}function Kc(){}var pl=!1;function Yc(t,e,i){if(pl)return t(e,i);pl=!0;try{return Hc(t,e,i)}finally{pl=!1,(Zi!==null||es!==null)&&(Kc(),Uc())}}function Xs(t,e){var i=t.stateNode;if(i===null)return null;var s=Ur(i);if(s===null)return null;i=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(R(231,e,typeof i));return i}var vo=!1;if(Rt)try{var js={};Object.defineProperty(js,"passive",{get:function(){vo=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{vo=!1}function Dp(t,e,i,s,n,r,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(i,h)}catch(c){this.onError(c)}}var Is=!1,fr=null,pr=!1,yo=null,$p={onError:function(t){Is=!0,fr=t}};function Wp(t,e,i,s,n,r,o,a,u){Is=!1,fr=null,Dp.apply($p,arguments)}function Vp(t,e,i,s,n,r,o,a,u){if(Wp.apply(this,arguments),Is){if(Is){var h=fr;Is=!1,fr=null}else throw Error(R(198));pr||(pr=!0,yo=h)}}function Ri(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function Qc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mu(t){if(Ri(t)!==t)throw Error(R(188))}function Up(t){var e=t.alternate;if(!e){if(e=Ri(t),e===null)throw Error(R(188));return e!==t?null:t}for(var i=t,s=e;;){var n=i.return;if(n===null)break;var r=n.alternate;if(r===null){if(s=n.return,s!==null){i=s;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===i)return mu(n),t;if(r===s)return mu(n),e;r=r.sibling}throw Error(R(188))}if(i.return!==s.return)i=n,s=r;else{for(var o=!1,a=n.child;a;){if(a===i){o=!0,i=n,s=r;break}if(a===s){o=!0,s=n,i=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===i){o=!0,i=r,s=n;break}if(a===s){o=!0,s=r,i=n;break}a=a.sibling}if(!o)throw Error(R(189))}}if(i.alternate!==s)throw Error(R(190))}if(i.tag!==3)throw Error(R(188));return i.stateNode.current===i?t:e}function Jc(t){return t=Up(t),t!==null?Gc(t):null}function Gc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Gc(t);if(e!==null)return e;t=t.sibling}return null}var Xc=Ze.unstable_scheduleCallback,gu=Ze.unstable_cancelCallback,Hp=Ze.unstable_shouldYield,Kp=Ze.unstable_requestPaint,me=Ze.unstable_now,Yp=Ze.unstable_getCurrentPriorityLevel,fa=Ze.unstable_ImmediatePriority,qc=Ze.unstable_UserBlockingPriority,mr=Ze.unstable_NormalPriority,Qp=Ze.unstable_LowPriority,Zc=Ze.unstable_IdlePriority,Dr=null,jt=null;function Jp(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Dr,t,void 0,(t.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:qp,Gp=Math.log,Xp=Math.LN2;function qp(t){return t>>>=0,t===0?32:31-(Gp(t)/Xp|0)|0}var Nn=64,Tn=4194304;function Rs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gr(t,e){var i=t.pendingLanes;if(i===0)return 0;var s=0,n=t.suspendedLanes,r=t.pingedLanes,o=i&268435455;if(o!==0){var a=o&~n;a!==0?s=Rs(a):(r&=o,r!==0&&(s=Rs(r)))}else o=i&~n,o!==0?s=Rs(o):r!==0&&(s=Rs(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,r=e&-e,n>=r||n===16&&(r&4194240)!==0))return e;if(s&4&&(s|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)i=31-ft(e),n=1<<i,s|=t[i],e&=~n;return s}function Zp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function em(t,e){for(var i=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-ft(r),a=1<<o,u=n[o];u===-1?(!(a&i)||a&s)&&(n[o]=Zp(a,e)):u<=e&&(t.expiredLanes|=a),r&=~a}}function xo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ed(){var t=Nn;return Nn<<=1,!(Nn&4194240)&&(Nn=64),t}function ml(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function yn(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ft(e),t[e]=i}function tm(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<i;){var n=31-ft(i),r=1<<n;e[n]=0,s[n]=-1,t[n]=-1,i&=~r}}function pa(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var s=31-ft(i),n=1<<s;n&e|t[s]&e&&(t[s]|=e),i&=~n}}var ee=0;function td(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var id,ma,sd,nd,rd,wo=!1,zn=[],qt=null,Zt=null,ei=null,qs=new Map,Zs=new Map,Yt=[],im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vu(t,e){switch(t){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":qs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(e.pointerId)}}function bs(t,e,i,s,n,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:i,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},e!==null&&(e=wn(e),e!==null&&ma(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function sm(t,e,i,s,n){switch(e){case"focusin":return qt=bs(qt,t,e,i,s,n),!0;case"dragenter":return Zt=bs(Zt,t,e,i,s,n),!0;case"mouseover":return ei=bs(ei,t,e,i,s,n),!0;case"pointerover":var r=n.pointerId;return qs.set(r,bs(qs.get(r)||null,t,e,i,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Zs.set(r,bs(Zs.get(r)||null,t,e,i,s,n)),!0}return!1}function ld(t){var e=gi(t.target);if(e!==null){var i=Ri(e);if(i!==null){if(e=i.tag,e===13){if(e=Qc(i),e!==null){t.blockedOn=e,rd(t.priority,function(){sd(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function er(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=_o(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var s=new i.constructor(i.type,i);mo=s,i.target.dispatchEvent(s),mo=null}else return e=wn(i),e!==null&&ma(e),t.blockedOn=i,!1;e.shift()}return!0}function yu(t,e,i){er(t)&&i.delete(e)}function nm(){wo=!1,qt!==null&&er(qt)&&(qt=null),Zt!==null&&er(Zt)&&(Zt=null),ei!==null&&er(ei)&&(ei=null),qs.forEach(yu),Zs.forEach(yu)}function ks(t,e){t.blockedOn===e&&(t.blockedOn=null,wo||(wo=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,nm)))}function en(t){function e(n){return ks(n,t)}if(0<zn.length){ks(zn[0],t);for(var i=1;i<zn.length;i++){var s=zn[i];s.blockedOn===t&&(s.blockedOn=null)}}for(qt!==null&&ks(qt,t),Zt!==null&&ks(Zt,t),ei!==null&&ks(ei,t),qs.forEach(e),Zs.forEach(e),i=0;i<Yt.length;i++)s=Yt[i],s.blockedOn===t&&(s.blockedOn=null);for(;0<Yt.length&&(i=Yt[0],i.blockedOn===null);)ld(i),i.blockedOn===null&&Yt.shift()}var ts=At.ReactCurrentBatchConfig,vr=!0;function rm(t,e,i,s){var n=ee,r=ts.transition;ts.transition=null;try{ee=1,ga(t,e,i,s)}finally{ee=n,ts.transition=r}}function lm(t,e,i,s){var n=ee,r=ts.transition;ts.transition=null;try{ee=4,ga(t,e,i,s)}finally{ee=n,ts.transition=r}}function ga(t,e,i,s){if(vr){var n=_o(t,e,i,s);if(n===null)kl(t,e,s,yr,i),vu(t,s);else if(sm(n,t,e,i,s))s.stopPropagation();else if(vu(t,s),e&4&&-1<im.indexOf(t)){for(;n!==null;){var r=wn(n);if(r!==null&&id(r),r=_o(t,e,i,s),r===null&&kl(t,e,s,yr,i),r===n)break;n=r}n!==null&&s.stopPropagation()}else kl(t,e,s,null,i)}}var yr=null;function _o(t,e,i,s){if(yr=null,t=da(s),t=gi(t),t!==null)if(e=Ri(t),e===null)t=null;else if(i=e.tag,i===13){if(t=Qc(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yr=t,null}function od(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yp()){case fa:return 1;case qc:return 4;case mr:case Qp:return 16;case Zc:return 536870912;default:return 16}default:return 16}}var Jt=null,va=null,tr=null;function ad(){if(tr)return tr;var t,e=va,i=e.length,s,n="value"in Jt?Jt.value:Jt.textContent,r=n.length;for(t=0;t<i&&e[t]===n[t];t++);var o=i-t;for(s=1;s<=o&&e[i-s]===n[r-s];s++);return tr=n.slice(t,1<s?1-s:void 0)}function ir(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rn(){return!0}function xu(){return!1}function tt(t){function e(i,s,n,r,o){this._reactName=i,this._targetInst=n,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Rn:xu,this.isPropagationStopped=xu,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Rn)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Rn)},persist:function(){},isPersistent:Rn}),e}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=tt(vs),xn=de({},vs,{view:0,detail:0}),om=tt(xn),gl,vl,Ms,$r=de({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ms&&(Ms&&t.type==="mousemove"?(gl=t.screenX-Ms.screenX,vl=t.screenY-Ms.screenY):vl=gl=0,Ms=t),gl)},movementY:function(t){return"movementY"in t?t.movementY:vl}}),wu=tt($r),am=de({},$r,{dataTransfer:0}),um=tt(am),hm=de({},xn,{relatedTarget:0}),yl=tt(hm),cm=de({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),dm=tt(cm),fm=de({},vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pm=tt(fm),mm=de({},vs,{data:0}),_u=tt(mm),gm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ym={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ym[t])?!!e[t]:!1}function xa(){return xm}var wm=de({},xn,{key:function(t){if(t.key){var e=gm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ir(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xa,charCode:function(t){return t.type==="keypress"?ir(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ir(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_m=tt(wm),Sm=de({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Su=tt(Sm),jm=de({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xa}),bm=tt(jm),km=de({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mm=tt(km),Cm=de({},$r,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Em=tt(Cm),Pm=[9,13,27,32],wa=Rt&&"CompositionEvent"in window,As=null;Rt&&"documentMode"in document&&(As=document.documentMode);var Nm=Rt&&"TextEvent"in window&&!As,ud=Rt&&(!wa||As&&8<As&&11>=As),ju=" ",bu=!1;function hd(t,e){switch(t){case"keyup":return Pm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Di=!1;function Tm(t,e){switch(t){case"compositionend":return cd(e);case"keypress":return e.which!==32?null:(bu=!0,ju);case"textInput":return t=e.data,t===ju&&bu?null:t;default:return null}}function zm(t,e){if(Di)return t==="compositionend"||!wa&&hd(t,e)?(t=ad(),tr=va=Jt=null,Di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ud&&e.locale!=="ko"?null:e.data;default:return null}}var Rm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Rm[t.type]:e==="textarea"}function dd(t,e,i,s){Vc(s),e=xr(e,"onChange"),0<e.length&&(i=new ya("onChange","change",null,i,s),t.push({event:i,listeners:e}))}var Fs=null,tn=null;function Lm(t){jd(t,0)}function Wr(t){var e=Vi(t);if(Ic(e))return t}function Bm(t,e){if(t==="change")return e}var fd=!1;if(Rt){var xl;if(Rt){var wl="oninput"in document;if(!wl){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),wl=typeof Mu.oninput=="function"}xl=wl}else xl=!1;fd=xl&&(!document.documentMode||9<document.documentMode)}function Cu(){Fs&&(Fs.detachEvent("onpropertychange",pd),tn=Fs=null)}function pd(t){if(t.propertyName==="value"&&Wr(tn)){var e=[];dd(e,tn,t,da(t)),Yc(Lm,e)}}function Im(t,e,i){t==="focusin"?(Cu(),Fs=e,tn=i,Fs.attachEvent("onpropertychange",pd)):t==="focusout"&&Cu()}function Am(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wr(tn)}function Fm(t,e){if(t==="click")return Wr(e)}function Om(t,e){if(t==="input"||t==="change")return Wr(e)}function Dm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:Dm;function sn(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var n=i[s];if(!io.call(e,n)||!mt(t[n],e[n]))return!1}return!0}function Eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pu(t,e){var i=Eu(t);t=0;for(var s;i;){if(i.nodeType===3){if(s=t+i.textContent.length,t<=e&&s>=e)return{node:i,offset:e-t};t=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Eu(i)}}function md(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?md(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gd(){for(var t=window,e=dr();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=dr(t.document)}return e}function _a(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $m(t){var e=gd(),i=t.focusedElem,s=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&md(i.ownerDocument.documentElement,i)){if(s!==null&&_a(i)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=i.textContent.length,r=Math.min(s.start,n);s=s.end===void 0?r:Math.min(s.end,n),!t.extend&&r>s&&(n=s,s=r,r=n),n=Pu(i,r);var o=Pu(i,s);n&&o&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),r>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Wm=Rt&&"documentMode"in document&&11>=document.documentMode,$i=null,So=null,Os=null,jo=!1;function Nu(t,e,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;jo||$i==null||$i!==dr(s)||(s=$i,"selectionStart"in s&&_a(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Os&&sn(Os,s)||(Os=s,s=xr(So,"onSelect"),0<s.length&&(e=new ya("onSelect","select",null,e,i),t.push({event:e,listeners:s}),e.target=$i)))}function Ln(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Wi={animationend:Ln("Animation","AnimationEnd"),animationiteration:Ln("Animation","AnimationIteration"),animationstart:Ln("Animation","AnimationStart"),transitionend:Ln("Transition","TransitionEnd")},_l={},vd={};Rt&&(vd=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function Vr(t){if(_l[t])return _l[t];if(!Wi[t])return t;var e=Wi[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in vd)return _l[t]=e[i];return t}var yd=Vr("animationend"),xd=Vr("animationiteration"),wd=Vr("animationstart"),_d=Vr("transitionend"),Sd=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(t,e){Sd.set(t,e),zi(e,[t])}for(var Sl=0;Sl<Tu.length;Sl++){var jl=Tu[Sl],Vm=jl.toLowerCase(),Um=jl[0].toUpperCase()+jl.slice(1);ai(Vm,"on"+Um)}ai(yd,"onAnimationEnd");ai(xd,"onAnimationIteration");ai(wd,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(_d,"onTransitionEnd");ls("onMouseEnter",["mouseout","mouseover"]);ls("onMouseLeave",["mouseout","mouseover"]);ls("onPointerEnter",["pointerout","pointerover"]);ls("onPointerLeave",["pointerout","pointerover"]);zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ls));function zu(t,e,i){var s=t.type||"unknown-event";t.currentTarget=i,Vp(s,e,void 0,t),t.currentTarget=null}function jd(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var s=t[i],n=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==r&&n.isPropagationStopped())break e;zu(n,a,h),r=u}else for(o=0;o<s.length;o++){if(a=s[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==r&&n.isPropagationStopped())break e;zu(n,a,h),r=u}}}if(pr)throw t=yo,pr=!1,yo=null,t}function le(t,e){var i=e[Eo];i===void 0&&(i=e[Eo]=new Set);var s=t+"__bubble";i.has(s)||(bd(e,t,2,!1),i.add(s))}function bl(t,e,i){var s=0;e&&(s|=4),bd(i,t,s,e)}var Bn="_reactListening"+Math.random().toString(36).slice(2);function nn(t){if(!t[Bn]){t[Bn]=!0,Tc.forEach(function(i){i!=="selectionchange"&&(Hm.has(i)||bl(i,!1,t),bl(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bn]||(e[Bn]=!0,bl("selectionchange",!1,e))}}function bd(t,e,i,s){switch(od(e)){case 1:var n=rm;break;case 4:n=lm;break;default:n=ga}i=n.bind(null,e,i,t),n=void 0,!vo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,i,{capture:!0,passive:n}):t.addEventListener(e,i,!0):n!==void 0?t.addEventListener(e,i,{passive:n}):t.addEventListener(e,i,!1)}function kl(t,e,i,s,n){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(o===4)for(o=s.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===n||u.nodeType===8&&u.parentNode===n))return;o=o.return}for(;a!==null;){if(o=gi(a),o===null)return;if(u=o.tag,u===5||u===6){s=r=o;continue e}a=a.parentNode}}s=s.return}Yc(function(){var h=r,c=da(i),d=[];e:{var f=Sd.get(t);if(f!==void 0){var m=ya,y=t;switch(t){case"keypress":if(ir(i)===0)break e;case"keydown":case"keyup":m=_m;break;case"focusin":y="focus",m=yl;break;case"focusout":y="blur",m=yl;break;case"beforeblur":case"afterblur":m=yl;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bm;break;case yd:case xd:case wd:m=dm;break;case _d:m=Mm;break;case"scroll":m=om;break;case"wheel":m=Em;break;case"copy":case"cut":case"paste":m=pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Su}var x=(e&4)!==0,P=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var p=h,v;p!==null;){v=p;var _=v.stateNode;if(v.tag===5&&_!==null&&(v=_,g!==null&&(_=Xs(p,g),_!=null&&x.push(rn(p,_,v)))),P)break;p=p.return}0<x.length&&(f=new m(f,y,null,i,c),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&i!==mo&&(y=i.relatedTarget||i.fromElement)&&(gi(y)||y[Lt]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=i.relatedTarget||i.toElement,m=h,y=y?gi(y):null,y!==null&&(P=Ri(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=h),m!==y)){if(x=wu,_="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=Su,_="onPointerLeave",g="onPointerEnter",p="pointer"),P=m==null?f:Vi(m),v=y==null?f:Vi(y),f=new x(_,p+"leave",m,i,c),f.target=P,f.relatedTarget=v,_=null,gi(c)===h&&(x=new x(g,p+"enter",y,i,c),x.target=v,x.relatedTarget=P,_=x),P=_,m&&y)t:{for(x=m,g=y,p=0,v=x;v;v=Bi(v))p++;for(v=0,_=g;_;_=Bi(_))v++;for(;0<p-v;)x=Bi(x),p--;for(;0<v-p;)g=Bi(g),v--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=Bi(x),g=Bi(g)}x=null}else x=null;m!==null&&Ru(d,f,m,x,!1),y!==null&&P!==null&&Ru(d,P,y,x,!0)}}e:{if(f=h?Vi(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=Bm;else if(ku(f))if(fd)M=Om;else{M=Am;var C=Im}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=Fm);if(M&&(M=M(t,h))){dd(d,M,i,c);break e}C&&C(t,f,h),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&uo(f,"number",f.value)}switch(C=h?Vi(h):window,t){case"focusin":(ku(C)||C.contentEditable==="true")&&($i=C,So=h,Os=null);break;case"focusout":Os=So=$i=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,Nu(d,i,c);break;case"selectionchange":if(Wm)break;case"keydown":case"keyup":Nu(d,i,c)}var k;if(wa)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Di?hd(t,i)&&(T="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(T="onCompositionStart");T&&(ud&&i.locale!=="ko"&&(Di||T!=="onCompositionStart"?T==="onCompositionEnd"&&Di&&(k=ad()):(Jt=c,va="value"in Jt?Jt.value:Jt.textContent,Di=!0)),C=xr(h,T),0<C.length&&(T=new _u(T,t,null,i,c),d.push({event:T,listeners:C}),k?T.data=k:(k=cd(i),k!==null&&(T.data=k)))),(k=Nm?Tm(t,i):zm(t,i))&&(h=xr(h,"onBeforeInput"),0<h.length&&(c=new _u("onBeforeInput","beforeinput",null,i,c),d.push({event:c,listeners:h}),c.data=k))}jd(d,e)})}function rn(t,e,i){return{instance:t,listener:e,currentTarget:i}}function xr(t,e){for(var i=e+"Capture",s=[];t!==null;){var n=t,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=Xs(t,i),r!=null&&s.unshift(rn(t,r,n)),r=Xs(t,e),r!=null&&s.push(rn(t,r,n))),t=t.return}return s}function Bi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ru(t,e,i,s,n){for(var r=e._reactName,o=[];i!==null&&i!==s;){var a=i,u=a.alternate,h=a.stateNode;if(u!==null&&u===s)break;a.tag===5&&h!==null&&(a=h,n?(u=Xs(i,r),u!=null&&o.unshift(rn(i,u,a))):n||(u=Xs(i,r),u!=null&&o.push(rn(i,u,a)))),i=i.return}o.length!==0&&t.push({event:e,listeners:o})}var Km=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function Lu(t){return(typeof t=="string"?t:""+t).replace(Km,`
`).replace(Ym,"")}function In(t,e,i){if(e=Lu(e),Lu(t)!==e&&i)throw Error(R(425))}function wr(){}var bo=null,ko=null;function Mo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Co=typeof setTimeout=="function"?setTimeout:void 0,Qm=typeof clearTimeout=="function"?clearTimeout:void 0,Bu=typeof Promise=="function"?Promise:void 0,Jm=typeof queueMicrotask=="function"?queueMicrotask:typeof Bu<"u"?function(t){return Bu.resolve(null).then(t).catch(Gm)}:Co;function Gm(t){setTimeout(function(){throw t})}function Ml(t,e){var i=e,s=0;do{var n=i.nextSibling;if(t.removeChild(i),n&&n.nodeType===8)if(i=n.data,i==="/$"){if(s===0){t.removeChild(n),en(e);return}s--}else i!=="$"&&i!=="$?"&&i!=="$!"||s++;i=n}while(i);en(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var ys=Math.random().toString(36).slice(2),St="__reactFiber$"+ys,ln="__reactProps$"+ys,Lt="__reactContainer$"+ys,Eo="__reactEvents$"+ys,Xm="__reactListeners$"+ys,qm="__reactHandles$"+ys;function gi(t){var e=t[St];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Lt]||i[St]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=Iu(t);t!==null;){if(i=t[St])return i;t=Iu(t)}return e}t=i,i=t.parentNode}return null}function wn(t){return t=t[St]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Ur(t){return t[ln]||null}var Po=[],Ui=-1;function ui(t){return{current:t}}function oe(t){0>Ui||(t.current=Po[Ui],Po[Ui]=null,Ui--)}function re(t,e){Ui++,Po[Ui]=t.current,t.current=e}var oi={},Be=ui(oi),He=ui(!1),Si=oi;function os(t,e){var i=t.type.contextTypes;if(!i)return oi;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in i)n[r]=e[r];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Ke(t){return t=t.childContextTypes,t!=null}function _r(){oe(He),oe(Be)}function Au(t,e,i){if(Be.current!==oi)throw Error(R(168));re(Be,e),re(He,i)}function kd(t,e,i){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return i;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(R(108,Ip(t)||"Unknown",n));return de({},i,s)}function Sr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,Si=Be.current,re(Be,t),re(He,He.current),!0}function Fu(t,e,i){var s=t.stateNode;if(!s)throw Error(R(169));i?(t=kd(t,e,Si),s.__reactInternalMemoizedMergedChildContext=t,oe(He),oe(Be),re(Be,t)):oe(He),re(He,i)}var Ct=null,Hr=!1,Cl=!1;function Md(t){Ct===null?Ct=[t]:Ct.push(t)}function Zm(t){Hr=!0,Md(t)}function hi(){if(!Cl&&Ct!==null){Cl=!0;var t=0,e=ee;try{var i=Ct;for(ee=1;t<i.length;t++){var s=i[t];do s=s(!0);while(s!==null)}Ct=null,Hr=!1}catch(n){throw Ct!==null&&(Ct=Ct.slice(t+1)),Xc(fa,hi),n}finally{ee=e,Cl=!1}}return null}var Hi=[],Ki=0,jr=null,br=0,it=[],st=0,ji=null,Et=1,Pt="";function pi(t,e){Hi[Ki++]=br,Hi[Ki++]=jr,jr=t,br=e}function Cd(t,e,i){it[st++]=Et,it[st++]=Pt,it[st++]=ji,ji=t;var s=Et;t=Pt;var n=32-ft(s)-1;s&=~(1<<n),i+=1;var r=32-ft(e)+n;if(30<r){var o=n-n%5;r=(s&(1<<o)-1).toString(32),s>>=o,n-=o,Et=1<<32-ft(e)+n|i<<n|s,Pt=r+t}else Et=1<<r|i<<n|s,Pt=t}function Sa(t){t.return!==null&&(pi(t,1),Cd(t,1,0))}function ja(t){for(;t===jr;)jr=Hi[--Ki],Hi[Ki]=null,br=Hi[--Ki],Hi[Ki]=null;for(;t===ji;)ji=it[--st],it[st]=null,Pt=it[--st],it[st]=null,Et=it[--st],it[st]=null}var Xe=null,Ge=null,ue=!1,dt=null;function Ed(t,e){var i=nt(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Ou(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xe=t,Ge=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xe=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=ji!==null?{id:Et,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=nt(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,Xe=t,Ge=null,!0):!1;default:return!1}}function No(t){return(t.mode&1)!==0&&(t.flags&128)===0}function To(t){if(ue){var e=Ge;if(e){var i=e;if(!Ou(t,e)){if(No(t))throw Error(R(418));e=ti(i.nextSibling);var s=Xe;e&&Ou(t,e)?Ed(s,i):(t.flags=t.flags&-4097|2,ue=!1,Xe=t)}}else{if(No(t))throw Error(R(418));t.flags=t.flags&-4097|2,ue=!1,Xe=t}}}function Du(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xe=t}function An(t){if(t!==Xe)return!1;if(!ue)return Du(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mo(t.type,t.memoizedProps)),e&&(e=Ge)){if(No(t))throw Pd(),Error(R(418));for(;e;)Ed(t,e),e=ti(e.nextSibling)}if(Du(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){Ge=ti(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Xe?ti(t.stateNode.nextSibling):null;return!0}function Pd(){for(var t=Ge;t;)t=ti(t.nextSibling)}function as(){Ge=Xe=null,ue=!1}function ba(t){dt===null?dt=[t]:dt.push(t)}var eg=At.ReactCurrentBatchConfig;function Cs(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(R(309));var s=i.stateNode}if(!s)throw Error(R(147,t));var n=s,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=n.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(R(284));if(!i._owner)throw Error(R(290,t))}return t}function Fn(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $u(t){var e=t._init;return e(t._payload)}function Nd(t){function e(g,p){if(t){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function i(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function s(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function n(g,p){return g=ri(g,p),g.index=0,g.sibling=null,g}function r(g,p,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,v,_){return p===null||p.tag!==6?(p=Ll(v,g.mode,_),p.return=g,p):(p=n(p,v),p.return=g,p)}function u(g,p,v,_){var M=v.type;return M===Oi?c(g,p,v.props.children,_,v.key):p!==null&&(p.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ht&&$u(M)===p.type)?(_=n(p,v.props),_.ref=Cs(g,p,v),_.return=g,_):(_=ur(v.type,v.key,v.props,null,g.mode,_),_.ref=Cs(g,p,v),_.return=g,_)}function h(g,p,v,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Bl(v,g.mode,_),p.return=g,p):(p=n(p,v.children||[]),p.return=g,p)}function c(g,p,v,_,M){return p===null||p.tag!==7?(p=wi(v,g.mode,_,M),p.return=g,p):(p=n(p,v),p.return=g,p)}function d(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ll(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Cn:return v=ur(p.type,p.key,p.props,null,g.mode,v),v.ref=Cs(g,null,p),v.return=g,v;case Fi:return p=Bl(p,g.mode,v),p.return=g,p;case Ht:var _=p._init;return d(g,_(p._payload),v)}if(zs(p)||Ss(p))return p=wi(p,g.mode,v,null),p.return=g,p;Fn(g,p)}return null}function f(g,p,v,_){var M=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return M!==null?null:a(g,p,""+v,_);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cn:return v.key===M?u(g,p,v,_):null;case Fi:return v.key===M?h(g,p,v,_):null;case Ht:return M=v._init,f(g,p,M(v._payload),_)}if(zs(v)||Ss(v))return M!==null?null:c(g,p,v,_,null);Fn(g,v)}return null}function m(g,p,v,_,M){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(v)||null,a(p,g,""+_,M);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cn:return g=g.get(_.key===null?v:_.key)||null,u(p,g,_,M);case Fi:return g=g.get(_.key===null?v:_.key)||null,h(p,g,_,M);case Ht:var C=_._init;return m(g,p,v,C(_._payload),M)}if(zs(_)||Ss(_))return g=g.get(v)||null,c(p,g,_,M,null);Fn(p,_)}return null}function y(g,p,v,_){for(var M=null,C=null,k=p,T=p=0,W=null;k!==null&&T<v.length;T++){k.index>T?(W=k,k=null):W=k.sibling;var B=f(g,k,v[T],_);if(B===null){k===null&&(k=W);break}t&&k&&B.alternate===null&&e(g,k),p=r(B,p,T),C===null?M=B:C.sibling=B,C=B,k=W}if(T===v.length)return i(g,k),ue&&pi(g,T),M;if(k===null){for(;T<v.length;T++)k=d(g,v[T],_),k!==null&&(p=r(k,p,T),C===null?M=k:C.sibling=k,C=k);return ue&&pi(g,T),M}for(k=s(g,k);T<v.length;T++)W=m(k,g,T,v[T],_),W!==null&&(t&&W.alternate!==null&&k.delete(W.key===null?T:W.key),p=r(W,p,T),C===null?M=W:C.sibling=W,C=W);return t&&k.forEach(function(D){return e(g,D)}),ue&&pi(g,T),M}function x(g,p,v,_){var M=Ss(v);if(typeof M!="function")throw Error(R(150));if(v=M.call(v),v==null)throw Error(R(151));for(var C=M=null,k=p,T=p=0,W=null,B=v.next();k!==null&&!B.done;T++,B=v.next()){k.index>T?(W=k,k=null):W=k.sibling;var D=f(g,k,B.value,_);if(D===null){k===null&&(k=W);break}t&&k&&D.alternate===null&&e(g,k),p=r(D,p,T),C===null?M=D:C.sibling=D,C=D,k=W}if(B.done)return i(g,k),ue&&pi(g,T),M;if(k===null){for(;!B.done;T++,B=v.next())B=d(g,B.value,_),B!==null&&(p=r(B,p,T),C===null?M=B:C.sibling=B,C=B);return ue&&pi(g,T),M}for(k=s(g,k);!B.done;T++,B=v.next())B=m(k,g,T,B.value,_),B!==null&&(t&&B.alternate!==null&&k.delete(B.key===null?T:B.key),p=r(B,p,T),C===null?M=B:C.sibling=B,C=B);return t&&k.forEach(function(U){return e(g,U)}),ue&&pi(g,T),M}function P(g,p,v,_){if(typeof v=="object"&&v!==null&&v.type===Oi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Cn:e:{for(var M=v.key,C=p;C!==null;){if(C.key===M){if(M=v.type,M===Oi){if(C.tag===7){i(g,C.sibling),p=n(C,v.props.children),p.return=g,g=p;break e}}else if(C.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ht&&$u(M)===C.type){i(g,C.sibling),p=n(C,v.props),p.ref=Cs(g,C,v),p.return=g,g=p;break e}i(g,C);break}else e(g,C);C=C.sibling}v.type===Oi?(p=wi(v.props.children,g.mode,_,v.key),p.return=g,g=p):(_=ur(v.type,v.key,v.props,null,g.mode,_),_.ref=Cs(g,p,v),_.return=g,g=_)}return o(g);case Fi:e:{for(C=v.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){i(g,p.sibling),p=n(p,v.children||[]),p.return=g,g=p;break e}else{i(g,p);break}else e(g,p);p=p.sibling}p=Bl(v,g.mode,_),p.return=g,g=p}return o(g);case Ht:return C=v._init,P(g,p,C(v._payload),_)}if(zs(v))return y(g,p,v,_);if(Ss(v))return x(g,p,v,_);Fn(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(i(g,p.sibling),p=n(p,v),p.return=g,g=p):(i(g,p),p=Ll(v,g.mode,_),p.return=g,g=p),o(g)):i(g,p)}return P}var us=Nd(!0),Td=Nd(!1),kr=ui(null),Mr=null,Yi=null,ka=null;function Ma(){ka=Yi=Mr=null}function Ca(t){var e=kr.current;oe(kr),t._currentValue=e}function zo(t,e,i){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===i)break;t=t.return}}function is(t,e){Mr=t,ka=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function lt(t){var e=t._currentValue;if(ka!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if(Mr===null)throw Error(R(308));Yi=t,Mr.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var vi=null;function Ea(t){vi===null?vi=[t]:vi.push(t)}function zd(t,e,i,s){var n=e.interleaved;return n===null?(i.next=i,Ea(e)):(i.next=n.next,n.next=i),e.interleaved=i,Bt(t,s)}function Bt(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var Kt=!1;function Pa(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,i){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,G&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,Bt(t,i)}return n=s.interleaved,n===null?(e.next=e,Ea(s)):(e.next=n.next,n.next=e),s.interleaved=e,Bt(t,i)}function sr(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,pa(t,i)}}function Wu(t,e){var i=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var n=null,r=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};r===null?n=r=o:r=r.next=o,i=i.next}while(i!==null);r===null?n=r=e:r=r.next=e}else n=r=e;i={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,effects:s.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Cr(t,e,i,s){var n=t.updateQueue;Kt=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?r=h:o.next=h,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=u))}if(r!==null){var d=n.baseState;o=0,c=h=u=null,a=r;do{var f=a.lane,m=a.eventTime;if((s&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(f=e,m=i,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=de({},d,f);break e;case 2:Kt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(h=c=m,u=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;f=a,a=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(c===null&&(u=d),n.baseState=u,n.firstBaseUpdate=h,n.lastBaseUpdate=c,e=n.shared.interleaved,e!==null){n=e;do o|=n.lane,n=n.next;while(n!==e)}else r===null&&(n.shared.lanes=0);ki|=o,t.lanes=o,t.memoizedState=d}}function Vu(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=i,typeof n!="function")throw Error(R(191,n));n.call(s)}}}var _n={},bt=ui(_n),on=ui(_n),an=ui(_n);function yi(t){if(t===_n)throw Error(R(174));return t}function Na(t,e){switch(re(an,e),re(on,t),re(bt,_n),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:co(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=co(e,t)}oe(bt),re(bt,e)}function hs(){oe(bt),oe(on),oe(an)}function Ld(t){yi(an.current);var e=yi(bt.current),i=co(e,t.type);e!==i&&(re(on,t),re(bt,i))}function Ta(t){on.current===t&&(oe(bt),oe(on))}var he=ui(0);function Er(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var El=[];function za(){for(var t=0;t<El.length;t++)El[t]._workInProgressVersionPrimary=null;El.length=0}var nr=At.ReactCurrentDispatcher,Pl=At.ReactCurrentBatchConfig,bi=0,ce=null,Se=null,be=null,Pr=!1,Ds=!1,un=0,tg=0;function Te(){throw Error(R(321))}function Ra(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!mt(t[i],e[i]))return!1;return!0}function La(t,e,i,s,n,r){if(bi=r,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nr.current=t===null||t.memoizedState===null?rg:lg,t=i(s,n),Ds){r=0;do{if(Ds=!1,un=0,25<=r)throw Error(R(301));r+=1,be=Se=null,e.updateQueue=null,nr.current=og,t=i(s,n)}while(Ds)}if(nr.current=Nr,e=Se!==null&&Se.next!==null,bi=0,be=Se=ce=null,Pr=!1,e)throw Error(R(300));return t}function Ba(){var t=un!==0;return un=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ce.memoizedState=be=t:be=be.next=t,be}function ot(){if(Se===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=be===null?ce.memoizedState:be.next;if(e!==null)be=e,Se=t;else{if(t===null)throw Error(R(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},be===null?ce.memoizedState=be=t:be=be.next=t}return be}function hn(t,e){return typeof e=="function"?e(t):e}function Nl(t){var e=ot(),i=e.queue;if(i===null)throw Error(R(311));i.lastRenderedReducer=t;var s=Se,n=s.baseQueue,r=i.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}s.baseQueue=n=r,i.pending=null}if(n!==null){r=n.next,s=s.baseState;var a=o=null,u=null,h=r;do{var c=h.lane;if((bi&c)===c)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),s=h.hasEagerState?h.eagerState:t(s,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=d,o=s):u=u.next=d,ce.lanes|=c,ki|=c}h=h.next}while(h!==null&&h!==r);u===null?o=s:u.next=a,mt(s,e.memoizedState)||(Ue=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=u,i.lastRenderedState=s}if(t=i.interleaved,t!==null){n=t;do r=n.lane,ce.lanes|=r,ki|=r,n=n.next;while(n!==t)}else n===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Tl(t){var e=ot(),i=e.queue;if(i===null)throw Error(R(311));i.lastRenderedReducer=t;var s=i.dispatch,n=i.pending,r=e.memoizedState;if(n!==null){i.pending=null;var o=n=n.next;do r=t(r,o.action),o=o.next;while(o!==n);mt(r,e.memoizedState)||(Ue=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),i.lastRenderedState=r}return[r,s]}function Bd(){}function Id(t,e){var i=ce,s=ot(),n=e(),r=!mt(s.memoizedState,n);if(r&&(s.memoizedState=n,Ue=!0),s=s.queue,Ia(Od.bind(null,i,s,t),[t]),s.getSnapshot!==e||r||be!==null&&be.memoizedState.tag&1){if(i.flags|=2048,cn(9,Fd.bind(null,i,s,n,e),void 0,null),ke===null)throw Error(R(349));bi&30||Ad(i,e,n)}return n}function Ad(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function Fd(t,e,i,s){e.value=i,e.getSnapshot=s,Dd(e)&&$d(t)}function Od(t,e,i){return i(function(){Dd(e)&&$d(t)})}function Dd(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!mt(t,i)}catch{return!0}}function $d(t){var e=Bt(t,1);e!==null&&pt(e,t,1,-1)}function Uu(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:t},e.queue=t,t=t.dispatch=ng.bind(null,ce,t),[e.memoizedState,t]}function cn(t,e,i,s){return t={tag:t,create:e,destroy:i,deps:s,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(s=i.next,i.next=t,t.next=s,e.lastEffect=t)),t}function Wd(){return ot().memoizedState}function rr(t,e,i,s){var n=_t();ce.flags|=t,n.memoizedState=cn(1|e,i,void 0,s===void 0?null:s)}function Kr(t,e,i,s){var n=ot();s=s===void 0?null:s;var r=void 0;if(Se!==null){var o=Se.memoizedState;if(r=o.destroy,s!==null&&Ra(s,o.deps)){n.memoizedState=cn(e,i,r,s);return}}ce.flags|=t,n.memoizedState=cn(1|e,i,r,s)}function Hu(t,e){return rr(8390656,8,t,e)}function Ia(t,e){return Kr(2048,8,t,e)}function Vd(t,e){return Kr(4,2,t,e)}function Ud(t,e){return Kr(4,4,t,e)}function Hd(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kd(t,e,i){return i=i!=null?i.concat([t]):null,Kr(4,4,Hd.bind(null,e,t),i)}function Aa(){}function Yd(t,e){var i=ot();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&Ra(e,s[1])?s[0]:(i.memoizedState=[t,e],t)}function Qd(t,e){var i=ot();e=e===void 0?null:e;var s=i.memoizedState;return s!==null&&e!==null&&Ra(e,s[1])?s[0]:(t=t(),i.memoizedState=[t,e],t)}function Jd(t,e,i){return bi&21?(mt(i,e)||(i=ed(),ce.lanes|=i,ki|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=i)}function ig(t,e){var i=ee;ee=i!==0&&4>i?i:4,t(!0);var s=Pl.transition;Pl.transition={};try{t(!1),e()}finally{ee=i,Pl.transition=s}}function Gd(){return ot().memoizedState}function sg(t,e,i){var s=ni(t);if(i={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null},Xd(t))qd(e,i);else if(i=zd(t,e,i,s),i!==null){var n=Fe();pt(i,t,s,n),Zd(i,e,s)}}function ng(t,e,i){var s=ni(t),n={lane:s,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xd(t))qd(e,n);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,i);if(n.hasEagerState=!0,n.eagerState=a,mt(a,o)){var u=e.interleaved;u===null?(n.next=n,Ea(e)):(n.next=u.next,u.next=n),e.interleaved=n;return}}catch{}finally{}i=zd(t,e,n,s),i!==null&&(n=Fe(),pt(i,t,s,n),Zd(i,e,s))}}function Xd(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function qd(t,e){Ds=Pr=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Zd(t,e,i){if(i&4194240){var s=e.lanes;s&=t.pendingLanes,i|=s,e.lanes=i,pa(t,i)}}var Nr={readContext:lt,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},rg={readContext:lt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:Hu,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,rr(4194308,4,Hd.bind(null,e,t),i)},useLayoutEffect:function(t,e){return rr(4194308,4,t,e)},useInsertionEffect:function(t,e){return rr(4,2,t,e)},useMemo:function(t,e){var i=_t();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var s=_t();return e=i!==void 0?i(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=sg.bind(null,ce,t),[s.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:Uu,useDebugValue:Aa,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=Uu(!1),e=t[0];return t=ig.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var s=ce,n=_t();if(ue){if(i===void 0)throw Error(R(407));i=i()}else{if(i=e(),ke===null)throw Error(R(349));bi&30||Ad(s,e,i)}n.memoizedState=i;var r={value:i,getSnapshot:e};return n.queue=r,Hu(Od.bind(null,s,r,t),[t]),s.flags|=2048,cn(9,Fd.bind(null,s,r,i,e),void 0,null),i},useId:function(){var t=_t(),e=ke.identifierPrefix;if(ue){var i=Pt,s=Et;i=(s&~(1<<32-ft(s)-1)).toString(32)+i,e=":"+e+"R"+i,i=un++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=tg++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lg={readContext:lt,useCallback:Yd,useContext:lt,useEffect:Ia,useImperativeHandle:Kd,useInsertionEffect:Vd,useLayoutEffect:Ud,useMemo:Qd,useReducer:Nl,useRef:Wd,useState:function(){return Nl(hn)},useDebugValue:Aa,useDeferredValue:function(t){var e=ot();return Jd(e,Se.memoizedState,t)},useTransition:function(){var t=Nl(hn)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Bd,useSyncExternalStore:Id,useId:Gd,unstable_isNewReconciler:!1},og={readContext:lt,useCallback:Yd,useContext:lt,useEffect:Ia,useImperativeHandle:Kd,useInsertionEffect:Vd,useLayoutEffect:Ud,useMemo:Qd,useReducer:Tl,useRef:Wd,useState:function(){return Tl(hn)},useDebugValue:Aa,useDeferredValue:function(t){var e=ot();return Se===null?e.memoizedState=t:Jd(e,Se.memoizedState,t)},useTransition:function(){var t=Tl(hn)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Bd,useSyncExternalStore:Id,useId:Gd,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}function Ro(t,e,i,s){e=t.memoizedState,i=i(s,e),i=i==null?e:de({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Yr={isMounted:function(t){return(t=t._reactInternals)?Ri(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var s=Fe(),n=ni(t),r=zt(s,n);r.payload=e,i!=null&&(r.callback=i),e=ii(t,r,n),e!==null&&(pt(e,t,n,s),sr(e,t,n))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var s=Fe(),n=ni(t),r=zt(s,n);r.tag=1,r.payload=e,i!=null&&(r.callback=i),e=ii(t,r,n),e!==null&&(pt(e,t,n,s),sr(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Fe(),s=ni(t),n=zt(i,s);n.tag=2,e!=null&&(n.callback=e),e=ii(t,n,s),e!==null&&(pt(e,t,s,i),sr(e,t,s))}};function Ku(t,e,i,s,n,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!sn(i,s)||!sn(n,r):!0}function ef(t,e,i){var s=!1,n=oi,r=e.contextType;return typeof r=="object"&&r!==null?r=lt(r):(n=Ke(e)?Si:Be.current,s=e.contextTypes,r=(s=s!=null)?os(t,n):oi),e=new e(i,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yr,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),e}function Yu(t,e,i,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,s),e.state!==t&&Yr.enqueueReplaceState(e,e.state,null)}function Lo(t,e,i,s){var n=t.stateNode;n.props=i,n.state=t.memoizedState,n.refs={},Pa(t);var r=e.contextType;typeof r=="object"&&r!==null?n.context=lt(r):(r=Ke(e)?Si:Be.current,n.context=os(t,r)),n.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Ro(t,e,r,i),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&Yr.enqueueReplaceState(n,n.state,null),Cr(t,i,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function cs(t,e){try{var i="",s=e;do i+=Bp(s),s=s.return;while(s);var n=i}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:n,digest:null}}function zl(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function Bo(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var ag=typeof WeakMap=="function"?WeakMap:Map;function tf(t,e,i){i=zt(-1,i),i.tag=3,i.payload={element:null};var s=e.value;return i.callback=function(){zr||(zr=!0,Ho=s),Bo(t,e)},i}function sf(t,e,i){i=zt(-1,i),i.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;i.payload=function(){return s(n)},i.callback=function(){Bo(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(i.callback=function(){Bo(t,e),typeof s!="function"&&(si===null?si=new Set([this]):si.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),i}function Qu(t,e,i){var s=t.pingCache;if(s===null){s=t.pingCache=new ag;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(i)||(n.add(i),t=Sg.bind(null,t,e,i),e.then(t,t))}function Ju(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gu(t,e,i,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=zt(-1,1),e.tag=2,ii(i,e,1))),i.lanes|=1),t)}var ug=At.ReactCurrentOwner,Ue=!1;function Ae(t,e,i,s){e.child=t===null?Td(e,null,i,s):us(e,t.child,i,s)}function Xu(t,e,i,s,n){i=i.render;var r=e.ref;return is(e,n),s=La(t,e,i,s,r,n),i=Ba(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,It(t,e,n)):(ue&&i&&Sa(e),e.flags|=1,Ae(t,e,s,n),e.child)}function qu(t,e,i,s,n){if(t===null){var r=i.type;return typeof r=="function"&&!Ha(r)&&r.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=r,nf(t,e,r,s,n)):(t=ur(i.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&n)){var o=r.memoizedProps;if(i=i.compare,i=i!==null?i:sn,i(o,s)&&t.ref===e.ref)return It(t,e,n)}return e.flags|=1,t=ri(r,s),t.ref=e.ref,t.return=e,e.child=t}function nf(t,e,i,s,n){if(t!==null){var r=t.memoizedProps;if(sn(r,s)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=s=r,(t.lanes&n)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,It(t,e,n)}return Io(t,e,i,s,n)}function rf(t,e,i){var s=e.pendingProps,n=s.children,r=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},re(Ji,Je),Je|=i;else{if(!(i&1073741824))return t=r!==null?r.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,re(Ji,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:i,re(Ji,Je),Je|=s}else r!==null?(s=r.baseLanes|i,e.memoizedState=null):s=i,re(Ji,Je),Je|=s;return Ae(t,e,n,i),e.child}function lf(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Io(t,e,i,s,n){var r=Ke(i)?Si:Be.current;return r=os(e,r),is(e,n),i=La(t,e,i,s,r,n),s=Ba(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,It(t,e,n)):(ue&&s&&Sa(e),e.flags|=1,Ae(t,e,i,n),e.child)}function Zu(t,e,i,s,n){if(Ke(i)){var r=!0;Sr(e)}else r=!1;if(is(e,n),e.stateNode===null)lr(t,e),ef(e,i,s),Lo(e,i,s,n),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=i.contextType;typeof h=="object"&&h!==null?h=lt(h):(h=Ke(i)?Si:Be.current,h=os(e,h));var c=i.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||u!==h)&&Yu(e,o,s,h),Kt=!1;var f=e.memoizedState;o.state=f,Cr(e,s,o,n),u=e.memoizedState,a!==s||f!==u||He.current||Kt?(typeof c=="function"&&(Ro(e,i,c,s),u=e.memoizedState),(a=Kt||Ku(e,i,a,s,f,u,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=u),o.props=s,o.state=u,o.context=h,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,Rd(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:ht(e.type,a),o.props=h,d=e.pendingProps,f=o.context,u=i.contextType,typeof u=="object"&&u!==null?u=lt(u):(u=Ke(i)?Si:Be.current,u=os(e,u));var m=i.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&Yu(e,o,s,u),Kt=!1,f=e.memoizedState,o.state=f,Cr(e,s,o,n);var y=e.memoizedState;a!==d||f!==y||He.current||Kt?(typeof m=="function"&&(Ro(e,i,m,s),y=e.memoizedState),(h=Kt||Ku(e,i,h,s,f,y,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=u,s=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return Ao(t,e,i,s,r,n)}function Ao(t,e,i,s,n,r){lf(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return n&&Fu(e,i,!1),It(t,e,r);s=e.stateNode,ug.current=e;var a=o&&typeof i.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=us(e,t.child,null,r),e.child=us(e,null,a,r)):Ae(t,e,a,r),e.memoizedState=s.state,n&&Fu(e,i,!0),e.child}function of(t){var e=t.stateNode;e.pendingContext?Au(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Au(t,e.context,!1),Na(t,e.containerInfo)}function eh(t,e,i,s,n){return as(),ba(n),e.flags|=256,Ae(t,e,i,s),e.child}var Fo={dehydrated:null,treeContext:null,retryLane:0};function Oo(t){return{baseLanes:t,cachePool:null,transitions:null}}function af(t,e,i){var s=e.pendingProps,n=he.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(n&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),re(he,n&1),t===null)return To(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Gr(o,s,0,null),t=wi(t,s,i,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Oo(i),e.memoizedState=Fo,t):Fa(e,o));if(n=t.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return hg(t,e,o,s,a,n,i);if(r){r=s.fallback,o=e.mode,n=t.child,a=n.sibling;var u={mode:"hidden",children:s.children};return!(o&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=u,e.deletions=null):(s=ri(n,u),s.subtreeFlags=n.subtreeFlags&14680064),a!==null?r=ri(a,r):(r=wi(r,o,i,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=t.child.memoizedState,o=o===null?Oo(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~i,e.memoizedState=Fo,s}return r=t.child,t=r.sibling,s=ri(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=i),s.return=e,s.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=s,e.memoizedState=null,s}function Fa(t,e){return e=Gr({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function On(t,e,i,s){return s!==null&&ba(s),us(e,t.child,null,i),t=Fa(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hg(t,e,i,s,n,r,o){if(i)return e.flags&256?(e.flags&=-257,s=zl(Error(R(422))),On(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=s.fallback,n=e.mode,s=Gr({mode:"visible",children:s.children},n,0,null),r=wi(r,n,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&us(e,t.child,null,o),e.child.memoizedState=Oo(o),e.memoizedState=Fo,r);if(!(e.mode&1))return On(t,e,o,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(R(419)),s=zl(r,s,void 0),On(t,e,o,s)}if(a=(o&t.childLanes)!==0,Ue||a){if(s=ke,s!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|o)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,Bt(t,n),pt(s,t,n,-1))}return Ua(),s=zl(Error(R(421))),On(t,e,o,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=jg.bind(null,t),n._reactRetry=e,null):(t=r.treeContext,Ge=ti(n.nextSibling),Xe=e,ue=!0,dt=null,t!==null&&(it[st++]=Et,it[st++]=Pt,it[st++]=ji,Et=t.id,Pt=t.overflow,ji=e),e=Fa(e,s.children),e.flags|=4096,e)}function th(t,e,i){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),zo(t.return,e,i)}function Rl(t,e,i,s,n){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:n}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=i,r.tailMode=n)}function uf(t,e,i){var s=e.pendingProps,n=s.revealOrder,r=s.tail;if(Ae(t,e,s.children,i),s=he.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&th(t,i,e);else if(t.tag===19)th(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(re(he,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(i=e.child,n=null;i!==null;)t=i.alternate,t!==null&&Er(t)===null&&(n=i),i=i.sibling;i=n,i===null?(n=e.child,e.child=null):(n=i.sibling,i.sibling=null),Rl(e,!1,n,i,r);break;case"backwards":for(i=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&Er(t)===null){e.child=n;break}t=n.sibling,n.sibling=i,i=n,n=t}Rl(e,!0,i,null,r);break;case"together":Rl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function It(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),ki|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,i=ri(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=ri(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function cg(t,e,i){switch(e.tag){case 3:of(e),as();break;case 5:Ld(e);break;case 1:Ke(e.type)&&Sr(e);break;case 4:Na(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;re(kr,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(re(he,he.current&1),e.flags|=128,null):i&e.child.childLanes?af(t,e,i):(re(he,he.current&1),t=It(t,e,i),t!==null?t.sibling:null);re(he,he.current&1);break;case 19:if(s=(i&e.childLanes)!==0,t.flags&128){if(s)return uf(t,e,i);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),re(he,he.current),s)break;return null;case 22:case 23:return e.lanes=0,rf(t,e,i)}return It(t,e,i)}var hf,Do,cf,df;hf=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Do=function(){};cf=function(t,e,i,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,yi(bt.current);var r=null;switch(i){case"input":n=oo(t,n),s=oo(t,s),r=[];break;case"select":n=de({},n,{value:void 0}),s=de({},s,{value:void 0}),r=[];break;case"textarea":n=ho(t,n),s=ho(t,s),r=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=wr)}fo(i,s);var o;i=null;for(h in n)if(!s.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var a=n[h];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Js.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in s){var u=s[h];if(a=n!=null?n[h]:void 0,s.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(i||(i={}),i[o]=u[o])}else i||(r||(r=[]),r.push(h,i)),i=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(r=r||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Js.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&le("scroll",t),r||a===u||(r=[])):(r=r||[]).push(h,u))}i&&(r=r||[]).push("style",i);var h=r;(e.updateQueue=h)&&(e.flags|=4)}};df=function(t,e,i,s){i!==s&&(e.flags|=4)};function Es(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,s=0;if(e)for(var n=t.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)i|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=i,e}function dg(t,e,i){var s=e.pendingProps;switch(ja(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return Ke(e.type)&&_r(),ze(e),null;case 3:return s=e.stateNode,hs(),oe(He),oe(Be),za(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(An(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(Qo(dt),dt=null))),Do(t,e),ze(e),null;case 5:Ta(e);var n=yi(an.current);if(i=e.type,t!==null&&e.stateNode!=null)cf(t,e,i,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(R(166));return ze(e),null}if(t=yi(bt.current),An(e)){s=e.stateNode,i=e.type;var r=e.memoizedProps;switch(s[St]=e,s[ln]=r,t=(e.mode&1)!==0,i){case"dialog":le("cancel",s),le("close",s);break;case"iframe":case"object":case"embed":le("load",s);break;case"video":case"audio":for(n=0;n<Ls.length;n++)le(Ls[n],s);break;case"source":le("error",s);break;case"img":case"image":case"link":le("error",s),le("load",s);break;case"details":le("toggle",s);break;case"input":hu(s,r),le("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},le("invalid",s);break;case"textarea":du(s,r),le("invalid",s)}fo(i,r),n=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&In(s.textContent,a,t),n=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&In(s.textContent,a,t),n=["children",""+a]):Js.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",s)}switch(i){case"input":En(s),cu(s,r,!0);break;case"textarea":En(s),fu(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=wr)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Oc(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(i,{is:s.is}):(t=o.createElement(i),i==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,i),t[St]=e,t[ln]=s,hf(t,e,!1,!1),e.stateNode=t;e:{switch(o=po(i,s),i){case"dialog":le("cancel",t),le("close",t),n=s;break;case"iframe":case"object":case"embed":le("load",t),n=s;break;case"video":case"audio":for(n=0;n<Ls.length;n++)le(Ls[n],t);n=s;break;case"source":le("error",t),n=s;break;case"img":case"image":case"link":le("error",t),le("load",t),n=s;break;case"details":le("toggle",t),n=s;break;case"input":hu(t,s),n=oo(t,s),le("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=de({},s,{value:void 0}),le("invalid",t);break;case"textarea":du(t,s),n=ho(t,s),le("invalid",t);break;default:n=s}fo(i,n),a=n;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];r==="style"?Wc(t,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Dc(t,u)):r==="children"?typeof u=="string"?(i!=="textarea"||u!=="")&&Gs(t,u):typeof u=="number"&&Gs(t,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Js.hasOwnProperty(r)?u!=null&&r==="onScroll"&&le("scroll",t):u!=null&&aa(t,r,u,o))}switch(i){case"input":En(t),cu(t,s,!1);break;case"textarea":En(t),fu(t);break;case"option":s.value!=null&&t.setAttribute("value",""+li(s.value));break;case"select":t.multiple=!!s.multiple,r=s.value,r!=null?qi(t,!!s.multiple,r,!1):s.defaultValue!=null&&qi(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=wr)}switch(i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)df(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(R(166));if(i=yi(an.current),yi(bt.current),An(e)){if(s=e.stateNode,i=e.memoizedProps,s[St]=e,(r=s.nodeValue!==i)&&(t=Xe,t!==null))switch(t.tag){case 3:In(s.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&In(s.nodeValue,i,(t.mode&1)!==0)}r&&(e.flags|=4)}else s=(i.nodeType===9?i:i.ownerDocument).createTextNode(s),s[St]=e,e.stateNode=s}return ze(e),null;case 13:if(oe(he),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&Ge!==null&&e.mode&1&&!(e.flags&128))Pd(),as(),e.flags|=98560,r=!1;else if(r=An(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(R(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(R(317));r[St]=e}else as(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),r=!1}else dt!==null&&(Qo(dt),dt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?je===0&&(je=3):Ua())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return hs(),Do(t,e),t===null&&nn(e.stateNode.containerInfo),ze(e),null;case 10:return Ca(e.type._context),ze(e),null;case 17:return Ke(e.type)&&_r(),ze(e),null;case 19:if(oe(he),r=e.memoizedState,r===null)return ze(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)Es(r,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Er(t),o!==null){for(e.flags|=128,Es(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=i,i=e.child;i!==null;)r=i,t=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return re(he,he.current&1|2),e.child}t=t.sibling}r.tail!==null&&me()>ds&&(e.flags|=128,s=!0,Es(r,!1),e.lanes=4194304)}else{if(!s)if(t=Er(o),t!==null){if(e.flags|=128,s=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Es(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ue)return ze(e),null}else 2*me()-r.renderingStartTime>ds&&i!==1073741824&&(e.flags|=128,s=!0,Es(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(i=r.last,i!==null?i.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=me(),e.sibling=null,i=he.current,re(he,s?i&1|2:i&1),e):(ze(e),null);case 22:case 23:return Va(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Je&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function fg(t,e){switch(ja(e),e.tag){case 1:return Ke(e.type)&&_r(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hs(),oe(He),oe(Be),za(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ta(e),null;case 13:if(oe(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));as()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(he),null;case 4:return hs(),null;case 10:return Ca(e.type._context),null;case 22:case 23:return Va(),null;case 24:return null;default:return null}}var Dn=!1,Le=!1,pg=typeof WeakSet=="function"?WeakSet:Set,A=null;function Qi(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(s){pe(t,e,s)}else i.current=null}function $o(t,e,i){try{i()}catch(s){pe(t,e,s)}}var ih=!1;function mg(t,e){if(bo=vr,t=gd(),_a(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var n=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{i.nodeType,r.nodeType}catch{i=null;break e}var o=0,a=-1,u=-1,h=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==i||n!==0&&d.nodeType!==3||(a=o+n),d!==r||s!==0&&d.nodeType!==3||(u=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===i&&++h===n&&(a=o),f===r&&++c===s&&(u=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}i=a===-1||u===-1?null:{start:a,end:u}}else i=null}i=i||{start:0,end:0}}else i=null;for(ko={focusedElem:t,selectionRange:i},vr=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,P=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:ht(e.type,x),P);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){pe(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return y=ih,ih=!1,y}function $s(t,e,i){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,r!==void 0&&$o(e,i,r)}n=n.next}while(n!==s)}}function Qr(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var s=i.create;i.destroy=s()}i=i.next}while(i!==e)}}function Wo(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function ff(t){var e=t.alternate;e!==null&&(t.alternate=null,ff(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[St],delete e[ln],delete e[Eo],delete e[Xm],delete e[qm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pf(t){return t.tag===5||t.tag===3||t.tag===4}function sh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vo(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=wr));else if(s!==4&&(t=t.child,t!==null))for(Vo(t,e,i),t=t.sibling;t!==null;)Vo(t,e,i),t=t.sibling}function Uo(t,e,i){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Uo(t,e,i),t=t.sibling;t!==null;)Uo(t,e,i),t=t.sibling}var Me=null,ct=!1;function Wt(t,e,i){for(i=i.child;i!==null;)mf(t,e,i),i=i.sibling}function mf(t,e,i){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Dr,i)}catch{}switch(i.tag){case 5:Le||Qi(i,e);case 6:var s=Me,n=ct;Me=null,Wt(t,e,i),Me=s,ct=n,Me!==null&&(ct?(t=Me,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):Me.removeChild(i.stateNode));break;case 18:Me!==null&&(ct?(t=Me,i=i.stateNode,t.nodeType===8?Ml(t.parentNode,i):t.nodeType===1&&Ml(t,i),en(t)):Ml(Me,i.stateNode));break;case 4:s=Me,n=ct,Me=i.stateNode.containerInfo,ct=!0,Wt(t,e,i),Me=s,ct=n;break;case 0:case 11:case 14:case 15:if(!Le&&(s=i.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var r=n,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&$o(i,e,o),n=n.next}while(n!==s)}Wt(t,e,i);break;case 1:if(!Le&&(Qi(i,e),s=i.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=i.memoizedProps,s.state=i.memoizedState,s.componentWillUnmount()}catch(a){pe(i,e,a)}Wt(t,e,i);break;case 21:Wt(t,e,i);break;case 22:i.mode&1?(Le=(s=Le)||i.memoizedState!==null,Wt(t,e,i),Le=s):Wt(t,e,i);break;default:Wt(t,e,i)}}function nh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new pg),e.forEach(function(s){var n=bg.bind(null,t,s);i.has(s)||(i.add(s),s.then(n,n))})}}function ut(t,e){var i=e.deletions;if(i!==null)for(var s=0;s<i.length;s++){var n=i[s];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Me=a.stateNode,ct=!1;break e;case 3:Me=a.stateNode.containerInfo,ct=!0;break e;case 4:Me=a.stateNode.containerInfo,ct=!0;break e}a=a.return}if(Me===null)throw Error(R(160));mf(r,o,n),Me=null,ct=!1;var u=n.alternate;u!==null&&(u.return=null),n.return=null}catch(h){pe(n,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)gf(e,t),e=e.sibling}function gf(t,e){var i=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),xt(t),s&4){try{$s(3,t,t.return),Qr(3,t)}catch(x){pe(t,t.return,x)}try{$s(5,t,t.return)}catch(x){pe(t,t.return,x)}}break;case 1:ut(e,t),xt(t),s&512&&i!==null&&Qi(i,i.return);break;case 5:if(ut(e,t),xt(t),s&512&&i!==null&&Qi(i,i.return),t.flags&32){var n=t.stateNode;try{Gs(n,"")}catch(x){pe(t,t.return,x)}}if(s&4&&(n=t.stateNode,n!=null)){var r=t.memoizedProps,o=i!==null?i.memoizedProps:r,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Ac(n,r),po(a,o);var h=po(a,r);for(o=0;o<u.length;o+=2){var c=u[o],d=u[o+1];c==="style"?Wc(n,d):c==="dangerouslySetInnerHTML"?Dc(n,d):c==="children"?Gs(n,d):aa(n,c,d,h)}switch(a){case"input":ao(n,r);break;case"textarea":Fc(n,r);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?qi(n,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?qi(n,!!r.multiple,r.defaultValue,!0):qi(n,!!r.multiple,r.multiple?[]:"",!1))}n[ln]=r}catch(x){pe(t,t.return,x)}}break;case 6:if(ut(e,t),xt(t),s&4){if(t.stateNode===null)throw Error(R(162));n=t.stateNode,r=t.memoizedProps;try{n.nodeValue=r}catch(x){pe(t,t.return,x)}}break;case 3:if(ut(e,t),xt(t),s&4&&i!==null&&i.memoizedState.isDehydrated)try{en(e.containerInfo)}catch(x){pe(t,t.return,x)}break;case 4:ut(e,t),xt(t);break;case 13:ut(e,t),xt(t),n=t.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||($a=me())),s&4&&nh(t);break;case 22:if(c=i!==null&&i.memoizedState!==null,t.mode&1?(Le=(h=Le)||c,ut(e,t),Le=h):ut(e,t),xt(t),s&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!c&&t.mode&1)for(A=t,c=t.child;c!==null;){for(d=A=c;A!==null;){switch(f=A,m=f.child,f.tag){case 0:case 11:case 14:case 15:$s(4,f,f.return);break;case 1:Qi(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,i=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){pe(s,i,x)}}break;case 5:Qi(f,f.return);break;case 22:if(f.memoizedState!==null){lh(d);continue}}m!==null?(m.return=f,A=m):lh(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{n=d.stateNode,h?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=$c("display",o))}catch(x){pe(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(x){pe(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ut(e,t),xt(t),s&4&&nh(t);break;case 21:break;default:ut(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(pf(i)){var s=i;break e}i=i.return}throw Error(R(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Gs(n,""),s.flags&=-33);var r=sh(t);Uo(t,r,n);break;case 3:case 4:var o=s.stateNode.containerInfo,a=sh(t);Vo(t,a,o);break;default:throw Error(R(161))}}catch(u){pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gg(t,e,i){A=t,vf(t)}function vf(t,e,i){for(var s=(t.mode&1)!==0;A!==null;){var n=A,r=n.child;if(n.tag===22&&s){var o=n.memoizedState!==null||Dn;if(!o){var a=n.alternate,u=a!==null&&a.memoizedState!==null||Le;a=Dn;var h=Le;if(Dn=o,(Le=u)&&!h)for(A=n;A!==null;)o=A,u=o.child,o.tag===22&&o.memoizedState!==null?oh(n):u!==null?(u.return=o,A=u):oh(n);for(;r!==null;)A=r,vf(r),r=r.sibling;A=n,Dn=a,Le=h}rh(t)}else n.subtreeFlags&8772&&r!==null?(r.return=n,A=r):rh(t)}}function rh(t){for(;A!==null;){var e=A;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||Qr(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Le)if(i===null)s.componentDidMount();else{var n=e.elementType===e.type?i.memoizedProps:ht(e.type,i.memoizedProps);s.componentDidUpdate(n,i.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Vu(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}Vu(e,o,i)}break;case 5:var a=e.stateNode;if(i===null&&e.flags&4){i=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&i.focus();break;case"img":u.src&&(i.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var c=h.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&en(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Le||e.flags&512&&Wo(e)}catch(f){pe(e,e.return,f)}}if(e===t){A=null;break}if(i=e.sibling,i!==null){i.return=e.return,A=i;break}A=e.return}}function lh(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var i=e.sibling;if(i!==null){i.return=e.return,A=i;break}A=e.return}}function oh(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{Qr(4,e)}catch(u){pe(e,i,u)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(u){pe(e,n,u)}}var r=e.return;try{Wo(e)}catch(u){pe(e,r,u)}break;case 5:var o=e.return;try{Wo(e)}catch(u){pe(e,o,u)}}}catch(u){pe(e,e.return,u)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var vg=Math.ceil,Tr=At.ReactCurrentDispatcher,Oa=At.ReactCurrentOwner,rt=At.ReactCurrentBatchConfig,G=0,ke=null,we=null,Pe=0,Je=0,Ji=ui(0),je=0,dn=null,ki=0,Jr=0,Da=0,Ws=null,Ve=null,$a=0,ds=1/0,Mt=null,zr=!1,Ho=null,si=null,$n=!1,Gt=null,Rr=0,Vs=0,Ko=null,or=-1,ar=0;function Fe(){return G&6?me():or!==-1?or:or=me()}function ni(t){return t.mode&1?G&2&&Pe!==0?Pe&-Pe:eg.transition!==null?(ar===0&&(ar=ed()),ar):(t=ee,t!==0||(t=window.event,t=t===void 0?16:od(t.type)),t):1}function pt(t,e,i,s){if(50<Vs)throw Vs=0,Ko=null,Error(R(185));yn(t,i,s),(!(G&2)||t!==ke)&&(t===ke&&(!(G&2)&&(Jr|=i),je===4&&Qt(t,Pe)),Ye(t,s),i===1&&G===0&&!(e.mode&1)&&(ds=me()+500,Hr&&hi()))}function Ye(t,e){var i=t.callbackNode;em(t,e);var s=gr(t,t===ke?Pe:0);if(s===0)i!==null&&gu(i),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(i!=null&&gu(i),e===1)t.tag===0?Zm(ah.bind(null,t)):Md(ah.bind(null,t)),Jm(function(){!(G&6)&&hi()}),i=null;else{switch(td(s)){case 1:i=fa;break;case 4:i=qc;break;case 16:i=mr;break;case 536870912:i=Zc;break;default:i=mr}i=kf(i,yf.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function yf(t,e){if(or=-1,ar=0,G&6)throw Error(R(327));var i=t.callbackNode;if(ss()&&t.callbackNode!==i)return null;var s=gr(t,t===ke?Pe:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=Lr(t,s);else{e=s;var n=G;G|=2;var r=wf();(ke!==t||Pe!==e)&&(Mt=null,ds=me()+500,xi(t,e));do try{wg();break}catch(a){xf(t,a)}while(!0);Ma(),Tr.current=r,G=n,we!==null?e=0:(ke=null,Pe=0,e=je)}if(e!==0){if(e===2&&(n=xo(t),n!==0&&(s=n,e=Yo(t,n))),e===1)throw i=dn,xi(t,0),Qt(t,s),Ye(t,me()),i;if(e===6)Qt(t,s);else{if(n=t.current.alternate,!(s&30)&&!yg(n)&&(e=Lr(t,s),e===2&&(r=xo(t),r!==0&&(s=r,e=Yo(t,r))),e===1))throw i=dn,xi(t,0),Qt(t,s),Ye(t,me()),i;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(R(345));case 2:mi(t,Ve,Mt);break;case 3:if(Qt(t,s),(s&130023424)===s&&(e=$a+500-me(),10<e)){if(gr(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){Fe(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Co(mi.bind(null,t,Ve,Mt),e);break}mi(t,Ve,Mt);break;case 4:if(Qt(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var o=31-ft(s);r=1<<o,o=e[o],o>n&&(n=o),s&=~r}if(s=n,s=me()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*vg(s/1960))-s,10<s){t.timeoutHandle=Co(mi.bind(null,t,Ve,Mt),s);break}mi(t,Ve,Mt);break;case 5:mi(t,Ve,Mt);break;default:throw Error(R(329))}}}return Ye(t,me()),t.callbackNode===i?yf.bind(null,t):null}function Yo(t,e){var i=Ws;return t.current.memoizedState.isDehydrated&&(xi(t,e).flags|=256),t=Lr(t,e),t!==2&&(e=Ve,Ve=i,e!==null&&Qo(e)),t}function Qo(t){Ve===null?Ve=t:Ve.push.apply(Ve,t)}function yg(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var s=0;s<i.length;s++){var n=i[s],r=n.getSnapshot;n=n.value;try{if(!mt(r(),n))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qt(t,e){for(e&=~Da,e&=~Jr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-ft(e),s=1<<i;t[i]=-1,e&=~s}}function ah(t){if(G&6)throw Error(R(327));ss();var e=gr(t,0);if(!(e&1))return Ye(t,me()),null;var i=Lr(t,e);if(t.tag!==0&&i===2){var s=xo(t);s!==0&&(e=s,i=Yo(t,s))}if(i===1)throw i=dn,xi(t,0),Qt(t,e),Ye(t,me()),i;if(i===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mi(t,Ve,Mt),Ye(t,me()),null}function Wa(t,e){var i=G;G|=1;try{return t(e)}finally{G=i,G===0&&(ds=me()+500,Hr&&hi())}}function Mi(t){Gt!==null&&Gt.tag===0&&!(G&6)&&ss();var e=G;G|=1;var i=rt.transition,s=ee;try{if(rt.transition=null,ee=1,t)return t()}finally{ee=s,rt.transition=i,G=e,!(G&6)&&hi()}}function Va(){Je=Ji.current,oe(Ji)}function xi(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,Qm(i)),we!==null)for(i=we.return;i!==null;){var s=i;switch(ja(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_r();break;case 3:hs(),oe(He),oe(Be),za();break;case 5:Ta(s);break;case 4:hs();break;case 13:oe(he);break;case 19:oe(he);break;case 10:Ca(s.type._context);break;case 22:case 23:Va()}i=i.return}if(ke=t,we=t=ri(t.current,null),Pe=Je=e,je=0,dn=null,Da=Jr=ki=0,Ve=Ws=null,vi!==null){for(e=0;e<vi.length;e++)if(i=vi[e],s=i.interleaved,s!==null){i.interleaved=null;var n=s.next,r=i.pending;if(r!==null){var o=r.next;r.next=n,s.next=o}i.pending=s}vi=null}return t}function xf(t,e){do{var i=we;try{if(Ma(),nr.current=Nr,Pr){for(var s=ce.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Pr=!1}if(bi=0,be=Se=ce=null,Ds=!1,un=0,Oa.current=null,i===null||i.return===null){je=1,dn=e,we=null;break}e:{var r=t,o=i.return,a=i,u=e;if(e=Pe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Ju(o);if(m!==null){m.flags&=-257,Gu(m,o,a,r,e),m.mode&1&&Qu(r,h,e),e=m,u=h;var y=e.updateQueue;if(y===null){var x=new Set;x.add(u),e.updateQueue=x}else y.add(u);break e}else{if(!(e&1)){Qu(r,h,e),Ua();break e}u=Error(R(426))}}else if(ue&&a.mode&1){var P=Ju(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Gu(P,o,a,r,e),ba(cs(u,a));break e}}r=u=cs(u,a),je!==4&&(je=2),Ws===null?Ws=[r]:Ws.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=tf(r,u,e);Wu(r,g);break e;case 1:a=u;var p=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(si===null||!si.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var _=sf(r,a,e);Wu(r,_);break e}}r=r.return}while(r!==null)}Sf(i)}catch(M){e=M,we===i&&i!==null&&(we=i=i.return);continue}break}while(!0)}function wf(){var t=Tr.current;return Tr.current=Nr,t===null?Nr:t}function Ua(){(je===0||je===3||je===2)&&(je=4),ke===null||!(ki&268435455)&&!(Jr&268435455)||Qt(ke,Pe)}function Lr(t,e){var i=G;G|=2;var s=wf();(ke!==t||Pe!==e)&&(Mt=null,xi(t,e));do try{xg();break}catch(n){xf(t,n)}while(!0);if(Ma(),G=i,Tr.current=s,we!==null)throw Error(R(261));return ke=null,Pe=0,je}function xg(){for(;we!==null;)_f(we)}function wg(){for(;we!==null&&!Hp();)_f(we)}function _f(t){var e=bf(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?Sf(t):we=e,Oa.current=null}function Sf(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=fg(i,e),i!==null){i.flags&=32767,we=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,we=null;return}}else if(i=dg(i,e,Je),i!==null){we=i;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);je===0&&(je=5)}function mi(t,e,i){var s=ee,n=rt.transition;try{rt.transition=null,ee=1,_g(t,e,i,s)}finally{rt.transition=n,ee=s}return null}function _g(t,e,i,s){do ss();while(Gt!==null);if(G&6)throw Error(R(327));i=t.finishedWork;var n=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var r=i.lanes|i.childLanes;if(tm(t,r),t===ke&&(we=ke=null,Pe=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||$n||($n=!0,kf(mr,function(){return ss(),null})),r=(i.flags&15990)!==0,i.subtreeFlags&15990||r){r=rt.transition,rt.transition=null;var o=ee;ee=1;var a=G;G|=4,Oa.current=null,mg(t,i),gf(i,t),$m(ko),vr=!!bo,ko=bo=null,t.current=i,gg(i),Kp(),G=a,ee=o,rt.transition=r}else t.current=i;if($n&&($n=!1,Gt=t,Rr=n),r=t.pendingLanes,r===0&&(si=null),Jp(i.stateNode),Ye(t,me()),e!==null)for(s=t.onRecoverableError,i=0;i<e.length;i++)n=e[i],s(n.value,{componentStack:n.stack,digest:n.digest});if(zr)throw zr=!1,t=Ho,Ho=null,t;return Rr&1&&t.tag!==0&&ss(),r=t.pendingLanes,r&1?t===Ko?Vs++:(Vs=0,Ko=t):Vs=0,hi(),null}function ss(){if(Gt!==null){var t=td(Rr),e=rt.transition,i=ee;try{if(rt.transition=null,ee=16>t?16:t,Gt===null)var s=!1;else{if(t=Gt,Gt=null,Rr=0,G&6)throw Error(R(331));var n=G;for(G|=4,A=t.current;A!==null;){var r=A,o=r.child;if(A.flags&16){var a=r.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(A=h;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:$s(8,c,r)}var d=c.child;if(d!==null)d.return=c,A=d;else for(;A!==null;){c=A;var f=c.sibling,m=c.return;if(ff(c),c===h){A=null;break}if(f!==null){f.return=m,A=f;break}A=m}}}var y=r.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var P=x.sibling;x.sibling=null,x=P}while(x!==null)}}A=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,A=o;else e:for(;A!==null;){if(r=A,r.flags&2048)switch(r.tag){case 0:case 11:case 15:$s(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,A=g;break e}A=r.return}}var p=t.current;for(A=p;A!==null;){o=A;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,A=v;else e:for(o=p;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qr(9,a)}}catch(M){pe(a,a.return,M)}if(a===o){A=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,A=_;break e}A=a.return}}if(G=n,hi(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Dr,t)}catch{}s=!0}return s}finally{ee=i,rt.transition=e}}return!1}function uh(t,e,i){e=cs(i,e),e=tf(t,e,1),t=ii(t,e,1),e=Fe(),t!==null&&(yn(t,1,e),Ye(t,e))}function pe(t,e,i){if(t.tag===3)uh(t,t,i);else for(;e!==null;){if(e.tag===3){uh(e,t,i);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(si===null||!si.has(s))){t=cs(i,t),t=sf(e,t,1),e=ii(e,t,1),t=Fe(),e!==null&&(yn(e,1,t),Ye(e,t));break}}e=e.return}}function Sg(t,e,i){var s=t.pingCache;s!==null&&s.delete(e),e=Fe(),t.pingedLanes|=t.suspendedLanes&i,ke===t&&(Pe&i)===i&&(je===4||je===3&&(Pe&130023424)===Pe&&500>me()-$a?xi(t,0):Da|=i),Ye(t,e)}function jf(t,e){e===0&&(t.mode&1?(e=Tn,Tn<<=1,!(Tn&130023424)&&(Tn=4194304)):e=1);var i=Fe();t=Bt(t,e),t!==null&&(yn(t,e,i),Ye(t,i))}function jg(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),jf(t,i)}function bg(t,e){var i=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(i=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(R(314))}s!==null&&s.delete(e),jf(t,i)}var bf;bf=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||He.current)Ue=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return Ue=!1,cg(t,e,i);Ue=!!(t.flags&131072)}else Ue=!1,ue&&e.flags&1048576&&Cd(e,br,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;lr(t,e),t=e.pendingProps;var n=os(e,Be.current);is(e,i),n=La(null,e,s,t,n,i);var r=Ba();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(s)?(r=!0,Sr(e)):r=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Pa(e),n.updater=Yr,e.stateNode=n,n._reactInternals=e,Lo(e,s,t,i),e=Ao(null,e,s,!0,r,i)):(e.tag=0,ue&&r&&Sa(e),Ae(null,e,n,i),e=e.child),e;case 16:s=e.elementType;e:{switch(lr(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=Mg(s),t=ht(s,t),n){case 0:e=Io(null,e,s,t,i);break e;case 1:e=Zu(null,e,s,t,i);break e;case 11:e=Xu(null,e,s,t,i);break e;case 14:e=qu(null,e,s,ht(s.type,t),i);break e}throw Error(R(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:ht(s,n),Io(t,e,s,n,i);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:ht(s,n),Zu(t,e,s,n,i);case 3:e:{if(of(e),t===null)throw Error(R(387));s=e.pendingProps,r=e.memoizedState,n=r.element,Rd(t,e),Cr(e,s,null,i);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){n=cs(Error(R(423)),e),e=eh(t,e,s,i,n);break e}else if(s!==n){n=cs(Error(R(424)),e),e=eh(t,e,s,i,n);break e}else for(Ge=ti(e.stateNode.containerInfo.firstChild),Xe=e,ue=!0,dt=null,i=Td(e,null,s,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(as(),s===n){e=It(t,e,i);break e}Ae(t,e,s,i)}e=e.child}return e;case 5:return Ld(e),t===null&&To(e),s=e.type,n=e.pendingProps,r=t!==null?t.memoizedProps:null,o=n.children,Mo(s,n)?o=null:r!==null&&Mo(s,r)&&(e.flags|=32),lf(t,e),Ae(t,e,o,i),e.child;case 6:return t===null&&To(e),null;case 13:return af(t,e,i);case 4:return Na(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=us(e,null,s,i):Ae(t,e,s,i),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:ht(s,n),Xu(t,e,s,n,i);case 7:return Ae(t,e,e.pendingProps,i),e.child;case 8:return Ae(t,e,e.pendingProps.children,i),e.child;case 12:return Ae(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,r=e.memoizedProps,o=n.value,re(kr,s._currentValue),s._currentValue=o,r!==null)if(mt(r.value,o)){if(r.children===n.children&&!He.current){e=It(t,e,i);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var u=a.firstContext;u!==null;){if(u.context===s){if(r.tag===1){u=zt(-1,i&-i),u.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var c=h.pending;c===null?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}r.lanes|=i,u=r.alternate,u!==null&&(u.lanes|=i),zo(r.return,i,e),a.lanes|=i;break}u=u.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(R(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),zo(o,i,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Ae(t,e,n.children,i),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,is(e,i),n=lt(n),s=s(n),e.flags|=1,Ae(t,e,s,i),e.child;case 14:return s=e.type,n=ht(s,e.pendingProps),n=ht(s.type,n),qu(t,e,s,n,i);case 15:return nf(t,e,e.type,e.pendingProps,i);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:ht(s,n),lr(t,e),e.tag=1,Ke(s)?(t=!0,Sr(e)):t=!1,is(e,i),ef(e,s,n),Lo(e,s,n,i),Ao(null,e,s,!0,t,i);case 19:return uf(t,e,i);case 22:return rf(t,e,i)}throw Error(R(156,e.tag))};function kf(t,e){return Xc(t,e)}function kg(t,e,i,s){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nt(t,e,i,s){return new kg(t,e,i,s)}function Ha(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mg(t){if(typeof t=="function")return Ha(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ha)return 11;if(t===ca)return 14}return 2}function ri(t,e){var i=t.alternate;return i===null?(i=nt(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function ur(t,e,i,s,n,r){var o=2;if(s=t,typeof t=="function")Ha(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oi:return wi(i.children,n,r,e);case ua:o=8,n|=8;break;case so:return t=nt(12,i,e,n|2),t.elementType=so,t.lanes=r,t;case no:return t=nt(13,i,e,n),t.elementType=no,t.lanes=r,t;case ro:return t=nt(19,i,e,n),t.elementType=ro,t.lanes=r,t;case Lc:return Gr(i,n,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zc:o=10;break e;case Rc:o=9;break e;case ha:o=11;break e;case ca:o=14;break e;case Ht:o=16,s=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=nt(o,i,e,n),e.elementType=t,e.type=s,e.lanes=r,e}function wi(t,e,i,s){return t=nt(7,t,s,e),t.lanes=i,t}function Gr(t,e,i,s){return t=nt(22,t,s,e),t.elementType=Lc,t.lanes=i,t.stateNode={isHidden:!1},t}function Ll(t,e,i){return t=nt(6,t,null,e),t.lanes=i,t}function Bl(t,e,i){return e=nt(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Cg(t,e,i,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ka(t,e,i,s,n,r,o,a,u){return t=new Cg(t,e,i,a,u),e===1?(e=1,r===!0&&(e|=8)):e=0,r=nt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:s,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(r),t}function Eg(t,e,i){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fi,key:s==null?null:""+s,children:t,containerInfo:e,implementation:i}}function Mf(t){if(!t)return oi;t=t._reactInternals;e:{if(Ri(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var i=t.type;if(Ke(i))return kd(t,i,e)}return e}function Cf(t,e,i,s,n,r,o,a,u){return t=Ka(i,s,!0,t,n,r,o,a,u),t.context=Mf(null),i=t.current,s=Fe(),n=ni(i),r=zt(s,n),r.callback=e??null,ii(i,r,n),t.current.lanes=n,yn(t,n,s),Ye(t,s),t}function Xr(t,e,i,s){var n=e.current,r=Fe(),o=ni(n);return i=Mf(i),e.context===null?e.context=i:e.pendingContext=i,e=zt(r,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=ii(n,e,o),t!==null&&(pt(t,n,o,r),sr(t,n,o)),o}function Br(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function Ya(t,e){hh(t,e),(t=t.alternate)&&hh(t,e)}function Pg(){return null}var Ef=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qa(t){this._internalRoot=t}qr.prototype.render=Qa.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));Xr(t,e,null,null)};qr.prototype.unmount=Qa.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mi(function(){Xr(null,t,null,null)}),e[Lt]=null}};function qr(t){this._internalRoot=t}qr.prototype.unstable_scheduleHydration=function(t){if(t){var e=nd();t={blockedOn:null,target:t,priority:e};for(var i=0;i<Yt.length&&e!==0&&e<Yt[i].priority;i++);Yt.splice(i,0,t),i===0&&ld(t)}};function Ja(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zr(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ch(){}function Ng(t,e,i,s,n){if(n){if(typeof s=="function"){var r=s;s=function(){var h=Br(o);r.call(h)}}var o=Cf(e,s,t,0,null,!1,!1,"",ch);return t._reactRootContainer=o,t[Lt]=o.current,nn(t.nodeType===8?t.parentNode:t),Mi(),o}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var a=s;s=function(){var h=Br(u);a.call(h)}}var u=Ka(t,0,!1,null,null,!1,!1,"",ch);return t._reactRootContainer=u,t[Lt]=u.current,nn(t.nodeType===8?t.parentNode:t),Mi(function(){Xr(e,u,i,s)}),u}function el(t,e,i,s,n){var r=i._reactRootContainer;if(r){var o=r;if(typeof n=="function"){var a=n;n=function(){var u=Br(o);a.call(u)}}Xr(e,o,t,n)}else o=Ng(i,e,t,n,s);return Br(o)}id=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Rs(e.pendingLanes);i!==0&&(pa(e,i|1),Ye(e,me()),!(G&6)&&(ds=me()+500,hi()))}break;case 13:Mi(function(){var s=Bt(t,1);if(s!==null){var n=Fe();pt(s,t,1,n)}}),Ya(t,1)}};ma=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var i=Fe();pt(e,t,134217728,i)}Ya(t,134217728)}};sd=function(t){if(t.tag===13){var e=ni(t),i=Bt(t,e);if(i!==null){var s=Fe();pt(i,t,e,s)}Ya(t,e)}};nd=function(){return ee};rd=function(t,e){var i=ee;try{return ee=t,e()}finally{ee=i}};go=function(t,e,i){switch(e){case"input":if(ao(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var s=i[e];if(s!==t&&s.form===t.form){var n=Ur(s);if(!n)throw Error(R(90));Ic(s),ao(s,n)}}}break;case"textarea":Fc(t,i);break;case"select":e=i.value,e!=null&&qi(t,!!i.multiple,e,!1)}};Hc=Wa;Kc=Mi;var Tg={usingClientEntryPoint:!1,Events:[wn,Vi,Ur,Vc,Uc,Wa]},Ps={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zg={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:At.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jc(t),t===null?null:t.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wn.isDisabled&&Wn.supportsFiber)try{Dr=Wn.inject(zg),jt=Wn}catch{}}et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tg;et.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ja(e))throw Error(R(200));return Eg(t,e,null,i)};et.createRoot=function(t,e){if(!Ja(t))throw Error(R(299));var i=!1,s="",n=Ef;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Ka(t,1,!1,null,null,i,!1,s,n),t[Lt]=e.current,nn(t.nodeType===8?t.parentNode:t),new Qa(e)};et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Jc(e),t=t===null?null:t.stateNode,t};et.flushSync=function(t){return Mi(t)};et.hydrate=function(t,e,i){if(!Zr(e))throw Error(R(200));return el(null,t,e,!0,i)};et.hydrateRoot=function(t,e,i){if(!Ja(t))throw Error(R(405));var s=i!=null&&i.hydratedSources||null,n=!1,r="",o=Ef;if(i!=null&&(i.unstable_strictMode===!0&&(n=!0),i.identifierPrefix!==void 0&&(r=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),e=Cf(e,null,t,1,i??null,n,!1,r,o),t[Lt]=e.current,nn(t),s)for(t=0;t<s.length;t++)i=s[t],n=i._getVersion,n=n(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,n]:e.mutableSourceEagerHydrationData.push(i,n);return new qr(e)};et.render=function(t,e,i){if(!Zr(e))throw Error(R(200));return el(null,t,e,!1,i)};et.unmountComponentAtNode=function(t){if(!Zr(t))throw Error(R(40));return t._reactRootContainer?(Mi(function(){el(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};et.unstable_batchedUpdates=Wa;et.unstable_renderSubtreeIntoContainer=function(t,e,i,s){if(!Zr(i))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return el(t,e,i,!1,s)};et.version="18.3.1-next-f1338f8080-20240426";function Pf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pf)}catch(t){console.error(t)}}Pf(),Ec.exports=et;var Rg=Ec.exports,dh=Rg;to.createRoot=dh.createRoot,to.hydrateRoot=dh.hydrateRoot;function se(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function _i(t,e){return t.width===e.width&&t.height===e.height}var Lg=function(){function t(e){var i=this;this._resolutionListener=function(){return i._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var i=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){i._observers=i._observers.filter(function(n){return n!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(i){return i.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Bg(t){return new Lg(t)}var Ig=function(){function t(e,i,s){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=se({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=i??function(r){return r},this._allowResizeObserver=(n=s==null?void 0:s.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,i;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(i=this._devicePixelRatioObservable)===null||i===void 0||i.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return se({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=se(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(i){return i!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(i){return i!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var i=this.bitmapSize;_i(i,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(i,e))},t.prototype._emitBitmapSizeChanged=function(e,i){var s=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(s,e,i)})},t.prototype._suggestNewBitmapSize=function(e){var i=this._suggestedBitmapSize,s=se(this._transformBitmapSize(e,this._canvasElementClientSize)),n=_i(this.bitmapSize,s)?null:s;i===null&&n===null||i!==null&&n!==null&&_i(i,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(i,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,i){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(s,e,i)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Fg().then(function(i){return i?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var i=fh(this._canvasElement);if(i===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Bg(i),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,i;if(this._canvasElement!==null){var s=fh(this._canvasElement);if(s!==null){var n=(i=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&i!==void 0?i:s.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Og(r[0],n):se({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(i){var s=i.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var n=s.devicePixelContentBoxSize[0],r=se({width:n.inlineSize,height:n.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Ag(t,e){return new Ig(t,e.transform,e.options)}function fh(t){return t.ownerDocument.defaultView}function Fg(){return new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Og(t,e){return se({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Dg=function(){function t(e,i,s){if(i.width===0||i.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=i,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ci(t,e){var i=t.canvasElementClientSize;if(i.width===0||i.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var n=t.canvasElement.getContext("2d",e);return n===null?null:new Dg(n,i,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.1.0
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Nf={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var ph,Us;function Ei(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function Tf(t,e,i,s){t.beginPath();const n=t.lineWidth%2?.5:0;t.moveTo(i,e+n),t.lineTo(s,e+n),t.stroke()}function Ee(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Qe(t){if(t===void 0)throw new Error("Value is undefined");return t}function N(t){if(t===null)throw new Error("Value is null");return t}function Xt(t){return N(Qe(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(ph||(ph={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(Us||(Us={}));class ge{constructor(){this.t=[]}i(e,i,s){const n={h:e,l:i,o:s===!0};this.t.push(n)}_(e){const i=this.t.findIndex(s=>e===s.h);i>-1&&this.t.splice(i,1)}u(e){this.t=this.t.filter(i=>i.l!==e)}p(e,i,s){const n=[...this.t];this.t=this.t.filter(r=>!r.o),n.forEach(r=>r.h(e,i,s))}v(){return this.t.length>0}m(){this.t=[]}}function qe(t,...e){for(const i of e)for(const s in i)i[s]!==void 0&&Object.prototype.hasOwnProperty.call(i,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof i[s]!="object"||t[s]===void 0||Array.isArray(i[s])?t[s]=i[s]:qe(t[s],i[s]));return t}function Pi(t){return typeof t=="number"&&isFinite(t)}function fn(t){return typeof t=="number"&&t%1==0}function Sn(t){return typeof t=="string"}function Vn(t){return typeof t=="boolean"}function Nt(t){const e=t;if(!e||typeof e!="object")return e;let i,s,n;for(s in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(n=e[s],i[s]=n&&typeof n=="object"?Nt(n):n);return i}function mh(t){return t!==null}function pn(t){return t===null?void 0:t}const zf="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function mn(t,e,i){return e===void 0&&(e=zf),`${i=i!==void 0?`${i} `:""}${t}px ${e}`}class $g{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,i=this.F(),s=this.W();return e.k===i&&e.T===s||(e.k=i,e.T=s,e.P=mn(i,s),e.A=2.5/12*i,e.I=e.A,e.V=i/12*e.C,e.B=i/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Il(t){return t<0?0:t>255?255:Math.round(t)||0}function gh(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Wg{constructor(e,i){this.q=new Map,this.j=e,i&&(this.q=i)}Y(e,i){if(e==="transparent")return e;const s=this.K(e),n=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${i*n})`}Z(e){const i=this.K(e);return{G:`rgb(${i[0]}, ${i[1]}, ${i[2]})`,X:gh(i)>160?"black":"white"}}J(e){return gh(this.K(e))}tt(e,i,s){const[n,r,o,a]=this.K(e),[u,h,c,d]=this.K(i),f=[Il(n+s*(u-n)),Il(r+s*(h-r)),Il(o+s*(c-o)),(m=a+s*(d-a),m<=0||m>1?Math.min(Math.max(m,0),1):Math.round(1e4*m)/1e4)];var m;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const i=this.q.get(e);if(i)return i;const s=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const u=window.getComputedStyle(a).color;return document.body.removeChild(a),u}(e),n=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.j.length)for(const o of this.j){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const r=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(e,r),r}}class Vg{constructor(){this.it=[]}st(e){this.it=e}nt(e,i,s){this.it.forEach(n=>{n.nt(e,i,s)})}}class ci{nt(e,i,s){e.useBitmapCoordinateSpace(n=>this.et(n,i,s))}}class Ug extends ci{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(i))%2/2,a=u=>{e.beginPath();for(let h=n.to-1;h>=n.from;--h){const c=r.ot[h],d=Math.round(c._t*i)+o,f=c.ut*s,m=u*s+o;e.moveTo(d,f),e.arc(d,f,m,0,2*Math.PI)}e.fill()};r.ct>0&&(e.fillStyle=r.dt,a(r.ft+r.ct)),e.fillStyle=r.vt,a(r.ft)}}function Hg(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const Kg={from:0,to:1};class Yg{constructor(e,i,s){this.Mt=new Vg,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=i,this.yt=s,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map(Hg),this.bt=this.St.map(i=>{const s=new Ug;return s.ht(i),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),i=this.yt.Vt(),s=this.Ct.Bt(),n=this.O.Et();this.Pt(),i.forEach((r,o)=>{const a=this.St[o],u=r.At(s),h=r.Lt();!e&&u!==null&&r.It()&&h!==null?(a.vt=u.zt,a.ft=u.ft,a.ct=u.Ot,a.ot[0].gt=u.gt,a.ot[0].ut=r.Ft().Nt(u.gt,h.Wt),a.dt=u.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=s,a.ot[0]._t=n.qt(s),a.lt=Kg):a.lt=null})}}class Qg extends ci{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const r=this.jt.Yt.It,o=this.jt.Kt.It;if(!r&&!o)return;const a=Math.round(this.jt._t*s),u=Math.round(this.jt.ut*n);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*s),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,Ei(e,this.jt.Yt.Zt),function(h,c,d,f){h.beginPath();const m=h.lineWidth%2?.5:0;h.moveTo(c+m,d),h.lineTo(c+m,f),h.stroke()}(e,a,0,i.height)),o&&u>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*n),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,Ei(e,this.jt.Kt.Zt),Tf(e,u,0,i.width))}}class Jg{constructor(e,i){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new Qg(this.Gt),this.Jt=e,this.yt=i}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),i=this.yt.Qt().N().crosshair,s=this.Gt;if(i.mode===2)return s.Kt.It=!1,void(s.Yt.It=!1);s.Kt.It=e&&this.Jt.ti(this.yt),s.Yt.It=e&&this.Jt.ii(),s.Kt.ct=i.horzLine.width,s.Kt.Zt=i.horzLine.style,s.Kt.R=i.horzLine.color,s.Yt.ct=i.vertLine.width,s.Yt.Zt=i.vertLine.style,s.Yt.R=i.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function Gg(t,e,i,s,n,r){t.fillRect(e+r,i,s-2*r,r),t.fillRect(e+r,i+n-r,s-2*r,r),t.fillRect(e,i,r,n),t.fillRect(e+s-r,i,r,n)}function tl(t,e,i,s,n,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,s,n),t.restore()}function vh(t,e,i,s,n,r){t.beginPath(),t.roundRect?t.roundRect(e,i,s,n,r):(t.lineTo(e+s-r[1],i),r[1]!==0&&t.arcTo(e+s,i,e+s,i+r[1],r[1]),t.lineTo(e+s,i+n-r[2]),r[2]!==0&&t.arcTo(e+s,i+n,e+s-r[2],i+n,r[2]),t.lineTo(e+r[3],i+n),r[3]!==0&&t.arcTo(e,i+n,e,i+n-r[3],r[3]),t.lineTo(e,i+r[0]),r[0]!==0&&t.arcTo(e,i,e+r[0],i,r[0]))}function yh(t,e,i,s,n,r,o=0,a=[0,0,0,0],u=""){if(t.save(),!o||!u||u===r)return vh(t,e,i,s,n,a),t.fillStyle=r,t.fill(),void t.restore();const h=o/2;var c;vh(t,e+h,i+h,s-o,n-o,(c=-h,a.map(d=>d===0?d:d+c))),r!=="transparent"&&(t.fillStyle=r,t.fill()),u!=="transparent"&&(t.lineWidth=o,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function Rf(t,e,i,s,n,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,n);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,s,n),t.restore()}class xh{constructor(e,i){this.ht(e,i)}ht(e,i){this.jt=e,this.ei=i}$t(e,i){return this.jt.It?e.k+e.A+e.I:0}nt(e,i,s,n){if(!this.jt.It||this.jt.ri.length===0)return;const r=this.jt.R,o=this.ei.G,a=e.useBitmapCoordinateSpace(u=>{const h=u.context;h.font=i.P;const c=this.hi(u,i,s,n),d=c.ai;return c.li?yh(h,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):yh(h,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.jt.pi&&(h.fillStyle=r,h.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.jt.Mi&&(h.fillStyle=i.D,h.fillRect(c.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),c});e.useMediaCoordinateSpace(({context:u})=>{const h=a.xi;u.font=i.P,u.textAlign=a.li?"right":"left",u.textBaseline="middle",u.fillStyle=r,u.fillText(this.jt.ri,h.Ci,(h._i+h.Si)/2+h.yi)})}hi(e,i,s,n){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:h}=e,c=this.jt.pi||!this.jt.ki?i.C:0,d=this.jt.Pi?i.S:0,f=i.A+this.ei.Ti,m=i.I+this.ei.Ri,y=i.V,x=i.B,P=this.jt.ri,g=i.k,p=s.Di(r,P),v=Math.ceil(s.Ii(r,P)),_=g+f+m,M=i.S+y+x+v+c,C=Math.max(1,Math.floor(h));let k=Math.round(_*h);k%2!=C%2&&(k+=1);const T=d>0?Math.max(1,Math.floor(d*u)):0,W=Math.round(M*u),B=Math.round(c*u),D=this.ei.Vi??this.ei.Bi??this.ei.Ei,U=Math.round(D*h)-Math.floor(.5*h),X=Math.floor(U+C/2-k/2),q=X+k,K=n==="right",L=K?a.width-d:d,j=K?o.width-T:T;let S,w,E;return K?(S=j-W,w=j-B,E=L-c-y-d):(S=j+W,w=j+B,E=L+c+y),{li:K,ai:{_i:X,mi:U,Si:q,ui:W,ci:k,ft:2*u,di:T,oi:S,fi:j,wi:w,gi:C,bi:o.width},xi:{_i:X/h,Si:q/h,Ci:E,yi:p}}}}class il{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||xh)(this.Li,this.Ai),this.Ni=new(e||xh)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,i=!1){return Math.max(this.Oi.$t(e,i),this.Ni.$t(e,i))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class Xg extends il{constructor(e,i,s){super(),this.Jt=e,this.Ki=i,this.Zi=s}Yi(e,i,s){if(e.It=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const r=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||r===null)return;const o=this.Ki.Xi().Z(n.labelBackgroundColor);s.G=o.G,e.R=o.X;const a=2/12*this.Ki.k();s.Ti=a,s.Ri=a;const u=this.Zi(this.Ki);s.Ei=u.Ei,e.ri=this.Ki.Ji(u.gt,r),e.It=!0}}const qg=/[1-9]/g;class Lf{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,i){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=i.P,Math.round(i.Qi.Ii(f,N(this.jt).ri,qg))));if(s<=0)return;const n=i.ts,r=s+2*n,o=r/2,a=this.jt.ss;let u=this.jt.Ei,h=Math.floor(u-o)+.5;h<0?(u+=Math.abs(0-h),h=Math.floor(u-o)+.5):h+r>a&&(u-=Math.abs(a-(h+r)),h=Math.floor(u-o)+.5);const c=h+r,d=Math.ceil(0+i.S+i.C+i.A+i.k+i.I);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:y})=>{const x=N(this.jt);f.fillStyle=x.G;const P=Math.round(h*m),g=Math.round(0*y),p=Math.round(c*m),v=Math.round(d*y),_=Math.round(2*m);if(f.beginPath(),f.moveTo(P,g),f.lineTo(P,v-_),f.arcTo(P,v,P+_,v,_),f.lineTo(p-_,v),f.arcTo(p,v,p,v-_,_),f.lineTo(p,g),f.fill(),x.pi){const M=Math.round(x.Ei*m),C=g,k=Math.round((C+i.C)*y);f.fillStyle=x.R;const T=Math.max(1,Math.floor(m)),W=Math.floor(.5*m);f.fillRect(M-W,C,T,k-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const m=N(this.jt),y=0+i.S+i.C+i.A+i.k/2;f.font=i.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.R;const x=i.Qi.Di(f,"Apr0");f.translate(h+n,y+x),f.fillText(m.ri,0,0)})}}class Zg{constructor(e,i,s){this.xt=!0,this.Xt=new Lf,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=i,this.Zi=s}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const i=this.Ct.N().vertLine;if(!i.labelVisible)return;const s=this.ns.Et();if(s.Gi())return;e.ss=s.ss();const n=this.Zi();if(n===null)return;e.Ei=n.Ei;const r=s.es(this.Ct.Bt());e.ri=s.rs(N(r)),e.It=!0;const o=this.ns.Xi().Z(i.labelBackgroundColor);e.G=o.G,e.R=o.X,e.pi=s.N().ticksVisible}}class Bf{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var wh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(wh||(wh={}));class ev extends Bf{constructor(e,i){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=i,this.Ts=((n,r)=>o=>{const a=r(),u=n();if(o===N(this.yt).Rs())return{gt:u,Ei:a};{const h=N(o.Lt());return{gt:o.Ds(a,h),Ei:a}}})(()=>this.ps,()=>this.Cs);const s=((n,r)=>()=>{const o=this.ns.Et().Is(n()),a=r();return o&&Number.isFinite(a)?{wt:o,Ei:a}:null})(()=>this.vs,()=>this.si());this.Vs=new Zg(this,e,s)}N(){return this.Ps}Bs(e,i){this.ys=e,this.ks=i}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,i,s){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,i,s)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const i=this.ns,s=i.Et();let n=null,r=null;for(const h of i.Us()){const c=h.qs().$s(e,-1);if(c){if(c.js===e)return e;(n===null||c.js>n)&&(n=c.js)}const d=h.qs().$s(e,1);if(d){if(d.js===e)return e;(r===null||d.js<r)&&(r=d.js)}}const o=[n,r].filter(mh);if(o.length===0)return e;const a=s.qt(e),u=o.map(h=>Math.abs(a-s.qt(h)));return o[u.indexOf(Math.min(...u))]}Ys(e){let i=this.bs.get(e);i||(i=new Jg(this,e),this.bs.set(e,i));let s=this.Ss.get(e);return s||(s=new Yg(this.ns,this,e),this.Ss.set(e,s)),[i,s]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,i){this.ws&&this.yt===e||this.gs.clear();const s=[];return this.yt===e&&s.push(this.Zs(this.gs,i,this.Ts)),s}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(e=>{var i,s;(i=this.bs.get(e))==null||i.kt(),(s=this.Ss.get(e))==null||s.kt()}),this.gs.forEach(e=>e.kt()),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,i,s){this.Qs(e,i,s)&&this.Ws()}Qs(e,i,s){const n=this.xs,r=this.Cs,o=this.ps,a=this.vs,u=this.yt,h=this.Js(s);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=s;const c=h!==null?h.Lt():null;return h!==null&&c!==null?(this.ps=i,this.Cs=h.Nt(i,c)):(this.ps=NaN,this.Cs=NaN),n!==this.xs||r!==this.Cs||a!==this.vs||o!==this.ps||u!==this.yt}Fs(){const e=this.ns.tn().map(s=>s.qs().sn()).filter(mh),i=e.length===0?null:Math.max(...e);this.vs=i!==null?i:NaN}Zs(e,i,s){let n=e.get(i);return n===void 0&&(n=new Xg(this,i,s),e.set(i,n)),n}}function sl(t){return t==="left"||t==="right"}class Ce{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,i){const s=function(n,r){return n===void 0?r:{an:Math.max(n.an,r.an),ln:n.ln||r.ln}}(this.nn.get(e),i);this.nn.set(e,s)}_n(){return this.rn}un(e){const i=this.nn.get(e);return i===void 0?{an:this.rn}:{an:Math.max(this.rn,i.an),ln:i.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const i of e.en)this.xn(i);this.rn=Math.max(this.rn,e.rn),e.nn.forEach((i,s)=>{this.hn(s,i)})}static Cn(){return new Ce(2)}static yn(){return new Ce(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex(i=>i.fn===5);e!==-1&&this.en.splice(e,1)}}class If{formatTickmarks(e){return e.map(i=>this.format(i))}}const _h=".";function Tt(t,e){if(!Pi(t))return"n/a";if(!fn(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class nl extends If{constructor(e,i){if(super(),i||(i=1),Pi(e)&&fn(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=i,this.Pn()}format(e){const i=e<0?"":"";return e=Math.abs(e),i+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const i=this.Ki/this.kn;let s=Math.floor(e),n="";const r=this.Rn!==void 0?this.Rn:NaN;if(i>1){let o=+(Math.round(e*i)-s*i).toFixed(this.Rn);o>=i&&(o-=i,s+=1),n=_h+Tt(+o.toFixed(this.Rn)*this.kn,r)}else s=Math.round(s*i)/i,r>0&&(n=_h+Tt(0,r));return s.toFixed(0)+n}}class Af extends nl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class tv extends If{constructor(e){super(),this.Dn=e}format(e){let i="";return e<0&&(i="-",e=-e),e<995?i+this.In(e):e<999995?i+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),i+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),i+this.In(e/1e9)+"B")}In(e){let i;const s=Math.pow(10,this.Dn);return i=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),i.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}const iv=/[2-9]/g;class gn{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,i,s){return this.Nn(e,i,s).width}Di(e,i,s){const n=this.Nn(e,i,s);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}Nn(e,i,s){const n=s||iv,r=String(i).replace(n,"0");if(this.Ln.has(r))return Qe(this.Ln.get(r)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&i.length||(this.Ln.set(r,{Fn:o,Wn:this.Bn}),this.An[this.Bn]=r,this.Vn++,this.Bn++),o}}class sv{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,i,s){this.Hn=e,this.M=i,this.Un=s}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class Ff{constructor(e,i,s){this.jn=e,this.$n=new gn(50),this.Yn=i,this.O=s,this.F=-1,this.Xt=new sv(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const i=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(i===null)return null;const s=e.Xn(i);if(s==="overlay")return null;const n=this.O.Jn();return n.k!==this.F&&(this.F=n.k,this.$n.On()),this.Xt.qn(this.jn.ji(),n,s),this.Xt}}class nv extends ci{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,i){var o;if(!((o=this.jt)!=null&&o.It))return null;const{ut:s,ct:n,te:r}=this.jt;return i>=s-n-7&&i<=s+n+7?{ie:this.jt,te:r}:null}et({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null||this.jt.It===!1)return;const r=Math.round(this.jt.ut*n);r<0||r>i.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*s),Ei(e,this.jt.Zt),Tf(e,r,0,i.width))}}class Ga{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new nv,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class rv extends Ga{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),i=e.ae().ae;if(i!==2&&i!==3)return;const s=this.ee.N();if(!s.baseLineVisible||!this.ee.It())return;const n=this.ee.Lt();n!==null&&(this.se.It=!0,this.se.ut=e.Nt(n.Wt,n.Wt),this.se.R=s.baseLineColor,this.se.ct=s.baseLineWidth,this.se.Zt=s.baseLineStyle)}}class lv extends ci{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){const n=this.jt;if(n===null)return;const r=Math.max(1,Math.floor(i)),o=r%2/2,a=Math.round(n.oe.x*i)+o,u=n.oe.y*s;e.fillStyle=n._e,e.beginPath();const h=Math.max(2,1.5*n.ue)*i;e.arc(a,u,h,0,2*Math.PI,!1),e.fill(),e.fillStyle=n.ce,e.beginPath(),e.arc(a,u,n.ft*i,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=n.de,e.beginPath(),e.arc(a,u,n.ft*i+r/2,0,2*Math.PI,!1),e.stroke()}}const ov=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class av{constructor(e){this.Xt=new lv,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),i=this.Ce-e;if(i>0)return void(i<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),i=e.Ie(),s=this.ye.Lt();if(i===null||s===null)return;const n=this.ye.Ve(!0);if(n.Be||!i.Ee(n.js))return;const r={x:e.qt(n.js),y:this.ye.Ft().Nt(n.gt,s.Wt)},o=n.R,a=this.ye.N().lineWidth,u=this.Ae(this.Le(),o);this.Xt.ht({_e:o,ue:a,ce:u.ce,de:u.de,ft:u.ft,oe:r})}De(){const e=this.Xt.le();if(e!==null){const i=this.Ae(this.Le(),e._e);e.ce=i.ce,e.de=i.de,e.ft=i.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,i,s,n){const r=s+(n-s)*i;return this.ye.Qt().Xi().Y(e,r)}Ae(e,i){const s=e%2600/2600;let n;for(const h of ov)if(s>=h.fe&&s<=h.pe){n=h;break}Ee(n!==void 0,"Last price animation internal logic error");const r=(s-n.fe)/(n.pe-n.fe);return{ce:this.ze(i,r,n.we,n.ge),de:this.ze(i,r,n.Me,n.be),ft:(o=r,a=n.ve,u=n.me,a+(u-a)*o)};var o,a,u}}class uv extends Ga{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const i=this.ee.N();if(!i.priceLineVisible||!this.ee.It())return;const s=this.ee.Ve(i.priceLineSource===0);s.Be||(e.It=!0,e.ut=s.Ei,e.R=this.ee.Oe(s.R),e.ct=i.priceLineWidth,e.Zt=i.priceLineStyle)}}class hv extends il{constructor(e){super(),this.Jt=e}Yi(e,i,s){e.It=!1,i.It=!1;const n=this.Jt;if(!n.It())return;const r=n.N(),o=r.lastValueVisible,a=n.Ne()!=="",u=r.seriesLastValueMode===0,h=n.Ve(!1);if(h.Be)return;o&&(e.ri=this.Fe(h,o,u),e.It=e.ri.length!==0),(a||u)&&(i.ri=this.We(h,o,a,u),i.It=i.ri.length>0);const c=n.Oe(h.R),d=this.Jt.Qt().Xi().Z(c);s.G=d.G,s.Ei=h.Ei,i.Ht=n.Qt().Ut(h.Ei/n.Ft().$t()),e.Ht=c,e.R=d.X,i.R=d.X}We(e,i,s,n){let r="";const o=this.Jt.Ne();return s&&o.length!==0&&(r+=`${o} `),i&&n&&(r+=this.Jt.Ft().He()?e.Ue:e.$e),r.trim()}Fe(e,i,s){return i?s?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}}function Sh(t,e,i,s){const n=Number.isFinite(e),r=Number.isFinite(i);return n&&r?t(e,i):n||r?n?e:i:s}class Oe{constructor(e,i){this.qe=e,this.je=i}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new Oe(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new Oe(Sh(Math.min,this.Ze(),e.Ze(),-1/0),Sh(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!Pi(e)||this.je-this.qe===0)return;const i=.5*(this.je+this.qe);let s=this.je-i,n=this.qe-i;s*=e,n*=e,this.je=i+s,this.qe=i+n}Qe(e){Pi(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new Oe(e.minValue,e.maxValue)}}class Ir{constructor(e,i){this.sr=e,this.nr=i||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Ir(Oe.ir(e.priceRange),e.margins)}}const cv=[2,4,8,16,32,64,128,256,512],dv="Custom series with conflation reducer must have a priceValueBuilder method";class fv extends Ga{constructor(e,i){super(e),this.hr=i}he(){const e=this.se;e.It=!1;const i=this.hr.N();if(!this.ee.It()||!i.lineVisible)return;const s=this.hr.ar();s!==null&&(e.It=!0,e.ut=s,e.R=i.color,e.ct=i.lineWidth,e.Zt=i.lineStyle,e.te=this.hr.N().id)}}class pv extends il{constructor(e,i){super(),this.ye=e,this.hr=i}Yi(e,i,s){e.It=!1,i.It=!1;const n=this.hr.N(),r=n.axisLabelVisible,o=n.title!=="",a=this.ye;if(!r||!a.It())return;const u=this.hr.ar();if(u===null)return;o&&(i.ri=n.title,i.It=!0),i.Ht=a.Qt().Ut(u/a.Ft().$t()),e.ri=this.lr(n.price),e.It=!0;const h=this.ye.Qt().Xi().Z(n.axisLabelColor||n.color);s.G=h.G;const c=n.axisLabelTextColor||h.X;e.R=c,i.R=c,s.Ei=u}lr(e){const i=this.ye.Lt();return i===null?"":this.ye.Ft().Ji(e,i.Wt)}}class mv{constructor(e,i){this.ye=e,this.Ps=i,this._r=new fv(e,this),this.jn=new pv(e,this),this.ur=new Ff(this.jn,e,e.Qt())}cr(e){qe(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,i=e.Ft();if(e.Qt().Et().Gi()||i.Gi())return null;const s=e.Lt();return s===null?null:i.Nt(this.Ps.price,s.Wt)}}class gv{constructor(){this.wr=new WeakMap}gr(e,i,s){const n=1/i*s;if(e>=n)return 1;const r=n/e,o=Math.pow(2,Math.floor(Math.log2(r)));return Math.min(o,512)}Mr(e,i,s,n=!1,r){if(e.length===0||i<=1)return e;const o=this.br(i);if(o<=1)return e;const a=this.Sr(e);let u=a.Cr.get(o);return u!==void 0||(u=this.yr(e,o,s,n,r,a.Cr),a.Cr.set(o,u)),u}kr(e,i,s,n,r=!1,o){if(s<1||e.length===0)return e;const a=this.Sr(e),u=a.Cr.get(s);if(!u)return this.Mr(e,s,n,r,o);const h=this.Pr(e,i,s,u,r,n,o);return a.Cr.set(s,h),h}br(e){if(e<=2)return 2;for(const i of cv)if(e<=i)return i;return 512}Tr(e){if(e.length===0)return 0;const i=e[0],s=e[e.length-1];return 31*e.length+17*i.js+13*s.js}yr(e,i,s,n=!1,r,o=new Map){if(i===2)return this.Rr(e,2,s,n,r);const a=i/2;let u=o.get(a);return u||(u=this.yr(e,a,s,n,r,o),o.set(a,u)),this.Dr(u,s,n,r)}Rr(e,i,s,n=!1,r){const o=this.Ir(e,i,s,n,r);return this.Vr(o,n)}Dr(e,i,s=!1,n){const r=this.Ir(e,2,i,s,n);return this.Vr(r,s)}Ir(e,i,s,n=!1,r){const o=[];for(let a=0;a<e.length;a+=i)if(e.length-a>=i){const u=this.Br(e[a],e[a+1],s,n,r);u.Er=!1,o.push(u)}else if(o.length===0)o.push(this.Ar(e[a],!0));else{const u=o[o.length-1];o[o.length-1]=this.Lr(u,e[a],s,n,r)}return o}zr(e,i){return(e??1)+(i??1)}Br(e,i,s,n=!1,r){if(!n||!s||!r){const h=e.Wt[1]>i.Wt[1]?e.Wt[1]:i.Wt[1],c=e.Wt[2]<i.Wt[2]?e.Wt[2]:i.Wt[2];return{Or:e.js,Nr:i.js,Fr:e.wt,Wr:i.wt,Hr:e.Wt[0],Ur:h,$r:c,qr:i.Wt[3],jr:this.zr(e.jr,i.jr),Yr:void 0,Er:!1}}const o=s(this.Kr(e,r),this.Kr(i,r)),a=r(o),u=a.length?a[a.length-1]:0;return{Or:e.js,Nr:i.js,Fr:e.wt,Wr:i.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],u),$r:Math.min(e.Wt[2],u),qr:u,jr:this.zr(e.jr,i.jr),Yr:o,Er:!1}}Lr(e,i,s,n=!1,r){if(!n||!s||!r)return{Or:e.Or,Nr:i.js,Fr:e.Fr,Wr:i.wt,Hr:e.Hr,Ur:e.Ur>i.Wt[1]?e.Ur:i.Wt[1],$r:e.$r<i.Wt[2]?e.$r:i.Wt[2],qr:i.Wt[3],jr:e.jr+(i.jr??1),Yr:e.Yr,Er:!1};const o=e.Yr,a=this.Kr(i,r),u=o?{data:o,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:r(o)}:null,h=u?s(u,a):a.data,c=u?r(h):a.priceValues,d=c.length?c[c.length-1]:0;return{Or:e.Or,Nr:i.js,Fr:e.Fr,Wr:i.wt,Hr:e.Hr,Ur:Math.max(e.Ur,d),$r:Math.min(e.$r,d),qr:d,jr:e.jr+(i.jr??1),Yr:h,Er:!1}}Zr(e,i,s,n,r,o,a=!1,u){const h=i===n?r:e[i];if(s-i==1)return this.Ar(h,!0);const c=i+1===n?r:e[i+1];let d=this.Br(h,c,o,a,u);for(let f=i+2;f<s;f++){const m=f===n?r:e[f];d=this.Lr(d,m,o,a,u)}return d}Kr(e,i){const s=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:i(s)}}Xr(e,i=!1){const s=i===!0,n=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[s?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:s?n?e.Yr:{wt:e.Fr}:void 0}}Vr(e,i=!1){return e.map(s=>this.Xr(s,i))}Pr(e,i,s,n,r=!1,o,a){if(n.length===0)return n;const u=e.length-1,h=Math.floor(u/s)*s;if(Math.min(h+s,e.length)-h<s&&e.length>s){const c=e.slice();return c[c.length-1]=i,this.Mr(c,s,o,r,a)}if(Math.floor((u-1)/s)===Math.floor(u/s)||n.length===1){const c=Math.min(h+s,e.length),d=c-h;if(d<=0)return n;const f=d===1?this.Ar(h===u?i:e[h],!0):this.Zr(e,h,c,u,i,o,r,a);return n[n.length-1]=this.Xr(f,r),n}{const c=e.slice();return c[c.length-1]=i,this.Mr(c,s,o,r,a)}}Ar(e,i=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:i}}Sr(e){const i=this.Jr(e),s=this.Tr(e);return i.Qr!==s&&(i.Cr.clear(),i.Qr=s),i}Jr(e){let i=this.wr.get(e);return i===void 0&&(i={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,i)),i}}class vv extends Bf{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const yv={Bar:(t,e,i,s)=>{const n=e.upColor,r=e.downColor,o=N(t(i,s)),a=Xt(o.Wt[0])<=Xt(o.Wt[3]);return{th:o.R??(a?n:r)}},Candlestick:(t,e,i,s)=>{const n=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,u=e.wickUpColor,h=e.wickDownColor,c=N(t(i,s)),d=Xt(c.Wt[0])<=Xt(c.Wt[3]);return{th:c.R??(d?n:r),ih:c.Ht??(d?o:a),sh:c.nh??(d?u:h)}},Custom:(t,e,i,s)=>({th:N(t(i,s)).R??e.color}),Area:(t,e,i,s)=>{const n=N(t(i,s));return{th:n.vt??e.lineColor,vt:n.vt??e.lineColor,eh:n.eh??e.topColor,rh:n.rh??e.bottomColor}},Baseline:(t,e,i,s)=>{const n=N(t(i,s));return{th:n.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:n.hh??e.topLineColor,ah:n.ah??e.bottomLineColor,oh:n.oh??e.topFillColor1,_h:n._h??e.topFillColor2,uh:n.uh??e.bottomFillColor1,dh:n.dh??e.bottomFillColor2}},Line:(t,e,i,s)=>{const n=N(t(i,s));return{th:n.R??e.color,vt:n.R??e.color}},Histogram:(t,e,i,s)=>({th:N(t(i,s)).R??e.color})};class xv{constructor(e){this.fh=(i,s)=>s!==void 0?s.Wt:this.ye.qs().ph(i),this.ye=e,this.mh=yv[e.wh()]}gh(e,i){return this.mh(this.fh,this.ye.N(),e,i)}}function Of(t,e,i,s,n=0,r=e.length){let o=r-n;for(;0<o;){const a=o>>1,u=n+a;s(e[u],i)===t?(n=u+1,o-=a+1):o=a}return n}const fs=Of.bind(null,!0),Df=Of.bind(null,!1);var jh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(jh||(jh={}));const Vt=30;class wv{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,i=0){const s=this.Th(e,i);return s===null?null:{...this.Rh(s),js:this.Ph(s)}}Dh(){return this.Mh}Ih(e,i,s){if(this.Gi())return null;let n=null;for(const r of s)n=Un(n,this.Vh(e,i,r));return n}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map(i=>i.js)}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,i){const s=this.Eh(e);if(s===null&&i!==0)switch(i){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return s}Ah(e){let i=this.zh(e);return i>0&&(i-=1),i!==this.Mh.length&&this.Ph(i)<e?i:null}Lh(e){const i=this.Oh(e);return i!==this.Mh.length&&e<this.Ph(i)?i:null}Eh(e){const i=this.zh(e);return i===this.Mh.length||e<this.Mh[i].js?null:i}zh(e){return fs(this.Mh,e,(i,s)=>i.js<s)}Oh(e){return Df(this.Mh,e,(i,s)=>i.js>s)}Nh(e,i,s){let n=null;for(let r=e;r<i;r++){const o=this.Mh[r].Wt[s];Number.isNaN(o)||(n===null?n={Fh:o,Wh:o}:(o<n.Fh&&(n.Fh=o),o>n.Wh&&(n.Wh=o)))}return n}Vh(e,i,s){if(this.Gi())return null;let n=null;const r=N(this.kh()),o=N(this.sn()),a=Math.max(e,r),u=Math.min(i,o),h=Math.ceil(a/Vt)*Vt,c=Math.max(h,Math.floor(u/Vt)*Vt);{const f=this.zh(a),m=this.Oh(Math.min(u,h,i));n=Un(n,this.Nh(f,m,s))}let d=this.bh.get(s);d===void 0&&(d=new Map,this.bh.set(s,d));for(let f=Math.max(h+1,a);f<c;f+=Vt){const m=Math.floor(f/Vt);let y=d.get(m);if(y===void 0){const x=this.zh(m*Vt),P=this.Oh((m+1)*Vt-1);y=this.Nh(x,P,s),d.set(m,y)}n=Un(n,y)}{const f=this.zh(c),m=this.Oh(u);n=Un(n,this.Nh(f,m,s))}return n}}function Un(t,e){return t===null?e:e===null?t:{Fh:Math.min(t.Fh,e.Fh),Wh:Math.max(t.Wh,e.Wh)}}function Al(){return new wv}const Ar={setLineStyle:Ei};class _v{constructor(e){this.Hh=e}nt(e,i,s){this.Hh.draw(e,Ar)}Uh(e,i,s){var n,r;(r=(n=this.Hh).drawBackground)==null||r.call(n,e,Ar)}}class Sv{constructor(e){this.Ln=null,this.$h=e}Tt(){var s;const e=this.$h.renderer();if(e===null)return null;if(((s=this.Ln)==null?void 0:s.qh)===e)return this.Ln.jh;const i=new _v(e);return this.Ln={qh:e,jh:i},i}Yh(){var e,i;return((i=(e=this.$h).zOrder)==null?void 0:i.call(e))??"normal"}}class $f{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){var e,i;(i=(e=this.Zh).updateAllViews)==null||i.call(e)}Ys(){var s,n,r;const e=((n=(s=this.Zh).paneViews)==null?void 0:n.call(s))??[];if(((r=this.Kh)==null?void 0:r.qh)===e)return this.Kh.jh;const i=e.map(o=>new Sv(o));return this.Kh={qh:e,jh:i},i}Qn(e,i){var s,n;return((n=(s=this.Zh).hitTest)==null?void 0:n.call(s,e,i))??null}}let jv=class extends $f{ds(){return[]}};class bv{constructor(e){this.Hh=e}nt(e,i,s){this.Hh.draw(e,Ar)}Uh(e,i,s){var n,r;(r=(n=this.Hh).drawBackground)==null||r.call(n,e,Ar)}}class bh{constructor(e){this.Ln=null,this.$h=e}Tt(){var s;const e=this.$h.renderer();if(e===null)return null;if(((s=this.Ln)==null?void 0:s.qh)===e)return this.Ln.jh;const i=new bv(e);return this.Ln={qh:e,jh:i},i}Yh(){var e,i;return((i=(e=this.$h).zOrder)==null?void 0:i.call(e))??"normal"}}function Wf(t){var e,i,s;return{ri:t.text(),Ei:t.coordinate(),Vi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),G:t.backColor(),It:((i=t.visible)==null?void 0:i.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class kv{constructor(e,i){this.Xt=new Lf,this.Xh=e,this.Jh=i}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...Wf(this.Xh)}),this.Xt}}class Mv extends il{constructor(e,i){super(),this.Xh=e,this.Ki=i}Yi(e,i,s){const n=Wf(this.Xh);s.G=n.G,e.R=n.R;const r=2/12*this.Ki.k();s.Ti=r,s.Ri=r,s.Ei=n.Ei,s.Vi=n.Vi,e.ri=n.ri,e.It=n.It,e.pi=n.pi}}class Cv extends $f{constructor(e,i){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=i}fs(){var n,r,o;const e=((r=(n=this.Zh).timeAxisViews)==null?void 0:r.call(n))??[];if(((o=this.Qh)==null?void 0:o.qh)===e)return this.Qh.jh;const i=this.ye.Qt().Et(),s=e.map(a=>new kv(a,i));return this.Qh={qh:e,jh:s},s}Ks(){var n,r,o;const e=((r=(n=this.Zh).priceAxisViews)==null?void 0:r.call(n))??[];if(((o=this.ta)==null?void 0:o.qh)===e)return this.ta.jh;const i=this.ye.Ft(),s=e.map(a=>new Mv(a,i));return this.ta={qh:e,jh:s},s}na(){var s,n,r;const e=((n=(s=this.Zh).priceAxisPaneViews)==null?void 0:n.call(s))??[];if(((r=this.ia)==null?void 0:r.qh)===e)return this.ia.jh;const i=e.map(o=>new bh(o));return this.ia={qh:e,jh:i},i}ea(){var s,n,r;const e=((n=(s=this.Zh).timeAxisPaneViews)==null?void 0:n.call(s))??[];if(((r=this.sa)==null?void 0:r.qh)===e)return this.sa.jh;const i=e.map(o=>new bh(o));return this.sa={qh:e,jh:i},i}ra(e,i){var s,n;return((n=(s=this.Zh).autoscaleInfo)==null?void 0:n.call(s,e,i))??null}}function Fl(t,e,i,s){t.forEach(n=>{e(n).forEach(r=>{r.Yh()===i&&s.push(r)})})}function Ol(t){return t.Ys()}function Ev(t){return t.na()}function Pv(t){return t.ea()}const Nv=["Area","Line","Baseline"];class rl extends vv{constructor(e,i,s,n,r){super(e),this.jt=Al(),this._r=new uv(this),this.ha=[],this.aa=new rv(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new gv,this.da=new Map,this.fa=null,this.Ps=s,this.pa=i;const o=new hv(this);if(this.gs=[o],this.ur=new Ff(o,this,e),Nv.includes(this.pa)&&(this.la=new av(this)),this.va(),this.$h=n(this,this.Qt(),r),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const i={Be:!0},s=this.Ft();if(this.Qt().Et().Gi()||s.Gi()||this.jt.Gi())return i;const n=this.Qt().Et().Ie(),r=this.Lt();if(n===null||r===null)return i;let o,a;if(e){const d=this.jt.Ch();if(d===null)return i;o=d,a=d.js}else{const d=this.jt.$s(n.bi(),-1);if(d===null||(o=this.jt.ph(d.js),o===null))return i;a=d.js}const u=o.Wt[3],h=this.ga().gh(a,{Wt:o}),c=s.Nt(u,r.Wt);return{Be:!1,gt:u,ri:s.Ji(u,r.Wt),Ue:s.Ma(u),$e:s.ba(u,r.Wt),R:h.th,Ei:c,js:a}}ga(){return this.oa!==null||(this.oa=new xv(this)),this.oa}N(){return this.Ps}cr(e){const i=this.Qt(),{priceScaleId:s,visible:n,priceFormat:r}=e;s!==void 0&&s!==this.Ps.priceScaleId&&i.Sa(this,s),n!==void 0&&n!==this.Ps.visible&&i.xa();const o=e.conflationThresholdFactor!==void 0;qe(this.Ps,e),o&&(this.da.clear(),this.Qt().dr()),r!==void 0&&(this.va(),i.Ca()),i.ya(this),i.ka(),this.$h.kt("options")}ht(e,i){this.jt.ht(e),this.da.clear();const s=this.Qt().Et().N();s.enableConflation&&s.precomputeConflationOnInit&&this.Pa(s.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(i&&i.Ta?this.la.Pe():e.length===0&&this.la.ke());const n=this.Qt().Kn(this);this.Qt().Ra(n),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const i=new mv(this,e);return this.ha.push(i),this.Qt().ya(this),i}Ia(e){const i=this.ha.indexOf(e);i!==-1&&this.ha.splice(i,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const i=e.Aa();return this.jt.$s(i,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const i=this.za();if(!this.da.has(i))return;const s=this.pa==="Custom",n=s&&this.fa||void 0,r=s&&this.$h.Oa?u=>{const h=u,c=this.$h.Oa(h);return Array.isArray(c)?c:[typeof c=="number"?c:0]}:void 0,o=this.ca.kr(this.jt.Dh(),e,i,n,s,r),a=Al();a.ht(o),this.da.set(i,a)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const i=this.za(),s=this.da.get(i);return s||(this.Fa(i),this.da.get(i)??this.jt)}Wa(e){const i=this.jt.ph(e);return i===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:i.Wt[0],Ur:i.Wt[1],$r:i.Wt[2],qr:i.Wt[3]}:i.Wt[3]}Ha(e){const i=[];Fl(this.ua,Ol,"top",i);const s=this.la;return s!==null&&s.It()&&(this._a===null&&s.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),s.Te(),i.unshift(s)),i}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const i=this.ha.map(s=>s.pr());return e.push(...i),Fl(this.ua,Ol,"normal",e),e}qa(){return this.ja(Ol,"bottom")}Ya(e){return this.ja(Ev,e)}Ka(e){return this.ja(Pv,e)}Za(e,i){return this.ua.map(s=>s.Qn(e,i)).filter(s=>s!==null)}ds(){return[this.ur,...this.ha.map(e=>e.vr())]}Ks(e,i){if(i!==this.hs&&!this.$a())return[];const s=[...this.gs];for(const n of this.ha)s.push(n.mr());return this.ua.forEach(n=>{s.push(...n.Ks())}),s}fs(){const e=[];return this.ua.forEach(i=>{e.push(...i.fs())}),e}ra(e,i){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const n=this.Ga(e,i);return n===null?null:n.tr()});return Ir.ir(s)}return this.Ga(e,i)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){var e;this.$h.kt();for(const i of this.gs)i.kt();for(const i of this.ha)i.kt();this._r.kt(),this.aa.kt(),(e=this.la)==null||e.kt(),this.ua.forEach(i=>i.Ws())}Ft(){return N(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const i=this.jt.ph(e);return i===null?null:{gt:i.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new Cv(e,this))}el(e){this.ua=this.ua.filter(i=>i.Gh()!==e)}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!sl(this.Ft().ol())}Ga(e,i){if(!fn(e)||!fn(i)||this.jt.Gi())return null;const s=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],n=this.jt.Ih(e,i,s);let r=n!==null?new Oe(n.Fh,n.Wh):null,o=null;if(this.wh()==="Histogram"){const a=this.Ps.base,u=new Oe(a,a);r=r!==null?r.Sn(u):u}return this.ua.forEach(a=>{const u=a.ra(e,i);if(u!=null&&u.priceRange){const h=new Oe(u.priceRange.minValue,u.priceRange.maxValue);r=r!==null?r.Sn(h):h}u!=null&&u.margins&&(o=u.margins)}),new Ir(r,o)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const i=this.Ps.crosshairMarkerBackgroundColor;if(i.length!==0)return i}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(i=>i.map(e))};break}case"volume":this.Ja=new tv(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new Af(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new nl(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,i){const s=[];return Fl(this.ua,e,i,s),s}za(){const{ul:e,cl:i,dl:s}=this.fl();return this.ca.gr(e,i,s)}fl(){const e=this.Qt().Et(),i=e.ul(),s=window.devicePixelRatio||1,n=e.N().conflationThresholdFactor;return{ul:i,cl:s,dl:this.Ps.conflationThresholdFactor??n??1}}pl(e){const i=this.jt.Dh();let s;if(this.pa==="Custom"&&this.fa!==null){const r=this.rl();if(!r)throw new Error(dv);s=this.ca.Mr(i,e,this.fa,!0,o=>r(o))}else s=this.ca.Mr(i,e);const n=Al();return n.ht(s),n}Fa(e){const i=this.pl(e);this.da.set(e,i)}Pa(e){var s;if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const i=this.Qt().Et().vl();for(const n of i){const r=()=>{this.ml(n)},o=typeof window=="object"&&window||typeof self=="object"&&self;(s=o==null?void 0:o.gl)!=null&&s.wl?o.gl.wl(()=>{r()},{Ml:e}):Promise.resolve().then(()=>r())}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const i=this.pl(e);this.da.set(e,i)}}const Tv=[3],zv=[0,1,2,3];class Rv{constructor(e){this.Ps=e}bl(e,i,s){let n=e;if(this.Ps.mode===0)return n;const r=s.Rs(),o=r.Lt();if(o===null)return n;const a=r.Nt(e,o),u=s.Sl().filter(c=>c instanceof rl).reduce((c,d)=>{if(s.Zn(d)||!d.It())return c;const f=d.Ft(),m=d.qs();if(f.Gi()||!m.Ee(i))return c;const y=m.ph(i);if(y===null)return c;const x=Xt(d.Lt()),P=this.Ps.mode===3?zv:Tv;return c.concat(P.map(g=>f.Nt(y.Wt[g],x.Wt)))},[]);if(u.length===0)return n;u.sort((c,d)=>Math.abs(c-a)-Math.abs(d-a));const h=u[0];return n=r.Ds(h,o),n}}function Hs(t,e,i){return Math.min(Math.max(t,e),i)}function Hn(t,e,i){return e-t<=i}function Xa(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Lv extends ci{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.jt===null)return;const r=Math.max(1,Math.floor(s));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=N(this.jt);if(o.xl){e.strokeStyle=o.Cl,Ei(e,o.yl),e.beginPath();for(const a of o.kl){const u=Math.round(a.Pl*s);e.moveTo(u,-r),e.lineTo(u,i.height+r)}e.stroke()}if(o.Tl){e.strokeStyle=o.Rl,Ei(e,o.Dl),e.beginPath();for(const a of o.Il){const u=Math.round(a.Pl*n);e.moveTo(-r,u),e.lineTo(i.width+r,u)}e.stroke()}})}}class Bv{constructor(e){this.Xt=new Lv,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,i={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(s=>({Pl:s.coord}))};this.Xt.ht(i),this.xt=!1}return this.Xt}}class Iv{constructor(e){this.$h=new Bv(e)}pr(){return this.$h}}const Dl={Bl:4,El:1e-4};function Gi(t,e){const i=100*(t-e)/e;return e<0?-i:i}function Av(t,e){const i=Gi(t.Ze(),e),s=Gi(t.Ge(),e);return new Oe(i,s)}function Ks(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function Fv(t,e){const i=Ks(t.Ze(),e),s=Ks(t.Ge(),e);return new Oe(i,s)}function Fr(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.log10(i+e.El)+e.Bl;return t<0?-s:s}function Ys(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.pow(10,i-e.Bl)-e.El;return t<0?-s:s}function Ns(t,e){if(t===null)return null;const i=Fr(t.Ze(),e),s=Fr(t.Ge(),e);return new Oe(i,s)}function Xi(t,e){if(t===null)return null;const i=Ys(t.Ze(),e),s=Ys(t.Ge(),e);return new Oe(i,s)}function $l(t){if(t===null)return Dl;const e=Math.abs(t.Ge()-t.Ze());if(e>=1||e<1e-15)return Dl;const i=Math.ceil(Math.abs(Math.log10(e))),s=Dl.Bl+i;return{Bl:s,El:1/Math.pow(10,s)}}class Wl{constructor(e,i){if(this.Al=e,this.Ll=i,function(s){if(s<0)return!1;if(s>1e18)return!0;for(let n=s;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let s=this.Al;s!==1;){if(s%2==0)this.zl.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),s/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,i,s){const n=this.Al===0?0:1/this.Al;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-i)))),o=0,a=this.Ll[0];for(;;){const d=Hn(r,n,1e-14)&&r>n+1e-14,f=Hn(r,s*a,1e-14),m=Hn(r,1,1e-14);if(!(d&&f&&m))break;r/=a,a=this.Ll[++o%this.Ll.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.zl.length>0&&(u=r,h=1,c=1e-14,Math.abs(u-h)<c))for(o=0,a=this.zl[0];Hn(r,s*a,1e-14)&&r>n+1e-14;)r/=a,a=this.zl[++o%this.zl.length];var u,h,c;return r}}class kh{constructor(e,i,s,n){this.Nl=[],this.Ki=e,this.Al=i,this.Fl=s,this.Wl=n}Ol(e,i){if(e<i)throw new Error("high < low");const s=this.Ki.$t(),n=(e-i)*this.Hl()/s,r=new Wl(this.Al,[2,2.5,2]),o=new Wl(this.Al,[2,2,2.5]),a=new Wl(this.Al,[2.5,2,2]),u=[];return u.push(r.Ol(e,i,n),o.Ol(e,i,n),a.Ol(e,i,n)),function(h){if(h.length<1)throw Error("array is empty");let c=h[0];for(let d=1;d<h.length;++d)h[d]<c&&(c=h[d]);return c}(u)}Ul(){const e=this.Ki,i=e.Lt();if(i===null)return void(this.Nl=[]);const s=e.$t(),n=this.Fl(s-1,i),r=this.Fl(0,i),o=this.Ki.N().entireTextOnly?this.$l()/2:0,a=o,u=s-1-o,h=Math.max(n,r),c=Math.min(n,r);if(h===c)return void(this.Nl=[]);const d=this.Ol(h,c);if(this.ql(i,d,h,c,a,u),e.jl()&&this.Yl(d,c,h)){const y=this.Ki.Kl();this.Zl(i,d,a,u,y,2*y)}const f=this.Nl.map(y=>y.Gl),m=this.Ki.Xl(f);for(let y=0;y<this.Nl.length;y++)this.Nl[y].Jl=m[y]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,i,s,n,r,o){const a=this.Nl,u=this.Ki;let h=s%i;h+=h<0?i:0;const c=s>=n?1:-1;let d=null,f=0;for(let m=s-h;m>n;m-=i){const y=this.Wl(m,e,!0);d!==null&&Math.abs(y-d)<this.Hl()||y<r||y>o||(f<a.length?(a[f].Pl=y,a[f].Jl=u.Ql(m),a[f].Gl=m):a.push({Pl:y,Jl:u.Ql(m),Gl:m}),f++,d=y,u.io()&&(i=this.Ol(m*c,n)))}a.length=f}Zl(e,i,s,n,r,o){const a=this.Nl,u=this.so(e,s,r,o),h=this.so(e,n,-o,-r),c=this.Wl(0,e,!0)-this.Wl(i,e,!0);a.length>0&&a[0].Pl-u.Pl<c/2&&a.shift(),a.length>0&&h.Pl-a[a.length-1].Pl<c/2&&a.pop(),a.unshift(u),a.push(h)}so(e,i,s,n){const r=(s+n)/2,o=this.Fl(i+s,e),a=this.Fl(i+n,e),u=Math.min(o,a),h=Math.max(o,a),c=Math.max(.1,this.Ol(h,u)),d=this.Fl(i+r,e),f=d-d%c,m=this.Wl(f,e,!0);return{Jl:this.Ki.Ql(f),Pl:m,Gl:f}}Yl(e,i,s){let n=Xt(this.Ki.er());return this.Ki.io()&&(n=Xi(n,this.Ki.no())),n.Ze()-i<e&&s-n.Ge()<e}}function Vf(t){return t.slice().sort((e,i)=>N(e._s())-N(i._s()))}var Mh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(Mh||(Mh={}));const Ch=new Af,Eh=new nl(100,1);class Ov{constructor(e,i,s,n,r){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new ge,this.fo=new ge,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=Eh,this.So=$l(null),this.xo=e,this.Ps=i,this.Co=s,this.yo=n,this.ko=r,this.Po=new kh(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(qe(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const i=Qe(e.scaleMargins.top),s=Qe(e.scaleMargins.bottom);if(i<0||i>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${i}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(i+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${i+s}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const i=this.ae();let s=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),i.ae===1&&e.ae!==i.ae&&(function(r,o){if(r===null)return!1;const a=Ys(r.Ze(),o),u=Ys(r.Ge(),o);return isFinite(a)&&isFinite(u)}(this.sr,this.So)?(s=Xi(this.sr,this.So),s!==null&&this.Lo(s)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==i.ae&&(s=Ns(this.sr,this.So),s!==null&&this.Lo(s));const n=i.ae!==this.Ps.mode;n&&(i.ae===2||this.He())&&this._l(),n&&(i.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&i.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(i,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,i){const s=this.sr;(i||s===null&&e!==null||s!==null&&!s.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,i){return this.He()?e=Gi(e,i):this.Eo()&&(e=Ks(e,i)),this.Ro(e,i)}Yo(e,i,s){this.Uo();const n=this.Ho(),r=N(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,m=this.Ko();for(let y=d;y<f;y++){const x=e[y],P=x.gt;if(isNaN(P))continue;let g=P;m!==null&&(g=m(x.gt,i));const p=n+c*(g-o),v=h?p:this.eo-1-p;x.ut=v}}Zo(e,i,s){this.Uo();const n=this.Ho(),r=N(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,m=this.Ko();for(let y=d;y<f;y++){const x=e[y];let P=x.Hr,g=x.Ur,p=x.$r,v=x.qr;m!==null&&(P=m(x.Hr,i),g=m(x.Ur,i),p=m(x.$r,i),v=m(x.qr,i));let _=n+c*(P-o),M=h?_:this.eo-1-_;x.Go=M,_=n+c*(g-o),M=h?_:this.eo-1-_,x.Xo=M,_=n+c*(p-o),M=h?_:this.eo-1-_,x.Jo=M,_=n+c*(v-o),M=h?_:this.eo-1-_,x.Qo=M}}Ds(e,i){const s=this.To(e,i);return this.t_(s,i)}t_(e,i){let s=e;return this.He()?s=function(n,r){return r<0&&(n=-n),n/100*r+r}(s,i):this.Eo()&&(s=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(s,i)),s}Sl(){return this.po}Dt(){return this.mo||(this.mo=Vf(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const i=this.po.indexOf(e);if(i===-1)throw new Error("source is not attached to scale");this.po.splice(i,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const i of this.po){const s=i.Lt();s!==null&&(e===null||s.Ea<e.Ea)&&(e=s)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const i=this.Po.Vl();return this.wo={Vl:i,e_:e},this.do.p(),i}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=N(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let i=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const s=N(this.ho).Ke();i=Math.max(i,.1),s.Je(i),this.Lo(s)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=N(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const i=N(this.er()).Xe()/(this.Fo()-1);let s=e-this.bo;this.Ao()&&(s*=-1);const n=s*i,r=N(this.ho).Ke();r.Qe(n),this.Lo(r,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,i){switch(this.Ps.mode){case 2:return this.c_(Gi(e,i));case 3:return this.Xa().format(Ks(e,i));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,N(this.vo).Xa())}ba(e,i){return e=Gi(e,i),this.c_(e,Ch)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach(e=>e.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const s of this.po)s._s()<e&&(e=s._s(),this.vo=s);let i=100;this.vo!==null&&(i=Math.round(this.vo.qh())),this.Ja=Eh,this.He()?(this.Ja=Ch,i=100):this.Eo()?(this.Ja=new nl(100,1),i=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new kh(this,i,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,i){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?Fr(e,this.So):e;const s=N(this.er()),n=this.Ho()+(this.Fo()-1)*(e-s.Ze())/s.Xe();return this.jo(n)}To(e,i){if(this.Uo(),this.Gi())return 0;const s=this.jo(e),n=N(this.er()),r=n.Ze()+n.Xe()*((s-this.Ho())/(this.Fo()-1));return this.io()?Ys(r,this.So):r}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let i=null;const s=this.p_();let n=0,r=0;for(const u of s){if(!u.It())continue;const h=u.Lt();if(h===null)continue;const c=u.ra(e.Aa(),e.bi());let d=c&&c.er();if(d!==null){switch(this.Ps.mode){case 1:d=Ns(d,this.So);break;case 2:d=Av(d,h.Wt);break;case 3:d=Fv(d,h.Wt)}if(i=i===null?d:i.Sn(N(d)),c!==null){const f=c.rr();f!==null&&(n=Math.max(n,f.above),r=Math.max(r,f.below))}}}if(this.jl()&&(n=Math.max(n,this.Kl()),r=Math.max(r,this.Kl())),n===this.uo&&r===this.co||(this.uo=n,this.co=r,this.wo=null,this.Io()),i!==null){if(i.Ze()===i.Ge()){const u=5*this.m_();this.io()&&(i=Xi(i,this.So)),i=new Oe(i.Ze()-u,i.Ge()+u),this.io()&&(i=Ns(i,this.So))}if(this.io()){const u=Xi(i,this.So),h=$l(u);if(o=h,a=this.So,o.Bl!==a.Bl||o.El!==a.El){const c=this.ho!==null?Xi(this.ho,this.So):null;this.So=h,i=Ns(u,h),c!==null&&(this.ho=Ns(c,h))}}this.Lo(i)}else this.sr===null&&(this.Lo(new Oe(-.5,.5)),this.So=$l(null));var o,a}Ko(){return this.He()?Gi:this.Eo()?Ks:this.io()?e=>Fr(e,this.So):null}g_(e,i,s){return i===void 0?(s===void 0&&(s=this.Xa()),s.format(e)):i(e)}M_(e,i,s){return i===void 0?(s===void 0&&(s=this.Xa()),s.formatTickmarks(e)):i(e)}lr(e,i){return this.g_(e,this.yo.priceFormatter,i)}f_(e,i){const s=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(s?n=>n.map(s):void 0),i)}c_(e,i){return this.g_(e,this.yo.percentageFormatter,i)}d_(e,i){const s=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(s?n=>n.map(s):void 0),i)}}function Ph(t){return t instanceof rl}class Nh{constructor(e,i){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new ge,this.ua=[],this.Jh=e,this.ns=i,this.k_=new Iv(this);const s=i.N();this.P_=this.T_("left",s.leftPriceScale),this.R_=this.T_("right",s.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(s)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const i=Array.from(this.b_.values());for(const s of i){const n=N(s[0].Ft());n.cr(e.overlayPriceScales),e.localization&&n._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?Qe(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(e=>{e.m&&e.m()}),this.ua=this.ua.filter(e=>{const i=e.Gh();return i.detached&&i.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach(i=>{if(this.Zn(i)){const s=i.Ft();s!==null&&s.No(e)}}),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(Ph)}Sl(){return this.po}Zn(e){const i=e.Ft();return i===null||this.P_!==i&&this.R_!==i}i_(e,i,s){this.W_(e,i,s?e._s():this.po.length)}n_(e,i){const s=this.po.indexOf(e);Ee(s!==-1,"removeDataSource: invalid data source"),this.po.splice(s,1),i||this.po.forEach((o,a)=>o.us(a));const n=N(e.Ft()).ol();if(this.b_.has(n)){const o=Qe(this.b_.get(n)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.b_.delete(n))}const r=e.Ft();r&&r.Sl().indexOf(e)>=0&&(r.n_(e),this.H_(r)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,i){e.h_(i)}Y_(e,i){e.a_(i),this.z_()}K_(e){e.l_()}Z_(e,i){e.o_(i)}G_(e,i){e.__(i),this.z_()}X_(e){e.u_()}z_(){this.po.forEach(e=>{e.Ws()})}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const i=this.Jh.Ie();e.Do({ln:!0}),i!==null&&e.v_(i),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(e=>{this.Zn(e)&&this.H_(e.Ft())}),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=Vf(this.po)),this.mo}su(e,i){i=Hs(i,0,this.po.length-1);const s=this.po.indexOf(e);Ee(s!==-1,"setSeriesOrder: invalid data source"),this.po.splice(s,1),this.po.splice(i,0,e),this.po.forEach((n,r)=>n.us(r)),this.mo=null;for(const n of[this.P_,this.R_])n.s_(),n._l();this.ns.dr()}Vt(){return this.Dt().filter(Ph)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new jv(e))}el(e){this.ua=this.ua.filter(i=>i.Gh()!==e),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,i){return this.ua.map(s=>s.Qn(e,i)).filter(s=>s!==null)}J_(e){const i=e.p_();if(i&&i.length>0&&!this.Jh.Gi()){const s=this.Jh.Ie();s!==null&&e.v_(s)}e.Ws()}W_(e,i,s){let n=this.V_(i);if(n===null&&(n=this.T_(i,this.ns.N().overlayPriceScales)),this.po.splice(s,0,e),!sl(i)){const r=this.b_.get(i)||[];r.push(e),this.b_.set(i,r)}e.us(s),n.i_(e),e.cs(n),this.H_(n),this.mo=null}D_(e,i,s){i.ae!==s.ae&&this.J_(e)}T_(e,i){const s={visible:!0,autoScale:!0,...Nt(i)},n=new Ov(e,s,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return n.No(this.$t()),n}}function Kn(t){return{hu:t.hu,au:{te:t.lu.externalId},ou:t.lu.cursorStyle}}function Dv(t,e,i,s){for(const n of t){const r=n.Tt(s);if(r!==null&&r.Qn){const o=r.Qn(e,i);if(o!==null)return{_u:n,au:o}}}return null}function $v(t){return t.Ys!==void 0}function Uf(t,e,i){const s=[t,...t.Dt()],n=function(r,o,a){var f;let u,h;for(const m of r){const y=((f=m.Za)==null?void 0:f.call(m,o,a))??[];for(const x of y)c=x.zOrder,d=u==null?void 0:u.zOrder,(!d||c==="top"&&d!=="top"||c==="normal"&&d==="bottom")&&(u=x,h=m)}var c,d;return u&&h?{lu:u,hu:h}:null}(s,e,i);if((n==null?void 0:n.lu.zOrder)==="top")return Kn(n);for(const r of s){if(n&&n.hu===r&&n.lu.zOrder!=="bottom"&&!n.lu.isBackground)return Kn(n);if($v(r)){const o=Dv(r.Ys(t),e,i,t);if(o!==null)return{hu:r,_u:o._u,au:o.au}}if(n&&n.hu===r&&n.lu.zOrder!=="bottom"&&n.lu.isBackground)return Kn(n)}return n!=null&&n.lu?Kn(n):null}class Wv{constructor(e,i,s=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=i,this.zn=s}du(e){const i=e.time,s=this.cu.cacheKey(i),n=this.Ln.get(s);if(n!==void 0)return n.fu;if(this.Vn===this.zn){const o=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(Qe(o)),this.En++,this.Vn--}const r=this.uu(e);return this.Ln.set(s,{fu:r,Wn:this.Bn}),this.An.set(this.Bn,s),this.Vn++,this.Bn++,r}}class ns{constructor(e,i){Ee(e<=i,"right should be >= left"),this.pu=e,this.vu=i}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function Th(t,e){return t===null||e===null?t===e:t.Ye(e)}class Vv{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,i){this.Su(i),this.Ln=null;for(let s=i;s<e.length;++s){const n=e[s];let r=this.wu.get(n.timeWeight);r===void 0&&(r=[],this.wu.set(n.timeWeight,r)),r.push({index:s,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}xu(e,i,s,n,r){const o=Math.ceil(i/e);return this.Ln!==null&&this.Ln.Cu===o&&r===this.Ln.yu&&s===this.Ln.ku||(this.Ln={yu:r,ku:s,Vl:this.Pu(o,s,n),Cu:o}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const i=[];this.wu.forEach((s,n)=>{e<=s[0].index?i.push(n):s.splice(fs(s,e,r=>r.index<e),1/0)});for(const s of i)this.wu.delete(s)}Pu(e,i,s){let n=[];const r=o=>!i||s.has(o.index);for(const o of Array.from(this.wu.keys()).sort((a,u)=>u-a)){if(!this.wu.get(o))continue;const a=n;n=[];const u=a.length;let h=0;const c=Qe(this.wu.get(o)),d=c.length;let f=1/0,m=-1/0;for(let y=0;y<d;y++){const x=c[y],P=x.index;for(;h<u;){const g=a[h],p=g.index;if(!(p<P&&r(g))){f=p;break}h++,n.push(g),m=p,f=1/0}if(f-P>=e&&P-m>=e&&r(x))n.push(x),m=P;else if(this.gu)return a}for(;h<u;h++)r(a[h])&&n.push(a[h])}return n}}class rs{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new ns(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new rs(null)}}function Uv(t,e){return t.weight>e.weight?t:e}class Hv{constructor(e,i,s,n){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new Vv,this.Au=new Map,this.Lu=rs.Iu(),this.zu=!0,this.Ou=new ge,this.Nu=new ge,this.Fu=new ge,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=i,this.yo=s,this.Yu=i.rightOffset,this.Ku=i.barSpacing,this.ns=e,this.Zu(i),this.cu=n,this.Gu(),this.Eu.Mu(i.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){qe(this.yo,e),this.tc(),this.Gu()}cr(e,i){qe(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){var i;return((i=this.Bu[e])==null?void 0:i.time)??null}es(e){return this.Bu[e]??null}ec(e,i){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return i?this.Bu.length-1:null;const s=fs(this.Bu,this.cu.key(e),(n,r)=>this.cu.key(n.time)<r);return this.cu.key(e)<this.cu.key(this.Bu[s].time)?i?s:null:s}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const i={from:e.Aa(),to:e.bi()};return this.oc(i)}oc(e){const i=Math.round(e.from),s=Math.round(e.to),n=N(this._c()),r=N(this.uc());return{from:N(this.es(Math.max(n,i))),to:N(this.es(Math.min(r,s)))}}cc(e){return{from:N(this.ec(e.from,!0)),to:N(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const i=this.ac(),s=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const n=this.Ku*e/s;this.Ku=n}if(this.Ps.fixLeftEdge&&i!==null&&i.Aa()<=0){const n=s-e;this.Yu-=Math.round(n/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!fn(e))return 0;const i=this.vc()+this.Yu-e;return this.S_-(i+.5)*this.Ku-1}mc(e,i){const s=this.vc(),n=i===void 0?0:i.from,r=i===void 0?e.length:i.to;for(let o=n;o<r;o++){const a=e[o].wt,u=s+this.Yu-a,h=this.S_-(u+.5)*this.Ku-1;e[o]._t=h}}wc(e,i){const s=Math.ceil(this.gc(e));return i&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(s)?this.bc(s):s}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const i=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&i!==0){const s=this.Yu*i/this.Ku;this.Yu=s}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,i=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(i/e),n=N(this.Ie()),r=Math.max(n.Aa(),n.Aa()-s),o=Math.max(n.bi(),n.bi()-s),a=this.Eu.xu(e,i,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),u=this._c()+s,h=this.uc()-s,c=this.yc(),d=this.Ps.fixLeftEdge||c,f=this.Ps.fixRightEdge||c;let m=0;for(const y of a){if(!(r<=y.index&&y.index<=o))continue;let x;m<this.qu.length?(x=this.qu[m],x.coord=this.qt(y.index),x.label=this.kc(y),x.weight=y.weight):(x={needAlignCoordinate:!1,coord:this.qt(y.index),label:this.kc(y),weight:y.weight},this.qu.push(x)),this.Ku>i/2&&!c?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&y.index<=u||f&&y.index>=h,m++}return this.qu.length=m,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,i){const s=this.gc(e),n=this.ul(),r=n+i*(n/10);this.gn(r),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(s-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const i=Hs(this.S_-e,0,this.S_),s=Hs(this.S_-N(this.Mo),0,this.S_);i!==0&&s!==0&&this.gn(this.Wu.ul*i/s)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const i=(this.bo-e)/this.ul();this.Yu=N(this.Wu).Cc+i,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,i=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.Yu,n=performance.now();this.ns.vn({Ec:r=>(r-n)/i>=1,Ac:r=>{const o=(r-n)/i;return o>=1?e:s+(e-s)*o}})}kt(e,i){this.zu=!0,this.Bu=e,this.Eu.bu(e,i),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,i){const s=e.mu(),n=i&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-n)/s),this.Yu=e.bi()-this.vc(),i&&(this.Yu=n?n/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),i=this.uc();if(e===null||i===null)return;const s=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new ns(e,i+s),!0)}Wc(e){const i=new ns(e.from,e.to);this.Nc(i)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const i of e)for(const s of i.ll())this.Uu.set(s,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),i=this.Ps.minBarSpacing;if(i>=e)return[1];const s=[1];let n=2;for(;n<=512;)i<e/n&&s.push(n),n*=2;return s}yc(){const e=this.ns.N().handleScroll,i=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||i.axisDoubleClickReset.time||i.axisPressedMouseMove.time||i.mouseWheel||i.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const i=this.Uc(e),s=this.vc()+this.Yu-i;return Math.round(1e6*s)/1e6}xc(e){const i=this.Ku;this.Ku=e,this.dc(),i!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(rs.Iu());const e=this.vc(),i=this.S_/this.Ku,s=this.Yu+e,n=new ns(s-i+1,s);this.qc(new rs(n))}dc(){const e=Hs(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const i=e/this.Ku,s=Math.pow(2,Math.floor(Math.log2(i)));this.ju=Math.min(s,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const i=this.Zc();this.Yu>i&&(this.Yu=i,this.zu=!0)}Kc(){const e=this._c(),i=this.Vu;return e===null||i===null?null:e-i-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let i=this.Au.get(e.weight);return i===void 0&&(i=new Wv(s=>this.Gc(s),this.cu),this.Au.set(e.weight,i)),i.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const i=this.Lu;this.Lu=e,Th(i.Ru(),this.Lu.Ru())||this.Ou.p(),Th(i.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const i=this.Ie();if(i===null)return;const s=i.Aa()-e;if(s<0){const n=this.Yu-s-1;this.Mn(n)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const i=function*(n){const r=Math.round(n),o=r<n;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(e),s=this.uc();for(;s;){const n=i.next().value;if(this.Uu.get(n))return n;if(n<0||n>s)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const i=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(i)}}}var zh,Rh,Lh,Bh,Ih;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(zh||(zh={}));class Kv{constructor(e,i,s){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new ge,this.nd=new ge,this.ed=null,this.rd=e,this.Ps=i,this.cu=s,this.ko=new Wg(this.Ps.layout.colorParsers),this.hd=new $g(this),this.Jh=new Hv(this,i.timeScale,this.Ps.localization,s),this.Ct=new ev(this,i.crosshair),this.ad=new Rv(i.crosshair),i.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ce.yn())}dr(){this.dd(Ce.Cn())}Ua(){this.dd(new Ce(1))}ya(e){const i=this.fd(e);this.dd(i)}pd(){return this.td}vd(e){var s,n,r,o;if(((s=this.td)==null?void 0:s.hu)===(e==null?void 0:e.hu)&&((r=(n=this.td)==null?void 0:n.au)==null?void 0:r.te)===((o=e==null?void 0:e.au)==null?void 0:o.te))return;const i=this.td;this.td=e,i!==null&&this.ya(i.hu),e!==null&&e.hu!==(i==null?void 0:i.hu)&&this.ya(e.hu)}N(){return this.Ps}cr(e){qe(this.Ps,e),this.Xc.forEach(i=>i.I_(e)),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,i,s=0){const n=this.Xc[s];if(n===void 0)return;if(e==="left")return qe(this.Ps,{leftPriceScale:i}),n.I_({leftPriceScale:i}),this.sd.p(),void this.Ca();if(e==="right")return qe(this.Ps,{rightPriceScale:i}),n.I_({rightPriceScale:i}),this.sd.p(),void this.Ca();const r=this.wd(e,s);r!==null&&(r.Ft.cr(i),this.sd.p())}wd(e,i){const s=this.Xc[i];if(s===void 0)return null;const n=s.V_(e);return n!==null?{Gs:s,Ft:n}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,i){e.No(i),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach(i=>i.L_(e)),this.Sc()}Sd(e){this.Xc.length!==1&&(Ee(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,i){if(this.Xc.length<2)return;Ee(e>=0&&e<this.Xc.length,"Invalid pane index");const s=this.Xc[e],n=this.Xc.reduce((d,f)=>d+f.E_(),0),r=this.Xc.reduce((d,f)=>d+f.$t(),0),o=r-30*(this.Xc.length-1);i=Math.min(o,Math.max(30,i));const a=n/r,u=s.$t();s.A_(i*a);let h=i-u,c=this.Xc.length-1;for(const d of this.Xc)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-h/c));h-=d.$t()-f,c-=1;const m=f*a;d.A_(m)}this.Ca()}Cd(e,i){Ee(e>=0&&e<this.Xc.length&&i>=0&&i<this.Xc.length,"Invalid pane index");const s=this.Xc[e],n=this.Xc[i];this.Xc[e]=n,this.Xc[i]=s,this.Ca()}yd(e,i){if(Ee(e>=0&&e<this.Xc.length&&i>=0&&i<this.Xc.length,"Invalid pane index"),e===i)return;const[s]=this.Xc.splice(e,1);this.Xc.splice(i,0,s),this.Ca()}j_(e,i,s){e.j_(i,s)}Y_(e,i,s){e.Y_(i,s),this.ka(),this.dd(this.kd(e,2))}K_(e,i){e.K_(i),this.dd(this.kd(e,2))}Z_(e,i,s){i.Vo()||e.Z_(i,s)}G_(e,i,s){i.Vo()||(e.G_(i,s),this.ka(),this.dd(this.kd(e,2)))}X_(e,i){i.Vo()||(e.X_(i),this.dd(this.kd(e,2)))}Q_(e,i){e.Q_(i),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,i){const s=this.Et();if(s.Gi()||i===0)return;const n=s.ss();e=Math.max(1,Math.min(e,n)),s.Rc(e,i),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter(e=>e.It())),this.Qc}xa(){this.Qc=null}Ad(e,i,s,n,r){this.Ct.Bs(e,i);let o=NaN,a=this.Jh.wc(e,!0);const u=this.Jh.Ie();u!==null&&(a=Math.min(Math.max(u.Aa(),a),u.bi())),a=this.Ct.Hs(a);const h=n.Rs(),c=h.Lt();if(c!==null&&(o=h.Ds(i,c)),o=this.ad.bl(o,a,n),this.Ct.zs(a,o,n),this.Ua(),!r){const d=Uf(n,e,i);this.vd(d&&{hu:d.hu,au:d.au,ou:d.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:i},s)}}Ld(e,i,s){const n=s.Rs(),r=n.Lt(),o=n.Nt(e,N(r)),a=this.Jh.ec(i,!0),u=this.Jh.qt(N(a));this.Ad(u,o,null,s,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const i=this.Ct.As(),s=this.Ct.Ls();this.Ad(i,s,null,e)}this.Ct.Ws()}Od(e,i,s){const n=this.Jh.Is(0);i!==void 0&&s!==void 0&&this.Jh.kt(i,s);const r=this.Jh.Is(0),o=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&n!==null&&r!==null){const u=a.Ee(o),h=this.cu.key(n)>this.cu.key(r),c=e!==null&&e>o&&!h,d=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=u&&(s!==void 0||d)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(c&&!f){const m=e-o;this.Jh.Mn(this.Jh.Cc()-m)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if(function(s){return s instanceof Nh}(e))return e;const i=this.Xc.find(s=>s.Dt().includes(e));return i===void 0?null:i}Sc(){this.Xc.forEach(e=>e.iu()),this.ka()}m(){this.Xc.forEach(e=>e.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,i){const s=this.ld(i);this.Wd(e,s),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const i=this.Kn(e),s=this.Jc.indexOf(e);Ee(s!==-1,"Series not found");const n=N(i);this.Jc.splice(s,1),n.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(n)}Sa(e,i){const s=N(this.Kn(e));s.n_(e,!0),s.i_(e,i,!0)}Fc(){const e=Ce.Cn();e.cn(),this.dd(e)}$d(e){const i=Ce.Cn();i.pn(e),this.dd(i)}wn(){const e=Ce.Cn();e.wn(),this.dd(e)}gn(e){const i=Ce.Cn();i.gn(e),this.dd(i)}Mn(e){const i=Ce.Cn();i.Mn(e),this.dd(i)}vn(e){const i=Ce.Cn();i.vn(e),this.dd(i)}dn(){const e=Ce.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,i){if(Ee(i>=0,"Index should be greater or equal to 0"),i===this.Yd(e))return;const s=N(this.Kn(e));s.n_(e);const n=this.ld(i);this.Wd(e,n),s.Sl().length===0&&this.Ud(s),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const i=this.ud,s=this.od;if(i===s)return i;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==s||this.ed.rh!==i)this.ed={eh:s,rh:i,Zd:new Map};else{const r=this.ed.Zd.get(e);if(r!==void 0)return r}const n=this.ko.tt(s,i,e/100);return this.ed.Zd.set(e,n),n}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const i=new Nh(this.Jh,this);this.Xc.push(i);const s=e??this.Xc.length-1,n=Ce.yn();return n.hn(s,{an:0,ln:!0}),this.dd(n),i}ld(e){return Ee(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex(i=>i.F_().includes(e))}kd(e,i){const s=new Ce(i);if(e!==null){const n=this.Xc.indexOf(e);s.hn(n,{an:i})}return s}fd(e,i){return i===void 0&&(i=2),this.kd(this.Kn(e),i)}dd(e){this.rd&&this.rd(e),this.Xc.forEach(i=>i.eu().pr().kt())}Wd(e,i){const s=e.N().priceScaleId,n=s!==void 0?s:this.qd();i.i_(e,n),sl(n)||e.cr(e.N())}_d(e){const i=this.Ps.layout;return i.background.type==="gradient"?e===0?i.background.topColor:i.background.bottomColor:i.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function Hf(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e}function Jo(t){return!Pi(t)&&!Sn(t)}function Kf(t){return Pi(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Rh||(Rh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Lh||(Lh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Bh||(Bh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Ih||(Ih={}));const Ah=t=>t.getUTCFullYear();function Yv(t,e,i){return e.replace(/yyyy/g,(s=>Tt(Ah(s),4))(t)).replace(/yy/g,(s=>Tt(Ah(s)%100,2))(t)).replace(/MMMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(t,i)).replace(/MMM/g,((s,n)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(t,i)).replace(/MM/g,(s=>Tt((n=>n.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Tt((n=>n.getUTCDate())(s),2))(t))}class Yf{constructor(e="yyyy-MM-dd",i="default"){this.Qd=e,this.tf=i}du(e){return Yv(e,this.Qd,this.tf)}}class Qv{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",Tt(e.getUTCHours(),2)).replace("%m",Tt(e.getUTCMinutes(),2)).replace("%s",Tt(e.getUTCSeconds(),2))}}const Jv={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Gv{constructor(e={}){const i={...Jv,...e};this.hf=new Yf(i.sf,i.rf),this.af=new Qv(i.nf),this.lf=i.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function Yn(t){return 60*t*60*1e3}function Vl(t){return 60*t*1e3}const Qn=[{_f:(Fh=1,1e3*Fh),uf:10},{_f:Vl(1),uf:20},{_f:Vl(5),uf:21},{_f:Vl(30),uf:22},{_f:Yn(1),uf:30},{_f:Yn(3),uf:31},{_f:Yn(6),uf:32},{_f:Yn(12),uf:33}];var Fh;function Oh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=Qn.length-1;i>=0;--i)if(Math.floor(e.getTime()/Qn[i]._f)!==Math.floor(t.getTime()/Qn[i]._f))return Qn[i].uf;return 0}function Ul(t){let e=t;if(Sn(t)&&(e=qa(t)),!Jo(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(i.getTime()/1e3),df:e}}function Dh(t){if(!Kf(t))throw new Error("time must be of type isUTCTimestamp");return{cf:t}}function qa(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function $h(t){Sn(t.time)&&(t.time=qa(t.time))}class Wh{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(i){i.forEach($h)}(e):$h(e)}createConverterToInternalObj(e){return N(function(i){return i.length===0?null:Jo(i[0].time)||Sn(i[0].time)?Ul:Dh}(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const i=e;return i.df===void 0?new Date(1e3*i.cf).getTime():new Date(Date.UTC(i.df.year,i.df.month-1,i.df.day)).getTime()}convertHorzItemToInternal(e){return Kf(i=e)?Dh(i):Jo(i)?Ul(i):Ul(qa(i));var i}updateFormatter(e){if(!this.Ps)return;const i=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Gv({sf:i,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new Yf(i,e.locale)}formatHorzItem(e){const i=e;return this.ff.du(new Date(1e3*i.cf))}formatTickmark(e,i){const s=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),n=this.Ps.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(e.originalTime,s,i.locale);if(r!==null)return r}return function(r,o,a){const u={};switch(o){case 0:u.year="numeric";break;case 1:u.month="short";break;case 2:u.day="numeric";break;case 3:u.hour12=!1,u.hour="2-digit",u.minute="2-digit";break;case 4:u.hour12=!1,u.hour="2-digit",u.minute="2-digit",u.second="2-digit"}const h=r.df===void 0?new Date(1e3*r.cf):new Date(Date.UTC(r.df.year,r.df.month-1,r.df.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(a,u)}(e.time,s,i.locale)}maxTickMarkWeight(e){let i=e.reduce(Uv,e[0]).weight;return i>30&&i<50&&(i=30),i}fillWeightsForPoints(e,i){(function(s,n=0){if(s.length===0)return;let r=n===0?null:s[n-1].time.cf,o=r!==null?new Date(1e3*r):null,a=0;for(let u=n;u<s.length;++u){const h=s[u],c=new Date(1e3*h.time.cf);o!==null&&(h.timeWeight=Oh(c,o)),a+=h.time.cf-(r||h.time.cf),r=h.time.cf,o=c}if(n===0&&s.length>1){const u=Math.ceil(a/(s.length-1)),h=new Date(1e3*(s[0].time.cf-u));s[0].timeWeight=Oh(new Date(1e3*s[0].time.cf),h)}})(e,i)}static pf(e){return qe({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const ps=typeof window<"u";function Vh(){return!!ps&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Hl(){return!!ps&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Go(t){return t+t%2}function Xv(t){ps&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class ll{constructor(e,i,s){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Hl(),this.Uf=n=>{this.$f(n)},this.qf=n=>{if(this.jf(n)){const r=this.Yf(n);if(++this.gf,this.Mf&&this.gf>1){const{Kf:o}=this.Zf(wt(n),this.bf);o<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}}else{const r=this.Yf(n);if(++this.vf,this.mf&&this.vf>1){const{Kf:o}=this.Zf(wt(n),this.wf);o<5&&!this.Pf&&this.tp(r,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=i,this.Ps=s,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const i=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",i)},this.np.addEventListener("mousemove",i),this.jf(e))return;const s=this.Yf(e);this.tp(s,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.op),this.Hf=!0}_p(e){const i=Kl(e.changedTouches,N(this.Wf));if(i===null||(this.Ff=Jn(e),this.Af!==null)||this.Of)return;this.zf=!0;const s=this.Zf(wt(i),N(this.yf)),{up:n,cp:r,Kf:o}=s;if(this.kf||!(o<5)){if(!this.kf){const a=.5*n,u=r>=a&&!this.Ps.dp(),h=a>r&&!this.Ps.fp();u||h||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(e,i);this.Gf(a,this.Jf.pp),Ii(e)}}}vp(e){if(e.button!==0)return;const i=this.Zf(wt(e),N(this.Cf)),{Kf:s}=i;if(s>=5&&(this.Pf=!0,this.sp()),this.Pf){const n=this.Yf(e);this.tp(n,this.Jf.mp)}}Zf(e,i){const s=Math.abs(i._t-e._t),n=Math.abs(i.ut-e.ut);return{up:s,cp:n,Kf:s+n}}wp(e){let i=Kl(e.changedTouches,N(this.Wf));if(i===null&&e.touches.length===0&&(i=e.changedTouches[0]),i===null)return;this.Wf=null,this.Ff=Jn(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const s=this.Yf(e,i);if(this.Gf(s,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:n}=this.Zf(wt(i),this.bf);n<30&&!this.Tf&&this.Gf(s,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(s,this.Jf.Mp),this.Jf.Mp&&Ii(e));this.gf===0&&Ii(e),e.touches.length===0&&this.xf&&(this.xf=!1,Ii(e))}$f(e){if(e.button!==0)return;const i=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),Vh()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(i,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:s}=this.Zf(wt(e),this.wf);s<5&&!this.Pf&&this.tp(i,this.Jf.ip),this.sp()}else this.Pf||this.tp(i,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const i=e.changedTouches[0];this.Wf=i.identifier,this.Ff=Jn(e);const s=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=wt(i),this.Ef&&(this.Ef(),this.Ef=null);{const r=this._p.bind(this),o=this.wp.bind(this);this.Ef=()=>{s.removeEventListener("touchmove",r),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",r,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const n=this.Yf(e,i);this.Gf(n,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=wt(i))}kp(e){if(e.button!==0)return;const i=this.np.ownerDocument.documentElement;Vh()&&i.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=wt(e),this.Bf&&(this.Bf(),this.Bf=null);{const n=this.vp.bind(this),r=this.$f.bind(this);this.Bf=()=>{i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",r)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",r)}if(this.Nf=!0,this.jf(e))return;const s=this.Yf(e);this.tp(s,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=wt(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,i=s=>{this.Jf.Tp&&(s.composed&&this.np.contains(s.composedPath()[0])||s.target&&this.np.contains(s.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",i)},this.Rf=()=>{e.removeEventListener("mousedown",i)},e.addEventListener("mousedown",i),e.addEventListener("touchstart",i,{passive:!0})}Hl()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Xv(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",e=>this.Ep(e.touches),{passive:!0}),this.np.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const i=Uh(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,i),Ii(e)}},{passive:!1}),this.np.addEventListener("touchend",e=>{this.Ep(e.touches)}))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const i=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-i.left+(e[1].clientX-i.left))/2,ut:(e[0].clientY-i.top+(e[1].clientY-i.top))/2},this.Lf=Uh(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const i=this.Yf(e);this.tp(i,this.Jf.zp),this.Hf=!Hl()}Cp(e){const i=Kl(e.touches,N(this.Wf));if(i===null)return;const s=this.Yf(e,i);this.Gf(s,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Jn(e)<this.Ff+500}Gf(e,i){i&&i.call(this.Jf,e)}tp(e,i){i&&i.call(this.Jf,e)}Yf(e,i){const s=i||e,n=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-n.left,localY:s.clientY-n.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:s.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Ii(e)}}}}function Uh(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function Ii(t){t.cancelable&&t.preventDefault()}function wt(t){return{_t:t.pageX,ut:t.pageY}}function Jn(t){return t.timeStamp||performance.now()}function Kl(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}class qv{constructor(e,i,s){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[i],this.Gp=e.Zp()[s],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return se({width:this.Kp.sv().width,height:1})}nv(){return se({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,i,s){const n=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(i,s,n.width,n.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),i=e.style;i.position="fixed",i.display="none",i.zIndex="49",i.top="0",i.left="0",i.width="100%",i.height="100%",i.cursor="row-resize",this.Jp.appendChild(e);const s=document.createElement("div"),n=s.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.Jp.appendChild(s);const r={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new ll(s,r,{dp:()=>!1,fp:()=>!0}),this.Up={hv:s,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const i=this.Kp.cv().E_()+this.Gp.cv().E_(),s=i/(this.Kp.sv().height+this.Gp.sv().height),n=30*s;i<=2*n||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:i-n,vv:i,mv:s,wv:n},this.Up.rv.style.display="block")}_v(e){const i=this.jp;if(i===null)return;const s=(e.pageY-i.dv)*i.mv,n=Hs(i.fv+s,i.wv,i.pv);this.Kp.cv().A_(n),this.Gp.cv().A_(i.vv-n),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function Yl(t,e){return t.gv-e.gv}function Ql(t,e,i){const s=(t.gv-e.gv)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),i)}class Zv{constructor(e,i,s,n){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=i,this.Rv=s,this.kn=n}Dv(e,i){if(this.Mv!==null){if(this.Mv.wt===i)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:i,gv:e}}fe(e,i){if(this.Mv===null||this.bv===null||i-this.Mv.wt>50)return;let s=0;const n=Ql(this.Mv,this.bv,this.Tv),r=Yl(this.Mv,this.bv),o=[n],a=[r];if(s+=r,this.Sv!==null){const h=Ql(this.bv,this.Sv,this.Tv);if(Math.sign(h)===Math.sign(n)){const c=Yl(this.bv,this.Sv);if(o.push(h),a.push(c),s+=c,this.xv!==null){const d=Ql(this.Sv,this.xv,this.Tv);if(Math.sign(d)===Math.sign(n)){const f=Yl(this.Sv,this.xv);o.push(d),a.push(f),s+=f}}}}let u=0;for(let h=0;h<o.length;++h)u+=a[h]/s*o[h];Math.abs(u)<this.Pv||(this.Cv={gv:e,wt:i},this.kv=u,this.yv=function(h,c){const d=Math.log(c);return Math.log(1*d/-h)/d}(Math.abs(u),this.Rv))}Ac(e){const i=N(this.Cv),s=e-i.wt;return i.gv+this.kv*(Math.pow(this.Rv,s)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const i=e-N(this.Cv).wt;return Math.min(i,this.yv)}}class ey{constructor(e,i){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=i,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Ni(t,e){const i=N(t.ownerDocument).createElement("canvas");t.appendChild(i);const s=Ag(i,{options:{allowResizeObserver:!0},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return s.resizeCanvasElement(e),s}function Ti(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Xo(t,e,i,s){t.Uh&&t.Uh(e,i,s)}function hr(t,e,i,s){t.nt(e,i,s)}function qo(t,e,i,s){const n=t(i,s);for(const r of n){const o=r.Tt(s);o!==null&&e(o)}}function Jl(t,e){return i=>{var s,n;return function(r){return r.Ft!==void 0}(i)?(((s=i.Ft())==null?void 0:s.ol())??"")!==e?[]:((n=i.Ya)==null?void 0:n.call(i,t))??[]:[]}}function Hh(t,e,i,s){if(!t.length)return;let n=0;const r=t[0].$t(s,!0);let o=e===1?i/2-(t[0].Hi()-r/2):t[0].Hi()-r/2-i/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const u=t[a],h=t[a-1],c=h.$t(s,!1),d=u.Hi(),f=h.Hi();if(e===1?d>f-c:d<f+c){const m=f-c*e;u.Ui(m);const y=m-e*c/2;if((e===1?y<0:y>i)&&o>0){const x=e===1?-1-y:y-i,P=Math.min(x,o);for(let g=n;g<t.length;g++)t[g].Ui(t[g].Hi()+e*P);o-=P}}else n=a,o=e===1?f-c-d:d-(f+c)}}class Kh{constructor(e,i,s,n){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new gn(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=i,this.Co=i.layout,this.hd=s,this.Jv=n==="left",this.Qv=Jl("normal",n),this.tm=Jl("top",n),this.im=Jl("bottom",n),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Ni(this.Jp,se({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=Ni(this.Jp,se({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new ll(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ti(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ti(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const i=this.lm(),s=N(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));s.save();const n=this.Ki.Vl();s.font=this._m(),n.length>0&&(e=Math.max(this.qv.Ii(s,n[0].Jl),this.qv.Ii(s,n[n.length-1].Jl)));const r=this.um();for(let h=r.length;h--;){const c=this.qv.Ii(s,r[h].ri());c>e&&(e=c)}const o=this.Ki.Lt();if(o!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const h=this.Ki.Ds(1,o),c=this.Ki.Ds(this.Uv.height-2,o);e=Math.max(e,this.qv.Ii(s,this.Ki.Ji(Math.floor(Math.min(h,c))+.11111111111111,o)),this.qv.Ii(s,this.Ki.Ji(Math.ceil(Math.max(h,c))-.11111111111111,o)))}var a;s.restore();const u=e||34;return Go(Math.ceil(i.S+i.C+i.V+i.B+5+u))}dm(e){this.Uv!==null&&_i(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return N(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,N(this.Ft()))}pm(e){if(this.Uv===null)return;const i={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const n=Ci(this.sm,i);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r)}),this.yt.Mm(n,this.im),this.bm(n),this.yt.Mm(n,this.Qv),this.Sm(n))}this.nm.applySuggestedBitmapSize();const s=Ci(this.nm,i);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.xm(s),this.yt.Mm(s,this.tm))}nv(){return this.sm.bitmapSize}ev(e,i,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,i,s),n)){const o=this.nm.canvasElement;e.drawImage(o,i,s)}}kt(){var e;(e=this.Ki)==null||e.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!0,i.j_(s,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.yt.Gv().Qt(),s=this.yt.cv(),n=this.Ki;i.Y_(s,n,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),i=this.yt.cv(),s=this.Ki;this.$v&&(this.$v=!1,e.K_(i,s))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const i=this.yt.Gv().Qt(),s=this.yt.cv();this.$v=!1,i.K_(s,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],i=this.Ki===null?void 0:this.Ki;return(s=>{for(let n=0;n<s.length;++n){const r=s[n].Ks(this.yt.cv(),i);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:i}){const{width:s,height:n}=i,r=this.yt.cv().Qt(),o=r.$(),a=r.Kd();o===a?tl(e,0,0,s,n,o):Rf(e,0,0,s,n,o,a)}gm({context:e,bitmapSize:i,horizontalPixelRatio:s}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const n=Math.max(1,Math.floor(this.lm().S*s));let r;r=this.Jv?i.width-n:0,e.fillRect(r,0,n,i.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const i=this.Ki.Vl(),s=this.Ki.N(),n=this.lm(),r=this.Jv?this.Uv.width-n.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:u})=>{o.fillStyle=s.borderColor;const h=Math.max(1,Math.floor(u)),c=Math.floor(.5*u),d=Math.round(n.C*a);o.beginPath();for(const f of i)o.rect(Math.floor(r*a),Math.round(f.Pl*u)-c,d,h);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this._m(),o.fillStyle=s.textColor??this.Co.textColor,o.textAlign=this.Jv?"right":"left",o.textBaseline="middle";const a=this.Jv?Math.round(r-n.V):Math.round(r+n.C+n.V),u=i.map(h=>this.qv.Di(o,h.Jl));for(let h=i.length;h--;){const c=i[h];o.fillText(c.Jl,a,c.Pl+u[h])}})}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const i=[],s=this.Ki.Dt().slice(),n=this.yt.cv(),r=this.lm();this.Ki===n.Gn()&&this.yt.cv().Dt().forEach(u=>{n.Zn(u)&&s.push(u)});const o=this.Ki.Sl()[0],a=this.Ki;s.forEach(u=>{const h=u.Ks(n,a);h.forEach(c=>{c.$i()&&c.Wi()===null&&(c.Ui(null),i.push(c))}),o===u&&h.length>0&&(e=h[0].Ei())}),this.Ki.N().alignLabels&&this.ym(i,r,e)}ym(e,i,s){if(this.Uv===null)return;const n=e.filter(o=>o.Ei()<=s),r=e.filter(o=>o.Ei()>s);n.sort((o,a)=>a.Ei()-o.Ei()),n.length&&r.length&&r.push(n[0]),r.sort((o,a)=>o.Ei()-a.Ei());for(const o of e){const a=Math.floor(o.$t(i)/2),u=o.Ei();u>-a&&u<a&&o.Ui(a),u>this.Uv.height-a&&u<this.Uv.height+a&&o.Ui(this.Uv.height-a)}Hh(n,1,this.Uv.height,i),Hh(r,-1,this.Uv.height,i)}Sm(e){if(this.Uv===null)return;const i=this.um(),s=this.lm(),n=this.Jv?"right":"left";i.forEach(r=>{r.qi()&&r.Tt(N(this.Ki)).nt(e,s,this.qv,n)})}xm(e){if(this.Uv===null||this.Ki===null)return;const i=this.yt.Gv().Qt(),s=[],n=this.yt.cv(),r=i.gd().Ks(n,this.Ki);r.length&&s.push(r);const o=this.lm(),a=this.Jv?"right":"left";s.forEach(u=>{u.forEach(h=>{h.Tt(N(this.Ki)).nt(e,o,this.qv,a)})})}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return mn(this.Co.fontSize,this.Co.fontFamily)}}function ty(t,e){var i;return((i=t.qa)==null?void 0:i.call(t,e))??[]}function Yh(t,e){var i;return((i=t.Ys)==null?void 0:i.call(t,e))??[]}function Qh(t,e){var i;return((i=t.ds)==null?void 0:i.call(t,e))??[]}function iy(t,e){var i;return((i=t.Ha)==null?void 0:i.call(t,e))??[]}class Za{constructor(e,i){this.Uv=se({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new ge,this.Vm=new ge,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=i,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(s),this.sm=Ni(s,se({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const n=this.sm.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.nm=Ni(s,se({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new ll(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ti(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ti(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return N(this.Nm)}qm(e){var i;this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(Za.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new ey(this.Wm,this.Lv),this.Tm.kt()):((i=this.Tm)==null||i.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(N(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(N(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const i=e.localX,s=e.localY;this.Zm(i,s,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const i=e.localX,s=e.localY;this.Zm(i,s,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const i={x:e.localX,y:e.localY};this.iw(i,i,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,i){if(!this.Lv.N().handleScale.pinch)return;const s=5*(i-this.Bm);this.Bm=i,this.ns().Td(e._t,s)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const i=this.ns().gd();this.Am!==null&&i.It()&&(this.zm={x:i.si(),y:i.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const i=e.localX,s=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const n=N(this.zm),r=n.x+(i-this.Am.x),o=n.y+(s-this.Am.y);this.Zm(r,o,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,i){const s=this.Nm;return s===null?null:Uf(s,e,i)}hw(e,i){N(i==="left"?this.km:this.Pm).dm(se({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){_i(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=N(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const i of e.Sl())if(e.Zn(i)){const s=i.Ft();s!==null&&e.H_(s),i.Ws()}for(const i of e.ru())i.Ws()}nv(){return this.sm.bitmapSize}ev(e,i,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,i,s),n)){const o=this.nm.canvasElement;e!==null&&e.drawImage(o,i,s)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const i={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const n=Ci(this.sm,i);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.wm(r)}),this.Nm&&(this.lw(n,ty),this.ow(n),this.lw(n,Yh),this.lw(n,Qh)))}this.nm.applySuggestedBitmapSize();const s=Ci(this.nm,i);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this._w(s),this.lw(s,iy),this.lw(s,Qh))}uw(){return this.km}cw(){return this.Pm}Mm(e,i){this.lw(e,i)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,i){const s=i.localX,n=i.localY;e.v()&&e.p(this.ns().Et().wc(s),{x:s,y:n},i)}wm({context:e,bitmapSize:i}){const{width:s,height:n}=i,r=this.ns(),o=r.$(),a=r.Kd();o===a?tl(e,0,0,s,n,a):Rf(e,0,0,s,n,o,a)}ow(e){const i=N(this.Nm),s=i.eu().pr().Tt(i);s!==null&&s.nt(e,!1)}_w(e){this.dw(e,Yh,hr,this.ns().gd())}lw(e,i){const s=N(this.Nm),n=s.Dt(),r=s.ru();for(const o of r)this.dw(e,i,Xo,o);for(const o of n)this.dw(e,i,Xo,o);for(const o of r)this.dw(e,i,hr,o);for(const o of n)this.dw(e,i,hr,o)}dw(e,i,s,n){const r=N(this.Nm),o=r.Qt().pd(),a=o!==null&&o.hu===n,u=o!==null&&a&&o.au!==void 0?o.au.ie:void 0;qo(i,h=>s(h,e,a,u),n,r)}jm(){if(this.Nm===null)return;const e=this.Lv,i=this.Nm.U_().N().visible,s=this.Nm.q_().N().visible;i||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),s||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const n=e.Qt().Nd();i&&this.km===null&&(this.km=new Kh(this,e.N(),n,"left"),this.Hm.appendChild(this.km.iv())),s&&this.Pm===null&&(this.Pm=new Kh(this,e.N(),n,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,i,s){e=Math.max(0,Math.min(e,this.Uv.width-1)),i=Math.max(0,Math.min(i,this.Uv.height-1)),this.ns().Ad(e,i,s,N(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,i,s){this.Am=e,this.Lm=!1,this.Zm(i.x,i.y,s);const n=this.ns().gd();this.zm={x:n.si(),y:n.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const i=this.ns(),s=this.cv();if(i.X_(s,s.Rs()),this.Rm=null,this.Dm=!1,i.Vd(),this.Om!==null){const n=performance.now(),r=i.Et();this.Om.fe(r.Cc(),n),this.Om.Ec(n)||i.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)N(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const i=this.ns(),s=i.Et();if(s.Gi())return;const n=this.Lv.N(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||e.Np)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Np))return;const a=this.Nm.Rs(),u=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:u,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&o.touch||!e.Np&&o.mouse){const h=s.ul();this.Om=new Zv(.2/h,7/h,.997,15/h),this.Om.Dv(s.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||i.Z_(this.Nm,a,e.localY),i.Dd(e.localX),this.Dm=!0}this.Dm&&(a.Gi()||i.G_(this.Nm,a,e.localY),i.Id(e.localX),this.Om!==null&&this.Om.Dv(s.Cc(),u))}}class Jh{constructor(e,i,s,n,r){this.xt=!0,this.Uv=se({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=s.Nd,this.Ps=i,this.ww=n,this.gw=r,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Ni(this.Jp,se({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ti(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){_i(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const i=Ci(this.sm,{colorSpace:this.Ps.layout.colorSpace});i!==null&&i.useBitmapCoordinateSpace(s=>{this.wm(s),this.gm(s)})}nv(){return this.sm.bitmapSize}ev(e,i,s){const n=this.nv();n.width>0&&n.height>0&&e.drawImage(this.sm.canvasElement,i,s)}gm({context:e,bitmapSize:i,horizontalPixelRatio:s,verticalPixelRatio:n}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.hd.N().S*s),o=Math.floor(this.hd.N().S*n),a=this.Jv?i.width-r:0;e.fillRect(a,0,r,o)}wm({context:e,bitmapSize:i}){tl(e,0,0,i.width,i.height,this.gw())}}function eu(t){return e=>{var i;return((i=e.Ka)==null?void 0:i.call(e,t))??[]}}const sy=eu("normal"),ny=eu("top"),ry=eu("bottom");class ly{constructor(e,i){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=se({width:0,height:0}),this.xw=new ge,this.qv=new gn(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=i,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Ni(this.kw,se({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Ni(this.kw,se({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const n=this.nm.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new ll(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Ti(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Ti(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const i=this.Lv.Qt();!i.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&i.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const i=this.Lv.Qt();!i.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&i.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,i,s){_i(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(se({width:i,height:e.height})),this.bw!==null&&this.bw.dm(se({width:s,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,i,s,n){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,i,s),n)){const o=this.nm.canvasElement;e.drawImage(o,i,s)}}pm(e){if(e===0)return;const i={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const n=Ci(this.sm,i);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r),this.Aw(n,ry)}),this.bm(n),this.Aw(n,sy)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const s=Ci(this.nm,i);s!==null&&(s.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],s),this.Aw(s,ny))}Aw(e,i){const s=this.Lv.Qt().tn();for(const n of s)qo(i,r=>Xo(r,e,!1,void 0),n,void 0);for(const n of s)qo(i,r=>hr(r,e,!1,void 0),n,void 0)}wm({context:e,bitmapSize:i}){tl(e,0,0,i.width,i.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:i,verticalPixelRatio:s}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const n=Math.max(1,Math.floor(this.Bw().S*s));e.fillRect(0,0,i.width,n)}}bm(e){const i=this.Lv.Qt().Et(),s=i.Vl();if(!s||s.length===0)return;const n=this.cu.maxTickMarkWeight(s),r=this.Bw(),o=i.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:u,verticalPixelRatio:h})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const c=Math.max(1,Math.floor(u)),d=Math.floor(.5*u);a.beginPath();const f=Math.round(r.C*h);for(let m=s.length;m--;){const y=Math.round(s[m].coord*u);a.rect(y-d,0,c,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const u=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const h of s)if(h.weight<n){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const h of s)if(h.weight>=n){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}})}Ow(e,i,s){const n=this.qv.Ii(e,s),r=n/2,o=Math.floor(i-r)+.5;return o<0?i+=Math.abs(0-o):o+n>this.Uv.width&&(i-=Math.abs(this.Uv.width-(o+n))),i}Lw(e,i){const s=this.Bw();for(const n of e)for(const r of n.fs())r.Tt().nt(i,s)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return mn(this.F(),this.Ps.fontFamily)}Nw(){return mn(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new gn,Ew:0});const e=this.M,i=this._m();if(e.P!==i){const s=this.F();e.k=s,e.P=i,e.A=3*s/12,e.I=3*s/12,e.ts=9*s/12,e.L=0,e.Ew=4*s/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),i=e.N();i.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),i.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const s={Nd:this.Lv.Qt().Nd()},n=()=>i.leftPriceScale.borderVisible&&e.Et().N().borderVisible,r=()=>e.Kd();i.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new Jh("left",i,s,n,r),this.Cw.appendChild(this.Mw.iv())),i.rightPriceScale.visible&&this.bw===null&&(this.bw=new Jh("right",i,s,n,r),this.yw.appendChild(this.bw.iv()))}}var gc;const oy=!!ps&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!ps&&((gc=navigator==null?void 0:navigator.userAgentData)!=null&&gc.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class ay{constructor(e,i,s){var n;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new ge,this.Vm=new ge,this.nd=new ge,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=i,this.cu=s,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(n=this.Vv).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Gl(this.Ps)&&this.Jw(!0),this.ns=new Kv(this.rd.bind(this),this.Ps,s),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new ly(this,this.cu),this.Zw.appendChild(this.tg.iv());const r=i.autoSize&&this.ig();let o=this.Ps.width,a=this.Ps.height;if(r||o===0||a===0){const u=e.getBoundingClientRect();o=o||u.width,a=a||u.height}this.sg(o,a),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],N(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,i,s=!1){if(this.eo===i&&this.S_===e)return;const n=function(a){const u=Math.floor(a.width),h=Math.floor(a.height);return se({width:u-u%2,height:h-h%2})}(se({width:e,height:i}));this.eo=n.height,this.S_=n.width;const r=this.eo+"px",o=this.S_+"px";N(this.Vv).style.height=r,N(this.Vv).style.width=o,this.Zw.style.height=r,this.Zw.style.width=o,s?this.lg(Ce.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=Ce.yn());for(let i=0;i<this.Fw.length;i++)this.Fw[i].pm(e.un(i).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){var n;const i=Gl(this.Ps);this.ns.cr(e);const s=Gl(this.Ps);s!==i&&this.Jw(s),(n=e.layout)!=null&&n.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const i=this.cg(null),s=document.createElement("canvas");s.width=i.width,s.height=i.height;const n=N(s.getContext("2d"));return this.cg(n,e),s}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:N(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return Qe(this.Fw[e]).sv()}og(){this.Ww.forEach(e=>{e.kt()})}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,i){let s=0,n=0;const r=this.Fw[0],o=(u,h)=>{let c=0;for(let d=0;d<this.Fw.length;d++){const f=this.Fw[d],m=N(u==="left"?f.uw():f.cw()),y=m.nv();if(e!==null&&m.ev(e,h,c,i),c+=y.height,d<this.Fw.length-1){const x=this.Ww[d],P=x.nv();e!==null&&x.ev(e,h,c),c+=P.height}}};this.fg()&&(o("left",0),s+=N(r.uw()).nv().width);for(let u=0;u<this.Fw.length;u++){const h=this.Fw[u],c=h.nv();if(e!==null&&h.ev(e,s,n,i),n+=c.height,u<this.Fw.length-1){const d=this.Ww[u],f=d.nv();e!==null&&d.ev(e,s,n),n+=f.height}}s+=r.nv().width,this.pg()&&(o("right",s),s+=N(r.cw()).nv().width);const a=(u,h,c)=>{N(u==="left"?this.tg.Tw():this.tg.Rw()).ev(N(e),h,c)};if(this.Ps.timeScale.visible){const u=this.tg.nv();if(e!==null){let h=0;this.fg()&&(a("left",h,n),h=N(r.uw()).nv().width),this.tg.ev(e,h,n,i),h+=u.width,this.pg()&&a("right",h,n)}n+=u.height}return se({width:s,height:n})}Mg(){let e=0,i=0,s=0;for(const P of this.Fw)this.fg()&&(i=Math.max(i,N(P.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(s=Math.max(s,N(P.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=P.E_();i=Go(i),s=Go(s);const n=this.S_,r=this.eo,o=Math.max(n-i-s,0),a=1*this.Ww.length,u=this.Ps.timeScale.visible;let h=u?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var c;h=(c=h)+c%2;const d=a+h,f=r<d?0:r-d,m=f/e;let y=0;const x=window.devicePixelRatio||1;for(let P=0;P<this.Fw.length;++P){const g=this.Fw[P];g.qm(this.ns.Xs()[P]);let p=0,v=0;v=P===this.Fw.length-1?Math.ceil((f-y)*x)/x:Math.round(g.E_()*m*x)/x,p=Math.max(v,2),y+=p,g.dm(se({width:o,height:p})),this.fg()&&g.hw(i,"left"),this.pg()&&g.hw(s,"right"),g.cv()&&this.ns.bd(g.cv(),p)}this.tg.Iw(se({width:u?o:0,height:h}),u?i:0,u?s:0),this.ns.L_(o),this.Uw!==i&&(this.Uw=i),this.$w!==s&&(this.$w=s)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return oy?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const i=this.bg(e),s=i*e.deltaX/100,n=-i*e.deltaY/100;if(e.cancelable&&e.preventDefault(),n!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(o,r)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*s)}lg(e,i){var n;const s=e._n();s===3&&this.Sg(),s!==3&&s!==2||(this.xg(e),this.Cg(e,i),this.tg.kt(),this.Fw.forEach(r=>{r.Ym()}),((n=this.qw)==null?void 0:n._n())===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,i),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,i){for(const s of e.bn())this.xn(s,i)}xg(e){const i=this.ns.Xs();for(let s=0;s<i.length;s++)e.un(s).ln&&i[s].tu()}xn(e,i){const s=this.ns.Et();switch(e.fn){case 0:s.Fc();break;case 1:s.Wc(e.Wt);break;case 2:s.gn(e.Wt);break;case 3:s.Mn(e.Wt);break;case 4:s.Pc();break;case 5:e.Wt.Ec(i)||s.Mn(e.Wt.Ac(i))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(i=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const s=this.qw;this.qw=null,this.lg(s,i);for(const n of s.bn())if(n.fn===5&&!n.Wt.Ec(i)){this.Qt().vn(n.Wt);break}}}))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),i=e.length,s=this.Fw.length;for(let n=i;n<s;n++){const r=Qe(this.Fw.pop());this.Zw.removeChild(r.iv()),r.nw().u(this),r.ew().u(this),r.m();const o=this.Ww.pop();o!==void 0&&this.hg(o)}for(let n=s;n<i;n++){const r=new Za(this,e[n]);if(r.nw().i(this.yg.bind(this,r),this),r.ew().i(this.kg.bind(this,r),this),this.Fw.push(r),n>0){const o=new qv(this,n-1,n);this.Ww.push(o),this.Zw.insertBefore(o.iv(),this.tg.iv())}this.Zw.insertBefore(r.iv(),this.tg.iv())}for(let n=0;n<i;n++){const r=e[n],o=this.Fw[n];o.cv()!==r?o.qm(r):o.$m()}this.eg(),this.Mg()}Pg(e,i,s,n){var d;const r=new Map;e!==null&&this.ns.tn().forEach(f=>{const m=f.qs().$s(e);m!==null&&r.set(f,m)});let o;if(e!==null){const f=(d=this.ns.Et().es(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().pd(),u=a!==null&&a.hu instanceof rl?a.hu:void 0,h=a!==null&&a.au!==void 0?a.au.te:void 0,c=this.Tg(n);return{Gr:o,js:e??void 0,Rg:i??void 0,Dg:c!==-1?c:void 0,Ig:u,Vg:r,Bg:h,Eg:s??void 0}}Tg(e){let i=-1;if(e)i=this.Fw.indexOf(e);else{const s=this.Qt().gd().Gs();s!==null&&(i=this.Qt().Xs().indexOf(s))}return i}yg(e,i,s,n){this.Im.p(()=>this.Pg(i,s,n,e))}kg(e,i,s,n){this.Vm.p(()=>this.Pg(i,s,n,e))}Qw(e,i,s){var n;this.mg(((n=this.Qt().pd())==null?void 0:n.ou)??null),this.nd.p(()=>this.Pg(e,i,s))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(e=>{const i=e[e.length-1];i&&this.sg(i.contentRect.width,i.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Gl(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function uy(t){return t.open===void 0&&t.value===void 0}function hy(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Gh(t,e,i,s){const n=i.value,r={js:e,wt:t,Wt:[n,n,n,n],Gr:s};return i.color!==void 0&&(r.R=i.color),r}function cy(t,e,i,s){const n=i.value,r={js:e,wt:t,Wt:[n,n,n,n],Gr:s};return i.lineColor!==void 0&&(r.vt=i.lineColor),i.topColor!==void 0&&(r.eh=i.topColor),i.bottomColor!==void 0&&(r.rh=i.bottomColor),r}function dy(t,e,i,s){const n=i.value,r={js:e,wt:t,Wt:[n,n,n,n],Gr:s};return i.topLineColor!==void 0&&(r.hh=i.topLineColor),i.bottomLineColor!==void 0&&(r.ah=i.bottomLineColor),i.topFillColor1!==void 0&&(r.oh=i.topFillColor1),i.topFillColor2!==void 0&&(r._h=i.topFillColor2),i.bottomFillColor1!==void 0&&(r.uh=i.bottomFillColor1),i.bottomFillColor2!==void 0&&(r.dh=i.bottomFillColor2),r}function fy(t,e,i,s){const n={js:e,wt:t,Wt:[i.open,i.high,i.low,i.close],Gr:s};return i.color!==void 0&&(n.R=i.color),n}function py(t,e,i,s){const n={js:e,wt:t,Wt:[i.open,i.high,i.low,i.close],Gr:s};return i.color!==void 0&&(n.R=i.color),i.borderColor!==void 0&&(n.Ht=i.borderColor),i.wickColor!==void 0&&(n.nh=i.wickColor),n}function my(t,e,i,s,n){const r=Qe(n)(i),o=Math.max(...r),a=Math.min(...r),u=r[r.length-1],h=[u,o,a,u],{time:c,color:d,...f}=i;return{js:e,wt:t,Wt:h,Gr:s,le:f,R:d}}function Ai(t){return t.Wt!==void 0}function Xh(t,e){return e.customValues!==void 0&&(t.Ag=e.customValues),t}function fi(t){return(e,i,s,n,r,o)=>function(a,u){return u?u(a):uy(a)}(s,o)?Xh({wt:e,js:i,Gr:n},s):Xh(t(e,i,s,n,r),s)}function qh(t){return{Candlestick:fi(py),Bar:fi(fy),Area:fi(cy),Baseline:fi(dy),Histogram:fi(Gh),Line:fi(Gh),Custom:fi(my)}[t]}function Zh(t){return{js:0,Lg:new Map,Ea:t}}function ec(t,e){if(t!==void 0&&t.length!==0)return{zg:e.key(t[0].wt),Og:e.key(t[t.length-1].wt)}}function tc(t){let e;return t.forEach(i=>{e===void 0&&(e=i.Gr)}),Qe(e)}class gy{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,i){let s=this.Ng.size!==0,n=!1;const r=this.Fg.get(e);if(r!==void 0)if(this.Fg.size===1)s=!1,n=!0,this.Ng.clear();else for(const u of this.Hg)u.pointData.Lg.delete(e)&&(n=!0);let o=[];if(i.length!==0){const u=i.map(m=>m.time),h=this.cu.createConverterToInternalObj(i),c=qh(e.wh()),d=e.rl(),f=e.hl();o=i.map((m,y)=>{const x=h(m.time),P=this.cu.key(x);let g=this.Ng.get(P);g===void 0&&(g=Zh(x),this.Ng.set(P,g),n=!0);const p=c(x,g.js,m,u[y],d,f);return g.Lg.set(e,p),p})}s&&this.$g(),this.qg(e,o);let a=-1;if(n){const u=[];this.Ng.forEach(h=>{u.push({timeWeight:0,time:h.Ea,pointData:h,originalTime:tc(h.Lg)})}),u.sort((h,c)=>this.cu.key(h.time)-this.cu.key(c.time)),a=this.jg(u)}return this.Yg(e,a,function(u,h,c){const d=ec(u,c),f=ec(h,c);if(d!==void 0&&f!==void 0)return{Kg:!1,Ta:d.Og>=f.Og&&d.zg>=f.zg}}(this.Fg.get(e),r,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,i,s){if(s&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const n=i;(function(g){g.Gr===void 0&&(g.Gr=g.time)})(n),this.cu.preprocessData(i);const r=this.cu.createConverterToInternalObj([i])(i.time),o=this.Wg.get(e);if(!s&&o!==void 0&&this.cu.key(r)<this.cu.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.Ng.get(this.cu.key(r));if(s&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const u=a===void 0;a===void 0&&(a=Zh(r),this.Ng.set(this.cu.key(r),a));const h=qh(e.wh()),c=e.rl(),d=e.hl(),f=h(r,a.js,i,n.Gr,c,d),m=!s&&!u&&o!==void 0&&this.cu.key(r)===this.cu.key(o);a.Lg.set(e,f),s?this.Gg(e,f,a.js):m&&e.La()&&Ai(f)?(e.kr(f),this.Xg(e,f)):this.Xg(e,f);const y={Ta:Ai(f),Kg:s};if(!u)return this.Yg(e,-1,y);const x={timeWeight:0,time:a.Ea,pointData:a,originalTime:tc(a.Lg)},P=fs(this.Hg,this.cu.key(x.time),(g,p)=>this.cu.key(g.time)<p);this.Hg.splice(P,0,x);for(let g=P;g<this.Hg.length;++g)Gn(this.Hg[g].pointData,g);return this.cu.fillWeightsForPoints(this.Hg,P),this.Yg(e,P,y)}Jg(e,i){const s=this.Fg.get(e);if(s===void 0||i<=0)return[[],this.Qg()];i=Math.min(i,s.length);const n=s.splice(-i).reverse();s.length===0?this.Wg.delete(e):this.Wg.set(e,s[s.length-1].wt);for(const r of n){const o=this.Ng.get(this.cu.key(r.wt));if(o&&(o.Lg.delete(e),o.Lg.size===0)){this.Ng.delete(this.cu.key(o.Ea)),this.Hg.splice(o.js,1);for(let a=o.js;a<this.Hg.length;++a)Gn(this.Hg[a].pointData,a)}}return[n,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,i){let s=this.Fg.get(e);s===void 0&&(s=[],this.Fg.set(e,s));const n=s.length!==0?s[s.length-1]:null;n===null||this.cu.key(i.wt)>this.cu.key(n.wt)?Ai(i)&&s.push(i):Ai(i)?s[s.length-1]=i:s.splice(-1,1),this.Wg.set(e,i.wt)}Gg(e,i,s){const n=this.Fg.get(e);if(n===void 0)return;const r=fs(n,s,(o,a)=>o.js<a);Ai(i)?n[r]=i:n.splice(r,1)}qg(e,i){i.length!==0?(this.Fg.set(e,i.filter(Ai)),this.Wg.set(e,i[i.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let i=-1;for(let s=0;s<this.Hg.length&&s<e.length;++s){const n=this.Hg[s],r=e[s];if(this.cu.key(n.time)!==this.cu.key(r.time)){i=s;break}r.timeWeight=n.timeWeight,Gn(r.pointData,s)}if(i===-1&&this.Hg.length!==e.length&&(i=Math.min(this.Hg.length,e.length)),i===-1)return-1;for(let s=i;s<e.length;++s)Gn(e[s].pointData,s);return this.cu.fillWeightsForPoints(e,i),this.Hg=e,i}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach(i=>{i.length!==0&&(e=Math.max(e,i[i.length-1].js))}),e}Yg(e,i,s){const n=this.Qg();if(i!==-1)this.Fg.forEach((r,o)=>{n.F_.set(o,{le:r,iM:o===e?s:void 0})}),this.Fg.has(e)||n.F_.set(e,{le:[],iM:s}),n.Et.sM=this.Hg,n.Et.nM=i;else{const r=this.Fg.get(e);n.F_.set(e,{le:r||[],iM:s})}return n}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Gn(t,e){t.js=e,t.Lg.forEach(i=>{i.js=e})}function vy(t,e){return t.wt<e}function yy(t,e){return e<t.wt}function Qf(t,e,i){const s=e.Aa(),n=e.bi(),r=fs(t,s,vy),o=Df(t,n,yy);if(!i)return{from:r,to:o};let a=r,u=o;return r>0&&r<t.length&&t[r].wt>=s&&(a=r-1),o>0&&o<t.length&&t[o-1].wt<=n&&(u=o+1),{from:a,to:u}}class tu{constructor(e,i,s){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=i,this._M=s}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map(e=>({...e,...this.ee.ga().gh(e.wt)}))}fM(){this.lM=null}uM(){const e=this.re.Et(),i=e.N().enableConflation?e.Hc():0;i!==this.oM&&(this.rM=!0,this.oM=i),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),i=this.re.Et();if(this.fM(),i.Gi()||e.Gi())return;const s=i.Ie();if(s===null||this.ee.qs().yh()===0)return;const n=this.ee.Lt();n!==null&&(this.lM=Qf(this.aM,s,this._M),this.mM(e,i,n.Wt),this.wM())}}class xy{constructor(e,i){this.gM=e,this.Ki=i}nt(e,i,s){this.gM.draw(e,this.Ki,i,s)}}class wy extends tu{constructor(e,i,s){super(e,i,!1),this.$h=s,this.cM=new xy(this.$h.renderer(),n=>{const r=e.Lt();return r===null?null:e.Ft().Nt(n,r.Wt)})}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(i=>({wt:i.js,_t:NaN,...e.gh(i.js),MM:i.le}))}mM(e,i){i.mc(this.aM,pn(this.lM))}wM(){this.$h.update({bars:this.aM.map(_y),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function _y(t){return{x:t._t,time:t.wt,originalData:t.MM,barColor:t.th}}const Sy={color:"#2196f3"},jy=(t,e,i)=>{const s=Xt(i);return new wy(t,e,s)};function iu(t){const e={value:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function ic(t){const e=iu(t);return t.R!==void 0&&(e.color=t.R),e}function by(t){const e=iu(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.eh!==void 0&&(e.topColor=t.eh),t.rh!==void 0&&(e.bottomColor=t.rh),e}function ky(t){const e=iu(t);return t.hh!==void 0&&(e.topLineColor=t.hh),t.ah!==void 0&&(e.bottomLineColor=t.ah),t.oh!==void 0&&(e.topFillColor1=t.oh),t._h!==void 0&&(e.topFillColor2=t._h),t.uh!==void 0&&(e.bottomFillColor1=t.uh),t.dh!==void 0&&(e.bottomFillColor2=t.dh),e}function Jf(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function My(t){const e=Jf(t);return t.R!==void 0&&(e.color=t.R),e}function Cy(t){const e=Jf(t),{R:i,Ht:s,nh:n}=t;return i!==void 0&&(e.color=i),s!==void 0&&(e.borderColor=s),n!==void 0&&(e.wickColor=n),e}function cr(t){return{Area:by,Line:ic,Baseline:ky,Histogram:ic,Bar:My,Candlestick:Cy,Custom:Ey}[t]}function Ey(t){const e=t.Gr;return{...t.le,time:e}}const Py={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},Ny={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Ty={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:zf,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Xl={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},zy={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function sc(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Ty,crosshair:Py,grid:Ny,overlayPriceScales:{...Xl},leftPriceScale:{...Xl,visible:!1},rightPriceScale:{...Xl,visible:!0},timeScale:zy,localization:{locale:ps?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Gf{constructor(e,i,s){this.Yp=e,this.bM=i,this.SM=s??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return sl(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new Oe(e.from,e.to))}getVisibleRange(){let e,i,s=this.Ki().er();if(s===null)return null;if(this.Ki().io()){const n=this.Ki().m_(),r=Hf(n);s=Xi(s,this.Ki().no()),e=Number((Math.round(s.Ze()/n)*n).toFixed(r)),i=Number((Math.round(s.Ge()/n)*n).toFixed(r))}else e=s.Ze(),i=s.Ge();return{from:e,to:i}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return N(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class Ry{constructor(e,i,s,n){this.Yp=e,this.yt=s,this.xM=i,this.CM=n}getHeight(){return this.yt.$t()}setHeight(e){const i=this.Yp.Qt(),s=i.Gd(this.yt);i.xd(s,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const i=this.paneIndex();i!==e&&(Ee(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(i,e))}getSeries(){return this.yt.F_().map(e=>this.xM(e))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Gf(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,i={},s=0){return this.CM.addCustomSeries(e,i,s)}addSeries(e,i={}){return this.CM.addSeries(e,i,this.paneIndex())}}const Ly={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class nc{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class By{constructor(e,i,s,n,r,o){this.kM=new ge,this.ee=e,this.PM=i,this.TM=s,this.cu=r,this.CM=n,this.RM=o}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const i=this.ee.Lt();return i===null?null:this.ee.Ft().Nt(e,i.Wt)}coordinateToPrice(e){const i=this.ee.Lt();return i===null?null:this.ee.Ft().Ds(e,i.Wt)}barsInLogicalRange(e){if(e===null)return null;const i=new rs(new ns(e.from,e.to)).Ru(),s=this.ee.qs();if(s.Gi())return null;const n=s.$s(i.Aa(),1),r=s.$s(i.bi(),-1),o=N(s.kh()),a=N(s.sn());if(n!==null&&r!==null&&n.js>r.js)return{barsBefore:e.from-o,barsAfter:a-e.to};const u={barsBefore:n===null||n.js===o?e.from-o:n.js-o,barsAfter:r===null||r.js===a?a-e.to:a-r.js};return n!==null&&r!==null&&(u.from=n.Gr,u.to=r.Gr),u}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,i=!1){this.ee.wh(),this.PM.VM(this.ee,e,i),this.IM("update")}pop(e=1){const i=this.PM.BM(this.ee,e);i.length!==0&&this.IM("update");const s=cr(this.seriesType());return i.map(n=>s(n))}dataByIndex(e,i){const s=this.ee.qs().$s(e,i);return s===null?null:cr(this.seriesType())(s)}data(){const e=cr(this.seriesType());return this.ee.qs().Dh().map(i=>e(i))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return Nt(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const i=qe(Nt(Ly),e),s=this.ee.Da(i);return new nc(s)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map(e=>new nc(e))}seriesType(){return this.ee.wh()}lastValueData(e){const i=this.ee.Ve(e);return i.Be?{noData:!0}:{noData:!1,price:i.gt,color:i.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,i=N(this.ee.Qt().Kn(e));return this.RM(i)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const i=this.ee.Qt().Kn(this.ee);i!==null&&i.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class Iy{constructor(e,i,s){this.EM=new ge,this.Nu=new ge,this.xw=new ge,this.ns=e,this.Jh=e.Et(),this.tg=i,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=s}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,i){i?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const i={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},s=this.Jh.cc(i);this.ns.$d(s)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){Ee(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const i=this.ns.Et();return i.Gi()?null:i.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,i){const s=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(s,i)}timeToCoordinate(e){const i=this.timeToIndex(e,!1);return i===null?null:this.Jh.qt(i)}coordinateToTime(e){const i=this.ns.Et(),s=i.wc(e),n=i.es(s);return n===null?null:n.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...Nt(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function rc(t){return function(e){if(Vn(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:n}=e.handleScale;Vn(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),Vn(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const i=e.handleScroll;Vn(i)&&(e.handleScroll={horzTouchDrag:i,vertTouchDrag:i,mouseWheel:i,pressedMouseMove:i})}(t),t}class Ay{constructor(e,i,s){this.OM=new Map,this.NM=new Map,this.FM=new ge,this.WM=new ge,this.HM=new ge,this.Xc=new WeakMap,this.UM=new gy(i);const n=s===void 0?Nt(sc()):qe(Nt(sc()),rc(s));this.$M=i,this.Yp=new ay(e,n,i),this.Yp.nw().i(o=>{this.FM.v()&&this.FM.p(this.qM(o()))},this),this.Yp.ew().i(o=>{this.WM.v()&&this.WM.p(this.qM(o()))},this),this.Yp.Md().i(o=>{this.HM.v()&&this.HM.p(this.qM(o()))},this);const r=this.Yp.Qt();this.jM=new Iy(r,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,i,s){this.autoSizeActive()||this.Yp.sg(e,i,s)}addCustomSeries(e,i={},s=0){const n=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...Sy,...r.defaultOptions()},YM:jy,KM:r}))(Xt(e));return this.ZM(n,i,s)}addSeries(e,i={},s=0){return this.ZM(e,i,s)}removeSeries(e){const i=Qe(this.OM.get(e)),s=this.UM.Hd(i);this.Yp.Qt().Hd(i),this.GM(s),this.OM.delete(e),this.NM.delete(i)}DM(e,i){this.GM(this.UM.Ug(e,i))}VM(e,i,s){this.GM(this.UM.Zg(e,i,s))}BM(e,i){const[s,n]=this.UM.Jg(e,i);return s.length!==0&&this.GM(n),s}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,i=0){return new Gf(this.Yp,e,i)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(rc(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,i=!1){let s,n;try{i||(s=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),n=this.Yp.ug(e)}finally{i||s===void 0||this.Yp.Qt().cr({crosshair:{mode:s}})}return n}addPane(e=!1){const i=this.Yp.Qt().Xd();return i.O_(e),this.XM(i)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,i){this.Yp.Qt().Cd(e,i)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(e=>this.XM(e))}paneSize(e=0){const i=this.Yp.gg(e);return{height:i.height,width:i.width}}setCrosshairPosition(e,i,s){const n=this.OM.get(s);if(n===void 0)return;const r=this.Yp.Qt().Kn(n);r!==null&&this.Yp.Qt().Ld(e,i,r)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,i={},s=0){Ee(e.YM!==void 0),function(u){if(u===void 0||u.type==="custom")return;const h=u;h.minMove!==void 0&&h.precision===void 0&&(h.precision=Hf(h.minMove))}(i.priceFormat),e.type==="Candlestick"&&function(u){u.borderColor!==void 0&&(u.borderUpColor=u.borderColor,u.borderDownColor=u.borderColor),u.wickColor!==void 0&&(u.wickUpColor=u.wickColor,u.wickDownColor=u.wickColor)}(i);const n=qe(Nt(Nf),Nt(e.defaultOptions),i),r=e.YM,o=new rl(this.Yp.Qt(),e.type,n,r,e.KM);this.Yp.Qt().Fd(o,s);const a=new By(o,this,this,this,this.$M,u=>this.XM(u));return this.OM.set(a,o),this.NM.set(o,a),a}GM(e){const i=this.Yp.Qt();i.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach((s,n)=>n.ht(s.le,s.iM)),i.Et().Ju(),i.Sc()}JM(e){return Qe(this.NM.get(e))}qM(e){const i=new Map;e.Vg.forEach((n,r)=>{const o=r.wh(),a=cr(o)(n);if(o!=="Custom")Ee(hy(a));else{const u=r.hl();Ee(!u||u(a)===!1)}i.set(this.JM(r),a)});const s=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:s,hoveredObjectId:e.Bg,seriesData:i,sourceEvent:e.Eg}}XM(e){let i=this.Xc.get(e);return i||(i=new Ry(this.Yp,s=>this.JM(s),e,this),this.Xc.set(e,i)),i}}function Fy(t){if(Sn(t)){const e=document.getElementById(t);return Ee(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function Oy(t,e,i){const s=Fy(t),n=new Ay(s,e,i);return e.setOptions(n.options()),n}function Dy(t,e){return Oy(t,new Wh,Wh.pf(e))}class Xf extends tu{constructor(e,i){super(e,i,!0)}mM(e,i,s){i.mc(this.aM,pn(this.lM)),e.Yo(this.aM,s,pn(this.lM))}QM(e,i){return{wt:e,gt:i,_t:NaN,ut:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(i=>{let s;if((i.jr??1)>1){const n=i.Wt[1],r=i.Wt[2],o=i.Wt[3];s=Math.abs(n-o)>Math.abs(r-o)?n:r}else s=i.Wt[3];return this.tb(i.js,s,e)})}}function $y(t,e,i,s,n,r,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:a,horizontalPixelRatio:u,verticalPixelRatio:h}=t,c=e[s.from];let d=r(t,c),f=c;if(s.to-s.from<2){const m=n/2;a.beginPath();const y={_t:c._t-m,ut:c.ut},x={_t:c._t+m,ut:c.ut};a.moveTo(y._t*u,y.ut*h),a.lineTo(x._t*u,x.ut*h),o(t,d,y,x)}else{const m=(x,P)=>{o(t,d,f,P),a.beginPath(),d=x,f=P};let y=f;a.beginPath(),a.moveTo(c._t*u,c.ut*h);for(let x=s.from+1;x<s.to;++x){y=e[x];const P=r(t,y);switch(i){case 0:a.lineTo(y._t*u,y.ut*h);break;case 1:a.lineTo(y._t*u,e[x-1].ut*h),P!==d&&(m(P,y),a.lineTo(y._t*u,e[x-1].ut*h)),a.lineTo(y._t*u,y.ut*h);break;case 2:{const[g,p]=Wy(e,x-1,x);a.bezierCurveTo(g._t*u,g.ut*h,p._t*u,p.ut*h,y._t*u,y.ut*h);break}}i!==1&&P!==d&&(m(P,y),a.moveTo(y._t*u,y.ut*h))}(f!==y||f===y&&i===1)&&o(t,d,f,y)}}const lc=6;function ql(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function oc(t,e){return{_t:t._t/e,ut:t.ut/e}}function Wy(t,e,i){const s=Math.max(0,e-1),n=Math.min(t.length-1,i+1);var r,o;return[(r=t[e],o=oc(ql(t[i],t[s]),lc),{_t:r._t+o._t,ut:r.ut+o.ut}),ql(t[i],oc(ql(t[n],t[e]),lc))]}function Vy(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class Uy extends ci{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:i,lt:s,ib:n,sb:r,ct:o,Zt:a,nb:u}=this.rt;if(s===null)return;const h=e.context;h.lineCap="butt",h.lineWidth=o*e.verticalPixelRatio,Ei(h,a),h.lineJoin="round";const c=this.eb.bind(this);r!==void 0&&$y(e,i,r,s,n,c,Vy),u&&function(d,f,m,y,x){if(y.to-y.from<=0)return;const{horizontalPixelRatio:P,verticalPixelRatio:g,context:p}=d;let v=null;const _=Math.max(1,Math.floor(P))%2/2,M=m*g+_;for(let C=y.to-1;C>=y.from;--C){const k=f[C];if(k){const T=x(d,k);T!==v&&(p.beginPath(),v!==null&&p.fill(),p.fillStyle=T,v=T);const W=Math.round(k._t*P)+_,B=k.ut*g;p.moveTo(W,B),p.arc(W,B,M,0,2*Math.PI)}}p.fill()}(e,i,u,s,c)}}class Hy extends Uy{eb(e,i){return i.vt}}class Ky extends Xf{constructor(){super(...arguments),this.cM=new Hy}tb(e,i,s){return{...this.QM(e,i),...s.gh(e)}}wM(){const e=this.ee.N(),i={ot:this.aM,Zt:e.lineStyle,sb:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,nb:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(i)}}const Ut={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(t,e)=>new Ky(t,e)};class Yy extends tu{constructor(e,i){super(e,i,!1)}mM(e,i,s){i.mc(this.aM,pn(this.lM)),e.Zo(this.aM,s,pn(this.lM))}Lb(e,i,s){return{wt:e,Hr:i.Wt[0],Ur:i.Wt[1],$r:i.Wt[2],qr:i.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(i=>this.tb(i.js,i,e))}}class Qy extends ci{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(e){this.jt=e}et(e){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:i}=e;this.Ib=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),u=Math.floor(r*a*o),h=Math.floor(r*o),c=Math.min(u,h);return Math.max(Math.floor(o),c)}(this.jt.ul,i),this.Ib>=2&&Math.floor(i)%2!=this.Ib%2&&this.Ib--;const s=this.jt.qs;this.jt.zb&&this.Ob(e,s,this.jt.lt),this.jt.Mi&&this.gm(e,s,this.jt.lt);const n=this.Nb(i);(!this.jt.Mi||this.Ib>2*n)&&this.Fb(e,s,this.jt.lt)}Ob(e,i,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",u=Math.min(Math.floor(r),Math.floor(this.jt.ul*r));u=Math.max(Math.floor(r),Math.min(u,this.Ib));const h=Math.floor(.5*u);let c=null;for(let d=s.from;d<s.to;d++){const f=i[d];f.sh!==a&&(n.fillStyle=f.sh,a=f.sh);const m=Math.round(Math.min(f.Go,f.Qo)*o),y=Math.round(Math.max(f.Go,f.Qo)*o),x=Math.round(f.Xo*o),P=Math.round(f.Jo*o);let g=Math.round(r*f._t)-h;const p=g+u-1;c!==null&&(g=Math.max(c+1,g),g=Math.min(g,p));const v=p-g+1;n.fillRect(g,x,v,m-x),n.fillRect(g,y+1,v,P-y),c=p}}Nb(e){let i=Math.floor(1*e);this.Ib<=2*i&&(i=Math.floor(.5*(this.Ib-1)));const s=Math.max(Math.floor(e),i);return this.Ib<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}gm(e,i,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);let h=null;for(let c=s.from;c<s.to;c++){const d=i[c];d.ih!==a&&(n.fillStyle=d.ih,a=d.ih);let f=Math.round(d._t*r)-Math.floor(.5*this.Ib);const m=f+this.Ib-1,y=Math.round(Math.min(d.Go,d.Qo)*o),x=Math.round(Math.max(d.Go,d.Qo)*o);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,m)),this.jt.ul*r>2*u)Gg(n,f,y,m-f+1,x-y+1,u);else{const P=m-f+1;n.fillRect(f,y,P,x-y+1)}h=m}}Fb(e,i,s){if(this.jt===null)return;const{context:n,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);for(let h=s.from;h<s.to;h++){const c=i[h];let d=Math.round(Math.min(c.Go,c.Qo)*o),f=Math.round(Math.max(c.Go,c.Qo)*o),m=Math.round(c._t*r)-Math.floor(.5*this.Ib),y=m+this.Ib-1;if(c.th!==a){const x=c.th;n.fillStyle=x,a=x}this.jt.Mi&&(m+=u,d+=u,y-=u,f-=u),d>f||n.fillRect(m,d,y-m+1,f-d+1)}}}class Jy extends Yy{constructor(){super(...arguments),this.cM=new Qy}tb(e,i,s){return{...this.Lb(e,i,s),...s.gh(e)}}wM(){const e=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:e.wickVisible,Mi:e.borderVisible,lt:this.lM})}}const Gy={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(t,e)=>new Jy(t,e)};class Xy extends ci{constructor(){super(...arguments),this.jt=null,this.Wb=[]}ht(e){this.jt=e,this.Wb=[]}et({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return;this.Wb.length||this.Hb(i);const n=Math.max(1,Math.floor(s)),r=Math.round(this.jt.Ub*s)-Math.floor(n/2),o=r+n;for(let a=this.jt.lt.from;a<this.jt.lt.to;a++){const u=this.jt.ot[a],h=this.Wb[a-this.jt.lt.from],c=Math.round(u.ut*s);let d,f;e.fillStyle=u.th,c<=r?(d=c,f=o):(d=r,f=c-Math.floor(n/2)+n),e.fillRect(h.Aa,d,h.bi-h.Aa+1,f-d)}}Hb(e){if(this.jt===null||this.jt.ot.length===0||this.jt.lt===null)return void(this.Wb=[]);const i=Math.ceil(this.jt.ul*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.jt.ul*e)-i;this.Wb=new Array(this.jt.lt.to-this.jt.lt.from);for(let r=this.jt.lt.from;r<this.jt.lt.to;r++){const o=this.jt.ot[r],a=Math.round(o._t*e);let u,h;if(s%2){const c=(s-1)/2;u=a-c,h=a+c}else{const c=s/2;u=a-c,h=a+c-1}this.Wb[r-this.jt.lt.from]={Aa:u,bi:h,$b:a,oe:o._t*e,wt:o.wt}}for(let r=this.jt.lt.from+1;r<this.jt.lt.to;r++){const o=this.Wb[r-this.jt.lt.from],a=this.Wb[r-this.jt.lt.from-1];o.wt===a.wt+1&&o.Aa-a.bi!==i+1&&(a.$b>a.oe?a.bi=o.Aa-i-1:o.Aa=a.bi+i+1)}let n=Math.ceil(this.jt.ul*e);for(let r=this.jt.lt.from;r<this.jt.lt.to;r++){const o=this.Wb[r-this.jt.lt.from];o.bi<o.Aa&&(o.bi=o.Aa);const a=o.bi-o.Aa+1;n=Math.min(a,n)}if(i>0&&n<4)for(let r=this.jt.lt.from;r<this.jt.lt.to;r++){const o=this.Wb[r-this.jt.lt.from];o.bi-o.Aa+1>n&&(o.$b>o.oe?o.bi-=1:o.Aa+=1)}}}class qy extends Xf{constructor(){super(...arguments),this.cM=new Xy}tb(e,i,s){return{...this.QM(e,i),...s.gh(e)}}wM(){const e={ot:this.aM,ul:this.re.Et().ul(),lt:this.lM,Ub:this.ee.Ft().Nt(this.ee.N().base,N(this.ee.Lt()).Wt)};this.cM.ht(e)}}const Zy={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},YM:(t,e)=>new qy(t,e)};class e0{constructor(e,i){this.ee=e,this.Zh=i,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(e){this.Zh&&this.Zh.cr&&this.Zh.cr(e)}jb(){this.ee.attachPrimitive(this.Zh)}}const t0={autoScale:!0,zOrder:"normal"};function Qs(t,e){return Xa(Math.min(Math.max(t,12),30)*e)}function ms(t,e){switch(t){case"arrowDown":case"arrowUp":return Qs(e,1);case"circle":return Qs(e,.8);case"square":return Qs(e,.7)}}function qf(t){return function(e){const i=Math.ceil(e);return i%2!=0?i-1:i}(Qs(t,1))}function Zf(t){return Math.max(Qs(t,.1),3)}function ac(t,e,i){return e?t:i?Math.ceil(t/2):0}function uc(t,e,i,s){const n=(ms("arrowUp",s)-1)/2*i.pS,r=(Xa(s/2)-1)/2*i.pS;e.beginPath(),t?(e.moveTo(i._t-n,i.ut),e.lineTo(i._t,i.ut-n),e.lineTo(i._t+n,i.ut),e.lineTo(i._t+r,i.ut),e.lineTo(i._t+r,i.ut+n),e.lineTo(i._t-r,i.ut+n),e.lineTo(i._t-r,i.ut)):(e.moveTo(i._t-n,i.ut),e.lineTo(i._t,i.ut+n),e.lineTo(i._t+n,i.ut),e.lineTo(i._t+r,i.ut),e.lineTo(i._t+r,i.ut-n),e.lineTo(i._t-r,i.ut-n),e.lineTo(i._t-r,i.ut)),e.fill()}function hc(t,e,i,s,n,r){const o=(ms("arrowUp",s)-1)/2,a=(Xa(s/2)-1)/2;return n>=e-a-2&&n<=e+a+2&&r>=(t?i:i-o)-2&&r<=(t?i+o:i)+2?!0:(()=>{if(n<e-o-3||n>e+o+3||r<(t?i-o-3:i)||r>(t?i:i+o+3))return!1;const u=Math.abs(n-e);return Math.abs(r-i)+3>=u/2})()}class i0{constructor(){this.jt=null,this.$n=new gn,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(e){this.jt=e}qn(e,i,s){this.F===e&&this.W===i||(this.F=e,this.W=i,this.jv=mn(e,i),this.$n.On()),this.vS=s}Qn(e,i){if(this.jt===null||this.jt.lt===null)return null;for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){const n=this.jt.ot[s];if(n&&n0(n,e,i))return{zOrder:"normal",externalId:n.te??""}}return null}draw(e){this.vS!=="aboveSeries"&&e.useBitmapCoordinateSpace(i=>{this.et(i)})}drawBackground(e){this.vS==="aboveSeries"&&e.useBitmapCoordinateSpace(i=>{this.et(i)})}et({context:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt!==null&&this.jt.lt!==null){e.textBaseline="middle",e.font=this.jv;for(let n=this.jt.lt.from;n<this.jt.lt.to;n++){const r=this.jt.ot[n];r.ri!==void 0&&(r.ri.ss=this.$n.Ii(e,r.ri.mS),r.ri.$t=this.F,r.ri._t=r._t-r.ri.ss/2),s0(r,e,i,s)}}}}function s0(t,e,i,s){e.fillStyle=t.R,t.ri!==void 0&&function(n,r,o,a,u,h){n.save(),n.scale(u,h),n.fillText(r,o,a),n.restore()}(e,t.ri.mS,t.ri._t,t.ri.ut,i,s),function(n,r,o){if(n.yh!==0){switch(n.wS){case"arrowDown":return void uc(!1,r,o,n.yh);case"arrowUp":return void uc(!0,r,o,n.yh);case"circle":return void function(a,u,h){const c=(ms("circle",h)-1)/2;a.beginPath(),a.arc(u._t,u.ut,c*u.pS,0,2*Math.PI,!1),a.fill()}(r,o,n.yh);case"square":return void function(a,u,h){const c=ms("square",h),d=(c-1)*u.pS/2,f=u._t-d,m=u.ut-d;a.fillRect(f,m,c*u.pS,c*u.pS)}(r,o,n.yh)}n.wS}}(t,e,function(n,r,o){const a=Math.max(1,Math.floor(r))%2/2;return{_t:Math.round(n._t*r)+a,ut:n.ut*o,pS:r}}(t,i,s))}function n0(t,e,i){return!(t.ri===void 0||!function(s,n,r,o,a,u){const h=o/2;return a>=s&&a<=s+r&&u>=n-h&&u<=n+h}(t.ri._t,t.ri.ut,t.ri.ss,t.ri.$t,e,i))||function(s,n,r){if(s.yh===0)return!1;switch(s.wS){case"arrowDown":return hc(!0,s._t,s.ut,s.yh,n,r);case"arrowUp":return hc(!1,s._t,s.ut,s.yh,n,r);case"circle":return function(o,a,u,h,c){const d=2+ms("circle",u)/2,f=o-h,m=a-c;return Math.sqrt(f*f+m*m)<=d}(s._t,s.ut,s.yh,n,r);case"square":return function(o,a,u,h,c){const d=ms("square",u),f=(d-1)/2,m=o-f,y=a-f;return h>=m&&h<=m+d&&c>=y&&c<=y+d}(s._t,s.ut,s.yh,n,r)}}(t,e,i)}function cc(t){return t==="atPriceTop"||t==="atPriceBottom"||t==="atPriceMiddle"}function r0(t,e,i,s,n,r,o,a){const u=function(y,x,P){if(cc(x.position)&&x.price!==void 0)return x.price;if("value"in(g=y)&&typeof g.value=="number")return y.value;var g;if(function(p){return"open"in p&&"high"in p&&"low"in p&&"close"in p}(y)){if(x.position==="inBar")return y.close;if(x.position==="aboveBar")return P?y.low:y.high;if(x.position==="belowBar")return P?y.high:y.low}}(i,e,o.priceScale().options().invertScale);if(u===void 0)return;const h=cc(e.position),c=a.timeScale(),d=Pi(e.size)?Math.max(e.size,0):1,f=qf(c.options().barSpacing)*d,m=f/2;switch(t.yh=f,e.position){case"inBar":case"atPriceMiddle":return t.ut=N(o.priceToCoordinate(u)),void(t.ri!==void 0&&(t.ri.ut=t.ut+m+r+.6*n));case"aboveBar":case"atPriceTop":{const y=h?0:s.gS;return t.ut=N(o.priceToCoordinate(u))-m-y,t.ri!==void 0&&(t.ri.ut=t.ut-m-.6*n,s.gS+=1.2*n),void(h||(s.gS+=f+r))}case"belowBar":case"atPriceBottom":{const y=h?0:s.MS;return t.ut=N(o.priceToCoordinate(u))+m+y,t.ri!==void 0&&(t.ri.ut=t.ut+m+r+.6*n,s.MS+=1.2*n),void(h||(s.MS+=f+r))}}}class l0{constructor(e,i,s){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new i0,this.ye=e,this.Lv=i,this.jt={ot:[],lt:null},this.Ps=s}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const e=this.Lv.options().layout;return this.Xt.qn(e.fontSize,e.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(e){this.bS=e,this.kt("data")}kt(e){this.xt=!0,e==="data"&&(this.SS=!0)}yS(e){this.xt=!0,this.Ps=e}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const e=this.Lv.timeScale(),i=this.bS;this.SS&&(this.jt.ot=i.map(h=>({wt:h.time,_t:0,ut:0,yh:0,wS:h.shape,R:h.color,te:h.id,kS:h.kS,ri:void 0})),this.SS=!1);const s=this.Lv.options().layout;this.jt.lt=null;const n=e.getVisibleLogicalRange();if(n===null)return;const r=new ns(Math.floor(n.from),Math.ceil(n.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let o=NaN;const a=Zf(e.options().barSpacing),u={gS:a,MS:a};this.jt.lt=Qf(this.jt.ot,r,!0);for(let h=this.jt.lt.from;h<this.jt.lt.to;h++){const c=i[h];c.time!==o&&(u.gS=a,u.MS=a,o=c.time);const d=this.jt.ot[h];d._t=N(e.logicalToCoordinate(c.time)),c.text!==void 0&&c.text.length>0&&(d.ri={mS:c.text,_t:0,ut:0,ss:0,$t:0});const f=this.ye.dataByIndex(c.time,0);f!==null&&r0(d,c,f,u,s.fontSize,a,this.ye,this.Lv)}this.xt=!1}}function dc(t){return{...t0,...t}}class o0{constructor(e){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=dc(e)}attached(e){this.ES(),this.Lv=e.chart,this.ye=e.series,this.$h=new l0(this.ye,N(this.Lv),this.Ps),this.dS=e.requestUpdate,this.ye.subscribeDataChanged(i=>this.IM(i)),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(e){this.BS=!0,this.bS=e,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(e,i){var s;return this.$h?((s=this.$h.renderer())==null?void 0:s.Qn(e,i))??null:null}autoscaleInfo(e,i){if(this.Ps.autoScale&&this.$h){const s=this.zS();if(s)return{priceRange:null,margins:s}}return null}cr(e){this.Ps=dc({...this.Ps,...e}),this.Jb&&this.Jb()}zS(){const e=N(this.Lv).timeScale().options().barSpacing;if(this.RS||e!==this.VS){if(this.VS=e,this.bS.length>0){const i=Zf(e),s=1.5*qf(e)+2*i,n=this.OS();this.DS={above:ac(s,n.aboveBar,n.inBar),below:ac(s,n.belowBar,n.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce((e,i)=>(e[i.position]||(e[i.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){var n;if(!this.BS||!this.Lv||!this.ye)return;const e=this.Lv.timeScale(),i=(n=this.ye)==null?void 0:n.data();if(e.getVisibleLogicalRange()==null||!this.ye||i.length===0)return void(this.PS=[]);const s=e.timeToIndex(N(i[0].time),!0);this.PS=this.bS.map((r,o)=>{const a=e.timeToIndex(r.time,!0),u=a<s?1:-1,h=N(this.ye).dataByIndex(a,u),c={time:e.timeToIndex(N(h).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,kS:o,text:r.text,size:r.size,price:r.price,Gr:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return{...c,position:r.position,price:r.price}}return{...c,position:r.position,price:r.price}}),this.BS=!1}LS(e){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(e))}IM(e){this.BS=!0,this.Jb()}}class a0 extends e0{constructor(e,i,s){super(e,i),s&&this.setMarkers(s)}setMarkers(e){this.Zh.CS(e)}markers(){return this.Zh.AS()}}function u0(t,e,i){return new a0(t,new o0({}))}({...Nf});const te="/api";async function ae(t,e){const i=await fetch(t,e);if(!i.ok){const s=await i.text();throw new Error(`API error: ${i.status} - ${s}`)}return i.json()}async function h0(){return ae(`${te}/profiles`)}async function ep(t){return ae(`${te}/profiles/${encodeURIComponent(t)}`)}async function su(t,e){await ae(`${te}/profiles/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_data:e})})}async function c0(t){return ae(`${te}/profiles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})}async function d0(t){return ae(`${te}/profiles?path=${encodeURIComponent(t)}`,{method:"DELETE"})}async function f0(t){return ae(`${te}/auth/check?profile_path=${encodeURIComponent(t)}`)}async function p0(t,e){return ae(`${te}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function Zo(t,e,i){return ae(`${te}/auth/set-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,current_password:e,new_password:i})})}async function m0(t,e){return ae(`${te}/auth/remove-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function g0(){return ae(`${te}/presets`)}async function v0(t,e){return ae(`${te}/presets/${t}/preview?profile_path=${encodeURIComponent(e)}`)}async function y0(t,e,i){const s={preset_id:t};return i&&Object.keys(i).length>0&&(s.options=i),ae(`${te}/presets/${t}/apply?profile_path=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}async function x0(t){return ae(`${te}/runtime/${t}`)}async function fc(t,e,i){await ae(`${te}/runtime/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,kill_switch:i})})}async function w0(t,e){return ae(`${te}/loop/${t}/start?profile_path=${encodeURIComponent(e)}`,{method:"POST"})}async function _0(t){return ae(`${te}/loop/${t}/stop`,{method:"POST"})}async function S0(t,e=100){return ae(`${te}/loop/${t}/log?lines=${e}`)}async function tp(t,e=50,i){const s=new URLSearchParams({limit:String(e)});i&&s.set("profile_path",i);const n=`${te}/data/${t}/trades?${s}`,r=await ae(n);return r!=null&&typeof r=="object"&&"trades"in r&&Array.isArray(r.trades)?{trades:r.trades,display_currency:r.display_currency}:{trades:Array.isArray(r)?r:[],display_currency:void 0}}async function j0(t,e=50){return ae(`${te}/data/${t}/executions?limit=${e}`)}async function b0(t){return ae(`${te}/data/${t}/rejection-breakdown`)}async function k0(t,e){const i=e?`${te}/data/${t}/stats?profile_path=${encodeURIComponent(e)}`:`${te}/data/${t}/stats`;return ae(i)}async function M0(t,e){const i=e?`${te}/data/${t}/stats-by-preset?profile_path=${encodeURIComponent(e)}`:`${te}/data/${t}/stats-by-preset`;return ae(i)}async function C0(t,e){const i=e?`${te}/data/${t}/mt5-report?profile_path=${encodeURIComponent(e)}`:`${te}/data/${t}/mt5-report`,s=await fetch(i);if(!s.ok)return null;const n=await s.json();return(n==null?void 0:n.source)==="mt5"?n:null}async function ip(t,e,i){return ae(`${te}/trades/${t}/${e}/close?profile_path=${encodeURIComponent(i)}`,{method:"POST"})}async function E0(t,e,i=!0){const s=new URLSearchParams({profile_path:e});return i&&s.set("force_profit_refresh","true"),ae(`${te}/data/${t}/sync-trades?${s}`,{method:"POST"})}async function P0(t,e,i=200){return ae(`${te}/data/${t}/technical-analysis?profile_path=${encodeURIComponent(e)}&bars=${i}`)}const ea={emaVisibility:{ema9:!0,ema13:!0,ema21:!0,ema34:!1,ema50:!1,ema89:!1,ema200:!1},showVolume:!0,showBollingerBands:!1,showSwingLevels:!1,showCrossovers:!0,showTrades:!0,showTradeLines:!0,showAllOverlays:!0,barCount:200},ta={ema9:"#f59e0b",ema13:"#3b82f6",ema21:"#8b5cf6",ema34:"#06b6d4",ema50:"#10b981",ema89:"#6366f1",ema200:"#ec4899"};function N0(){try{const t=localStorage.getItem("chartSettings");if(t){const e=JSON.parse(t);return{...ea,...e}}}catch{}return ea}function Xn(t){localStorage.setItem("chartSettings",JSON.stringify(t))}const T0=()=>{try{const t=sessionStorage.getItem("unlockedProfiles");return t?new Set(JSON.parse(t)):new Set}catch{return new Set}},Zl=t=>{sessionStorage.setItem("unlockedProfiles",JSON.stringify([...t]))};function z0(){const[t,e]=z.useState("run"),[i,s]=z.useState([]),[n,r]=z.useState(null),[o,a]=z.useState(null),[u,h]=z.useState(!1),[c,d]=z.useState(""),[f,m]=z.useState(null),[y,x]=z.useState(!1),[P,g]=z.useState(!1),[p,v]=z.useState(""),[_,M]=z.useState(""),[C,k]=z.useState(null),[T,W]=z.useState(!1),[B,D]=z.useState({}),[U,X]=z.useState(T0),[q,K]=z.useState(""),[L,j]=z.useState(null),[S,w]=z.useState(!1),E=async()=>{try{const O=await h0();s(O);const J={};await Promise.all(O.map(async H=>{try{const{has_password:at}=await f0(H.path);J[H.path]=at}catch{J[H.path]=!1}})),D(J),r(H=>O.length===0?null:H&&O.some(at=>at.path===H.path)?H:O[0])}catch(O){a(O.message)}};z.useEffect(()=>{E()},[]);const V=n&&B[n.path]&&!U.has(n.path),F=async()=>{if(n){j(null),w(!0);try{const{success:O}=await p0(n.path,q);if(O){const J=new Set(U);J.add(n.path),X(J),Zl(J),K("")}else j("Incorrect password")}catch(O){j(O.message)}finally{w(!1)}}},ie=()=>{if(!n)return;const O=new Set(U);O.delete(n.path),X(O),Zl(O),K(""),j(null)},ne=async()=>{const O=c.trim();if(!O){m("Enter a name");return}if(P){if(!p||p.length<4){m("Password must be at least 4 characters");return}if(p!==_){m("Passwords do not match");return}}m(null),x(!0);try{const J=await c0(O);if(P&&p){await Zo(J.path,null,p);const H=new Set(U);H.add(J.path),X(H),Zl(H)}await E(),r(J),d(""),v(""),M(""),g(!1),h(!1)}catch(J){m(J.message)}finally{x(!1)}},fe=async()=>{if(C){W(!0);try{await d0(C.path),E(),k(null)}catch(O){a(O.message)}finally{W(!1)}}};return l.jsxs("div",{className:"app",children:[l.jsxs("aside",{className:"sidebar",children:[l.jsx("h1",{children:"USDJPY Assistant"}),l.jsx("p",{className:"subtitle",children:"Trading Bot Dashboard"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Account"}),l.jsx("select",{value:(n==null?void 0:n.path)||"",onChange:O=>{const J=i.find(H=>H.path===O.target.value);r(J||null),K(""),j(null)},children:i.map(O=>l.jsxs("option",{value:O.path,children:[B[O.path]?" ":"",O.name]},O.path))}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{h(!u),m(null),d(""),v(""),M(""),g(!1)},children:"Add account"}),l.jsx("button",{type:"button",className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>n&&k(n),disabled:!n||i.length===0,children:"Remove account"}),n&&B[n.path]&&U.has(n.path)&&l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:ie,children:"Lock"})]})]}),u&&l.jsxs("div",{className:"card",style:{marginTop:12,padding:12},children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"New account name"}),l.jsx("input",{type:"text",value:c,onChange:O=>d(O.target.value),placeholder:"e.g. uncle_demo"})]}),l.jsx("div",{className:"form-group",style:{marginBottom:8},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:P,onChange:O=>g(O.target.checked),style:{width:"auto"}}),"Set password (recommended)"]})}),P&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:p,onChange:O=>v(O.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Confirm password"}),l.jsx("input",{type:"password",value:_,onChange:O=>M(O.target.value),placeholder:"Confirm password"})]}),l.jsx("p",{style:{fontSize:"0.7rem",color:"var(--warning)",marginBottom:8,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."})]}),f&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginBottom:8},children:f}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-primary",style:{fontSize:"0.8rem"},onClick:ne,disabled:y,children:y?"Creating":"Create"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem"},onClick:()=>{h(!1),m(null),d(""),v(""),M(""),g(!1)},disabled:y,children:"Cancel"})]})]}),C&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsx("h3",{className:"card-title",children:"Remove account"}),l.jsxs("p",{style:{marginBottom:16},children:["Remove ",l.jsx("strong",{children:C.name}),"? This will delete the profile file. Logs and trade history for this account are kept."]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-danger",onClick:fe,disabled:T,children:T?"Removing":"Remove"}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(null),disabled:T,children:"Cancel"})]})]})}),l.jsxs("nav",{style:{marginTop:24},children:[l.jsx("button",{className:`nav-item ${t==="run"?"active":""}`,onClick:()=>e("run"),children:"Run / Status"}),l.jsx("button",{className:`nav-item ${t==="analysis"?"active":""}`,onClick:()=>e("analysis"),children:"Analysis"}),l.jsx("button",{className:`nav-item ${t==="presets"?"active":""}`,onClick:()=>e("presets"),children:"Presets"}),l.jsx("button",{className:`nav-item ${t==="profile"?"active":""}`,onClick:()=>e("profile"),children:"Profile Editor"}),l.jsx("button",{className:`nav-item ${t==="logs"?"active":""}`,onClick:()=>e("logs"),children:"Logs & Stats"}),l.jsx("button",{className:`nav-item ${t==="guide"?"active":""}`,onClick:()=>e("guide"),children:"Help / Guide"})]})]}),l.jsxs("main",{className:"main-content",children:[o&&l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",o]}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>a(null),children:"Dismiss"})]}),n?V?l.jsxs("div",{className:"card",style:{maxWidth:400,margin:"40px auto",textAlign:"center"},children:[l.jsx("h2",{style:{marginBottom:16},children:"Profile Locked"}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:[l.jsx("strong",{children:n.name})," is password-protected. Enter your password to continue."]}),l.jsxs("div",{className:"form-group",style:{marginBottom:16,textAlign:"left"},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:q,onChange:O=>K(O.target.value),onKeyDown:O=>O.key==="Enter"&&F(),placeholder:"Enter password",autoFocus:!0})]}),L&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:L}),l.jsx("button",{className:"btn btn-primary",onClick:F,disabled:S||!q,style:{width:"100%",marginBottom:16},children:S?"Unlocking...":"Unlock"}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"There is no forgot-password option. If you've lost your password, contact the administrator."})]}):l.jsxs(l.Fragment,{children:[t==="run"&&l.jsx(R0,{profile:n}),t==="analysis"&&l.jsx(B0,{profile:n}),t==="presets"&&l.jsx(A0,{profile:n}),t==="profile"&&l.jsx(F0,{profile:n,authStatus:B,onAuthChange:E}),t==="logs"&&l.jsx(O0,{profile:n}),t==="guide"&&l.jsx(D0,{})]}):l.jsx("div",{className:"card",children:l.jsxs("p",{children:["No accounts yet. Use ",l.jsx("strong",{children:"Add account"})," in the sidebar to create one, or add a profile JSON in the profiles/ folder."]})})]})]})}function R0({profile:t}){const[e,i]=z.useState(null),[s,n]=z.useState(""),[r,o]=z.useState(!1),a=()=>{x0(t.name).then(i).catch(console.error),S0(t.name,50).then(f=>n(f.content)).catch(console.error)};z.useEffect(()=>{a();const f=setInterval(a,3e3);return()=>clearInterval(f)},[t.name]);const u=async f=>{e&&(await fc(t.name,f,e.kill_switch),a())},h=async f=>{e&&(await fc(t.name,e.mode,f),a())},c=async()=>{o(!0);try{await w0(t.name,t.path),a()}finally{o(!1)}},d=async()=>{o(!0);try{await _0(t.name),a()}finally{o(!1)}};return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Run / Status"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Loop Control"}),l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("span",{children:"Status:"}),e!=null&&e.loop_running?l.jsxs("span",{className:"status status-running",children:[l.jsx("span",{className:"status-dot"}),"Running"]}):l.jsxs("span",{className:"status status-stopped",children:[l.jsx("span",{className:"status-dot"}),"Stopped"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-success",onClick:c,disabled:r||(e==null?void 0:e.loop_running),children:"Start Loop"}),l.jsx("button",{className:"btn btn-danger",onClick:d,disabled:r||!(e!=null&&e.loop_running),children:"Stop Loop"})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Runtime Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Mode"}),l.jsxs("select",{value:(e==null?void 0:e.mode)||"DISARMED",onChange:f=>u(f.target.value),children:[l.jsx("option",{value:"DISARMED",children:"DISARMED"}),l.jsx("option",{value:"ARMED_MANUAL_CONFIRM",children:"ARMED_MANUAL_CONFIRM"}),l.jsx("option",{value:"ARMED_AUTO_DEMO",children:"ARMED_AUTO_DEMO"})]})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.kill_switch)||!1,onChange:f=>h(f.target.checked),style:{width:"auto"}}),"Kill Switch (disable all execution)"]})})]})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Loop Log (last 50 lines)"}),l.jsx("div",{className:"log-viewer",children:s||"(no log yet)"})]})]})}function L0(t,e,i,s){if(t.length<2||e.length<2)return[];const[n,r]=i<s?[t,e]:[e,t],o=new Map;r.forEach(u=>o.set(u.time,u.value));const a=[];for(let u=1;u<n.length;u++){const h=n[u-1].time,c=n[u].time,d=n[u-1].value,f=n[u].value,m=o.get(h),y=o.get(c);if(m===void 0||y===void 0)continue;const x=d-m,P=f-y;x<0&&P>0?a.push({time:c,type:"bullish"}):x>0&&P<0&&a.push({time:c,type:"bearish"})}return a}function pc({ohlc:t,trades:e,emaFast:i,emaSlow:s,emaStack:n,emaLines:r,bollingerSeries:o,swingLevels:a,height:u=300,onCloseTrade:h,settings:c=ea}){const d=z.useRef(null),f=z.useRef(null),m=z.useRef(null);if(z.useEffect(()=>{if(!d.current||t.length===0)return;const x=Dy(d.current,{width:d.current.clientWidth,height:u,layout:{background:{color:"#131722"},textColor:"#787B86"},grid:{vertLines:{color:"rgba(42, 46, 57, 0.6)"},horzLines:{color:"rgba(42, 46, 57, 0.6)"}},crosshair:{mode:1},rightPriceScale:{borderColor:"rgba(42, 46, 57, 0.6)"},timeScale:{borderColor:"rgba(42, 46, 57, 0.6)",timeVisible:!0,secondsVisible:!1}});f.current=x;const P=x.addSeries(Gy,{upColor:"#26a69a",downColor:"#ef5350",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickUpColor:"#26a69a",wickDownColor:"#ef5350"});m.current=P;const g=t.map(_=>({time:_.time,open:_.open,high:_.high,low:_.low,close:_.close}));if(P.setData(g),c.showVolume&&c.showAllOverlays&&t.some(_=>_.volume!==void 0)){const _=x.addSeries(Zy,{priceFormat:{type:"volume"},priceScaleId:"volume",lastValueVisible:!1,priceLineVisible:!1});x.priceScale("volume").applyOptions({scaleMargins:{top:.8,bottom:0}});const M=t.map(C=>({time:C.time,value:C.volume||0,color:C.close>=C.open?"rgba(38, 166, 154, 0.5)":"rgba(239, 83, 80, 0.5)"}));_.setData(M)}if(c.showBollingerBands&&c.showAllOverlays&&o){const _={lastValueVisible:!1,priceLineVisible:!1,lineWidth:1};o.upper&&o.upper.length>0&&x.addSeries(Ut,{color:"rgba(149, 165, 166, 0.5)",..._}).setData(o.upper.map(C=>({time:C.time,value:C.value}))),o.middle&&o.middle.length>0&&x.addSeries(Ut,{color:"rgba(149, 165, 166, 0.7)",..._}).setData(o.middle.map(C=>({time:C.time,value:C.value}))),o.lower&&o.lower.length>0&&x.addSeries(Ut,{color:"rgba(149, 165, 166, 0.5)",..._}).setData(o.lower.map(C=>({time:C.time,value:C.value})))}if(c.showSwingLevels&&c.showAllOverlays&&a&&(a.highs.slice(-5).forEach(_=>{const M=x.addSeries(Ut,{color:"rgba(38, 166, 154, 0.35)",lineWidth:1,lineStyle:Us.SparseDotted,lastValueVisible:!1,priceLineVisible:!1}),C=t[t.length-1].time;M.setData([{time:_.time,value:_.price},{time:C,value:_.price}])}),a.lows.slice(-5).forEach(_=>{const M=x.addSeries(Ut,{color:"rgba(239, 83, 80, 0.35)",lineWidth:1,lineStyle:Us.SparseDotted,lastValueVisible:!1,priceLineVisible:!1}),C=t[t.length-1].time;M.setData([{time:_.time,value:_.price},{time:C,value:_.price}])})),c.showAllOverlays){const _={lastValueVisible:!1,priceLineVisible:!1};r?["ema9","ema13","ema21","ema34","ema50","ema89","ema200"].forEach(C=>{const k=C;if(c.emaVisibility[k]&&r[C]&&r[C].length>0){const T=ta[C]||"#94a3b8";x.addSeries(Ut,{color:T,lineWidth:1,..._}).setData(r[C].map(B=>({time:B.time,value:B.value})))}}):n&&Object.entries(n).forEach(([M,C])=>{if(C&&C.length>0){const k=ta[M]||"#94a3b8";x.addSeries(Ut,{color:k,lineWidth:1,..._}).setData(C.map(W=>({time:W.time,value:W.value})))}})}const p=[];if(c.showTrades&&c.showAllOverlays&&e.forEach(_=>{const M=_.side.toLowerCase()==="buy",T=M?"#3b82f6":"#ef4444";_.entry_time!=null&&p.push({time:_.entry_time,position:M?"belowBar":"aboveBar",color:T,shape:M?"arrowUp":"arrowDown",text:""}),_.exit_time!=null&&p.push({time:_.exit_time,position:M?"aboveBar":"belowBar",color:T,shape:"circle",text:""})}),c.showSwingLevels&&c.showAllOverlays&&a&&(a.highs.forEach(_=>{p.push({time:_.time,position:"aboveBar",color:"#26a69a",shape:"arrowDown",text:"",size:.5})}),a.lows.forEach(_=>{p.push({time:_.time,position:"belowBar",color:"#ef5350",shape:"arrowUp",text:"",size:.5})})),c.showCrossovers&&c.showAllOverlays&&r){const _=[],M=["ema9","ema13","ema21","ema34","ema50","ema89","ema200"],C={ema9:9,ema13:13,ema21:21,ema34:34,ema50:50,ema89:89,ema200:200};M.forEach(k=>{const T=k;c.emaVisibility[T]&&r[k]&&r[k].length>0&&_.push({period:C[k],data:r[k]})});for(let k=0;k<_.length;k++)for(let T=k+1;T<_.length;T++)L0(_[k].data,_[T].data,_[k].period,_[T].period).forEach(B=>{p.push({time:B.time,position:B.type==="bullish"?"belowBar":"aboveBar",color:B.type==="bullish"?"#26a69a":"#ef5350",shape:"circle",text:"X",size:1})})}p.sort((_,M)=>_.time-M.time),p.length>0&&u0(P).setMarkers(p),c.showTradeLines&&c.showAllOverlays&&e.filter(M=>M.entry_time&&M.exit_time&&M.entry_price&&M.exit_price).forEach(M=>{x.addSeries(Ut,{color:M.side.toLowerCase()==="buy"?"rgba(59, 130, 246, 0.7)":"rgba(239, 68, 68, 0.7)",lineWidth:2,lineStyle:Us.Dotted,lastValueVisible:!1,priceLineVisible:!1}).setData([{time:M.entry_time,value:M.entry_price},{time:M.exit_time,value:M.exit_price}])}),x.timeScale().fitContent();const v=()=>{d.current&&f.current&&f.current.applyOptions({width:d.current.clientWidth})};return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v),x.remove()}},[t,e,i,s,n,r,o,a,u,c]),t.length===0)return l.jsx("div",{style:{height:u,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)",borderRadius:6,color:"var(--text-secondary)"},children:"No chart data available"});const y=e.filter(x=>!x.exit_time&&!x.exit_price);return l.jsxs("div",{style:{position:"relative",width:"100%",height:u},children:[l.jsx("div",{ref:d,style:{width:"100%",height:u,borderRadius:6,overflow:"hidden"}}),h&&y.length>0&&l.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(19, 23, 34, 0.9)",border:"1px solid rgba(42, 46, 57, 0.6)",borderRadius:6,padding:8,fontSize:"0.75rem",maxWidth:180,zIndex:10},children:[l.jsx("div",{style:{fontWeight:600,marginBottom:6,color:"#787B86"},children:"Active Trades"}),y.map(x=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"4px 0",borderTop:"1px solid rgba(42, 46, 57, 0.6)"},children:[l.jsxs("span",{style:{color:x.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:500},children:[x.side.toUpperCase()," @ ",x.entry_price.toFixed(3)]}),l.jsx("button",{onClick:()=>h(x),style:{background:"var(--danger)",border:"none",borderRadius:3,color:"white",padding:"2px 6px",fontSize:"0.65rem",cursor:"pointer"},children:"Close"})]},x.trade_id))]})]})}function mc({settings:t,onSettingsChange:e,onBarCountChange:i}){const[s,n]=z.useState(!1),r=c=>{const d={...t,emaVisibility:{...t.emaVisibility,[c]:!t.emaVisibility[c]}};e(d),Xn(d)},o=c=>{const d={...t,[c]:!t[c]};e(d),Xn(d)},a=()=>{const c={...t,showAllOverlays:!t.showAllOverlays};e(c),Xn(c)},u=c=>{const d={...t,barCount:c};e(d),Xn(d),i&&i(c)},h=[{key:"ema9",label:"EMA 9"},{key:"ema13",label:"EMA 13"},{key:"ema21",label:"EMA 21"},{key:"ema34",label:"EMA 34"},{key:"ema50",label:"EMA 50"},{key:"ema89",label:"EMA 89"},{key:"ema200",label:"EMA 200"}];return l.jsxs("div",{style:{position:"absolute",top:8,left:8,zIndex:20},children:[l.jsxs("button",{onClick:()=>n(!s),style:{background:"rgba(19, 23, 34, 0.9)",border:"1px solid rgba(42, 46, 57, 0.6)",borderRadius:4,color:"#787B86",padding:"4px 8px",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",gap:4},children:["Settings ",s?"":""]}),s&&l.jsxs("div",{style:{marginTop:4,background:"rgba(19, 23, 34, 0.95)",border:"1px solid rgba(42, 46, 57, 0.6)",borderRadius:6,padding:12,minWidth:180},children:[l.jsx("div",{style:{marginBottom:12},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"0.75rem",fontWeight:600,color:t.showAllOverlays?"#d1d5db":"#ef4444"},children:[l.jsx("input",{type:"checkbox",checked:t.showAllOverlays,onChange:a,style:{width:"auto",margin:0}}),t.showAllOverlays?"All Overlays On":"Candles Only"]})}),l.jsxs("div",{style:{marginBottom:12,borderTop:"1px solid rgba(42, 46, 57, 0.6)",paddingTop:12,opacity:t.showAllOverlays?1:.4,pointerEvents:t.showAllOverlays?"auto":"none"},children:[l.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"#787B86",marginBottom:8,textTransform:"uppercase"},children:"EMAs"}),h.map(({key:c,label:d})=>l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.emaVisibility[c]?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.emaVisibility[c],onChange:()=>r(c),style:{width:"auto",margin:0}}),l.jsx("span",{style:{width:10,height:10,borderRadius:"50%",background:ta[c]}}),d]},c))]}),l.jsxs("div",{style:{marginBottom:12,borderTop:"1px solid rgba(42, 46, 57, 0.6)",paddingTop:12,opacity:t.showAllOverlays?1:.4,pointerEvents:t.showAllOverlays?"auto":"none"},children:[l.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"#787B86",marginBottom:8,textTransform:"uppercase"},children:"Indicators"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showBollingerBands?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showBollingerBands,onChange:()=>o("showBollingerBands"),style:{width:"auto",margin:0}}),"Bollinger Bands"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showSwingLevels?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showSwingLevels,onChange:()=>o("showSwingLevels"),style:{width:"auto",margin:0}}),"Swing Levels"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showCrossovers?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showCrossovers,onChange:()=>o("showCrossovers"),style:{width:"auto",margin:0}}),"EMA Crossovers"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showVolume?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showVolume,onChange:()=>o("showVolume"),style:{width:"auto",margin:0}}),"Volume"]})]}),l.jsxs("div",{style:{marginBottom:12,borderTop:"1px solid rgba(42, 46, 57, 0.6)",paddingTop:12,opacity:t.showAllOverlays?1:.4,pointerEvents:t.showAllOverlays?"auto":"none"},children:[l.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"#787B86",marginBottom:8,textTransform:"uppercase"},children:"Trades"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showTrades?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showTrades,onChange:()=>o("showTrades"),style:{width:"auto",margin:0}}),"Trade Markers"]}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4,cursor:"pointer",fontSize:"0.75rem",color:t.showTradeLines?"#d1d5db":"#787B86"},children:[l.jsx("input",{type:"checkbox",checked:t.showTradeLines,onChange:()=>o("showTradeLines"),style:{width:"auto",margin:0}}),"Entry/Exit Lines"]})]}),l.jsxs("div",{style:{borderTop:"1px solid rgba(42, 46, 57, 0.6)",paddingTop:12},children:[l.jsx("div",{style:{fontSize:"0.7rem",fontWeight:600,color:"#787B86",marginBottom:8,textTransform:"uppercase"},children:"Bars"}),l.jsxs("select",{value:t.barCount,onChange:c=>u(Number(c.target.value)),style:{width:"100%",padding:"4px 8px",fontSize:"0.75rem",background:"rgba(42, 46, 57, 0.6)",border:"1px solid rgba(42, 46, 57, 0.8)",borderRadius:4,color:"#d1d5db"},children:[l.jsx("option",{value:100,children:"100 bars"}),l.jsx("option",{value:200,children:"200 bars"}),l.jsx("option",{value:300,children:"300 bars"})]})]})]})]})}function B0({profile:t}){const[e,i]=z.useState(null),[s,n]=z.useState(!0),[r,o]=z.useState(null),[a,u]=z.useState(null),[h,c]=z.useState(null),[d,f]=z.useState(null),[m,y]=z.useState([]),[x,P]=z.useState(null),[g,p]=z.useState(null),[v,_]=z.useState(!1),[M,C]=z.useState(N0),k=async j=>{try{const S=j??M.barCount,[w,E]=await Promise.all([P0(t.name,t.path,S),tp(t.name,50).then(F=>F.trades).catch(()=>[])]);i(w);const V=E.filter(F=>F.trade_id&&F.entry_price).map(F=>{const ie=F.timestamp_utc,ne=F.exit_timestamp_utc,fe=ie?Math.floor(new Date(ie).getTime()/1e3):void 0,O=ne?Math.floor(new Date(ne).getTime()/1e3):void 0;return{trade_id:String(F.trade_id),entry_price:Number(F.entry_price),stop_price:F.stop_price!=null?Number(F.stop_price):null,target_price:F.target_price!=null?Number(F.target_price):null,side:String(F.side||"buy"),entry_time:fe,exit_time:O,exit_price:F.exit_price!=null?Number(F.exit_price):void 0}});y(V),o(null),f(new Date)}catch(S){o(S.message)}finally{n(!1)}};z.useEffect(()=>{n(!0),k();const j=setInterval(k,3e4);return()=>clearInterval(j)},[t.name,t.path]),z.useEffect(()=>{const j=S=>{S.key==="Escape"&&x&&P(null)};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[x]);const T=async j=>{_(!0);try{await ip(t.name,j.trade_id,t.path),p(null),k()}catch(S){alert(`Failed to close trade: ${S.message}`)}finally{_(!1)}},W=j=>{u(a===j?null:j)},B=j=>{const S={bull:{bg:"rgba(16, 185, 129, 0.2)",color:"var(--success)"},bear:{bg:"rgba(239, 68, 68, 0.2)",color:"var(--danger)"},sideways:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"},unknown:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"}},w=S[j]||S.unknown;return l.jsx("span",{style:{padding:"4px 10px",borderRadius:4,background:w.bg,color:w.color,fontWeight:600,fontSize:"0.85rem",textTransform:"uppercase"},children:j})},D=j=>{const S={oversold:"var(--success)",overbought:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:S[j.zone]||"inherit"},children:j.zone.charAt(0).toUpperCase()+j.zone.slice(1)}),j.value!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",j.value.toFixed(1),")"]})]})},U=j=>{const S={positive:"var(--success)",negative:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsx("span",{style:{color:S[j.direction]||"inherit"},children:j.direction.charAt(0).toUpperCase()+j.direction.slice(1)})},X=j=>{const S={elevated:"var(--warning)",low:"var(--accent)",normal:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:S[j.state]||"inherit"},children:j.state.charAt(0).toUpperCase()+j.state.slice(1)}),j.value_pips!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",j.value_pips," pips)"]})]})},q=["H4","H1","M30","M15","M5","M3","M1"],K={H4:"4H",H1:"1H",M30:"30m",M15:"15m",M5:"5m",M3:"3m",M1:"1m"},L=j=>{const S=[];if(j.ema_stack&&Object.keys(j.ema_stack).length>0){const w=Object.keys(j.ema_stack).map(E=>E.replace(/^ema/i,"")).filter(Boolean).sort((E,V)=>parseInt(E,10)-parseInt(V,10));w.length>0&&S.push(`EMA ${w.join("/")}`)}return j.ema_fast&&j.ema_fast.length>0&&j.ema_slow&&j.ema_slow.length>0&&S.push("SMA slow"),S.length>0?S.join("  "):""};return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Technical Analysis"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[d&&l.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:["Updated: ",d.toLocaleTimeString()]}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>k(),disabled:s,children:s?"Loading...":"Refresh"})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16,fontSize:"0.9rem"},children:"Real-time technical analysis across multiple timeframes. Auto-refreshes every 30 seconds. Click on a timeframe to expand detailed view."}),r&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--danger)"},children:l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",r]})}),(e==null?void 0:e.current_tick)&&l.jsx("div",{className:"card mb-4",children:l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.bid.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Bid"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.ask.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Ask"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsxs("div",{className:"stat-value",style:{color:e.current_tick.spread_pips>1?"var(--warning)":"var(--success)"},children:[e.current_tick.spread_pips," pips"]}),l.jsx("div",{className:"stat-label",children:"Spread"})]})]})}),e&&q.map(j=>{var E,V,F,ie,ne,fe,O,J;const S=e.timeframes[j];if(!S)return null;const w=a===j;return l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{className:"flex-between",style:{marginBottom:w?16:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:"1.1rem",minWidth:40},children:j}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:K[j]||j})]}),B(S.regime)]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),D(S.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),U(S.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),X(S.atr)]}),l.jsx("button",{type:"button",onClick:()=>W(j),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"var(--accent)",fontSize:"0.9rem"},"aria-label":w?"Collapse chart":"Expand chart",children:w?"":""})]})]}),!w&&l.jsx("p",{style:{margin:"12px 0 0 0",color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:S.summary}),w&&l.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},onClick:H=>H.stopPropagation(),children:[l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsxs("h4",{style:{margin:0,color:"var(--accent)",fontSize:"0.9rem"},children:[j," Chart (",K[j]||j,")"]}),L(S)&&l.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:L(S)}),m.length>0&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["(",m.filter(H=>!H.exit_time).length," open, ",m.length," total)"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem",marginLeft:"auto"},onClick:()=>c(h===j?null:j),children:h===j?"Shrink":"Enlarge"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem"},onClick:()=>P(j),children:"Fullscreen"})]}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx(mc,{settings:M,onSettingsChange:C,onBarCountChange:H=>k(H)}),l.jsx(pc,{ohlc:S.ohlc||[],trades:m,emaFast:S.ema_fast,emaSlow:S.ema_slow,emaStack:S.ema_stack,emaLines:S.ema_lines,bollingerSeries:S.bollinger_series,swingLevels:S.swing_levels,height:h===j?520:280,onCloseTrade:H=>p(H),settings:M})]})]}),l.jsx("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:16,borderLeft:"4px solid var(--accent)"},children:l.jsx("p",{style:{margin:0,fontSize:"0.95rem"},children:S.summary})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"RSI (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((E=S.rsi.value)==null?void 0:E.toFixed(2))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Zone:"}),l.jsx("span",{style:{marginLeft:8},children:D(S.rsi)})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[S.rsi.zone==="oversold"&&"Price may be undervalued. Potential buy opportunity if trend supports.",S.rsi.zone==="overbought"&&"Price may be overextended. Consider caution with longs.",S.rsi.zone==="neutral"&&"Momentum is balanced. Follow the trend direction."]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"MACD (12,26,9)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Line:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((V=S.macd.line)==null?void 0:V.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Signal:"}),l.jsx("span",{style:{marginLeft:8},children:((F=S.macd.signal)==null?void 0:F.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Histogram:"}),l.jsx("span",{style:{marginLeft:8,color:S.macd.histogram&&S.macd.histogram>0?"var(--success)":"var(--danger)"},children:((ie=S.macd.histogram)==null?void 0:ie.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Direction:"}),l.jsx("span",{style:{marginLeft:8},children:U(S.macd)})]})]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"ATR (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((ne=S.atr.value)==null?void 0:ne.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Pips:"}),l.jsx("span",{style:{marginLeft:8},children:S.atr.value_pips??"-"})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[S.atr.state==="elevated"&&"Volatility is high. Consider wider stops and smaller position sizes.",S.atr.state==="low"&&"Volatility is low. Smaller moves expected, watch for breakouts.",S.atr.state==="normal"&&"Volatility is within normal range."]})]}),(()=>{const H=S.bollinger;return!H||typeof H!="object"?null:l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Bollinger Bands (20, 2)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Upper:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:H.upper!=null?Number(H.upper).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Middle:"}),l.jsx("span",{style:{marginLeft:8},children:H.middle!=null?Number(H.middle).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Lower:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:H.lower!=null?Number(H.lower).toFixed(5):"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Price relative to bands indicates volatility and potential mean reversion. For display only; not used in automation."})]})})(),typeof S.vwap=="number"&&l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"VWAP"}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:Number(S.vwap).toFixed(5)})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Volume-weighted average price (uses tick volume when available). For display only; not used in automation."})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Price Levels (100-bar)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Current:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((fe=S.price.current)==null?void 0:fe.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent High:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--success)"},children:((O=S.price.recent_high)==null?void 0:O.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent Low:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--danger)"},children:((J=S.price.recent_low)==null?void 0:J.toFixed(3))??"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:S.price.current&&S.price.recent_high&&S.price.recent_low&&l.jsxs(l.Fragment,{children:["Price is ",((S.price.current-S.price.recent_low)/(S.price.recent_high-S.price.recent_low)*100).toFixed(0),"% of the way from recent low to high."]})})]})]})]})]},j)}),s&&!e&&l.jsx("div",{className:"card",children:l.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center"},children:"Loading technical analysis..."})}),x&&e&&e.timeframes[x]&&(()=>{const j=e.timeframes[x],S=typeof window<"u"?window.innerHeight-200:500;return l.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-primary)",zIndex:1e3,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[l.jsxs("h2",{style:{margin:0,fontSize:"1.2rem"},children:[x," Chart (",K[x]||x,")"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>P(null),children:"Close (ESC)"})]}),l.jsxs("div",{style:{flex:1,padding:16,overflow:"hidden",position:"relative"},children:[l.jsx(mc,{settings:M,onSettingsChange:C,onBarCountChange:w=>k(w)}),l.jsx(pc,{ohlc:j.ohlc||[],trades:m,emaFast:j.ema_fast,emaSlow:j.ema_slow,emaStack:j.ema_stack,emaLines:j.ema_lines,bollingerSeries:j.bollinger_series,swingLevels:j.swing_levels,height:S,onCloseTrade:w=>p(w),settings:M})]}),l.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--border)",background:"var(--bg-secondary)",display:"flex",flexWrap:"wrap",gap:20,alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"Regime:"}),B(j.regime)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),D(j.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),U(j.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),X(j.atr)]}),l.jsx("div",{style:{flex:1,minWidth:200},children:l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:j.summary})})]})]})})(),g&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:1100,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:8,padding:24,maxWidth:400,width:"90%",border:"1px solid var(--border)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:"Close Trade?"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:8},children:"Are you sure you want to close this trade?"}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:20},children:[l.jsxs("div",{style:{color:g.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:600,fontSize:"1rem"},children:[g.side.toUpperCase()," @ ",g.entry_price.toFixed(3)]}),g.stop_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:4},children:["SL: ",g.stop_price.toFixed(3)]}),g.target_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["TP: ",g.target_price.toFixed(3)]})]}),l.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(null),disabled:v,children:"Cancel"}),l.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>T(g),disabled:v,style:{background:"var(--danger)"},children:v?"Closing...":"Close Trade"})]})]})})]})}const eo={scalper:{default:{label:"Default (5, 9, 13)",values:[5,9,13]},alt1:{label:"Ultra-fast (3, 5, 8)",values:[3,5,8]},alt2:{label:"Standard (8, 13, 21)",values:[8,13,21]}},day_trader:{default:{label:"Default (13, 21, 34)",values:[13,21,34]},alt1:{label:"Faster (8, 13, 21)",values:[8,13,21]},alt2:{label:"Slower (21, 34, 55)",values:[21,34,55]}},swing_trader:{default:{label:"Default (21, 50, 100)",values:[21,50,100]},alt1:{label:"Classic (20, 50, 200)",values:[20,50,200]},alt2:{label:"Medium (34, 89, 144)",values:[34,89,144]}}};function Re({label:t,value:e,onAdjust:i,onChange:s,step:n=1,min:r,max:o}){if(e==null)return null;const a=u=>{const h=parseFloat(u.target.value);if(!isNaN(h)&&s){let c=h;r!==void 0&&(c=Math.max(r,c)),o!==void 0&&(c=Math.min(o,c)),s(c)}};return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--bg-secondary)",borderRadius:6,border:"1px solid var(--border)"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:t}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("button",{onClick:()=>i(-1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),l.jsx("input",{type:"number",value:n<1?e.toFixed(2):e,onChange:a,step:n,min:r,max:o,style:{width:60,textAlign:"center",fontWeight:600,fontFamily:"monospace",padding:"4px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",fontSize:"0.85rem"}}),l.jsx("button",{onClick:()=>i(1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})}function I0({profile:t,currentProfile:e,onComplete:i}){var K,L,j,S,w,E,V,F,ie,ne,fe,O,J,H,at,di,We,jn,Ft,bn,Ot;const[s,n]=z.useState(1),[r,o]=z.useState({tradingStyle:null,riskTolerance:null,entryStyle:null,emaStack:"default",multipleStrategyA:null,multipleStrategyB:null}),[a,u]=z.useState(!1),[h,c]=z.useState(!1),[d,f]=z.useState(!1),[m,y]=z.useState(null),[x,P]=z.useState(null),g=r.entryStyle==="multiple"?[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Choose Strategies",description:"Pick two strategies to combine"},{num:5,title:"Review",description:"Review your configuration"},{num:6,title:"Fine-Tune",description:"Adjust individual settings"}]:[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Review",description:"Review your configuration"},{num:5,title:"Fine-Tune",description:"Adjust individual settings"}],[p,v]=z.useState(null),_=r.entryStyle==="multiple"?6:5;z.useEffect(()=>{r.entryStyle!=="multiple"&&s>5&&n(5)},[r.entryStyle,s]);const M=()=>{switch(s){case 1:return r.tradingStyle!==null;case 2:return r.riskTolerance!==null;case 3:return r.entryStyle!==null;case 4:return r.entryStyle==="multiple"?r.multipleStrategyA!==null&&r.multipleStrategyB!==null&&r.multipleStrategyA!==r.multipleStrategyB:!0;default:return!0}},C=()=>{const b=e,Y={schema_version:1,profile_name:t.name,symbol:(b==null?void 0:b.symbol)??"USDJPY",pip_size:.01,broker_type:(b==null?void 0:b.broker_type)??"mt5",oanda_token:(b==null?void 0:b.oanda_token)??null,oanda_account_id:(b==null?void 0:b.oanda_account_id)??null,oanda_environment:(b==null?void 0:b.oanda_environment)??"practice",display_currency:(b==null?void 0:b.display_currency)??"USD",deposit_amount:(b==null?void 0:b.deposit_amount)??null,leverage_ratio:(b==null?void 0:b.leverage_ratio)??null,created_utc:(b==null?void 0:b.created_utc)??new Date().toISOString().slice(0,19).replace("T"," ")+"Z",risk:{},strategy:{timeframes:{},setups:{},filters:{alignment:{enabled:!1,method:"score",weights:{H4:1,M15:1,M1:1},min_score_to_trade:-3},ema_stack_filter:{enabled:!1,timeframe:"M1",periods:[8,13,21],min_separation_pips:0},atr_filter:{enabled:!1,timeframe:"M1",atr_period:14,min_atr_pips:0,max_atr_pips:null}}},trade_management:{target:{}},execution:{policies:[],loop_poll_seconds:5,loop_poll_seconds_fast:2}},I=Y.risk,$=Y.strategy,Z=$.timeframes,ve=$.setups,ye=Y.trade_management.target,xe=Y.execution,_e=(()=>{var kt;if(!r.tradingStyle)return[8,13,21];const _s=eo[r.tradingStyle],Li=r.emaStack||"default";return((kt=_s[Li])==null?void 0:kt.values)||_s.default.values})();switch(r.tradingStyle){case"scalper":Z.M1={ema_fast:9,sma_slow:21,ema_stack:_e},Z.M15={ema_fast:9,sma_slow:21,ema_stack:_e},Z.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ve.m1_cross_entry={enabled:!0,timeframe:"M1",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:3}},ye.mode="fixed_pips",ye.pips_default=8,ye.rr_default=1,xe.loop_poll_seconds=3,xe.loop_poll_seconds_fast=1;break;case"day_trader":Z.M1={ema_fast:13,sma_slow:30,ema_stack:_e},Z.M15={ema_fast:13,sma_slow:30,ema_stack:_e},Z.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ve.m15_cross_entry={enabled:!0,timeframe:"M15",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:5}},ye.mode="fixed_pips",ye.pips_default=15,ye.rr_default=1.5,xe.loop_poll_seconds=10,xe.loop_poll_seconds_fast=5;break;case"swing_trader":Z.M1={ema_fast:21,sma_slow:50,ema_stack:_e},Z.M15={ema_fast:21,sma_slow:50,ema_stack:_e},Z.H4={ema_fast:21,sma_slow:50,ema_stack:_e},ve.h4_cross_entry={enabled:!0,timeframe:"H4",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:2}},ye.mode="fixed_pips",ye.pips_default=30,ye.rr_default=2,xe.loop_poll_seconds=60,xe.loop_poll_seconds_fast=30;break}const $t=(e==null?void 0:e.risk)||{},xs=$t.max_lots??.1,ws=$t.max_spread_pips??2,ol=$t.max_trades_per_day??10,al=$t.min_stop_pips,ul=typeof al=="number"&&al>=0?Math.max(1,Math.min(100,al)):10;switch(r.riskTolerance){case"conservative":I.max_lots=Math.round(xs*.35*100)/100||.05,I.max_spread_pips=Math.round(ws*.25*10)/10||.5,I.min_stop_pips=ul,I.max_trades_per_day=Math.max(1,Math.round(ol*.5)),I.max_open_trades=1,I.cooldown_minutes_after_loss=15,I.require_stop=!0,I.risk_per_trade_pct=.5,I.max_daily_loss_pct=2;break;case"moderate":I.max_lots=Math.round(xs*.67*100)/100||.1,I.max_spread_pips=Math.round(ws*.5*10)/10||.8,I.min_stop_pips=ul,I.max_trades_per_day=Math.max(1,Math.round(ol*1)),I.max_open_trades=2,I.cooldown_minutes_after_loss=5,I.require_stop=!0,I.risk_per_trade_pct=1,I.max_daily_loss_pct=4;break;case"aggressive":I.max_lots=Math.round(xs*1*100)/100||.15,I.max_spread_pips=Math.round(ws*.6*10)/10||1.2,I.min_stop_pips=ul,I.max_trades_per_day=Math.max(1,Math.round(ol*1)),I.max_open_trades=3,I.cooldown_minutes_after_loss=0,I.require_stop=!0,I.risk_per_trade_pct=2,I.max_daily_loss_pct=6;break}const Ie=[],kn=Object.keys(ve)[0]||"m1_cross_entry",gt=r.tradingStyle==="swing_trader"?"H4":r.tradingStyle==="day_trader"?"M15":"M1",vt=ye.pips_default,yt=I.min_stop_pips;switch(r.entryStyle){case"ema_cross":Ie.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:kn});break;case"rsi_dips":Ie.push({type:"indicator_based",id:"custom_rsi_buy",enabled:!0,timeframe:gt,regime:"bull",side:"buy",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"oversold",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:vt,sl_pips:yt}),Ie.push({type:"indicator_based",id:"custom_rsi_sell",enabled:!0,timeframe:gt,regime:"bear",side:"sell",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"overbought",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:vt,sl_pips:yt});break;case"price_levels":$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Ie.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:kn});break;case"bollinger_bands":Ie.push({type:"bollinger_bands",id:"custom_bb_buy",enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:vt,sl_pips:yt}),Ie.push({type:"bollinger_bands",id:"custom_bb_sell",enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:vt,sl_pips:yt});break;case"vwap":Ie.push({type:"vwap",id:"custom_vwap_buy",enabled:!0,timeframe:gt,trigger:"cross_above",side:"buy",tp_pips:vt,sl_pips:yt}),Ie.push({type:"vwap",id:"custom_vwap_sell",enabled:!0,timeframe:gt,trigger:"cross_below",side:"sell",tp_pips:vt,sl_pips:yt});break;case"multiple":{const _s=(Li,kt)=>{if(Li==="ema_cross"){Ie.push({type:"confirmed_cross",id:`${kt}_ema_cross`,enabled:!0,setup_id:kn});return}if(Li==="price_levels"){$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Ie.push({type:"confirmed_cross",id:`${kt}_confirmed_cross`,enabled:!0,setup_id:kn});return}if(Li==="bollinger_bands"){Ie.push({type:"bollinger_bands",id:`${kt}_bb_buy`,enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:vt,sl_pips:yt}),Ie.push({type:"bollinger_bands",id:`${kt}_bb_sell`,enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:vt,sl_pips:yt});return}Li==="vwap"&&(Ie.push({type:"vwap",id:`${kt}_vwap_buy`,enabled:!0,timeframe:gt,trigger:"cross_above",side:"buy",tp_pips:vt,sl_pips:yt}),Ie.push({type:"vwap",id:`${kt}_vwap_sell`,enabled:!0,timeframe:gt,trigger:"cross_below",side:"sell",tp_pips:vt,sl_pips:yt}))};r.multipleStrategyA&&_s(r.multipleStrategyA,"custom_ms_a"),r.multipleStrategyB&&_s(r.multipleStrategyB,"custom_ms_b");break}}xe.policies=Ie;const sp=r.tradingStyle==="scalper"?"Scalp":r.tradingStyle==="day_trader"?"DayT":"Swing",np=r.riskTolerance==="conservative"?"Cons":r.riskTolerance==="moderate"?"Mod":"Agg",rp=r.entryStyle==="ema_cross"?"EMAC":r.entryStyle==="rsi_dips"?"RSI":r.entryStyle==="price_levels"?"PL":r.entryStyle==="bollinger_bands"?"BB":r.entryStyle==="vwap"?"VWAP":"MS";return Y.active_preset_name=`Custom: ${sp}/${np}/${rp}`,Y},k=()=>{if(s<_&&n(s+1),s===3&&r.entryStyle!=="multiple"||s===4&&r.entryStyle==="multiple"){const b=C();P(b),v(JSON.parse(JSON.stringify(b)))}},T=()=>{s>1&&n(s-1)},W=async()=>{f(!0),y(null);try{const b=JSON.parse(JSON.stringify(p||x||C())),Y=(e==null?void 0:e.risk)||{},I=b.risk||{};b.risk=Y;const $=(Z,ve)=>typeof Z=="number"&&typeof ve=="number"?Math.min(Z,ve):Z;b.effective_risk={...I,max_lots:$(I.max_lots??.1,Y.max_lots??1),max_spread_pips:$(I.max_spread_pips??2,Y.max_spread_pips??5),max_trades_per_day:$(I.max_trades_per_day??10,Y.max_trades_per_day??100),max_open_trades:$(I.max_open_trades??2,Y.max_open_trades??10)},b.broker_type=(e==null?void 0:e.broker_type)??"mt5",b.oanda_token=(e==null?void 0:e.oanda_token)??null,b.oanda_account_id=(e==null?void 0:e.oanda_account_id)??null,b.oanda_environment=(e==null?void 0:e.oanda_environment)??"practice",b.display_currency=(e==null?void 0:e.display_currency)??"USD",b.deposit_amount=(e==null?void 0:e.deposit_amount)??null,b.leverage_ratio=(e==null?void 0:e.leverage_ratio)??null,e!=null&&e.created_utc&&(b.created_utc=e.created_utc),await su(t.path,b),i()}catch(b){y(b.message)}finally{f(!1)}},B=()=>{x&&v(JSON.parse(JSON.stringify(x)))},D=(b,Y)=>{if(!p)return;const I=JSON.parse(JSON.stringify(p));let $=I;for(let Z=0;Z<b.length-1;Z++)$[b[Z]]===void 0&&($[b[Z]]={}),$=$[b[Z]];$[b[b.length-1]]=Y,v(I)},U=(b,Y,I,$,Z)=>{if(!p)return;let ve=p;for(let Dt=0;Dt<b.length-1;Dt++)if(ve=ve[b[Dt]],!ve)return;const ye=ve[b[b.length-1]];if(typeof ye!="number")return;let xe=ye+Y*(Z||1);I!==void 0&&(xe=Math.max(I,xe)),$!==void 0&&(xe=Math.min($,xe)),D(b,Number(xe.toFixed(4)))},X=(()=>{if(s!==5||!p||!e)return!1;const b=e.risk||{},Y=b.max_lots,I=b.max_spread_pips,$=b.max_trades_per_day,Z=p.risk||{},ve=Z.max_lots,ye=Z.max_spread_pips,xe=Z.max_trades_per_day,Dt=Y!=null&&ve!=null&&ve>Y,_e=I!=null&&ye!=null&&ye>I,$t=$!=null&&xe!=null&&xe>$;return Dt||_e||$t})(),q=({selected:b,onClick:Y,title:I,description:$,icon:Z,details:ve})=>l.jsxs("div",{onClick:Y,style:{padding:20,borderRadius:8,border:`2px solid ${b?"var(--accent)":"var(--border)"}`,background:b?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",cursor:"pointer",transition:"all 0.2s ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:Z}),l.jsx("h4",{style:{margin:0,color:b?"var(--accent)":"var(--text-primary)"},children:I})]}),l.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:$}),ve&&l.jsx("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.8rem",color:"var(--text-secondary)"},children:ve.map((ye,xe)=>l.jsx("li",{children:ye},xe))})]});return l.jsxs("div",{children:[l.jsx("div",{className:"card mb-4",children:l.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:g.map(b=>l.jsxs("div",{style:{flex:1,textAlign:"center",opacity:b.num<=s?1:.5},children:[l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:b.num<s?"var(--success)":b.num===s?"var(--accent)":"var(--bg-tertiary)",color:b.num<=s?"white":"var(--text-secondary)",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:600,marginBottom:8},children:b.num<s?"":b.num}),l.jsx("div",{style:{fontSize:"0.85rem",fontWeight:b.num===s?600:400},children:b.title})]},b.num))})}),s===1&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 1: Trading Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How do you want to trade? This determines the timeframe focus and trade duration."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(q,{selected:r.tradingStyle==="scalper",onClick:()=>o({...r,tradingStyle:"scalper"}),title:"Scalper",icon:"",description:"Quick trades (1-5 minutes), small profits, many opportunities",details:["Focuses on M1 (1-minute) chart","8 pip profit targets","Fast polling (1-3 seconds)","Best for active monitoring"]}),l.jsx(q,{selected:r.tradingStyle==="day_trader",onClick:()=>o({...r,tradingStyle:"day_trader"}),title:"Day Trader",icon:"",description:"Trades within the day (5-60 minutes), moderate targets",details:["Focuses on M15 (15-minute) chart","15 pip profit targets","Moderate polling (5-10 seconds)","Good balance of activity and patience"]}),l.jsx(q,{selected:r.tradingStyle==="swing_trader",onClick:()=>o({...r,tradingStyle:"swing_trader"}),title:"Swing Trader",icon:"",description:"Hold for hours or days, larger moves, fewer trades",details:["Focuses on H4 (4-hour) chart","30+ pip profit targets","Slow polling (30-60 seconds)","Minimal monitoring needed"]})]}),r.tradingStyle&&l.jsxs("div",{style:{marginTop:20},children:[l.jsxs("button",{type:"button",onClick:()=>c(!h),style:{background:"transparent",border:"none",color:"var(--accent)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,padding:0},children:[l.jsx("span",{style:{transform:h?"rotate(90deg)":"rotate(0)",transition:"transform 0.2s"},children:""}),"Advanced: EMA Stack (optional)"]}),h&&l.jsxs("div",{style:{marginTop:12,padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"3px solid var(--accent)"},children:[l.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:"The EMA Stack defines the moving average periods used for trend detection. Leave as default unless you have a specific preference."}),l.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[l.jsxs("label",{children:["EMA Stack for ",r.tradingStyle==="scalper"?"Scalping":r.tradingStyle==="day_trader"?"Day Trading":"Swing Trading"]}),l.jsx("select",{value:r.emaStack||"default",onChange:b=>o({...r,emaStack:b.target.value}),children:r.tradingStyle&&Object.entries(eo[r.tradingStyle]).map(([b,Y])=>l.jsx("option",{value:b,children:Y.label},b))})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Current selection: ",r.tradingStyle&&r.emaStack&&((K=eo[r.tradingStyle][r.emaStack])==null?void 0:K.values.join(", "))," EMA periods"]})]})]})]}),s===2&&(()=>{const b=(e==null?void 0:e.risk)||{},Y=b.max_lots??.1,I=b.max_spread_pips??2,$=b.max_trades_per_day??10,Z=Math.round(Y*.35*100)/100||.05,ve=Math.max(1,Math.round($*.5)),ye=Math.round(I*.25*10)/10||.5,xe=Math.round(Y*.67*100)/100||.1,Dt=Math.max(1,Math.round($*1)),_e=Math.round(I*.5*10)/10||.8,$t=Math.round(Y*1*100)/100||.15,xs=Math.max(1,Math.round($*1)),ws=Math.round(I*.6*10)/10||1.2;return l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 2: Risk Tolerance"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How much risk are you comfortable with per trade? Values scale from your Profile Editor limits."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(q,{selected:r.riskTolerance==="conservative",onClick:()=>o({...r,riskTolerance:"conservative"}),title:"Conservative",icon:"",description:"Lower risk, smaller positions, strict filters",details:[`${Z} lots per trade`,`Max ${ve} trades per day`,`${ye} pip max spread`,"15 min cooldown after loss","2% max daily loss"]}),l.jsx(q,{selected:r.riskTolerance==="moderate",onClick:()=>o({...r,riskTolerance:"moderate"}),title:"Moderate",icon:"",description:"Balanced risk and reward",details:[`${xe} lots per trade`,`Max ${Dt} trades per day`,`${_e} pip max spread`,"5 min cooldown after loss","4% max daily loss"]}),l.jsx(q,{selected:r.riskTolerance==="aggressive",onClick:()=>o({...r,riskTolerance:"aggressive"}),title:"Aggressive",icon:"",description:"Higher risk for potentially higher returns",details:[`${$t} lots per trade`,`Max ${xs} trades per day`,`${ws} pip max spread`,"No cooldown after loss","6% max daily loss"]})]})]})})(),s===3&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 3: Entry Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How should the bot decide when to enter a trade?"}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(q,{selected:r.entryStyle==="ema_cross",onClick:()=>o({...r,entryStyle:"ema_cross",multipleStrategyA:null,multipleStrategyB:null}),title:"EMA Cross",icon:"",description:"Buy or sell based on EMA/SMA cross direction",details:["BUY: EMA crosses above SMA","SELL: EMA crosses below SMA","Waits for confirmation bar","Works in both trends"]}),l.jsx(q,{selected:r.entryStyle==="rsi_dips",onClick:()=>o({...r,entryStyle:"rsi_dips",multipleStrategyA:null,multipleStrategyB:null}),title:"RSI Dips",icon:"",description:"Buy oversold dips, sell overbought rallies",details:["BUY: RSI < 30 in uptrend","SELL: RSI > 70 in downtrend","Mean-reversion style","MACD confirmation included"]}),l.jsx(q,{selected:r.entryStyle==="price_levels",onClick:()=>o({...r,entryStyle:"price_levels",multipleStrategyA:null,multipleStrategyB:null}),title:"Price Levels",icon:"",description:"EMA cross with multi-timeframe alignment filter",details:["Bi-directional EMA cross","Requires H4/M15/M1 agreement","Higher quality signals","Fewer but better trades"]}),l.jsx(q,{selected:r.entryStyle==="bollinger_bands",onClick:()=>o({...r,entryStyle:"bollinger_bands",multipleStrategyA:null,multipleStrategyB:null}),title:"Bollinger Bands",icon:"",description:"Mean reversion at lower/upper band",details:["BUY: price at/below lower band in uptrend","SELL: price at/above upper band in downtrend","M15, 20-period, 2 std dev","Clear levels for entry"]}),l.jsx(q,{selected:r.entryStyle==="vwap",onClick:()=>o({...r,entryStyle:"vwap",multipleStrategyA:null,multipleStrategyB:null}),title:"VWAP",icon:"",description:"Entries on price vs VWAP",details:["BUY: price crosses above VWAP","SELL: price crosses below VWAP","Volume-weighted average price","Good for intraday trend"]}),l.jsx(q,{selected:r.entryStyle==="multiple",onClick:()=>o({...r,entryStyle:"multiple"}),title:"Multiple Strategies",icon:"",description:"Combine two strategies of your choice (EMA Cross, Price Levels, Bollinger Bands, or VWAP)",details:["Pick Strategy A and Strategy B in the next step","EMA Cross, Price Levels, Bollinger Bands, VWAP","Maximum flexibility","Good for active traders"]})]})]}),s===4&&r.entryStyle==="multiple"&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 4: Choose two strategies to combine"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Select Strategy A and Strategy B. They must be different. RSI is not available in combinations."}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy A"}),l.jsxs("select",{value:r.multipleStrategyA??"",onChange:b=>o({...r,multipleStrategyA:b.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy B"}),l.jsxs("select",{value:r.multipleStrategyB??"",onChange:b=>o({...r,multipleStrategyB:b.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]})]}),r.multipleStrategyA&&r.multipleStrategyB&&r.multipleStrategyA===r.multipleStrategyB&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.9rem",marginTop:8},children:"Please choose two different strategies."})]}),(s===4&&r.entryStyle!=="multiple"||s===5&&r.entryStyle==="multiple")&&l.jsx("div",{children:l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:r.entryStyle==="multiple"?"Step 5: Review & Save":"Step 4: Review & Save"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Review your custom configuration before saving."}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"4px solid var(--accent)",marginBottom:20},children:[l.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Your Configuration Summary"}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Style:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.tradingStyle==="scalper"&&" Scalper",r.tradingStyle==="day_trader"&&" Day Trader",r.tradingStyle==="swing_trader"&&" Swing Trader"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Risk:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.riskTolerance==="conservative"&&" Conservative",r.riskTolerance==="moderate"&&" Moderate",r.riskTolerance==="aggressive"&&" Aggressive"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Entry:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.entryStyle==="ema_cross"&&" EMA Cross",r.entryStyle==="rsi_dips"&&" RSI Dips",r.entryStyle==="price_levels"&&" Price Levels",r.entryStyle==="bollinger_bands"&&" Bollinger Bands",r.entryStyle==="vwap"&&" VWAP",r.entryStyle==="multiple"&&r.multipleStrategyA&&r.multipleStrategyB&&l.jsxs(l.Fragment,{children:[" Multiple (",r.multipleStrategyA.replace("_"," "),"+",r.multipleStrategyB.replace("_"," "),")"]}),r.entryStyle==="multiple"&&(!r.multipleStrategyA||!r.multipleStrategyB)&&" Multiple"]})]})]})]}),x&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"What this means:"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"var(--text-secondary)",lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Position Size:"})," ",String(((L=x.risk)==null?void 0:L.max_lots)??"-")," lots per trade"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Profit Target:"})," ",String(((S=(j=x.trade_management)==null?void 0:j.target)==null?void 0:S.pips_default)??"-")," pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Max Trades/Day:"})," ",String(((w=x.risk)==null?void 0:w.max_trades_per_day)??"-")]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Polling Speed:"})," Every ",String(((E=x.execution)==null?void 0:E.loop_poll_seconds)??"-")," seconds"]})]})]}),l.jsx("div",{style:{marginBottom:20},children:l.jsxs("button",{className:"btn btn-secondary",style:{fontSize:"0.85rem"},onClick:()=>u(!a),children:[a?"Hide":"Show"," Advanced Settings"]})}),a&&x&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"Full Configuration (JSON):"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(x,null,2)}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:"For advanced customization, edit the profile directly in the Profile Editor after saving."})]}),m&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",m]})})]})}),(s===5&&r.entryStyle!=="multiple"||s===6&&r.entryStyle==="multiple")&&p&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:r.entryStyle==="multiple"?"Step 6: Fine-Tune Settings":"Step 5: Fine-Tune Settings"}),l.jsx("button",{className:"btn btn-secondary",onClick:B,style:{fontSize:"0.8rem"},children:"Reset to Wizard Defaults"})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Adjust any settings using the +/- buttons or type directly. These values come from your wizard choices."}),X&&l.jsxs("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.15)",border:"1px solid var(--danger)",borderRadius:8,marginBottom:20},children:[l.jsx("strong",{style:{color:"var(--danger)"},children:"Profile limit exceeded"}),l.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"You have violated your Profile Editor risk settings. This change cannot be made until you update your risk settings in the Profile Editor."})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Risk Settings"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Max Lots",value:(V=p.risk)==null?void 0:V.max_lots,onAdjust:b=>U(["risk","max_lots"],b,.01,10,.01),onChange:b=>D(["risk","max_lots"],b),step:.01,min:.01,max:10}),l.jsx(Re,{label:"Min Stop Pips",value:(F=p.risk)==null?void 0:F.min_stop_pips,onAdjust:b=>U(["risk","min_stop_pips"],b,1,100,1),onChange:b=>D(["risk","min_stop_pips"],b),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Spread Pips",value:(ie=p.risk)==null?void 0:ie.max_spread_pips,onAdjust:b=>U(["risk","max_spread_pips"],b,.1,5,.1),onChange:b=>D(["risk","max_spread_pips"],b),step:.1,min:.1,max:5}),l.jsx(Re,{label:"Max Trades/Day",value:(ne=p.risk)==null?void 0:ne.max_trades_per_day,onAdjust:b=>U(["risk","max_trades_per_day"],b,1,100,1),onChange:b=>D(["risk","max_trades_per_day"],b),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Open Trades",value:(fe=p.risk)==null?void 0:fe.max_open_trades,onAdjust:b=>U(["risk","max_open_trades"],b,1,10,1),onChange:b=>D(["risk","max_open_trades"],b),step:1,min:1,max:10}),l.jsx(Re,{label:"Loss Cooldown (min)",value:(O=p.risk)==null?void 0:O.cooldown_minutes_after_loss,onAdjust:b=>U(["risk","cooldown_minutes_after_loss"],b,0,60,1),onChange:b=>D(["risk","cooldown_minutes_after_loss"],b),step:1,min:0,max:60}),l.jsx(Re,{label:"Max Daily Loss %",value:(J=p.risk)==null?void 0:J.max_daily_loss_pct,onAdjust:b=>U(["risk","max_daily_loss_pct"],b,.5,20,.5),onChange:b=>D(["risk","max_daily_loss_pct"],b),step:.5,min:.5,max:20})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Profit Target"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Target Pips",value:(at=(H=p.trade_management)==null?void 0:H.target)==null?void 0:at.pips_default,onAdjust:b=>U(["trade_management","target","pips_default"],b,1,100,1),onChange:b=>D(["trade_management","target","pips_default"],b),step:1,min:1,max:100}),l.jsx(Re,{label:"R:R Ratio",value:(We=(di=p.trade_management)==null?void 0:di.target)==null?void 0:We.rr_default,onAdjust:b=>U(["trade_management","target","rr_default"],b,.5,5,.1),onChange:b=>D(["trade_management","target","rr_default"],b),step:.1,min:.5,max:5})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Execution"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Poll Interval (sec)",value:(jn=p.execution)==null?void 0:jn.loop_poll_seconds,onAdjust:b=>U(["execution","loop_poll_seconds"],b,1,120,1),onChange:b=>D(["execution","loop_poll_seconds"],b),step:1,min:1,max:120}),l.jsx(Re,{label:"Fast Poll (sec)",value:(Ft=p.execution)==null?void 0:Ft.loop_poll_seconds_fast,onAdjust:b=>U(["execution","loop_poll_seconds_fast"],b,1,60,1),onChange:b=>D(["execution","loop_poll_seconds_fast"],b),step:1,min:1,max:60})]})]}),(Ot=(bn=p.execution)==null?void 0:bn.policies)==null?void 0:Ot.map((b,Y)=>l.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.9rem"},children:["Policy: ",b.id," (",b.type,")"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:10},children:[b.type==="indicator_based"&&l.jsxs(l.Fragment,{children:[l.jsx(Re,{label:"RSI Period",value:b.rsi_period,onAdjust:I=>{const $=p.execution.policies;$[Y].rsi_period=Math.max(2,Math.min(50,b.rsi_period+I)),D(["execution","policies"],$)},onChange:I=>{const $=p.execution.policies;$[Y].rsi_period=Math.max(2,Math.min(50,I)),D(["execution","policies"],$)},step:1,min:2,max:50}),l.jsx(Re,{label:"RSI Oversold",value:b.rsi_oversold,onAdjust:I=>{const $=p.execution.policies;$[Y].rsi_oversold=Math.max(10,Math.min(50,b.rsi_oversold+I)),D(["execution","policies"],$)},onChange:I=>{const $=p.execution.policies;$[Y].rsi_oversold=Math.max(10,Math.min(50,I)),D(["execution","policies"],$)},step:1,min:10,max:50}),l.jsx(Re,{label:"RSI Overbought",value:b.rsi_overbought,onAdjust:I=>{const $=p.execution.policies;$[Y].rsi_overbought=Math.max(50,Math.min(90,b.rsi_overbought+I)),D(["execution","policies"],$)},onChange:I=>{const $=p.execution.policies;$[Y].rsi_overbought=Math.max(50,Math.min(90,I)),D(["execution","policies"],$)},step:1,min:50,max:90}),l.jsx(Re,{label:"TP Pips",value:b.tp_pips,onAdjust:I=>{const $=p.execution.policies;$[Y].tp_pips=Math.max(1,Math.min(100,b.tp_pips+I)),D(["execution","policies"],$)},onChange:I=>{const $=p.execution.policies;$[Y].tp_pips=Math.max(1,Math.min(100,I)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsx(Re,{label:"SL Pips",value:b.sl_pips,onAdjust:I=>{const $=p.execution.policies;$[Y].sl_pips=Math.max(1,Math.min(100,b.sl_pips+I)),D(["execution","policies"],$)},onChange:I=>{const $=p.execution.policies;$[Y].sl_pips=Math.max(1,Math.min(100,I)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Side:"}),l.jsx("span",{style:{fontWeight:600,color:b.side==="buy"?"var(--success)":"var(--danger)"},children:b.side.toUpperCase()})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Regime:"}),l.jsx("span",{style:{fontWeight:600},children:b.regime})]})]}),b.type==="confirmed_cross"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Setup:"}),l.jsx("span",{style:{fontWeight:600},children:b.setup_id}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"(bi-directional)"})]})]})]},Y)),m&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginTop:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",m]})})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[l.jsx("button",{className:"btn btn-secondary",onClick:T,disabled:s===1,children:" Back"}),l.jsxs("div",{style:{display:"flex",gap:12},children:[s<_&&l.jsx("button",{className:"btn btn-primary",onClick:k,disabled:!M(),children:s===4&&r.entryStyle!=="multiple"||s===5&&r.entryStyle==="multiple"?"Fine-Tune Settings ":"Next "}),(s>=4&&r.entryStyle!=="multiple"||s>=5&&r.entryStyle==="multiple")&&l.jsx("button",{className:"btn btn-success",onClick:W,disabled:d||X,style:{minWidth:160},children:d?"Saving...":" Save Configuration"})]})]})]})}function A0({profile:t}){var L,j,S;const[e,i]=z.useState([]),[s,n]=z.useState(null),[r,o]=z.useState(null),[a,u]=z.useState(null),[h,c]=z.useState(!1),[d,f]=z.useState(null),[m,y]=z.useState(null),[x,P]=z.useState(!1),[g,p]=z.useState(!0),[v,_]=z.useState(null),[M,C]=z.useState(!1),k=()=>{ep(t.path).then(y).catch(console.error)};z.useEffect(()=>{g0().then(w=>{i(w)}).catch(console.error),k()},[t.path]),z.useEffect(()=>{s&&s!=="custom"?v0(s,t.path).then(w=>u(w)).catch(console.error):u(null)},[s,t.path]),z.useEffect(()=>{if(x&&m){const w=m.effective_risk,E=m.risk,V=m.execution,F=m.trade_management,ie=F==null?void 0:F.target,ne=V==null?void 0:V.policies;let fe=0,O=20,J=!1,H=.15,at=5,di=100;if(ne){for(const We of ne)if("cooldown_minutes"in We&&(fe=We.cooldown_minutes),"sl_pips"in We&&(O=We.sl_pips),"swing_level_filter_enabled"in We&&(J=We.swing_level_filter_enabled,H=We.swing_danger_zone_pct??.15,at=We.swing_confirmation_bars??5,di=We.swing_lookback_bars??100),fe>0||O!==20)break}_({max_lots:(w==null?void 0:w.max_lots)??(E==null?void 0:E.max_lots)??.01,min_stop_pips:(w==null?void 0:w.min_stop_pips)??(E==null?void 0:E.min_stop_pips)??5,max_spread_pips:(w==null?void 0:w.max_spread_pips)??(E==null?void 0:E.max_spread_pips)??2,max_trades_per_day:(w==null?void 0:w.max_trades_per_day)??(E==null?void 0:E.max_trades_per_day)??10,max_open_trades:(w==null?void 0:w.max_open_trades)??(E==null?void 0:E.max_open_trades)??5,cooldown_minutes_after_loss:(w==null?void 0:w.cooldown_minutes_after_loss)??(E==null?void 0:E.cooldown_minutes_after_loss)??0,target_pips:(ie==null?void 0:ie.pips_default)??.5,loop_poll_seconds:(V==null?void 0:V.loop_poll_seconds)??5,policy_cooldown_minutes:fe,policy_sl_pips:O,swing_level_filter_enabled:J,swing_danger_zone_pct:H,swing_confirmation_bars:at,swing_lookback_bars:di})}},[x,m]);const T=async()=>{var w;if(!(!v||!m)){C(!0);try{const E=m.risk,V=m.effective_risk,F=m.execution,ie=m.trade_management,ne=Math.min(v.max_lots,(E==null?void 0:E.max_lots)??v.max_lots),fe=Math.min(v.max_spread_pips,(E==null?void 0:E.max_spread_pips)??v.max_spread_pips),O=Math.min(v.max_trades_per_day,(E==null?void 0:E.max_trades_per_day)??v.max_trades_per_day),J=Math.min(v.max_open_trades,(E==null?void 0:E.max_open_trades)??v.max_open_trades),H=Math.max(v.min_stop_pips,(E==null?void 0:E.min_stop_pips)??0),at={...V||{},max_lots:ne,min_stop_pips:H,max_spread_pips:fe,max_trades_per_day:O,max_open_trades:J,cooldown_minutes_after_loss:Math.max(0,v.cooldown_minutes_after_loss)},di={...ie||{},target:{...(ie==null?void 0:ie.target)||{},pips_default:v.target_pips}},We=((w=F==null?void 0:F.policies)==null?void 0:w.map(Ot=>{const b={};return"cooldown_minutes"in Ot&&(b.cooldown_minutes=Math.max(0,v.policy_cooldown_minutes)),"sl_pips"in Ot&&(b.sl_pips=Math.max(1,v.policy_sl_pips)),Ot.type==="kt_cg_hybrid"&&(b.swing_level_filter_enabled=v.swing_level_filter_enabled,b.swing_danger_zone_pct=Math.max(.05,Math.min(.5,v.swing_danger_zone_pct)),b.swing_confirmation_bars=Math.max(2,Math.min(20,v.swing_confirmation_bars)),b.swing_lookback_bars=Math.max(20,Math.min(500,v.swing_lookback_bars))),Object.keys(b).length>0?{...Ot,...b}:Ot}))||[],jn={...F||{},loop_poll_seconds:Math.max(.5,v.loop_poll_seconds),policies:We};let Ft=m.active_preset_name||"";Ft.includes("(customized)")||(Ft=Ft?`${Ft} (customized)`:"custom (customized)");const bn={...m,active_preset_name:Ft,effective_risk:at,trade_management:di,execution:jn};await su(t.path,bn),f("Temporary settings applied successfully!"),k(),setTimeout(()=>f(null),3e3)}catch(E){f(`Error: ${E.message}`)}finally{C(!1)}}},W=async()=>{if(!(!s||s==="custom")){c(!0);try{const w=s==="vwap_trend"?{vwap_session_filter_enabled:g}:void 0;await y0(s,t.path,w),f(`Preset "${s}" applied successfully!`),k(),setTimeout(()=>f(null),3e3)}catch(w){f(`Error: ${w.message}`)}finally{c(!1)}}},B=(w,E)=>{E.stopPropagation(),o(r===w?null:w)},D=e.find(w=>w.id===s),U=m==null?void 0:m.active_preset_name,X=m==null?void 0:m.risk,q=m==null?void 0:m.effective_risk,K=m==null?void 0:m.execution;return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Presets"}),l.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:'Select a preset to preview changes, then apply to your profile. Click "Pros & Cons" to see details.'}),U&&l.jsxs("div",{className:"card mb-4",style:{borderColor:"var(--accent)",borderWidth:2,background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, var(--bg-secondary) 100%)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:4},children:"ACTIVE PRESET"}),l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--accent)"},children:U})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>P(!x),style:{fontSize:"0.8rem"},children:x?"Hide Settings":"View Settings"}),x&&l.jsx("button",{className:"btn btn-primary",onClick:T,disabled:M||!v,style:{fontSize:"0.8rem"},children:M?"Applying...":"Apply Temporary Settings"})]})]}),x&&X&&l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[q&&l.jsx("div",{style:{marginBottom:12,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Effective (used when running): preset risk capped by Profile Editor limits."}),v&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Lots (effective)"}),l.jsx("input",{type:"number",step:"0.01",min:"0.01",value:v.max_lots,onChange:w=>_({...v,max_lots:parseFloat(w.target.value)||.01}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",X.max_lots]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Min Stop Pips"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:v.min_stop_pips,onChange:w=>_({...v,min_stop_pips:parseFloat(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Floor: ",X.min_stop_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:v.max_spread_pips,onChange:w=>_({...v,max_spread_pips:parseFloat(w.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",X.max_spread_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Trades/Day"}),l.jsx("input",{type:"number",step:"1",min:"1",value:v.max_trades_per_day,onChange:w=>_({...v,max_trades_per_day:parseInt(w.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",X.max_trades_per_day]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Open Trades"}),l.jsx("input",{type:"number",step:"1",min:"1",value:v.max_open_trades,onChange:w=>_({...v,max_open_trades:parseInt(w.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",X.max_open_trades]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Loss (min)"}),l.jsx("input",{type:"number",step:"1",min:"0",value:v.cooldown_minutes_after_loss,onChange:w=>_({...v,cooldown_minutes_after_loss:parseInt(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Target Pips"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:v.target_pips,onChange:w=>_({...v,target_pips:parseFloat(w.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Stop Loss Pips"}),l.jsx("input",{type:"number",step:"1",min:"1",max:"500",value:v.policy_sl_pips,onChange:w=>_({...v,policy_sl_pips:parseFloat(w.target.value)||20}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Must be  Min Stop Pips (",v.min_stop_pips,")"]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Poll Interval (s)"}),l.jsx("input",{type:"number",step:"0.5",min:"0.5",value:v.loop_poll_seconds,onChange:w=>_({...v,loop_poll_seconds:parseFloat(w.target.value)||.5}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Trade (min)"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:v.policy_cooldown_minutes,onChange:w=>_({...v,policy_cooldown_minutes:parseFloat(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]})]}),v&&((L=K==null?void 0:K.policies)==null?void 0:L.some(w=>w.type==="kt_cg_hybrid"))&&l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:12},children:"Swing Level Filter (blocks trades near M15 swing highs/lows)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Swing Filter Enabled"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:v.swing_level_filter_enabled,onChange:w=>_({...v,swing_level_filter_enabled:w.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),l.jsx("span",{style:{fontWeight:600,color:v.swing_level_filter_enabled?"var(--success)":"var(--text-secondary)"},children:v.swing_level_filter_enabled?"ON":"OFF"})]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Danger Zone %"}),l.jsx("input",{type:"number",step:"0.01",min:"0.05",max:"0.50",value:v.swing_danger_zone_pct,onChange:w=>_({...v,swing_danger_zone_pct:parseFloat(w.target.value)||.15}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"0.15 = 15% of range"})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Confirmation Bars"}),l.jsx("input",{type:"number",step:"1",min:"2",max:"20",value:v.swing_confirmation_bars,onChange:w=>_({...v,swing_confirmation_bars:parseInt(w.target.value)||5}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"Bars before/after swing"})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Lookback Bars"}),l.jsx("input",{type:"number",step:"10",min:"20",max:"500",value:v.swing_lookback_bars,onChange:w=>_({...v,swing_lookback_bars:parseInt(w.target.value)||100}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"M15 bars to scan"})]})]})]}),((j=K==null?void 0:K.policies)==null?void 0:j.length)>0&&l.jsxs("div",{style:{marginTop:12},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:8},children:"Active Policies:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:(S=K==null?void 0:K.policies)==null?void 0:S.map((w,E)=>l.jsxs("span",{style:{padding:"4px 8px",background:"var(--bg-tertiary)",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:[w.type,": ",w.id]},E))})]})]})]}),d&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:d})}),l.jsxs("div",{className:"grid-3 mb-4",children:[e.map(w=>{const E=U===w.id;return l.jsxs("div",{className:`preset-card ${s===w.id?"selected":""}`,onClick:()=>n(w.id),style:E?{borderColor:"var(--success)",borderWidth:2}:{},children:[E&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:w.name}),l.jsx("div",{className:"preset-description",children:w.description}),l.jsx("button",{className:"btn btn-secondary",style:{marginTop:8,fontSize:"0.75rem",padding:"4px 8px"},onClick:V=>B(w.id,V),children:r===w.id?"Hide":"Pros & Cons"}),r===w.id&&l.jsxs("div",{className:"proscons-dropdown",style:{marginTop:12,textAlign:"left"},children:[w.pros.length>0&&l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",fontSize:"0.8rem",marginBottom:4},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:w.pros.map((V,F)=>l.jsx("li",{style:{marginBottom:2},children:V},F))})]}),w.cons.length>0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",fontSize:"0.8rem",marginBottom:4},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:w.cons.map((V,F)=>l.jsx("li",{style:{marginBottom:2},children:V},F))})]})]})]},w.id)}),(()=>{const w=U==null?void 0:U.startsWith("Custom:");return l.jsxs("div",{className:`preset-card ${s==="custom"?"selected":""}`,onClick:()=>n("custom"),style:{borderStyle:"dashed",...w?{borderColor:"var(--success)",borderWidth:2}:{}},children:[w&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:"Custom"}),l.jsx("div",{className:"preset-description",children:w?`Currently running: ${U}`:"Use the wizard to create a custom configuration."})]})})()]}),s&&s!=="custom"&&a&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsxs("h3",{className:"card-title",style:{margin:0},children:["Preview: ",(D==null?void 0:D.name)||s]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[s==="vwap_trend"&&l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:"0.9rem"},children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Optional: Session Filter (London + NY)"}),l.jsxs("select",{value:g?"on":"off",onChange:w=>p(w.target.value==="on"),title:"Turn On to only allow trades during London (816 UTC) or NY (1321 UTC) sessions; Off to trade any time.",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)"},children:[l.jsx("option",{value:"on",children:"On"}),l.jsx("option",{value:"off",children:"Off"})]})]}),l.jsx("button",{className:"btn btn-primary",onClick:W,disabled:h,children:h?"Applying...":"Apply Preset"})]})]}),D&&(D.pros.length>0||D.cons.length>0)&&l.jsxs("div",{className:"grid-2 mb-4",children:[D.pros.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(16, 185, 129, 0.1)",borderRadius:6,border:"1px solid var(--success)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:8,fontSize:"0.85rem"},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.pros.map((w,E)=>l.jsx("li",{style:{marginBottom:4},children:w},E))})]}),D.cons.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(245, 158, 11, 0.1)",borderRadius:6,border:"1px solid var(--warning)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",marginBottom:8,fontSize:"0.85rem"},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.cons.map((w,E)=>l.jsx("li",{style:{marginBottom:4},children:w},E))})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12,fontSize:"0.8rem"},children:"These settings will be changed when you apply:"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(a.changes||a,null,2)})]}),s==="custom"&&l.jsx(I0,{profile:t,currentProfile:m,onComplete:()=>{f("Custom configuration saved!"),setTimeout(()=>f(null),3e3)}})]})}function F0({profile:t,authStatus:e,onAuthChange:i}){const[s,n]=z.useState(null),[r,o]=z.useState(!1),[a,u]=z.useState(null),[h,c]=z.useState(null),[d,f]=z.useState(0),[m,y]=z.useState(null),[x,P]=z.useState(""),[g,p]=z.useState(""),[v,_]=z.useState(""),[M,C]=z.useState(null),[k,T]=z.useState(!1),W=e[t.path]||!1,B=()=>{y(null),P(""),p(""),_(""),C(null)},D=async()=>{if(!g||g.length<4){C("Password must be at least 4 characters");return}if(g!==v){C("Passwords do not match");return}T(!0),C(null);try{await Zo(t.path,null,g),i(),B(),u("Password set successfully!"),setTimeout(()=>u(null),3e3)}catch(w){C(w.message)}finally{T(!1)}},U=async()=>{if(!x){C("Enter current password");return}if(!g||g.length<4){C("New password must be at least 4 characters");return}if(g!==v){C("New passwords do not match");return}T(!0),C(null);try{await Zo(t.path,x,g),i(),B(),u("Password changed successfully!"),setTimeout(()=>u(null),3e3)}catch(w){C(w.message)}finally{T(!1)}},X=async()=>{if(!x){C("Enter current password");return}T(!0),C(null);try{await m0(t.path,x),i(),B(),u("Password removed. Profile is now non-secure."),setTimeout(()=>u(null),3e3)}catch(w){C(w.message)}finally{T(!1)}};z.useEffect(()=>{n(null),c(null),ep(t.path).then(w=>{n(w),c(null)}).catch(w=>{c(w.message),n(null)})},[t.path,d]);const q=async()=>{if(s){o(!0),u(null);try{await su(t.path,s),u("Profile saved!"),setTimeout(()=>u(null),2e3)}catch(w){u(`Error: ${w.message}`)}finally{o(!1)}}};if(!s)return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),h?l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Failed to load profile: ",h]}),l.jsx("button",{className:"btn btn-primary",onClick:()=>f(w=>w+1),children:"Retry"})]}):l.jsx("div",{className:"card",children:"Loading profile..."})]});const K=s.risk||{},L=s.execution||{},j=(w,E,V)=>{n({...s,[w]:{...s[w]||{},[E]:V}})},S=(w,E)=>{n({...s,[w]:E})};return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),a&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:a})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Basic Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Symbol"}),l.jsx("input",{value:s.symbol||"",onChange:w=>n({...s,symbol:w.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Pip Size"}),l.jsx("input",{type:"number",step:"0.001",value:s.pip_size||.01,onChange:w=>n({...s,pip_size:parseFloat(w.target.value)})})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Account Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Deposit amount and leverage ratio for your reference."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Deposit Amount ($)"}),l.jsx("input",{type:"number",placeholder:"e.g., 100000",value:s.deposit_amount||"",onChange:w=>S("deposit_amount",w.target.value?parseFloat(w.target.value):null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Leverage Ratio"}),l.jsxs("select",{value:s.leverage_ratio||"",onChange:w=>S("leverage_ratio",w.target.value?parseInt(w.target.value):null),children:[l.jsx("option",{value:"",children:"Select leverage..."}),l.jsx("option",{value:"50",children:"1:50"}),l.jsx("option",{value:"100",children:"1:100"}),l.jsx("option",{value:"200",children:"1:200"}),l.jsx("option",{value:"400",children:"1:400"}),l.jsx("option",{value:"500",children:"1:500"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Display Currency (Stats & Logs)"}),l.jsxs("select",{value:s.display_currency||"USD",onChange:w=>S("display_currency",w.target.value),children:[l.jsx("option",{value:"USD",children:"USD"}),l.jsx("option",{value:"JPY",children:"JPY"})]}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Profits and balances will be shown in this currency. JPY uses current rate from your symbol."})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Broker Connection"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Choose MetaTrader 5 (Windows) or OANDA (works on Mac/Linux and PaaS like Railway). OANDA is available in Japan and Canada."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Broker Type"}),l.jsxs("select",{value:s.broker_type||"mt5",onChange:w=>S("broker_type",w.target.value),children:[l.jsx("option",{value:"mt5",children:"MetaTrader 5 (MT5)"}),l.jsx("option",{value:"oanda",children:"OANDA"})]})]}),s.broker_type==="oanda"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA API Key"}),l.jsx("input",{type:"password",autoComplete:"off",placeholder:"Paste your OANDA API token",value:s.oanda_token||"",onChange:w=>S("oanda_token",w.target.value||null)}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Create a token in OANDA Practice or Live account: Account  Manage API Access."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Account ID (optional)"}),l.jsx("input",{type:"text",placeholder:"Leave blank to use first account",value:s.oanda_account_id||"",onChange:w=>S("oanda_account_id",w.target.value||null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Environment"}),l.jsxs("select",{value:s.oanda_environment||"practice",onChange:w=>S("oanda_environment",w.target.value),children:[l.jsx("option",{value:"practice",children:"Practice (demo)"}),l.jsx("option",{value:"live",children:"Live"})]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Risk Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16,marginTop:-8},children:"These limits are final and cannot be overridden by presets or the custom wizard."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Lots"}),l.jsx("input",{type:"number",step:"0.01",value:K.max_lots||.1,onChange:w=>j("risk","max_lots",parseFloat(w.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",value:K.max_spread_pips||2,onChange:w=>j("risk","max_spread_pips",parseFloat(w.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Trades/Day"}),l.jsx("input",{type:"number",value:K.max_trades_per_day||10,onChange:w=>j("risk","max_trades_per_day",parseInt(w.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Open Trades"}),l.jsx("input",{type:"number",min:1,max:20,value:K.max_open_trades??2,onChange:w=>j("risk","max_open_trades",parseInt(w.target.value)||1)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Cooldown After Loss (minutes)"}),l.jsx("input",{type:"number",min:0,max:120,value:K.cooldown_minutes_after_loss??0,onChange:w=>j("risk","cooldown_minutes_after_loss",parseInt(w.target.value)||0)})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:K.require_stop||!1,onChange:w=>j("risk","require_stop",w.target.checked),style:{width:"auto"}}),"Require Stop Loss"]})}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Min Stop Pips"}),l.jsx("input",{type:"number",step:"1",min:1,max:500,value:K.min_stop_pips??10,onChange:w=>j("risk","min_stop_pips",parseFloat(w.target.value)||10)}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Minimum stop loss distance in pips. Default is 10."})]})]})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Profile Security"}),W?l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile is protected by a password."}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>y("change"),children:"Change Password"}),l.jsx("button",{className:"btn btn-danger",onClick:()=>y("remove"),children:"Remove Password"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile has no password. Anyone with access to this computer can open it."}),l.jsx("button",{className:"btn btn-primary",onClick:()=>y("add"),children:"Add Password"})]})]}),m&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsxs("h3",{className:"card-title",children:[m==="add"&&"Add Password",m==="change"&&"Change Password",m==="remove"&&"Remove Password"]}),(m==="change"||m==="remove")&&l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:"Current Password"}),l.jsx("input",{type:"password",value:x,onChange:w=>P(w.target.value),placeholder:"Enter current password"})]}),(m==="add"||m==="change")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:m==="change"?"New Password":"Password"}),l.jsx("input",{type:"password",value:g,onChange:w=>p(w.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsxs("label",{children:["Confirm ",m==="change"?"New ":"","Password"]}),l.jsx("input",{type:"password",value:v,onChange:w=>_(w.target.value),placeholder:"Confirm password"})]})]}),m==="remove"&&l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12},children:"This will remove password protection. Anyone with access to this computer will be able to open this profile."}),(m==="add"||m==="change")&&l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--warning)",marginBottom:12,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."}),M&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:M}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:m==="remove"?"btn btn-danger":"btn btn-primary",onClick:m==="add"?D:m==="change"?U:X,disabled:k,children:k?"Processing...":m==="add"?"Set Password":m==="change"?"Change Password":"Remove Password"}),l.jsx("button",{className:"btn btn-secondary",onClick:B,disabled:k,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Execution Settings"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Loop Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:L.loop_poll_seconds||5,onChange:w=>j("execution","loop_poll_seconds",parseFloat(w.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Fast Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:L.loop_poll_seconds_fast||2,onChange:w=>j("execution","loop_poll_seconds_fast",parseFloat(w.target.value))})]})]}),l.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:["Policies: ",(L.policies||[]).length," configured. Use the Streamlit UI or edit JSON directly for full policy management."]})]}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{className:"btn btn-primary",onClick:q,disabled:r,children:r?"Saving...":"Save Profile"})})]})}function O0({profile:t}){const[e,i]=z.useState(null),[s,n]=z.useState({}),[r,o]=z.useState([]),[a,u]=z.useState(void 0),[h,c]=z.useState([]),[d,f]=z.useState(!1),[m,y]=z.useState(null),[x,P]=z.useState(null),[g,p]=z.useState(null),[v,_]=z.useState(null),[M,C]=z.useState(null),[k,T]=z.useState(null),[W,B]=z.useState("summary"),D=()=>{k0(t.name,t.path).then(i).catch(console.error),b0(t.name).then(n).catch(console.error),tp(t.name,20,t.path).then(L=>{o(L.trades),u(L.display_currency)}).catch(console.error),j0(t.name,20).then(c).catch(console.error),M0(t.name,t.path).then(_).catch(console.error),C0(t.name,t.path).then(L=>T(L??null)).catch(()=>T(null))};z.useEffect(()=>{D()},[t.name,t.path]);const U=async()=>{f(!0),y(null);try{const L=await E0(t.name,t.path),j=[];L.trades_updated>0&&j.push(`${L.trades_updated} trade(s) synced`),L.trades_imported&&L.trades_imported>0&&j.push(`${L.trades_imported} trade(s) imported from broker history`),L.position_ids_backfilled&&L.position_ids_backfilled>0&&j.push(`${L.position_ids_backfilled} position ID(s) backfilled`),L.profit_backfilled&&L.profit_backfilled>0&&j.push(`${L.profit_backfilled} profit(s) updated from broker`),j.length>0?(y(j.join(", ")),D()):y("All trades up to date"),setTimeout(()=>y(null),4e3)}catch(L){y(`Sync error: ${L.message}`)}finally{f(!1)}},X=async L=>{const j=String(L.trade_id||"");if(j){P(j);try{const S=await ip(t.name,j,t.path);y(`Closed trade: ${S.pips>=0?"+":""}${S.pips.toFixed(2)} pips`),D(),setTimeout(()=>y(null),3e3)}catch(S){y(`Close error: ${S.message}`)}finally{P(null),p(null)}}},q=Object.values(s).reduce((L,j)=>L+j,0),K=L=>L.exit_price===null||L.exit_price===void 0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Logs & Stats"}),l.jsx("button",{className:"btn btn-secondary",onClick:U,disabled:d,children:d?"Syncing...":"Sync from broker"})]}),m&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--accent)"},children:l.jsx("p",{children:m})}),g&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:0},children:[l.jsx("h3",{className:"card-title",children:"Confirm Close Trade"}),l.jsx("p",{style:{marginBottom:16},children:"Are you sure you want to close this trade?"}),l.jsx("div",{style:{background:"var(--bg-tertiary)",padding:12,borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{margin:0,fontSize:"0.9rem"},children:[l.jsx("strong",{children:"Side:"})," ",String(g.side||"").toUpperCase(),l.jsx("br",{}),l.jsx("strong",{children:"Entry:"})," ",typeof g.entry_price=="number"?g.entry_price.toFixed(3):"-",l.jsx("br",{}),l.jsx("strong",{children:"Size:"})," ",typeof g.size_lots=="number"?g.size_lots:"-"," lots"]})}),l.jsx("p",{style:{color:"var(--warning)",fontSize:"0.85rem",marginBottom:16},children:"This will send a close order to your broker immediately."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-danger",onClick:()=>X(g),disabled:x!==null,children:x?"Closing...":"Close Trade"}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>p(null),disabled:x!==null,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Quick Stats"}),e&&e.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.7rem",background:"var(--success)",color:"white",padding:"4px 8px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4,marginBottom:16},children:e&&e.source==="mt5"?"Stats from broker deal history (same as View  Reports in MT5)":"Stats from local records. Use a broker connection (MT5 or OANDA) to see live report data."}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.closed_trades)||0}),l.jsx("div",{className:"stat-label",children:"Closed Trades"}),e&&e.wins!=null&&e.losses!=null&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:[l.jsxs("span",{style:{color:"var(--success)"},children:[e.wins," W"]})," / ",l.jsxs("span",{style:{color:"var(--danger)"},children:[e.losses," L"]})]})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.win_rate)!=null?`${(e.win_rate*100).toFixed(1)}%`:"-"}),l.jsx("div",{className:"stat-label",children:"Win Rate"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.avg_pips)!=null?e.avg_pips.toFixed(3):"-"}),l.jsx("div",{className:"stat-label",children:"Avg Pips"})]})]}),e&&e.total_profit!=null||e&&(e.total_commission!=null||e.total_swap!=null)?l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)",display:"flex",flexWrap:"wrap",gap:24},children:[e&&e.total_profit!=null&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:e.total_profit>=0?"var(--success)":"var(--danger)"},children:[e.total_profit>=0?"+":"",e.total_profit.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_commission!=null&&e.total_commission!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_commission.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_swap!=null&&e.total_swap!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Swap"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_swap.toFixed(2)," ",e.display_currency||"USD"]})]})]}):null,e&&e.source==="database"&&e.trades_without_profit!=null&&e.trades_without_profit>0&&l.jsx("p",{style:{marginTop:12,marginBottom:0,fontSize:"0.85rem",color:"var(--warning)"},children:"Some trades lack profit data. Sync from broker and refresh to see stats from broker report."})]}),k&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Account Report"}),l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Balance, equity, and closed P/L from your broker (MT5 or OANDA)"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("div",{onClick:()=>B(W==="summary"?null:"summary"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Summary"}),l.jsx("span",{children:W==="summary"?"":""})]}),W==="summary"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Balance"}),l.jsx("br",{}),k.summary.balance.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Equity"}),l.jsx("br",{}),k.summary.equity.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Margin"}),l.jsx("br",{}),k.summary.margin.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Free Margin"}),l.jsx("br",{}),k.summary.free_margin.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>B(W==="closed"?null:"closed"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Closed P/L"}),l.jsx("span",{children:W==="closed"?"":""})]}),W==="closed"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12,fontSize:"0.9rem"},children:[l.jsxs("div",{children:["Total Profit: ",l.jsxs("span",{style:{color:k.closed_pl.total_profit>=0?"var(--success)":"var(--danger)",fontWeight:600},children:[k.closed_pl.total_profit>=0?"+":"",k.closed_pl.total_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Commission: ",k.closed_pl.total_commission.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Swap: ",k.closed_pl.total_swap.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Gross Profit: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.gross_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Gross Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.gross_loss.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Profit Factor: ",k.closed_pl.profit_factor.toFixed(2)]}),l.jsxs("div",{children:["Largest Win: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.largest_profit_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Largest Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.largest_loss_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Expected Payoff: ",k.closed_pl.expected_payoff.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>B(W==="longshort"?null:"longshort"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Long / Short"}),l.jsx("span",{children:W==="longshort"?"":""})]}),W==="longshort"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:["Long: ",k.long_short.long_wins,"W / ",k.long_short.long_trades-k.long_short.long_wins,"L (",(k.long_short.long_win_pct*100).toFixed(0),"% win)"]}),l.jsxs("div",{children:["Short: ",k.long_short.short_wins,"W / ",k.long_short.short_trades-k.long_short.short_wins,"L (",(k.long_short.short_win_pct*100).toFixed(0),"% win)"]})]})]})]})]}),v&&Object.keys(v.presets).length>0&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Performance by Preset"}),v.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16,marginTop:8,fontSize:"0.85rem"},children:["Preset names come from your local DB; win/loss and profit use broker history when available. For best accuracy, run ",l.jsx("strong",{children:"Sync from broker"})," so closed trades have position IDs, then refresh."]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(v.presets).sort(([,L],[,j])=>(j.total_pips||0)-(L.total_pips||0)).map(([L,j])=>{var E,V,F,ie,ne,fe,O;const S=M===L,w=((E=Object.entries(v.presets).sort(([,J],[,H])=>(H.total_pips||0)-(J.total_pips||0))[0])==null?void 0:E[0])===L;return l.jsxs("div",{style:{border:`1px solid ${w?"var(--success)":"var(--border)"}`,borderRadius:8,overflow:"hidden",background:w?"rgba(34, 197, 94, 0.05)":"var(--bg-secondary)"},children:[l.jsxs("div",{onClick:()=>C(S?null:L),style:{padding:16,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontWeight:600},children:L}),w&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"BEST"})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4},children:[j.total_trades," trades | Win: ",j.win_rate!=null?`${(j.win_rate*100).toFixed(0)}%`:"-"," | Total: ",l.jsxs("span",{style:{color:(j.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[j.total_pips>=0?"+":"",((V=j.total_pips)==null?void 0:V.toFixed(1))||0," pips"]}),j.total_profit!=null&&l.jsxs(l.Fragment,{children:[" | Profit: ",l.jsxs("span",{style:{color:j.total_profit>=0?"var(--success)":"var(--danger)"},children:[j.total_profit>=0?"+":"",j.total_profit.toFixed(2)," ",v.display_currency||"USD"]})]}),j.total_commission!=null&&j.total_commission!==0&&l.jsxs(l.Fragment,{children:[" | Commission: ",j.total_commission.toFixed(2)," ",v.display_currency||"USD"]})]})]}),l.jsx("span",{style:{fontSize:"1.2rem"},children:S?"":""})]}),S&&l.jsx("div",{style:{padding:"0 16px 16px 16px",borderTop:"1px solid var(--border)",paddingTop:16},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Trades"}),l.jsx("div",{style:{fontWeight:700},children:j.total_trades})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win / Loss"}),l.jsxs("div",{style:{fontWeight:700},children:[l.jsx("span",{style:{color:"var(--success)"},children:j.wins})," /",l.jsx("span",{style:{color:"var(--danger)"},children:j.losses})]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Rate"}),l.jsx("div",{style:{fontWeight:700,color:(j.win_rate||0)>=.5?"var(--success)":"var(--warning)"},children:j.win_rate!=null?`${(j.win_rate*100).toFixed(1)}%`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Pips"}),l.jsxs("div",{style:{fontWeight:700,color:(j.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[j.total_pips>=0?"+":"",((F=j.total_pips)==null?void 0:F.toFixed(2))||0]})]}),j.total_profit!=null&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontWeight:700,color:j.total_profit>=0?"var(--success)":"var(--danger)"},children:[j.total_profit>=0?"+":"",j.total_profit.toFixed(2)," ",v.display_currency||"USD"]})]}),j.total_commission!=null&&j.total_commission!==0&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontWeight:700},children:[j.total_commission.toFixed(2)," ",v.display_currency||"USD"]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg Pips"}),l.jsx("div",{style:{fontWeight:700},children:((ie=j.avg_pips)==null?void 0:ie.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg R:R"}),l.jsx("div",{style:{fontWeight:700},children:((ne=j.avg_rr)==null?void 0:ne.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Best Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--success)"},children:j.best_trade!=null?`+${j.best_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Worst Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--danger)"},children:j.worst_trade!=null?`${j.worst_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Streak"}),l.jsx("div",{style:{fontWeight:700},children:j.win_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Loss Streak"}),l.jsx("div",{style:{fontWeight:700},children:j.loss_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Profit Factor"}),l.jsx("div",{style:{fontWeight:700,color:(j.profit_factor||0)>=1?"var(--success)":"var(--danger)"},children:((fe=j.profit_factor)==null?void 0:fe.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Max Drawdown"}),l.jsxs("div",{style:{fontWeight:700,color:"var(--warning)"},children:[((O=j.max_drawdown)==null?void 0:O.toFixed(1))||0," pips"]})]})]})})]},L)})})]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Rejection Breakdown"}),Object.entries(s).length===0?l.jsx("p",{style:{color:"var(--text-secondary)"},children:"No executions yet."}):Object.entries(s).map(([L,j])=>l.jsxs("div",{className:"breakdown-bar",children:[l.jsx("span",{className:"breakdown-label",children:L}),l.jsxs("div",{className:"breakdown-value",children:[l.jsx("div",{className:"breakdown-fill",style:{width:`${j/q*100}%`}}),l.jsx("span",{className:"breakdown-count",children:j})]})]},L))]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Recent Trades"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Side"}),l.jsx("th",{children:"Entry"}),l.jsx("th",{children:"Exit"}),l.jsx("th",{children:"Pips"}),l.jsx("th",{children:"R"}),l.jsx("th",{children:"Profit"}),l.jsx("th",{children:"Source"}),l.jsx("th",{children:"Exit Reason"}),l.jsx("th",{children:"Action"})]})}),l.jsx("tbody",{children:r.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No trades yet."})}):r.map((L,j)=>{const S=String(L.opened_by||""),w=String(L.exit_reason||""),V=(F=>{if(!F)return{text:"-",color:"inherit"};switch(F){case"hit_take_profit":return{text:"TP",color:"var(--success)"};case"hit_stop_loss":return{text:"SL",color:"var(--danger)"};case"user_closed_early":return{text:"User",color:"var(--warning)"};case"UI_manual_close":return{text:"UI",color:"var(--accent)"};case"mt5_history_import":return{text:"Imported",color:"var(--text-secondary)"};default:return{text:F.replace(/_/g," "),color:"var(--text-secondary)"}}})(w);return l.jsxs("tr",{children:[l.jsx("td",{children:String(L.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(L.side||"")}),l.jsx("td",{children:typeof L.entry_price=="number"?L.entry_price.toFixed(3):"-"}),l.jsx("td",{children:typeof L.exit_price=="number"?L.exit_price.toFixed(3):"-"}),l.jsx("td",{style:{color:typeof L.pips=="number"?L.pips>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof L.pips=="number"?L.pips.toFixed(2):"-"}),l.jsx("td",{children:typeof L.r_multiple=="number"?L.r_multiple.toFixed(2):"-"}),l.jsx("td",{style:{color:typeof L.profit_display=="number"?L.profit_display>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof L.profit_display=="number"?`${L.profit_display>=0?"+":""}${L.profit_display.toFixed(2)} ${a||(e==null?void 0:e.display_currency)||"USD"}`:"-"}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 6px",borderRadius:4,background:S==="program"?"rgba(59, 130, 246, 0.2)":"rgba(156, 163, 175, 0.2)",color:S==="program"?"var(--accent)":"var(--text-secondary)"},children:S==="program"?"Bot":S==="manual"?"Manual":"-"})}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",color:V.color},children:V.text})}),l.jsx("td",{children:K(L)&&(L.mt5_order_id||L.mt5_position_id)?l.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>p(L),disabled:x===String(L.trade_id),children:"Close"}):K(L)?l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No position ID"}):l.jsx("span",{style:{color:"var(--success)",fontSize:"0.75rem"},children:"Closed"})})]},j)})})]})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Recent Executions"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Mode"}),l.jsx("th",{children:"Placed"}),l.jsx("th",{children:"Reason"})]})}),l.jsx("tbody",{children:h.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No executions yet."})}):h.map((L,j)=>l.jsxs("tr",{children:[l.jsx("td",{children:String(L.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(L.mode||"")}),l.jsx("td",{children:L.placed?"Yes":"No"}),l.jsx("td",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:String(L.reason||"")})]},j))})]})})]})]})}function D0(){const[t,e]=z.useState("quickstart"),i=n=>{e(t===n?null:n)},s=({id:n,title:r,icon:o,children:a})=>l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>i(n),children:[l.jsxs("h3",{className:"card-title",style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[l.jsx("span",{style:{fontSize:"1.3rem"},children:o}),r]}),l.jsx("span",{style:{color:"var(--accent)",fontSize:"1.2rem"},children:t===n?"":"+"})]}),t===n&&l.jsx("div",{style:{marginTop:16},children:a})]});return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Help / Guide"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:24},children:"Welcome to the USDJPY Trading Assistant! This guide will help you get started and understand how to use the bot effectively."}),l.jsxs(s,{id:"quickstart",title:"Quick Start (5 Steps)",icon:"",children:[l.jsx("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,marginBottom:16},children:l.jsxs("ol",{style:{margin:0,paddingLeft:24,lineHeight:2.2},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Select or create an account"})," using the sidebar dropdown. Each account has its own settings and trade history."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Presets"})," and pick a preset that matches your style (start with ",l.jsx("em",{children:"Conservative Scalping"})," if unsure), then click ",l.jsx("strong",{children:"Apply Preset"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Run / Status"}),", set the mode to ",l.jsx("strong",{children:"ARMED_AUTO_DEMO"}),", then click ",l.jsx("strong",{children:"Start Loop"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Watch the log"})," - the bot will show heartbeats every few seconds and log its trading decisions."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Check Logs & Stats"})," to see your trades, win rate, and performance metrics."]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Tip:"})," The bot only trades on demo accounts for safety. For MT5, have the terminal running and connected; for OANDA, set your API key in Profile Editor."]})]}),l.jsxs(s,{id:"presets",title:"Understanding Presets",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"Presets are pre-configured trading strategies. Each preset has different characteristics:"}),l.jsx("div",{className:"table-container",style:{marginBottom:16},children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Preset"}),l.jsx("th",{children:"Style"}),l.jsx("th",{children:"Trades/Day"}),l.jsx("th",{children:"Target"}),l.jsx("th",{children:"Risk Level"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Conservative Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--success)"},children:"Low"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Aggressive Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"15-25"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--danger)"},children:"High"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Moderate Swing"})}),l.jsx("td",{children:"Longer holds"}),l.jsx("td",{children:"2-5"}),l.jsx("td",{children:"20 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"RSI Mean Reversion"})}),l.jsx("td",{children:"Counter-trend"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"10 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Custom"})}),l.jsx("td",{children:"Your choice"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Configurable"})]})]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Recommendation:"})," Start with ",l.jsx("em",{children:"Conservative Scalping"})," to see how the bot works with minimal risk. Once comfortable, try other presets or create a custom configuration."]})]}),l.jsx(s,{id:"dashboard",title:"Reading the Dashboard",icon:"",children:l.jsxs("div",{className:"grid-2",style:{gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Run / Status Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Status:"})," Shows if the trading loop is running or stopped"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mode:"})," DISARMED (no trades), ARMED_MANUAL_CONFIRM (prompts before trading), ARMED_AUTO_DEMO (fully automated)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Kill Switch:"})," Emergency stop - prevents any new trades"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Log:"})," Real-time output showing heartbeats and decisions"]})]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Logs & Stats Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Quick Stats:"})," Closed trades, win rate, average pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Rejection Breakdown:"})," Why trades weren't taken (spread, filters, etc.)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Recent Trades:"})," Your trade history with P/L"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sync from broker:"})," Updates trade data from your broker (MT5 or OANDA)"]})]})]})]})}),l.jsxs(s,{id:"analysis",title:"Technical Analysis Page",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"The Analysis page provides real-time technical analysis across three timeframes (H4, M15, M1):"}),l.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Regime:"})," Current market trend - BULL (uptrend), BEAR (downtrend), or SIDEWAYS"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"RSI:"})," Relative Strength Index - Oversold (below 30, potential buy), Overbought (above 70, potential sell), Neutral"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"MACD:"})," Momentum indicator - Positive (bullish momentum), Negative (bearish momentum)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"ATR:"})," Average True Range - Elevated (high volatility), Normal, Low (quiet market)"]})]}),l.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Click on any timeframe card to expand and see detailed indicator values. The page auto-refreshes every 30 seconds."})]}),l.jsx(s,{id:"faq",title:"Common Questions",icon:"",children:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"Why isn't the bot trading?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Check these common reasons:",l.jsx("br",{})," ",l.jsx("strong",{children:"Spread too wide:"})," The bot waits for good spreads to avoid slippage",l.jsx("br",{})," ",l.jsx("strong",{children:"Alignment filters:"})," Multi-timeframe conditions must match",l.jsx("br",{})," ",l.jsx("strong",{children:"Max trades reached:"})," Daily trade limit hit",l.jsx("br",{})," ",l.jsx("strong",{children:"Kill switch on:"})," Check the Run page",l.jsx("br",{})," ",l.jsx("strong",{children:"Market closed:"})," Forex markets close on weekends"]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"How do I close a trade?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Go to ",l.jsx("strong",{children:"Logs & Stats"}),", find your open trade in the Recent Trades table, and click the ",l.jsx("strong",{children:"Close"})," button. You'll be asked to confirm before the close order is sent."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"What does the kill switch do?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["The kill switch ",l.jsx("strong",{children:"immediately stops all new trades"})," from being placed. It does not close existing positions - use the Close button for that. Toggle it on if you need to pause the bot quickly."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"My trade history is missing?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Click ",l.jsx("strong",{children:"Sync from broker"})," on the Logs & Stats page. This will import any trades that were opened or closed in your broker platform, including trades closed by hitting TP/SL."]})]})]})}),l.jsx(s,{id:"glossary",title:"Glossary",icon:"",children:l.jsx("div",{className:"grid-2",style:{gap:12},children:[{term:"Pip",def:"Smallest price move. For USDJPY, 1 pip = 0.01 (e.g., 154.50 to 154.51)"},{term:"Lot",def:"Trade size. 0.01 = micro lot (1,000 units), 0.1 = mini lot (10,000 units), 1.0 = standard lot (100,000 units)"},{term:"Spread",def:"Difference between buy (ask) and sell (bid) price. Lower = better."},{term:"EMA",def:"Exponential Moving Average - weighted average of recent prices, responds quickly to changes"},{term:"SMA",def:"Simple Moving Average - equal-weighted average of prices over a period"},{term:"RSI",def:"Relative Strength Index (0-100). Below 30 = oversold, above 70 = overbought"},{term:"MACD",def:"Moving Average Convergence Divergence - momentum indicator showing trend direction"},{term:"ATR",def:"Average True Range - measures market volatility"},{term:"Regime",def:"Current market trend: bullish (up), bearish (down), or sideways"},{term:"Stop Loss (SL)",def:"Price level where trade closes to limit losses"},{term:"Take Profit (TP)",def:"Price level where trade closes to lock in profits"},{term:"R-Multiple",def:"Risk-adjusted return. R of 2 means you made 2x your risked amount"}].map((n,r)=>l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("strong",{style:{color:"var(--accent)"},children:[n.term,":"]}),l.jsx("span",{style:{marginLeft:8,color:"var(--text-secondary)",fontSize:"0.9rem"},children:n.def})]},r))})}),l.jsxs("div",{className:"card",style:{borderColor:"var(--warning)",background:"rgba(245, 158, 11, 0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--warning)",display:"flex",alignItems:"center",gap:8},children:" Important Safety Notice"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:["This bot is designed for ",l.jsx("strong",{children:"demo trading only"}),". It will refuse to trade on live accounts."]}),l.jsx("li",{children:"Trading carries risk. Past performance does not guarantee future results."}),l.jsx("li",{children:"Always monitor the bot and understand what it's doing before trusting it with larger positions."}),l.jsx("li",{children:"Start with conservative settings and small position sizes while you learn."})]})]})]})}to.createRoot(document.getElementById("root")).render(l.jsx(Sp.StrictMode,{children:l.jsx(z0,{})}));
