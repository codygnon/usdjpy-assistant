(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function np(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mc={exports:{}},Fr={},gc={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ms=Symbol.for("react.element"),ip=Symbol.for("react.portal"),sp=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),lp=Symbol.for("react.profiler"),op=Symbol.for("react.provider"),ap=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),cp=Symbol.for("react.memo"),dp=Symbol.for("react.lazy"),tu=Symbol.iterator;function fp(t){return t===null||typeof t!="object"?null:(t=tu&&t[tu]||t["@@iterator"],typeof t=="function"?t:null)}var vc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yc=Object.assign,xc={};function gi(t,e,n){this.props=t,this.context=e,this.refs=xc,this.updater=n||vc}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wc(){}wc.prototype=gi.prototype;function Zo(t,e,n){this.props=t,this.context=e,this.refs=xc,this.updater=n||vc}var qo=Zo.prototype=new wc;qo.constructor=Zo;yc(qo,gi.prototype);qo.isPureReactComponent=!0;var nu=Array.isArray,_c=Object.prototype.hasOwnProperty,ea={current:null},Sc={key:!0,ref:!0,__self:!0,__source:!0};function jc(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)_c.call(e,i)&&!Sc.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:ms,type:t,key:r,ref:o,props:s,_owner:ea.current}}function pp(t,e){return{$$typeof:ms,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ta(t){return typeof t=="object"&&t!==null&&t.$$typeof===ms}function mp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iu=/\/+/g;function ol(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mp(""+t.key):e.toString(36)}function Js(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ms:case ip:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+ol(o,0):i,nu(s)?(n="",t!=null&&(n=t.replace(iu,"$&/")+"/"),Js(s,e,n,"",function(h){return h})):s!=null&&(ta(s)&&(s=pp(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",nu(t))for(var a=0;a<t.length;a++){r=t[a];var u=i+ol(r,a);o+=Js(r,e,n,u,s)}else if(u=fp(t),typeof u=="function")for(t=u.call(t),a=0;!(r=t.next()).done;)r=r.value,u=i+ol(r,a++),o+=Js(r,e,n,u,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bs(t,e,n){if(t==null)return t;var i=[],s=0;return Js(t,i,"","",function(r){return e.call(n,r,s++)}),i}function gp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Gs={transition:null},vp={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Gs,ReactCurrentOwner:ea};function bc(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:bs,forEach:function(t,e,n){bs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bs(t,function(){e++}),e},toArray:function(t){return bs(t,function(e){return e})||[]},only:function(t){if(!ta(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=gi;Y.Fragment=sp;Y.Profiler=lp;Y.PureComponent=Zo;Y.StrictMode=rp;Y.Suspense=hp;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vp;Y.act=bc;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yc({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=ea.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)_c.call(e,u)&&!Sc.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:ms,type:t.type,key:s,ref:r,props:i,_owner:o}};Y.createContext=function(t){return t={$$typeof:ap,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:op,_context:t},t.Consumer=t};Y.createElement=jc;Y.createFactory=function(t){var e=jc.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:up,render:t}};Y.isValidElement=ta;Y.lazy=function(t){return{$$typeof:dp,_payload:{_status:-1,_result:t},_init:gp}};Y.memo=function(t,e){return{$$typeof:cp,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Gs.transition;Gs.transition={};try{t()}finally{Gs.transition=e}};Y.unstable_act=bc;Y.useCallback=function(t,e){return De.current.useCallback(t,e)};Y.useContext=function(t){return De.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return De.current.useDeferredValue(t)};Y.useEffect=function(t,e){return De.current.useEffect(t,e)};Y.useId=function(){return De.current.useId()};Y.useImperativeHandle=function(t,e,n){return De.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return De.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return De.current.useReducer(t,e,n)};Y.useRef=function(t){return De.current.useRef(t)};Y.useState=function(t){return De.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return De.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return De.current.useTransition()};Y.version="18.3.1";gc.exports=Y;var R=gc.exports;const yp=np(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xp=R,wp=Symbol.for("react.element"),_p=Symbol.for("react.fragment"),Sp=Object.prototype.hasOwnProperty,jp=xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bp={key:!0,ref:!0,__self:!0,__source:!0};function kc(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Sp.call(e,i)&&!bp.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:wp,type:t,key:r,ref:o,props:s,_owner:jp.current}}Fr.Fragment=_p;Fr.jsx=kc;Fr.jsxs=kc;mc.exports=Fr;var l=mc.exports,ql={},Mc={exports:{}},et={},Cc={exports:{}},Ec={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,x){var E=M.length;M.push(x);e:for(;0<E;){var W=E-1>>>1,V=M[W];if(0<s(V,x))M[W]=x,M[E]=V,E=W;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var x=M[0],E=M.pop();if(E!==x){M[0]=E;e:for(var W=0,V=M.length,le=V>>>1;W<le;){var ae=2*(W+1)-1,ge=M[ae],F=ae+1,Z=M[F];if(0>s(ge,E))F<V&&0>s(Z,ge)?(M[W]=Z,M[F]=E,W=F):(M[W]=ge,M[ae]=E,W=ae);else if(F<V&&0>s(Z,E))M[W]=Z,M[F]=E,W=F;else break e}}return x}function s(M,x){var E=M.sortIndex-x.sortIndex;return E!==0?E:M.id-x.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],d=1,c=null,f=3,g=!1,y=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(M){for(var x=n(h);x!==null;){if(x.callback===null)i(h);else if(x.startTime<=M)i(h),x.sortIndex=x.expirationTime,e(u,x);else break;x=n(h)}}function S(M){if(w=!1,m(M),!y)if(n(u)!==null)y=!0,j(b);else{var x=n(h);x!==null&&P(S,x.startTime-M)}}function b(M,x){y=!1,w&&(w=!1,v(I),I=-1),g=!0;var E=f;try{for(m(x),c=n(u);c!==null&&(!(c.expirationTime>x)||M&&!D());){var W=c.callback;if(typeof W=="function"){c.callback=null,f=c.priorityLevel;var V=W(c.expirationTime<=x);x=t.unstable_now(),typeof V=="function"?c.callback=V:c===n(u)&&i(u),m(x)}else i(u);c=n(u)}if(c!==null)var le=!0;else{var ae=n(h);ae!==null&&P(S,ae.startTime-x),le=!1}return le}finally{c=null,f=E,g=!1}}var N=!1,k=null,I=-1,U=5,O=-1;function D(){return!(t.unstable_now()-O<U)}function H(){if(k!==null){var M=t.unstable_now();O=M;var x=!0;try{x=k(!0,M)}finally{x?J():(N=!1,k=null)}}else N=!1}var J;if(typeof p=="function")J=function(){p(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=H,J=function(){z.postMessage(null)}}else J=function(){C(H,0)};function j(M){k=M,N||(N=!0,J())}function P(M,x){I=C(function(){M(t.unstable_now())},x)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,j(b))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(M){switch(f){case 1:case 2:case 3:var x=3;break;default:x=f}var E=f;f=x;try{return M()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,x){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var E=f;f=M;try{return x()}finally{f=E}},t.unstable_scheduleCallback=function(M,x,E){var W=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?W+E:W):E=W,M){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=E+V,M={id:d++,callback:x,priorityLevel:M,startTime:E,expirationTime:V,sortIndex:-1},E>W?(M.sortIndex=E,e(h,M),n(u)===null&&M===n(h)&&(w?(v(I),I=-1):w=!0,P(S,E-W))):(M.sortIndex=V,e(u,M),y||g||(y=!0,j(b))),M},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(M){var x=f;return function(){var E=f;f=x;try{return M.apply(this,arguments)}finally{f=E}}}})(Ec);Cc.exports=Ec;var kp=Cc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mp=R,qe=kp;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pc=new Set,Qi={};function zn(t,e){li(t,e),li(t+"Capture",e)}function li(t,e){for(Qi[t]=e,t=0;t<e.length;t++)Pc.add(e[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eo=Object.prototype.hasOwnProperty,Cp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,su={},ru={};function Ep(t){return eo.call(ru,t)?!0:eo.call(su,t)?!1:Cp.test(t)?ru[t]=!0:(su[t]=!0,!1)}function Pp(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Np(t,e,n,i){if(e===null||typeof e>"u"||Pp(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var na=/[\-:]([a-z])/g;function ia(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(na,ia);Ne[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(na,ia);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(na,ia);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function sa(t,e,n,i){var s=Ne.hasOwnProperty(e)?Ne[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Np(e,n,s,i)&&(n=null),i||s===null?Ep(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Bt=Mp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ks=Symbol.for("react.element"),An=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),ra=Symbol.for("react.strict_mode"),to=Symbol.for("react.profiler"),Nc=Symbol.for("react.provider"),zc=Symbol.for("react.context"),la=Symbol.for("react.forward_ref"),no=Symbol.for("react.suspense"),io=Symbol.for("react.suspense_list"),oa=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),Tc=Symbol.for("react.offscreen"),lu=Symbol.iterator;function Si(t){return t===null||typeof t!="object"?null:(t=lu&&t[lu]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,al;function zi(t){if(al===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);al=e&&e[1]||""}return`
`+al+t}var ul=!1;function hl(t,e){if(!t||ul)return"";ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{ul=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zi(t):""}function zp(t){switch(t.tag){case 5:return zi(t.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return t=hl(t.type,!1),t;case 11:return t=hl(t.type.render,!1),t;case 1:return t=hl(t.type,!0),t;default:return""}}function so(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case On:return"Fragment";case An:return"Portal";case to:return"Profiler";case ra:return"StrictMode";case no:return"Suspense";case io:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zc:return(t.displayName||"Context")+".Consumer";case Nc:return(t._context.displayName||"Context")+".Provider";case la:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oa:return e=t.displayName||null,e!==null?e:so(t.type)||"Memo";case Vt:e=t._payload,t=t._init;try{return so(t(e))}catch{}}return null}function Tp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return so(e);case 8:return e===ra?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Rp(t){var e=Rc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ms(t){t._valueTracker||(t._valueTracker=Rp(t))}function Lc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Rc(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ur(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ro(t,e){var n=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ou(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ln(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ic(t,e){e=e.checked,e!=null&&sa(t,"checked",e,!1)}function lo(t,e){Ic(t,e);var n=ln(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oo(t,e.type,n):e.hasOwnProperty("defaultValue")&&oo(t,e.type,ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function au(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oo(t,e,n){(e!=="number"||ur(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ti=Array.isArray;function Zn(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ln(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ao(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Ti(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ln(n)}}function Fc(t,e){var n=ln(e.value),i=ln(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function hu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Bc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uo(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Bc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cs,Ac=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cs=Cs||document.createElement("div"),Cs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ji(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lp=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(t){Lp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ii[e]=Ii[t]})});function Oc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ii.hasOwnProperty(t)&&Ii[t]?(""+e).trim():e+"px"}function Dc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Oc(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var Ip=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(t,e){if(e){if(Ip[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function co(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fo=null;function aa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var po=null,qn=null,ei=null;function cu(t){if(t=ys(t)){if(typeof po!="function")throw Error(L(280));var e=t.stateNode;e&&(e=$r(e),po(t.stateNode,t.type,e))}}function $c(t){qn?ei?ei.push(t):ei=[t]:qn=t}function Wc(){if(qn){var t=qn,e=ei;if(ei=qn=null,cu(t),e)for(t=0;t<e.length;t++)cu(e[t])}}function Uc(t,e){return t(e)}function Vc(){}var cl=!1;function Hc(t,e,n){if(cl)return t(e,n);cl=!0;try{return Uc(t,e,n)}finally{cl=!1,(qn!==null||ei!==null)&&(Vc(),Wc())}}function Gi(t,e){var n=t.stateNode;if(n===null)return null;var i=$r(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var mo=!1;if(Rt)try{var ji={};Object.defineProperty(ji,"passive",{get:function(){mo=!0}}),window.addEventListener("test",ji,ji),window.removeEventListener("test",ji,ji)}catch{mo=!1}function Fp(t,e,n,i,s,r,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var Fi=!1,hr=null,cr=!1,go=null,Bp={onError:function(t){Fi=!0,hr=t}};function Ap(t,e,n,i,s,r,o,a,u){Fi=!1,hr=null,Fp.apply(Bp,arguments)}function Op(t,e,n,i,s,r,o,a,u){if(Ap.apply(this,arguments),Fi){if(Fi){var h=hr;Fi=!1,hr=null}else throw Error(L(198));cr||(cr=!0,go=h)}}function Tn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function du(t){if(Tn(t)!==t)throw Error(L(188))}function Dp(t){var e=t.alternate;if(!e){if(e=Tn(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return du(s),t;if(r===i)return du(s),e;r=r.sibling}throw Error(L(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(L(189))}}if(n.alternate!==i)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function Yc(t){return t=Dp(t),t!==null?Qc(t):null}function Qc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qc(t);if(e!==null)return e;t=t.sibling}return null}var Jc=qe.unstable_scheduleCallback,fu=qe.unstable_cancelCallback,$p=qe.unstable_shouldYield,Wp=qe.unstable_requestPaint,pe=qe.unstable_now,Up=qe.unstable_getCurrentPriorityLevel,ua=qe.unstable_ImmediatePriority,Gc=qe.unstable_UserBlockingPriority,dr=qe.unstable_NormalPriority,Vp=qe.unstable_LowPriority,Xc=qe.unstable_IdlePriority,Br=null,jt=null;function Hp(t){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(Br,t,void 0,(t.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Qp,Kp=Math.log,Yp=Math.LN2;function Qp(t){return t>>>=0,t===0?32:31-(Kp(t)/Yp|0)|0}var Es=64,Ps=4194304;function Ri(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fr(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Ri(a):(r&=o,r!==0&&(i=Ri(r)))}else o=n&~s,o!==0?i=Ri(o):r!==0&&(i=Ri(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ft(e),s=1<<n,i|=t[n],e&=~s;return i}function Jp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gp(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-ft(r),a=1<<o,u=s[o];u===-1?(!(a&n)||a&i)&&(s[o]=Jp(a,e)):u<=e&&(t.expiredLanes|=a),r&=~a}}function vo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zc(){var t=Es;return Es<<=1,!(Es&4194240)&&(Es=64),t}function dl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ft(e),t[e]=n}function Xp(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ft(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function ha(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ft(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ee=0;function qc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ed,ca,td,nd,id,yo=!1,Ns=[],Xt=null,Zt=null,qt=null,Xi=new Map,Zi=new Map,Kt=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pu(t,e){switch(t){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":Xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(e.pointerId)}}function bi(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ys(e),e!==null&&ca(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qp(t,e,n,i,s){switch(e){case"focusin":return Xt=bi(Xt,t,e,n,i,s),!0;case"dragenter":return Zt=bi(Zt,t,e,n,i,s),!0;case"mouseover":return qt=bi(qt,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Xi.set(r,bi(Xi.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Zi.set(r,bi(Zi.get(r)||null,t,e,n,i,s)),!0}return!1}function sd(t){var e=mn(t.target);if(e!==null){var n=Tn(e);if(n!==null){if(e=n.tag,e===13){if(e=Kc(n),e!==null){t.blockedOn=e,id(t.priority,function(){td(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);fo=i,n.target.dispatchEvent(i),fo=null}else return e=ys(n),e!==null&&ca(e),t.blockedOn=n,!1;e.shift()}return!0}function mu(t,e,n){Xs(t)&&n.delete(e)}function em(){yo=!1,Xt!==null&&Xs(Xt)&&(Xt=null),Zt!==null&&Xs(Zt)&&(Zt=null),qt!==null&&Xs(qt)&&(qt=null),Xi.forEach(mu),Zi.forEach(mu)}function ki(t,e){t.blockedOn===e&&(t.blockedOn=null,yo||(yo=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,em)))}function qi(t){function e(s){return ki(s,t)}if(0<Ns.length){ki(Ns[0],t);for(var n=1;n<Ns.length;n++){var i=Ns[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Xt!==null&&ki(Xt,t),Zt!==null&&ki(Zt,t),qt!==null&&ki(qt,t),Xi.forEach(e),Zi.forEach(e),n=0;n<Kt.length;n++)i=Kt[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Kt.length&&(n=Kt[0],n.blockedOn===null);)sd(n),n.blockedOn===null&&Kt.shift()}var ti=Bt.ReactCurrentBatchConfig,pr=!0;function tm(t,e,n,i){var s=ee,r=ti.transition;ti.transition=null;try{ee=1,da(t,e,n,i)}finally{ee=s,ti.transition=r}}function nm(t,e,n,i){var s=ee,r=ti.transition;ti.transition=null;try{ee=4,da(t,e,n,i)}finally{ee=s,ti.transition=r}}function da(t,e,n,i){if(pr){var s=xo(t,e,n,i);if(s===null)Sl(t,e,i,mr,n),pu(t,i);else if(qp(s,t,e,n,i))i.stopPropagation();else if(pu(t,i),e&4&&-1<Zp.indexOf(t)){for(;s!==null;){var r=ys(s);if(r!==null&&ed(r),r=xo(t,e,n,i),r===null&&Sl(t,e,i,mr,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Sl(t,e,i,null,n)}}var mr=null;function xo(t,e,n,i){if(mr=null,t=aa(i),t=mn(t),t!==null)if(e=Tn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mr=t,null}function rd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Up()){case ua:return 1;case Gc:return 4;case dr:case Vp:return 16;case Xc:return 536870912;default:return 16}default:return 16}}var Qt=null,fa=null,Zs=null;function ld(){if(Zs)return Zs;var t,e=fa,n=e.length,i,s="value"in Qt?Qt.value:Qt.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Zs=s.slice(t,1<i?1-i:void 0)}function qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zs(){return!0}function gu(){return!1}function tt(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?zs:gu,this.isPropagationStopped=gu,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=tt(vi),vs=de({},vi,{view:0,detail:0}),im=tt(vs),fl,pl,Mi,Ar=de({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(fl=t.screenX-Mi.screenX,pl=t.screenY-Mi.screenY):pl=fl=0,Mi=t),fl)},movementY:function(t){return"movementY"in t?t.movementY:pl}}),vu=tt(Ar),sm=de({},Ar,{dataTransfer:0}),rm=tt(sm),lm=de({},vs,{relatedTarget:0}),ml=tt(lm),om=de({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),am=tt(om),um=de({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hm=tt(um),cm=de({},vi,{data:0}),yu=tt(cm),dm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pm[t])?!!e[t]:!1}function ma(){return mm}var gm=de({},vs,{key:function(t){if(t.key){var e=dm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vm=tt(gm),ym=de({},Ar,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xu=tt(ym),xm=de({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),wm=tt(xm),_m=de({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sm=tt(_m),jm=de({},Ar,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bm=tt(jm),km=[9,13,27,32],ga=Rt&&"CompositionEvent"in window,Bi=null;Rt&&"documentMode"in document&&(Bi=document.documentMode);var Mm=Rt&&"TextEvent"in window&&!Bi,od=Rt&&(!ga||Bi&&8<Bi&&11>=Bi),wu=" ",_u=!1;function ad(t,e){switch(t){case"keyup":return km.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ud(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Dn=!1;function Cm(t,e){switch(t){case"compositionend":return ud(e);case"keypress":return e.which!==32?null:(_u=!0,wu);case"textInput":return t=e.data,t===wu&&_u?null:t;default:return null}}function Em(t,e){if(Dn)return t==="compositionend"||!ga&&ad(t,e)?(t=ld(),Zs=fa=Qt=null,Dn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return od&&e.locale!=="ko"?null:e.data;default:return null}}var Pm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Su(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Pm[t.type]:e==="textarea"}function hd(t,e,n,i){$c(i),e=gr(e,"onChange"),0<e.length&&(n=new pa("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ai=null,es=null;function Nm(t){_d(t,0)}function Or(t){var e=Un(t);if(Lc(e))return t}function zm(t,e){if(t==="change")return e}var cd=!1;if(Rt){var gl;if(Rt){var vl="oninput"in document;if(!vl){var ju=document.createElement("div");ju.setAttribute("oninput","return;"),vl=typeof ju.oninput=="function"}gl=vl}else gl=!1;cd=gl&&(!document.documentMode||9<document.documentMode)}function bu(){Ai&&(Ai.detachEvent("onpropertychange",dd),es=Ai=null)}function dd(t){if(t.propertyName==="value"&&Or(es)){var e=[];hd(e,es,t,aa(t)),Hc(Nm,e)}}function Tm(t,e,n){t==="focusin"?(bu(),Ai=e,es=n,Ai.attachEvent("onpropertychange",dd)):t==="focusout"&&bu()}function Rm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Or(es)}function Lm(t,e){if(t==="click")return Or(e)}function Im(t,e){if(t==="input"||t==="change")return Or(e)}function Fm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:Fm;function ts(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!eo.call(e,s)||!mt(t[s],e[s]))return!1}return!0}function ku(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mu(t,e){var n=ku(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ku(n)}}function fd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pd(){for(var t=window,e=ur();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ur(t.document)}return e}function va(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bm(t){var e=pd(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fd(n.ownerDocument.documentElement,n)){if(i!==null&&va(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=Mu(n,r);var o=Mu(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Am=Rt&&"documentMode"in document&&11>=document.documentMode,$n=null,wo=null,Oi=null,_o=!1;function Cu(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_o||$n==null||$n!==ur(i)||(i=$n,"selectionStart"in i&&va(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Oi&&ts(Oi,i)||(Oi=i,i=gr(wo,"onSelect"),0<i.length&&(e=new pa("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=$n)))}function Ts(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wn={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},yl={},md={};Rt&&(md=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function Dr(t){if(yl[t])return yl[t];if(!Wn[t])return t;var e=Wn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in md)return yl[t]=e[n];return t}var gd=Dr("animationend"),vd=Dr("animationiteration"),yd=Dr("animationstart"),xd=Dr("transitionend"),wd=new Map,Eu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function an(t,e){wd.set(t,e),zn(e,[t])}for(var xl=0;xl<Eu.length;xl++){var wl=Eu[xl],Om=wl.toLowerCase(),Dm=wl[0].toUpperCase()+wl.slice(1);an(Om,"on"+Dm)}an(gd,"onAnimationEnd");an(vd,"onAnimationIteration");an(yd,"onAnimationStart");an("dblclick","onDoubleClick");an("focusin","onFocus");an("focusout","onBlur");an(xd,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$m=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function Pu(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Op(i,e,void 0,t),t.currentTarget=null}function _d(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==r&&s.isPropagationStopped())break e;Pu(s,a,h),r=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==r&&s.isPropagationStopped())break e;Pu(s,a,h),r=u}}}if(cr)throw t=go,cr=!1,go=null,t}function se(t,e){var n=e[Mo];n===void 0&&(n=e[Mo]=new Set);var i=t+"__bubble";n.has(i)||(Sd(e,t,2,!1),n.add(i))}function _l(t,e,n){var i=0;e&&(i|=4),Sd(n,t,i,e)}var Rs="_reactListening"+Math.random().toString(36).slice(2);function ns(t){if(!t[Rs]){t[Rs]=!0,Pc.forEach(function(n){n!=="selectionchange"&&($m.has(n)||_l(n,!1,t),_l(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rs]||(e[Rs]=!0,_l("selectionchange",!1,e))}}function Sd(t,e,n,i){switch(rd(e)){case 1:var s=tm;break;case 4:s=nm;break;default:s=da}n=s.bind(null,e,n,t),s=void 0,!mo||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sl(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=mn(a),o===null)return;if(u=o.tag,u===5||u===6){i=r=o;continue e}a=a.parentNode}}i=i.return}Hc(function(){var h=r,d=aa(n),c=[];e:{var f=wd.get(t);if(f!==void 0){var g=pa,y=t;switch(t){case"keypress":if(qs(n)===0)break e;case"keydown":case"keyup":g=vm;break;case"focusin":y="focus",g=ml;break;case"focusout":y="blur",g=ml;break;case"beforeblur":case"afterblur":g=ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wm;break;case gd:case vd:case yd:g=am;break;case xd:g=Sm;break;case"scroll":g=im;break;case"wheel":g=bm;break;case"copy":case"cut":case"paste":g=hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xu}var w=(e&4)!==0,C=!w&&t==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var p=h,m;p!==null;){m=p;var S=m.stateNode;if(m.tag===5&&S!==null&&(m=S,v!==null&&(S=Gi(p,v),S!=null&&w.push(is(p,S,m)))),C)break;p=p.return}0<w.length&&(f=new g(f,y,null,n,d),c.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==fo&&(y=n.relatedTarget||n.fromElement)&&(mn(y)||y[Lt]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=h,y=y?mn(y):null,y!==null&&(C=Tn(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=h),g!==y)){if(w=vu,S="onMouseLeave",v="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=xu,S="onPointerLeave",v="onPointerEnter",p="pointer"),C=g==null?f:Un(g),m=y==null?f:Un(y),f=new w(S,p+"leave",g,n,d),f.target=C,f.relatedTarget=m,S=null,mn(d)===h&&(w=new w(v,p+"enter",y,n,d),w.target=m,w.relatedTarget=C,S=w),C=S,g&&y)t:{for(w=g,v=y,p=0,m=w;m;m=In(m))p++;for(m=0,S=v;S;S=In(S))m++;for(;0<p-m;)w=In(w),p--;for(;0<m-p;)v=In(v),m--;for(;p--;){if(w===v||v!==null&&w===v.alternate)break t;w=In(w),v=In(v)}w=null}else w=null;g!==null&&Nu(c,f,g,w,!1),y!==null&&C!==null&&Nu(c,C,y,w,!0)}}e:{if(f=h?Un(h):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var b=zm;else if(Su(f))if(cd)b=Im;else{b=Rm;var N=Tm}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=Lm);if(b&&(b=b(t,h))){hd(c,b,n,d);break e}N&&N(t,f,h),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&oo(f,"number",f.value)}switch(N=h?Un(h):window,t){case"focusin":(Su(N)||N.contentEditable==="true")&&($n=N,wo=h,Oi=null);break;case"focusout":Oi=wo=$n=null;break;case"mousedown":_o=!0;break;case"contextmenu":case"mouseup":case"dragend":_o=!1,Cu(c,n,d);break;case"selectionchange":if(Am)break;case"keydown":case"keyup":Cu(c,n,d)}var k;if(ga)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Dn?ad(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(od&&n.locale!=="ko"&&(Dn||I!=="onCompositionStart"?I==="onCompositionEnd"&&Dn&&(k=ld()):(Qt=d,fa="value"in Qt?Qt.value:Qt.textContent,Dn=!0)),N=gr(h,I),0<N.length&&(I=new yu(I,t,null,n,d),c.push({event:I,listeners:N}),k?I.data=k:(k=ud(n),k!==null&&(I.data=k)))),(k=Mm?Cm(t,n):Em(t,n))&&(h=gr(h,"onBeforeInput"),0<h.length&&(d=new yu("onBeforeInput","beforeinput",null,n,d),c.push({event:d,listeners:h}),d.data=k))}_d(c,e)})}function is(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gr(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Gi(t,n),r!=null&&i.unshift(is(t,r,s)),r=Gi(t,e),r!=null&&i.push(is(t,r,s))),t=t.return}return i}function In(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nu(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&h!==null&&(a=h,s?(u=Gi(n,r),u!=null&&o.unshift(is(n,u,a))):s||(u=Gi(n,r),u!=null&&o.push(is(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wm=/\r\n?/g,Um=/\u0000|\uFFFD/g;function zu(t){return(typeof t=="string"?t:""+t).replace(Wm,`
`).replace(Um,"")}function Ls(t,e,n){if(e=zu(e),zu(t)!==e&&n)throw Error(L(425))}function vr(){}var So=null,jo=null;function bo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ko=typeof setTimeout=="function"?setTimeout:void 0,Vm=typeof clearTimeout=="function"?clearTimeout:void 0,Tu=typeof Promise=="function"?Promise:void 0,Hm=typeof queueMicrotask=="function"?queueMicrotask:typeof Tu<"u"?function(t){return Tu.resolve(null).then(t).catch(Km)}:ko;function Km(t){setTimeout(function(){throw t})}function jl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),qi(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);qi(e)}function en(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ru(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),St="__reactFiber$"+yi,ss="__reactProps$"+yi,Lt="__reactContainer$"+yi,Mo="__reactEvents$"+yi,Ym="__reactListeners$"+yi,Qm="__reactHandles$"+yi;function mn(t){var e=t[St];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lt]||n[St]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ru(t);t!==null;){if(n=t[St])return n;t=Ru(t)}return e}t=n,n=t.parentNode}return null}function ys(t){return t=t[St]||t[Lt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Un(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function $r(t){return t[ss]||null}var Co=[],Vn=-1;function un(t){return{current:t}}function re(t){0>Vn||(t.current=Co[Vn],Co[Vn]=null,Vn--)}function ie(t,e){Vn++,Co[Vn]=t.current,t.current=e}var on={},Ie=un(on),He=un(!1),_n=on;function oi(t,e){var n=t.type.contextTypes;if(!n)return on;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ke(t){return t=t.childContextTypes,t!=null}function yr(){re(He),re(Ie)}function Lu(t,e,n){if(Ie.current!==on)throw Error(L(168));ie(Ie,e),ie(He,n)}function jd(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(L(108,Tp(t)||"Unknown",s));return de({},n,i)}function xr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||on,_n=Ie.current,ie(Ie,t),ie(He,He.current),!0}function Iu(t,e,n){var i=t.stateNode;if(!i)throw Error(L(169));n?(t=jd(t,e,_n),i.__reactInternalMemoizedMergedChildContext=t,re(He),re(Ie),ie(Ie,t)):re(He),ie(He,n)}var Ct=null,Wr=!1,bl=!1;function bd(t){Ct===null?Ct=[t]:Ct.push(t)}function Jm(t){Wr=!0,bd(t)}function hn(){if(!bl&&Ct!==null){bl=!0;var t=0,e=ee;try{var n=Ct;for(ee=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ct=null,Wr=!1}catch(s){throw Ct!==null&&(Ct=Ct.slice(t+1)),Jc(ua,hn),s}finally{ee=e,bl=!1}}return null}var Hn=[],Kn=0,wr=null,_r=0,nt=[],it=0,Sn=null,Et=1,Pt="";function fn(t,e){Hn[Kn++]=_r,Hn[Kn++]=wr,wr=t,_r=e}function kd(t,e,n){nt[it++]=Et,nt[it++]=Pt,nt[it++]=Sn,Sn=t;var i=Et;t=Pt;var s=32-ft(i)-1;i&=~(1<<s),n+=1;var r=32-ft(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Et=1<<32-ft(e)+s|n<<s|i,Pt=r+t}else Et=1<<r|n<<s|i,Pt=t}function ya(t){t.return!==null&&(fn(t,1),kd(t,1,0))}function xa(t){for(;t===wr;)wr=Hn[--Kn],Hn[Kn]=null,_r=Hn[--Kn],Hn[Kn]=null;for(;t===Sn;)Sn=nt[--it],nt[it]=null,Pt=nt[--it],nt[it]=null,Et=nt[--it],nt[it]=null}var Xe=null,Ge=null,oe=!1,dt=null;function Md(t,e){var n=st(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xe=t,Ge=en(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xe=t,Ge=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sn!==null?{id:Et,overflow:Pt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=st(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xe=t,Ge=null,!0):!1;default:return!1}}function Eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Po(t){if(oe){var e=Ge;if(e){var n=e;if(!Fu(t,e)){if(Eo(t))throw Error(L(418));e=en(n.nextSibling);var i=Xe;e&&Fu(t,e)?Md(i,n):(t.flags=t.flags&-4097|2,oe=!1,Xe=t)}}else{if(Eo(t))throw Error(L(418));t.flags=t.flags&-4097|2,oe=!1,Xe=t}}}function Bu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xe=t}function Is(t){if(t!==Xe)return!1;if(!oe)return Bu(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bo(t.type,t.memoizedProps)),e&&(e=Ge)){if(Eo(t))throw Cd(),Error(L(418));for(;e;)Md(t,e),e=en(e.nextSibling)}if(Bu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ge=en(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ge=null}}else Ge=Xe?en(t.stateNode.nextSibling):null;return!0}function Cd(){for(var t=Ge;t;)t=en(t.nextSibling)}function ai(){Ge=Xe=null,oe=!1}function wa(t){dt===null?dt=[t]:dt.push(t)}var Gm=Bt.ReactCurrentBatchConfig;function Ci(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var i=n.stateNode}if(!i)throw Error(L(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function Fs(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Au(t){var e=t._init;return e(t._payload)}function Ed(t){function e(v,p){if(t){var m=v.deletions;m===null?(v.deletions=[p],v.flags|=16):m.push(p)}}function n(v,p){if(!t)return null;for(;p!==null;)e(v,p),p=p.sibling;return null}function i(v,p){for(v=new Map;p!==null;)p.key!==null?v.set(p.key,p):v.set(p.index,p),p=p.sibling;return v}function s(v,p){return v=rn(v,p),v.index=0,v.sibling=null,v}function r(v,p,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<p?(v.flags|=2,p):m):(v.flags|=2,p)):(v.flags|=1048576,p)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,p,m,S){return p===null||p.tag!==6?(p=zl(m,v.mode,S),p.return=v,p):(p=s(p,m),p.return=v,p)}function u(v,p,m,S){var b=m.type;return b===On?d(v,p,m.props.children,S,m.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Vt&&Au(b)===p.type)?(S=s(p,m.props),S.ref=Ci(v,p,m),S.return=v,S):(S=lr(m.type,m.key,m.props,null,v.mode,S),S.ref=Ci(v,p,m),S.return=v,S)}function h(v,p,m,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Tl(m,v.mode,S),p.return=v,p):(p=s(p,m.children||[]),p.return=v,p)}function d(v,p,m,S,b){return p===null||p.tag!==7?(p=xn(m,v.mode,S,b),p.return=v,p):(p=s(p,m),p.return=v,p)}function c(v,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=zl(""+p,v.mode,m),p.return=v,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ks:return m=lr(p.type,p.key,p.props,null,v.mode,m),m.ref=Ci(v,null,p),m.return=v,m;case An:return p=Tl(p,v.mode,m),p.return=v,p;case Vt:var S=p._init;return c(v,S(p._payload),m)}if(Ti(p)||Si(p))return p=xn(p,v.mode,m,null),p.return=v,p;Fs(v,p)}return null}function f(v,p,m,S){var b=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return b!==null?null:a(v,p,""+m,S);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ks:return m.key===b?u(v,p,m,S):null;case An:return m.key===b?h(v,p,m,S):null;case Vt:return b=m._init,f(v,p,b(m._payload),S)}if(Ti(m)||Si(m))return b!==null?null:d(v,p,m,S,null);Fs(v,m)}return null}function g(v,p,m,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(m)||null,a(p,v,""+S,b);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ks:return v=v.get(S.key===null?m:S.key)||null,u(p,v,S,b);case An:return v=v.get(S.key===null?m:S.key)||null,h(p,v,S,b);case Vt:var N=S._init;return g(v,p,m,N(S._payload),b)}if(Ti(S)||Si(S))return v=v.get(m)||null,d(p,v,S,b,null);Fs(p,S)}return null}function y(v,p,m,S){for(var b=null,N=null,k=p,I=p=0,U=null;k!==null&&I<m.length;I++){k.index>I?(U=k,k=null):U=k.sibling;var O=f(v,k,m[I],S);if(O===null){k===null&&(k=U);break}t&&k&&O.alternate===null&&e(v,k),p=r(O,p,I),N===null?b=O:N.sibling=O,N=O,k=U}if(I===m.length)return n(v,k),oe&&fn(v,I),b;if(k===null){for(;I<m.length;I++)k=c(v,m[I],S),k!==null&&(p=r(k,p,I),N===null?b=k:N.sibling=k,N=k);return oe&&fn(v,I),b}for(k=i(v,k);I<m.length;I++)U=g(k,v,I,m[I],S),U!==null&&(t&&U.alternate!==null&&k.delete(U.key===null?I:U.key),p=r(U,p,I),N===null?b=U:N.sibling=U,N=U);return t&&k.forEach(function(D){return e(v,D)}),oe&&fn(v,I),b}function w(v,p,m,S){var b=Si(m);if(typeof b!="function")throw Error(L(150));if(m=b.call(m),m==null)throw Error(L(151));for(var N=b=null,k=p,I=p=0,U=null,O=m.next();k!==null&&!O.done;I++,O=m.next()){k.index>I?(U=k,k=null):U=k.sibling;var D=f(v,k,O.value,S);if(D===null){k===null&&(k=U);break}t&&k&&D.alternate===null&&e(v,k),p=r(D,p,I),N===null?b=D:N.sibling=D,N=D,k=U}if(O.done)return n(v,k),oe&&fn(v,I),b;if(k===null){for(;!O.done;I++,O=m.next())O=c(v,O.value,S),O!==null&&(p=r(O,p,I),N===null?b=O:N.sibling=O,N=O);return oe&&fn(v,I),b}for(k=i(v,k);!O.done;I++,O=m.next())O=g(k,v,I,O.value,S),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?I:O.key),p=r(O,p,I),N===null?b=O:N.sibling=O,N=O);return t&&k.forEach(function(H){return e(v,H)}),oe&&fn(v,I),b}function C(v,p,m,S){if(typeof m=="object"&&m!==null&&m.type===On&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case ks:e:{for(var b=m.key,N=p;N!==null;){if(N.key===b){if(b=m.type,b===On){if(N.tag===7){n(v,N.sibling),p=s(N,m.props.children),p.return=v,v=p;break e}}else if(N.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Vt&&Au(b)===N.type){n(v,N.sibling),p=s(N,m.props),p.ref=Ci(v,N,m),p.return=v,v=p;break e}n(v,N);break}else e(v,N);N=N.sibling}m.type===On?(p=xn(m.props.children,v.mode,S,m.key),p.return=v,v=p):(S=lr(m.type,m.key,m.props,null,v.mode,S),S.ref=Ci(v,p,m),S.return=v,v=S)}return o(v);case An:e:{for(N=m.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(v,p.sibling),p=s(p,m.children||[]),p.return=v,v=p;break e}else{n(v,p);break}else e(v,p);p=p.sibling}p=Tl(m,v.mode,S),p.return=v,v=p}return o(v);case Vt:return N=m._init,C(v,p,N(m._payload),S)}if(Ti(m))return y(v,p,m,S);if(Si(m))return w(v,p,m,S);Fs(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(v,p.sibling),p=s(p,m),p.return=v,v=p):(n(v,p),p=zl(m,v.mode,S),p.return=v,v=p),o(v)):n(v,p)}return C}var ui=Ed(!0),Pd=Ed(!1),Sr=un(null),jr=null,Yn=null,_a=null;function Sa(){_a=Yn=jr=null}function ja(t){var e=Sr.current;re(Sr),t._currentValue=e}function No(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ni(t,e){jr=t,_a=Yn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ve=!0),t.firstContext=null)}function lt(t){var e=t._currentValue;if(_a!==t)if(t={context:t,memoizedValue:e,next:null},Yn===null){if(jr===null)throw Error(L(308));Yn=t,jr.dependencies={lanes:0,firstContext:t}}else Yn=Yn.next=t;return e}var gn=null;function ba(t){gn===null?gn=[t]:gn.push(t)}function Nd(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,ba(e)):(n.next=s.next,s.next=n),e.interleaved=n,It(t,i)}function It(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ht=!1;function ka(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Tt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Q&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,It(t,n)}return s=i.interleaved,s===null?(e.next=e,ba(i)):(e.next=s.next,s.next=e),i.interleaved=e,It(t,n)}function er(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ha(t,n)}}function Ou(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function br(t,e,n,i){var s=t.updateQueue;Ht=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?r=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=h:a.next=h,d.lastBaseUpdate=u))}if(r!==null){var c=s.baseState;o=0,d=h=u=null,a=r;do{var f=a.lane,g=a.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(f=e,g=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){c=y.call(g,c,f);break e}c=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(g,c,f):y,f==null)break e;c=de({},c,f);break e;case 2:Ht=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(h=d=g,u=c):d=d.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=c),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);bn|=o,t.lanes=o,t.memoizedState=c}}function Du(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(L(191,s));s.call(i)}}}var xs={},bt=un(xs),rs=un(xs),ls=un(xs);function vn(t){if(t===xs)throw Error(L(174));return t}function Ma(t,e){switch(ie(ls,e),ie(rs,t),ie(bt,xs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uo(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uo(e,t)}re(bt),ie(bt,e)}function hi(){re(bt),re(rs),re(ls)}function Td(t){vn(ls.current);var e=vn(bt.current),n=uo(e,t.type);e!==n&&(ie(rs,t),ie(bt,n))}function Ca(t){rs.current===t&&(re(bt),re(rs))}var he=un(0);function kr(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kl=[];function Ea(){for(var t=0;t<kl.length;t++)kl[t]._workInProgressVersionPrimary=null;kl.length=0}var tr=Bt.ReactCurrentDispatcher,Ml=Bt.ReactCurrentBatchConfig,jn=0,ce=null,Se=null,be=null,Mr=!1,Di=!1,os=0,Xm=0;function ze(){throw Error(L(321))}function Pa(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mt(t[n],e[n]))return!1;return!0}function Na(t,e,n,i,s,r){if(jn=r,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tr.current=t===null||t.memoizedState===null?tg:ng,t=n(i,s),Di){r=0;do{if(Di=!1,os=0,25<=r)throw Error(L(301));r+=1,be=Se=null,e.updateQueue=null,tr.current=ig,t=n(i,s)}while(Di)}if(tr.current=Cr,e=Se!==null&&Se.next!==null,jn=0,be=Se=ce=null,Mr=!1,e)throw Error(L(300));return t}function za(){var t=os!==0;return os=0,t}function _t(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ce.memoizedState=be=t:be=be.next=t,be}function ot(){if(Se===null){var t=ce.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=be===null?ce.memoizedState:be.next;if(e!==null)be=e,Se=t;else{if(t===null)throw Error(L(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},be===null?ce.memoizedState=be=t:be=be.next=t}return be}function as(t,e){return typeof e=="function"?e(t):e}function Cl(t){var e=ot(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var i=Se,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,u=null,h=r;do{var d=h.lane;if((jn&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var c={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=c,o=i):u=u.next=c,ce.lanes|=d,bn|=d}h=h.next}while(h!==null&&h!==r);u===null?o=i:u.next=a,mt(i,e.memoizedState)||(Ve=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ce.lanes|=r,bn|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function El(t){var e=ot(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);mt(r,e.memoizedState)||(Ve=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function Rd(){}function Ld(t,e){var n=ce,i=ot(),s=e(),r=!mt(i.memoizedState,s);if(r&&(i.memoizedState=s,Ve=!0),i=i.queue,Ta(Bd.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,us(9,Fd.bind(null,n,i,s,e),void 0,null),ke===null)throw Error(L(349));jn&30||Id(n,e,s)}return s}function Id(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fd(t,e,n,i){e.value=n,e.getSnapshot=i,Ad(e)&&Od(t)}function Bd(t,e,n){return n(function(){Ad(e)&&Od(t)})}function Ad(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mt(t,n)}catch{return!0}}function Od(t){var e=It(t,1);e!==null&&pt(e,t,1,-1)}function $u(t){var e=_t();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:t},e.queue=t,t=t.dispatch=eg.bind(null,ce,t),[e.memoizedState,t]}function us(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Dd(){return ot().memoizedState}function nr(t,e,n,i){var s=_t();ce.flags|=t,s.memoizedState=us(1|e,n,void 0,i===void 0?null:i)}function Ur(t,e,n,i){var s=ot();i=i===void 0?null:i;var r=void 0;if(Se!==null){var o=Se.memoizedState;if(r=o.destroy,i!==null&&Pa(i,o.deps)){s.memoizedState=us(e,n,r,i);return}}ce.flags|=t,s.memoizedState=us(1|e,n,r,i)}function Wu(t,e){return nr(8390656,8,t,e)}function Ta(t,e){return Ur(2048,8,t,e)}function $d(t,e){return Ur(4,2,t,e)}function Wd(t,e){return Ur(4,4,t,e)}function Ud(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vd(t,e,n){return n=n!=null?n.concat([t]):null,Ur(4,4,Ud.bind(null,e,t),n)}function Ra(){}function Hd(t,e){var n=ot();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pa(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Kd(t,e){var n=ot();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pa(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Yd(t,e,n){return jn&21?(mt(n,e)||(n=Zc(),ce.lanes|=n,bn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ve=!0),t.memoizedState=n)}function Zm(t,e){var n=ee;ee=n!==0&&4>n?n:4,t(!0);var i=Ml.transition;Ml.transition={};try{t(!1),e()}finally{ee=n,Ml.transition=i}}function Qd(){return ot().memoizedState}function qm(t,e,n){var i=sn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Jd(t))Gd(e,n);else if(n=Nd(t,e,n,i),n!==null){var s=Ae();pt(n,t,i,s),Xd(n,e,i)}}function eg(t,e,n){var i=sn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jd(t))Gd(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,mt(a,o)){var u=e.interleaved;u===null?(s.next=s,ba(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Nd(t,e,s,i),n!==null&&(s=Ae(),pt(n,t,i,s),Xd(n,e,i))}}function Jd(t){var e=t.alternate;return t===ce||e!==null&&e===ce}function Gd(t,e){Di=Mr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xd(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ha(t,n)}}var Cr={readContext:lt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},tg={readContext:lt,useCallback:function(t,e){return _t().memoizedState=[t,e===void 0?null:e],t},useContext:lt,useEffect:Wu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nr(4194308,4,Ud.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nr(4194308,4,t,e)},useInsertionEffect:function(t,e){return nr(4,2,t,e)},useMemo:function(t,e){var n=_t();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_t();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qm.bind(null,ce,t),[i.memoizedState,t]},useRef:function(t){var e=_t();return t={current:t},e.memoizedState=t},useState:$u,useDebugValue:Ra,useDeferredValue:function(t){return _t().memoizedState=t},useTransition:function(){var t=$u(!1),e=t[0];return t=Zm.bind(null,t[1]),_t().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ce,s=_t();if(oe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),ke===null)throw Error(L(349));jn&30||Id(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,Wu(Bd.bind(null,i,r,t),[t]),i.flags|=2048,us(9,Fd.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=_t(),e=ke.identifierPrefix;if(oe){var n=Pt,i=Et;n=(i&~(1<<32-ft(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=os++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ng={readContext:lt,useCallback:Hd,useContext:lt,useEffect:Ta,useImperativeHandle:Vd,useInsertionEffect:$d,useLayoutEffect:Wd,useMemo:Kd,useReducer:Cl,useRef:Dd,useState:function(){return Cl(as)},useDebugValue:Ra,useDeferredValue:function(t){var e=ot();return Yd(e,Se.memoizedState,t)},useTransition:function(){var t=Cl(as)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Rd,useSyncExternalStore:Ld,useId:Qd,unstable_isNewReconciler:!1},ig={readContext:lt,useCallback:Hd,useContext:lt,useEffect:Ta,useImperativeHandle:Vd,useInsertionEffect:$d,useLayoutEffect:Wd,useMemo:Kd,useReducer:El,useRef:Dd,useState:function(){return El(as)},useDebugValue:Ra,useDeferredValue:function(t){var e=ot();return Se===null?e.memoizedState=t:Yd(e,Se.memoizedState,t)},useTransition:function(){var t=El(as)[0],e=ot().memoizedState;return[t,e]},useMutableSource:Rd,useSyncExternalStore:Ld,useId:Qd,unstable_isNewReconciler:!1};function ht(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zo(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:de({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vr={isMounted:function(t){return(t=t._reactInternals)?Tn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ae(),s=sn(t),r=Tt(i,s);r.payload=e,n!=null&&(r.callback=n),e=tn(t,r,s),e!==null&&(pt(e,t,s,i),er(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ae(),s=sn(t),r=Tt(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=tn(t,r,s),e!==null&&(pt(e,t,s,i),er(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ae(),i=sn(t),s=Tt(n,i);s.tag=2,e!=null&&(s.callback=e),e=tn(t,s,i),e!==null&&(pt(e,t,i,n),er(e,t,i))}};function Uu(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!ts(n,i)||!ts(s,r):!0}function Zd(t,e,n){var i=!1,s=on,r=e.contextType;return typeof r=="object"&&r!==null?r=lt(r):(s=Ke(e)?_n:Ie.current,i=e.contextTypes,r=(i=i!=null)?oi(t,s):on),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vr,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function Vu(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vr.enqueueReplaceState(e,e.state,null)}function To(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ka(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=lt(r):(r=Ke(e)?_n:Ie.current,s.context=oi(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(zo(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vr.enqueueReplaceState(s,s.state,null),br(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ci(t,e){try{var n="",i=e;do n+=zp(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Pl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ro(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sg=typeof WeakMap=="function"?WeakMap:Map;function qd(t,e,n){n=Tt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Pr||(Pr=!0,Uo=i),Ro(t,e)},n}function ef(t,e,n){n=Tt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Ro(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Ro(t,e),typeof i!="function"&&(nn===null?nn=new Set([this]):nn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hu(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new sg;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=yg.bind(null,t,e,n),e.then(t,t))}function Ku(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yu(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Tt(-1,1),e.tag=2,tn(n,e,1))),n.lanes|=1),t)}var rg=Bt.ReactCurrentOwner,Ve=!1;function Be(t,e,n,i){e.child=t===null?Pd(e,null,n,i):ui(e,t.child,n,i)}function Qu(t,e,n,i,s){n=n.render;var r=e.ref;return ni(e,s),i=Na(t,e,n,i,r,s),n=za(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ft(t,e,s)):(oe&&n&&ya(e),e.flags|=1,Be(t,e,i,s),e.child)}function Ju(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!$a(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,tf(t,e,r,i,s)):(t=lr(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:ts,n(o,i)&&t.ref===e.ref)return Ft(t,e,s)}return e.flags|=1,t=rn(r,i),t.ref=e.ref,t.return=e,e.child=t}function tf(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(ts(r,i)&&t.ref===e.ref)if(Ve=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Ve=!0);else return e.lanes=t.lanes,Ft(t,e,s)}return Lo(t,e,n,i,s)}function nf(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(Jn,Je),Je|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(Jn,Je),Je|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ie(Jn,Je),Je|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ie(Jn,Je),Je|=i;return Be(t,e,s,n),e.child}function sf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lo(t,e,n,i,s){var r=Ke(n)?_n:Ie.current;return r=oi(e,r),ni(e,s),n=Na(t,e,n,i,r,s),i=za(),t!==null&&!Ve?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ft(t,e,s)):(oe&&i&&ya(e),e.flags|=1,Be(t,e,n,s),e.child)}function Gu(t,e,n,i,s){if(Ke(n)){var r=!0;xr(e)}else r=!1;if(ni(e,s),e.stateNode===null)ir(t,e),Zd(e,n,i),To(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=lt(h):(h=Ke(n)?_n:Ie.current,h=oi(e,h));var d=n.getDerivedStateFromProps,c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==h)&&Vu(e,o,i,h),Ht=!1;var f=e.memoizedState;o.state=f,br(e,i,o,s),u=e.memoizedState,a!==i||f!==u||He.current||Ht?(typeof d=="function"&&(zo(e,n,d,i),u=e.memoizedState),(a=Ht||Uu(e,n,a,i,f,u,h))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=h,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,zd(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:ht(e.type,a),o.props=h,c=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=lt(u):(u=Ke(n)?_n:Ie.current,u=oi(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||f!==u)&&Vu(e,o,i,u),Ht=!1,f=e.memoizedState,o.state=f,br(e,i,o,s);var y=e.memoizedState;a!==c||f!==y||He.current||Ht?(typeof g=="function"&&(zo(e,n,g,i),y=e.memoizedState),(h=Ht||Uu(e,n,h,i,f,y,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=u,i=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Io(t,e,n,i,r,s)}function Io(t,e,n,i,s,r){sf(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Iu(e,n,!1),Ft(t,e,r);i=e.stateNode,rg.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,r),e.child=ui(e,null,a,r)):Be(t,e,a,r),e.memoizedState=i.state,s&&Iu(e,n,!0),e.child}function rf(t){var e=t.stateNode;e.pendingContext?Lu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lu(t,e.context,!1),Ma(t,e.containerInfo)}function Xu(t,e,n,i,s){return ai(),wa(s),e.flags|=256,Be(t,e,n,i),e.child}var Fo={dehydrated:null,treeContext:null,retryLane:0};function Bo(t){return{baseLanes:t,cachePool:null,transitions:null}}function lf(t,e,n){var i=e.pendingProps,s=he.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ie(he,s&1),t===null)return Po(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Yr(o,i,0,null),t=xn(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Bo(n),e.memoizedState=Fo,t):La(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return lg(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=rn(s,u),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=rn(a,r):(r=xn(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Bo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Fo,i}return r=t.child,t=r.sibling,i=rn(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function La(t,e){return e=Yr({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bs(t,e,n,i){return i!==null&&wa(i),ui(e,t.child,null,n),t=La(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lg(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=Pl(Error(L(422))),Bs(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Yr({mode:"visible",children:i.children},s,0,null),r=xn(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=Bo(o),e.memoizedState=Fo,r);if(!(e.mode&1))return Bs(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(L(419)),i=Pl(r,i,void 0),Bs(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ve||a){if(i=ke,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,It(t,s),pt(i,t,s,-1))}return Da(),i=Pl(Error(L(421))),Bs(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=xg.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Ge=en(s.nextSibling),Xe=e,oe=!0,dt=null,t!==null&&(nt[it++]=Et,nt[it++]=Pt,nt[it++]=Sn,Et=t.id,Pt=t.overflow,Sn=e),e=La(e,i.children),e.flags|=4096,e)}function Zu(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),No(t.return,e,n)}function Nl(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function of(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Be(t,e,i.children,n),i=he.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zu(t,n,e);else if(t.tag===19)Zu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ie(he,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kr(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nl(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kr(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nl(e,!0,n,null,r);break;case"together":Nl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ir(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ft(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function og(t,e,n){switch(e.tag){case 3:rf(e),ai();break;case 5:Td(e);break;case 1:Ke(e.type)&&xr(e);break;case 4:Ma(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ie(Sr,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ie(he,he.current&1),e.flags|=128,null):n&e.child.childLanes?lf(t,e,n):(ie(he,he.current&1),t=Ft(t,e,n),t!==null?t.sibling:null);ie(he,he.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return of(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ie(he,he.current),i)break;return null;case 22:case 23:return e.lanes=0,nf(t,e,n)}return Ft(t,e,n)}var af,Ao,uf,hf;af=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ao=function(){};uf=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,vn(bt.current);var r=null;switch(n){case"input":s=ro(t,s),i=ro(t,i),r=[];break;case"select":s=de({},s,{value:void 0}),i=de({},i,{value:void 0}),r=[];break;case"textarea":s=ao(t,s),i=ao(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=vr)}ho(n,i);var o;n=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Qi.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var u=i[h];if(a=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(r||(r=[]),r.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(r=r||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Qi.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&se("scroll",t),r||a===u||(r=[])):(r=r||[]).push(h,u))}n&&(r=r||[]).push("style",n);var h=r;(e.updateQueue=h)&&(e.flags|=4)}};hf=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ei(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ag(t,e,n){var i=e.pendingProps;switch(xa(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return Ke(e.type)&&yr(),Te(e),null;case 3:return i=e.stateNode,hi(),re(He),re(Ie),Ea(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Is(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(Ko(dt),dt=null))),Ao(t,e),Te(e),null;case 5:Ca(e);var s=vn(ls.current);if(n=e.type,t!==null&&e.stateNode!=null)uf(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(L(166));return Te(e),null}if(t=vn(bt.current),Is(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[St]=e,i[ss]=r,t=(e.mode&1)!==0,n){case"dialog":se("cancel",i),se("close",i);break;case"iframe":case"object":case"embed":se("load",i);break;case"video":case"audio":for(s=0;s<Li.length;s++)se(Li[s],i);break;case"source":se("error",i);break;case"img":case"image":case"link":se("error",i),se("load",i);break;case"details":se("toggle",i);break;case"input":ou(i,r),se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},se("invalid",i);break;case"textarea":uu(i,r),se("invalid",i)}ho(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Ls(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Ls(i.textContent,a,t),s=["children",""+a]):Qi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",i)}switch(n){case"input":Ms(i),au(i,r,!0);break;case"textarea":Ms(i),hu(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=vr)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[St]=e,t[ss]=i,af(t,e,!1,!1),e.stateNode=t;e:{switch(o=co(n,i),n){case"dialog":se("cancel",t),se("close",t),s=i;break;case"iframe":case"object":case"embed":se("load",t),s=i;break;case"video":case"audio":for(s=0;s<Li.length;s++)se(Li[s],t);s=i;break;case"source":se("error",t),s=i;break;case"img":case"image":case"link":se("error",t),se("load",t),s=i;break;case"details":se("toggle",t),s=i;break;case"input":ou(t,i),s=ro(t,i),se("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=de({},i,{value:void 0}),se("invalid",t);break;case"textarea":uu(t,i),s=ao(t,i),se("invalid",t);break;default:s=i}ho(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];r==="style"?Dc(t,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ac(t,u)):r==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ji(t,u):typeof u=="number"&&Ji(t,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Qi.hasOwnProperty(r)?u!=null&&r==="onScroll"&&se("scroll",t):u!=null&&sa(t,r,u,o))}switch(n){case"input":Ms(t),au(t,i,!1);break;case"textarea":Ms(t),hu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ln(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?Zn(t,!!i.multiple,r,!1):i.defaultValue!=null&&Zn(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=vr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)hf(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(L(166));if(n=vn(ls.current),vn(bt.current),Is(e)){if(i=e.stateNode,n=e.memoizedProps,i[St]=e,(r=i.nodeValue!==n)&&(t=Xe,t!==null))switch(t.tag){case 3:Ls(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ls(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[St]=e,e.stateNode=i}return Te(e),null;case 13:if(re(he),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&Ge!==null&&e.mode&1&&!(e.flags&128))Cd(),ai(),e.flags|=98560,r=!1;else if(r=Is(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(L(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(L(317));r[St]=e}else ai(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),r=!1}else dt!==null&&(Ko(dt),dt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||he.current&1?je===0&&(je=3):Da())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return hi(),Ao(t,e),t===null&&ns(e.stateNode.containerInfo),Te(e),null;case 10:return ja(e.type._context),Te(e),null;case 17:return Ke(e.type)&&yr(),Te(e),null;case 19:if(re(he),r=e.memoizedState,r===null)return Te(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Ei(r,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kr(t),o!==null){for(e.flags|=128,Ei(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(he,he.current&1|2),e.child}t=t.sibling}r.tail!==null&&pe()>di&&(e.flags|=128,i=!0,Ei(r,!1),e.lanes=4194304)}else{if(!i)if(t=kr(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ei(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!oe)return Te(e),null}else 2*pe()-r.renderingStartTime>di&&n!==1073741824&&(e.flags|=128,i=!0,Ei(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=pe(),e.sibling=null,n=he.current,ie(he,i?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return Oa(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Je&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function ug(t,e){switch(xa(e),e.tag){case 1:return Ke(e.type)&&yr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),re(He),re(Ie),Ea(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ca(e),null;case 13:if(re(he),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));ai()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(he),null;case 4:return hi(),null;case 10:return ja(e.type._context),null;case 22:case 23:return Oa(),null;case 24:return null;default:return null}}var As=!1,Le=!1,hg=typeof WeakSet=="function"?WeakSet:Set,A=null;function Qn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){fe(t,e,i)}else n.current=null}function Oo(t,e,n){try{n()}catch(i){fe(t,e,i)}}var qu=!1;function cg(t,e){if(So=pr,t=pd(),va(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,d=0,c=t,f=null;t:for(;;){for(var g;c!==n||s!==0&&c.nodeType!==3||(a=o+s),c!==r||i!==0&&c.nodeType!==3||(u=o+i),c.nodeType===3&&(o+=c.nodeValue.length),(g=c.firstChild)!==null;)f=c,c=g;for(;;){if(c===t)break t;if(f===n&&++h===s&&(a=o),f===r&&++d===i&&(u=o),(g=c.nextSibling)!==null)break;c=f,f=c.parentNode}c=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(jo={focusedElem:t,selectionRange:n},pr=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,C=y.memoizedState,v=e.stateNode,p=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:ht(e.type,w),C);v.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(S){fe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return y=qu,qu=!1,y}function $i(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Oo(e,n,r)}s=s.next}while(s!==i)}}function Hr(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Do(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cf(t){var e=t.alternate;e!==null&&(t.alternate=null,cf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[St],delete e[ss],delete e[Mo],delete e[Ym],delete e[Qm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function df(t){return t.tag===5||t.tag===3||t.tag===4}function eh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||df(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $o(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vr));else if(i!==4&&(t=t.child,t!==null))for($o(t,e,n),t=t.sibling;t!==null;)$o(t,e,n),t=t.sibling}function Wo(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Wo(t,e,n),t=t.sibling;t!==null;)Wo(t,e,n),t=t.sibling}var Me=null,ct=!1;function Wt(t,e,n){for(n=n.child;n!==null;)ff(t,e,n),n=n.sibling}function ff(t,e,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(Br,n)}catch{}switch(n.tag){case 5:Le||Qn(n,e);case 6:var i=Me,s=ct;Me=null,Wt(t,e,n),Me=i,ct=s,Me!==null&&(ct?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(ct?(t=Me,n=n.stateNode,t.nodeType===8?jl(t.parentNode,n):t.nodeType===1&&jl(t,n),qi(t)):jl(Me,n.stateNode));break;case 4:i=Me,s=ct,Me=n.stateNode.containerInfo,ct=!0,Wt(t,e,n),Me=i,ct=s;break;case 0:case 11:case 14:case 15:if(!Le&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Oo(n,e,o),s=s.next}while(s!==i)}Wt(t,e,n);break;case 1:if(!Le&&(Qn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){fe(n,e,a)}Wt(t,e,n);break;case 21:Wt(t,e,n);break;case 22:n.mode&1?(Le=(i=Le)||n.memoizedState!==null,Wt(t,e,n),Le=i):Wt(t,e,n);break;default:Wt(t,e,n)}}function th(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hg),e.forEach(function(i){var s=wg.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function ut(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Me=a.stateNode,ct=!1;break e;case 3:Me=a.stateNode.containerInfo,ct=!0;break e;case 4:Me=a.stateNode.containerInfo,ct=!0;break e}a=a.return}if(Me===null)throw Error(L(160));ff(r,o,s),Me=null,ct=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){fe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pf(e,t),e=e.sibling}function pf(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ut(e,t),xt(t),i&4){try{$i(3,t,t.return),Hr(3,t)}catch(w){fe(t,t.return,w)}try{$i(5,t,t.return)}catch(w){fe(t,t.return,w)}}break;case 1:ut(e,t),xt(t),i&512&&n!==null&&Qn(n,n.return);break;case 5:if(ut(e,t),xt(t),i&512&&n!==null&&Qn(n,n.return),t.flags&32){var s=t.stateNode;try{Ji(s,"")}catch(w){fe(t,t.return,w)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Ic(s,r),co(a,o);var h=co(a,r);for(o=0;o<u.length;o+=2){var d=u[o],c=u[o+1];d==="style"?Dc(s,c):d==="dangerouslySetInnerHTML"?Ac(s,c):d==="children"?Ji(s,c):sa(s,d,c,h)}switch(a){case"input":lo(s,r);break;case"textarea":Fc(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?Zn(s,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?Zn(s,!!r.multiple,r.defaultValue,!0):Zn(s,!!r.multiple,r.multiple?[]:"",!1))}s[ss]=r}catch(w){fe(t,t.return,w)}}break;case 6:if(ut(e,t),xt(t),i&4){if(t.stateNode===null)throw Error(L(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(w){fe(t,t.return,w)}}break;case 3:if(ut(e,t),xt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{qi(e.containerInfo)}catch(w){fe(t,t.return,w)}break;case 4:ut(e,t),xt(t);break;case 13:ut(e,t),xt(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Ba=pe())),i&4&&th(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(h=Le)||d,ut(e,t),Le=h):ut(e,t),xt(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(A=t,d=t.child;d!==null;){for(c=A=d;A!==null;){switch(f=A,g=f.child,f.tag){case 0:case 11:case 14:case 15:$i(4,f,f.return);break;case 1:Qn(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){fe(i,n,w)}}break;case 5:Qn(f,f.return);break;case 22:if(f.memoizedState!==null){ih(c);continue}}g!==null?(g.return=f,A=g):ih(c)}d=d.sibling}e:for(d=null,c=t;;){if(c.tag===5){if(d===null){d=c;try{s=c.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=c.stateNode,u=c.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Oc("display",o))}catch(w){fe(t,t.return,w)}}}else if(c.tag===6){if(d===null)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(w){fe(t,t.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;d===c&&(d=null),c=c.return}d===c&&(d=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:ut(e,t),xt(t),i&4&&th(t);break;case 21:break;default:ut(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(df(n)){var i=n;break e}n=n.return}throw Error(L(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ji(s,""),i.flags&=-33);var r=eh(t);Wo(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=eh(t);$o(t,a,o);break;default:throw Error(L(161))}}catch(u){fe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dg(t,e,n){A=t,mf(t)}function mf(t,e,n){for(var i=(t.mode&1)!==0;A!==null;){var s=A,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||As;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Le;a=As;var h=Le;if(As=o,(Le=u)&&!h)for(A=s;A!==null;)o=A,u=o.child,o.tag===22&&o.memoizedState!==null?sh(s):u!==null?(u.return=o,A=u):sh(s);for(;r!==null;)A=r,mf(r),r=r.sibling;A=s,As=a,Le=h}nh(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,A=r):nh(t)}}function nh(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||Hr(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Le)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ht(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Du(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Du(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var c=d.dehydrated;c!==null&&qi(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Le||e.flags&512&&Do(e)}catch(f){fe(e,e.return,f)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function ih(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function sh(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hr(4,e)}catch(u){fe(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){fe(e,s,u)}}var r=e.return;try{Do(e)}catch(u){fe(e,r,u)}break;case 5:var o=e.return;try{Do(e)}catch(u){fe(e,o,u)}}}catch(u){fe(e,e.return,u)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var fg=Math.ceil,Er=Bt.ReactCurrentDispatcher,Ia=Bt.ReactCurrentOwner,rt=Bt.ReactCurrentBatchConfig,Q=0,ke=null,we=null,Pe=0,Je=0,Jn=un(0),je=0,hs=null,bn=0,Kr=0,Fa=0,Wi=null,Ue=null,Ba=0,di=1/0,Mt=null,Pr=!1,Uo=null,nn=null,Os=!1,Jt=null,Nr=0,Ui=0,Vo=null,sr=-1,rr=0;function Ae(){return Q&6?pe():sr!==-1?sr:sr=pe()}function sn(t){return t.mode&1?Q&2&&Pe!==0?Pe&-Pe:Gm.transition!==null?(rr===0&&(rr=Zc()),rr):(t=ee,t!==0||(t=window.event,t=t===void 0?16:rd(t.type)),t):1}function pt(t,e,n,i){if(50<Ui)throw Ui=0,Vo=null,Error(L(185));gs(t,n,i),(!(Q&2)||t!==ke)&&(t===ke&&(!(Q&2)&&(Kr|=n),je===4&&Yt(t,Pe)),Ye(t,i),n===1&&Q===0&&!(e.mode&1)&&(di=pe()+500,Wr&&hn()))}function Ye(t,e){var n=t.callbackNode;Gp(t,e);var i=fr(t,t===ke?Pe:0);if(i===0)n!==null&&fu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&fu(n),e===1)t.tag===0?Jm(rh.bind(null,t)):bd(rh.bind(null,t)),Hm(function(){!(Q&6)&&hn()}),n=null;else{switch(qc(i)){case 1:n=ua;break;case 4:n=Gc;break;case 16:n=dr;break;case 536870912:n=Xc;break;default:n=dr}n=jf(n,gf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gf(t,e){if(sr=-1,rr=0,Q&6)throw Error(L(327));var n=t.callbackNode;if(ii()&&t.callbackNode!==n)return null;var i=fr(t,t===ke?Pe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=zr(t,i);else{e=i;var s=Q;Q|=2;var r=yf();(ke!==t||Pe!==e)&&(Mt=null,di=pe()+500,yn(t,e));do try{gg();break}catch(a){vf(t,a)}while(!0);Sa(),Er.current=r,Q=s,we!==null?e=0:(ke=null,Pe=0,e=je)}if(e!==0){if(e===2&&(s=vo(t),s!==0&&(i=s,e=Ho(t,s))),e===1)throw n=hs,yn(t,0),Yt(t,i),Ye(t,pe()),n;if(e===6)Yt(t,i);else{if(s=t.current.alternate,!(i&30)&&!pg(s)&&(e=zr(t,i),e===2&&(r=vo(t),r!==0&&(i=r,e=Ho(t,r))),e===1))throw n=hs,yn(t,0),Yt(t,i),Ye(t,pe()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(L(345));case 2:pn(t,Ue,Mt);break;case 3:if(Yt(t,i),(i&130023424)===i&&(e=Ba+500-pe(),10<e)){if(fr(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ae(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ko(pn.bind(null,t,Ue,Mt),e);break}pn(t,Ue,Mt);break;case 4:if(Yt(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-ft(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=pe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*fg(i/1960))-i,10<i){t.timeoutHandle=ko(pn.bind(null,t,Ue,Mt),i);break}pn(t,Ue,Mt);break;case 5:pn(t,Ue,Mt);break;default:throw Error(L(329))}}}return Ye(t,pe()),t.callbackNode===n?gf.bind(null,t):null}function Ho(t,e){var n=Wi;return t.current.memoizedState.isDehydrated&&(yn(t,e).flags|=256),t=zr(t,e),t!==2&&(e=Ue,Ue=n,e!==null&&Ko(e)),t}function Ko(t){Ue===null?Ue=t:Ue.push.apply(Ue,t)}function pg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!mt(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Fa,e&=~Kr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ft(e),i=1<<n;t[n]=-1,e&=~i}}function rh(t){if(Q&6)throw Error(L(327));ii();var e=fr(t,0);if(!(e&1))return Ye(t,pe()),null;var n=zr(t,e);if(t.tag!==0&&n===2){var i=vo(t);i!==0&&(e=i,n=Ho(t,i))}if(n===1)throw n=hs,yn(t,0),Yt(t,e),Ye(t,pe()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pn(t,Ue,Mt),Ye(t,pe()),null}function Aa(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(di=pe()+500,Wr&&hn())}}function kn(t){Jt!==null&&Jt.tag===0&&!(Q&6)&&ii();var e=Q;Q|=1;var n=rt.transition,i=ee;try{if(rt.transition=null,ee=1,t)return t()}finally{ee=i,rt.transition=n,Q=e,!(Q&6)&&hn()}}function Oa(){Je=Jn.current,re(Jn)}function yn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Vm(n)),we!==null)for(n=we.return;n!==null;){var i=n;switch(xa(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&yr();break;case 3:hi(),re(He),re(Ie),Ea();break;case 5:Ca(i);break;case 4:hi();break;case 13:re(he);break;case 19:re(he);break;case 10:ja(i.type._context);break;case 22:case 23:Oa()}n=n.return}if(ke=t,we=t=rn(t.current,null),Pe=Je=e,je=0,hs=null,Fa=Kr=bn=0,Ue=Wi=null,gn!==null){for(e=0;e<gn.length;e++)if(n=gn[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}gn=null}return t}function vf(t,e){do{var n=we;try{if(Sa(),tr.current=Cr,Mr){for(var i=ce.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Mr=!1}if(jn=0,be=Se=ce=null,Di=!1,os=0,Ia.current=null,n===null||n.return===null){je=1,hs=e,we=null;break}e:{var r=t,o=n.return,a=n,u=e;if(e=Pe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=a,c=d.tag;if(!(d.mode&1)&&(c===0||c===11||c===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Ku(o);if(g!==null){g.flags&=-257,Yu(g,o,a,r,e),g.mode&1&&Hu(r,h,e),e=g,u=h;var y=e.updateQueue;if(y===null){var w=new Set;w.add(u),e.updateQueue=w}else y.add(u);break e}else{if(!(e&1)){Hu(r,h,e),Da();break e}u=Error(L(426))}}else if(oe&&a.mode&1){var C=Ku(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Yu(C,o,a,r,e),wa(ci(u,a));break e}}r=u=ci(u,a),je!==4&&(je=2),Wi===null?Wi=[r]:Wi.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=qd(r,u,e);Ou(r,v);break e;case 1:a=u;var p=r.type,m=r.stateNode;if(!(r.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(nn===null||!nn.has(m)))){r.flags|=65536,e&=-e,r.lanes|=e;var S=ef(r,a,e);Ou(r,S);break e}}r=r.return}while(r!==null)}wf(n)}catch(b){e=b,we===n&&n!==null&&(we=n=n.return);continue}break}while(!0)}function yf(){var t=Er.current;return Er.current=Cr,t===null?Cr:t}function Da(){(je===0||je===3||je===2)&&(je=4),ke===null||!(bn&268435455)&&!(Kr&268435455)||Yt(ke,Pe)}function zr(t,e){var n=Q;Q|=2;var i=yf();(ke!==t||Pe!==e)&&(Mt=null,yn(t,e));do try{mg();break}catch(s){vf(t,s)}while(!0);if(Sa(),Q=n,Er.current=i,we!==null)throw Error(L(261));return ke=null,Pe=0,je}function mg(){for(;we!==null;)xf(we)}function gg(){for(;we!==null&&!$p();)xf(we)}function xf(t){var e=Sf(t.alternate,t,Je);t.memoizedProps=t.pendingProps,e===null?wf(t):we=e,Ia.current=null}function wf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ug(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,we=null;return}}else if(n=ag(n,e,Je),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);je===0&&(je=5)}function pn(t,e,n){var i=ee,s=rt.transition;try{rt.transition=null,ee=1,vg(t,e,n,i)}finally{rt.transition=s,ee=i}return null}function vg(t,e,n,i){do ii();while(Jt!==null);if(Q&6)throw Error(L(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(Xp(t,r),t===ke&&(we=ke=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Os||(Os=!0,jf(dr,function(){return ii(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=rt.transition,rt.transition=null;var o=ee;ee=1;var a=Q;Q|=4,Ia.current=null,cg(t,n),pf(n,t),Bm(jo),pr=!!So,jo=So=null,t.current=n,dg(n),Wp(),Q=a,ee=o,rt.transition=r}else t.current=n;if(Os&&(Os=!1,Jt=t,Nr=s),r=t.pendingLanes,r===0&&(nn=null),Hp(n.stateNode),Ye(t,pe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Pr)throw Pr=!1,t=Uo,Uo=null,t;return Nr&1&&t.tag!==0&&ii(),r=t.pendingLanes,r&1?t===Vo?Ui++:(Ui=0,Vo=t):Ui=0,hn(),null}function ii(){if(Jt!==null){var t=qc(Nr),e=rt.transition,n=ee;try{if(rt.transition=null,ee=16>t?16:t,Jt===null)var i=!1;else{if(t=Jt,Jt=null,Nr=0,Q&6)throw Error(L(331));var s=Q;for(Q|=4,A=t.current;A!==null;){var r=A,o=r.child;if(A.flags&16){var a=r.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(A=h;A!==null;){var d=A;switch(d.tag){case 0:case 11:case 15:$i(8,d,r)}var c=d.child;if(c!==null)c.return=d,A=c;else for(;A!==null;){d=A;var f=d.sibling,g=d.return;if(cf(d),d===h){A=null;break}if(f!==null){f.return=g,A=f;break}A=g}}}var y=r.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}A=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,A=o;else e:for(;A!==null;){if(r=A,r.flags&2048)switch(r.tag){case 0:case 11:case 15:$i(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,A=v;break e}A=r.return}}var p=t.current;for(A=p;A!==null;){o=A;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,A=m;else e:for(o=p;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Hr(9,a)}}catch(b){fe(a,a.return,b)}if(a===o){A=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,A=S;break e}A=a.return}}if(Q=s,hn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(Br,t)}catch{}i=!0}return i}finally{ee=n,rt.transition=e}}return!1}function lh(t,e,n){e=ci(n,e),e=qd(t,e,1),t=tn(t,e,1),e=Ae(),t!==null&&(gs(t,1,e),Ye(t,e))}function fe(t,e,n){if(t.tag===3)lh(t,t,n);else for(;e!==null;){if(e.tag===3){lh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nn===null||!nn.has(i))){t=ci(n,t),t=ef(e,t,1),e=tn(e,t,1),t=Ae(),e!==null&&(gs(e,1,t),Ye(e,t));break}}e=e.return}}function yg(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ae(),t.pingedLanes|=t.suspendedLanes&n,ke===t&&(Pe&n)===n&&(je===4||je===3&&(Pe&130023424)===Pe&&500>pe()-Ba?yn(t,0):Fa|=n),Ye(t,e)}function _f(t,e){e===0&&(t.mode&1?(e=Ps,Ps<<=1,!(Ps&130023424)&&(Ps=4194304)):e=1);var n=Ae();t=It(t,e),t!==null&&(gs(t,e,n),Ye(t,n))}function xg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_f(t,n)}function wg(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(L(314))}i!==null&&i.delete(e),_f(t,n)}var Sf;Sf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||He.current)Ve=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ve=!1,og(t,e,n);Ve=!!(t.flags&131072)}else Ve=!1,oe&&e.flags&1048576&&kd(e,_r,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ir(t,e),t=e.pendingProps;var s=oi(e,Ie.current);ni(e,n),s=Na(null,e,i,t,s,n);var r=za();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ke(i)?(r=!0,xr(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ka(e),s.updater=Vr,e.stateNode=s,s._reactInternals=e,To(e,i,t,n),e=Io(null,e,i,!0,r,n)):(e.tag=0,oe&&r&&ya(e),Be(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(ir(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=Sg(i),t=ht(i,t),s){case 0:e=Lo(null,e,i,t,n);break e;case 1:e=Gu(null,e,i,t,n);break e;case 11:e=Qu(null,e,i,t,n);break e;case 14:e=Ju(null,e,i,ht(i.type,t),n);break e}throw Error(L(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ht(i,s),Lo(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ht(i,s),Gu(t,e,i,s,n);case 3:e:{if(rf(e),t===null)throw Error(L(387));i=e.pendingProps,r=e.memoizedState,s=r.element,zd(t,e),br(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=ci(Error(L(423)),e),e=Xu(t,e,i,n,s);break e}else if(i!==s){s=ci(Error(L(424)),e),e=Xu(t,e,i,n,s);break e}else for(Ge=en(e.stateNode.containerInfo.firstChild),Xe=e,oe=!0,dt=null,n=Pd(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ai(),i===s){e=Ft(t,e,n);break e}Be(t,e,i,n)}e=e.child}return e;case 5:return Td(e),t===null&&Po(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,bo(i,s)?o=null:r!==null&&bo(i,r)&&(e.flags|=32),sf(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&Po(e),null;case 13:return lf(t,e,n);case 4:return Ma(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ui(e,null,i,n):Be(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ht(i,s),Qu(t,e,i,s,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,ie(Sr,i._currentValue),i._currentValue=o,r!==null)if(mt(r.value,o)){if(r.children===s.children&&!He.current){e=Ft(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(r.tag===1){u=Tt(-1,n&-n),u.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),No(r.return,n,e),a.lanes|=n;break}u=u.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(L(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),No(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Be(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ni(e,n),s=lt(s),i=i(s),e.flags|=1,Be(t,e,i,n),e.child;case 14:return i=e.type,s=ht(i,e.pendingProps),s=ht(i.type,s),Ju(t,e,i,s,n);case 15:return tf(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ht(i,s),ir(t,e),e.tag=1,Ke(i)?(t=!0,xr(e)):t=!1,ni(e,n),Zd(e,i,s),To(e,i,s,n),Io(null,e,i,!0,t,n);case 19:return of(t,e,n);case 22:return nf(t,e,n)}throw Error(L(156,e.tag))};function jf(t,e){return Jc(t,e)}function _g(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(t,e,n,i){return new _g(t,e,n,i)}function $a(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Sg(t){if(typeof t=="function")return $a(t)?1:0;if(t!=null){if(t=t.$$typeof,t===la)return 11;if(t===oa)return 14}return 2}function rn(t,e){var n=t.alternate;return n===null?(n=st(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lr(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")$a(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case On:return xn(n.children,s,r,e);case ra:o=8,s|=8;break;case to:return t=st(12,n,e,s|2),t.elementType=to,t.lanes=r,t;case no:return t=st(13,n,e,s),t.elementType=no,t.lanes=r,t;case io:return t=st(19,n,e,s),t.elementType=io,t.lanes=r,t;case Tc:return Yr(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nc:o=10;break e;case zc:o=9;break e;case la:o=11;break e;case oa:o=14;break e;case Vt:o=16,i=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=st(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function xn(t,e,n,i){return t=st(7,t,i,e),t.lanes=n,t}function Yr(t,e,n,i){return t=st(22,t,i,e),t.elementType=Tc,t.lanes=n,t.stateNode={isHidden:!1},t}function zl(t,e,n){return t=st(6,t,null,e),t.lanes=n,t}function Tl(t,e,n){return e=st(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function jg(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wa(t,e,n,i,s,r,o,a,u){return t=new jg(t,e,n,a,u),e===1?(e=1,r===!0&&(e|=8)):e=0,r=st(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(r),t}function bg(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:An,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function bf(t){if(!t)return on;t=t._reactInternals;e:{if(Tn(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ke(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(Ke(n))return jd(t,n,e)}return e}function kf(t,e,n,i,s,r,o,a,u){return t=Wa(n,i,!0,t,s,r,o,a,u),t.context=bf(null),n=t.current,i=Ae(),s=sn(n),r=Tt(i,s),r.callback=e??null,tn(n,r,s),t.current.lanes=s,gs(t,s,i),Ye(t,i),t}function Qr(t,e,n,i){var s=e.current,r=Ae(),o=sn(s);return n=bf(n),e.context===null?e.context=n:e.pendingContext=n,e=Tt(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=tn(s,e,o),t!==null&&(pt(t,s,o,r),er(t,s,o)),o}function Tr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ua(t,e){oh(t,e),(t=t.alternate)&&oh(t,e)}function kg(){return null}var Mf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Va(t){this._internalRoot=t}Jr.prototype.render=Va.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));Qr(t,e,null,null)};Jr.prototype.unmount=Va.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;kn(function(){Qr(null,t,null,null)}),e[Lt]=null}};function Jr(t){this._internalRoot=t}Jr.prototype.unstable_scheduleHydration=function(t){if(t){var e=nd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kt.length&&e!==0&&e<Kt[n].priority;n++);Kt.splice(n,0,t),n===0&&sd(t)}};function Ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gr(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ah(){}function Mg(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var h=Tr(o);r.call(h)}}var o=kf(e,i,t,0,null,!1,!1,"",ah);return t._reactRootContainer=o,t[Lt]=o.current,ns(t.nodeType===8?t.parentNode:t),kn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var h=Tr(u);a.call(h)}}var u=Wa(t,0,!1,null,null,!1,!1,"",ah);return t._reactRootContainer=u,t[Lt]=u.current,ns(t.nodeType===8?t.parentNode:t),kn(function(){Qr(e,u,n,i)}),u}function Xr(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var u=Tr(o);a.call(u)}}Qr(e,o,t,s)}else o=Mg(n,e,t,s,i);return Tr(o)}ed=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ri(e.pendingLanes);n!==0&&(ha(e,n|1),Ye(e,pe()),!(Q&6)&&(di=pe()+500,hn()))}break;case 13:kn(function(){var i=It(t,1);if(i!==null){var s=Ae();pt(i,t,1,s)}}),Ua(t,1)}};ca=function(t){if(t.tag===13){var e=It(t,134217728);if(e!==null){var n=Ae();pt(e,t,134217728,n)}Ua(t,134217728)}};td=function(t){if(t.tag===13){var e=sn(t),n=It(t,e);if(n!==null){var i=Ae();pt(n,t,e,i)}Ua(t,e)}};nd=function(){return ee};id=function(t,e){var n=ee;try{return ee=t,e()}finally{ee=n}};po=function(t,e,n){switch(e){case"input":if(lo(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=$r(i);if(!s)throw Error(L(90));Lc(i),lo(i,s)}}}break;case"textarea":Fc(t,n);break;case"select":e=n.value,e!=null&&Zn(t,!!n.multiple,e,!1)}};Uc=Aa;Vc=kn;var Cg={usingClientEntryPoint:!1,Events:[ys,Un,$r,$c,Wc,Aa]},Pi={findFiberByHostInstance:mn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Eg={bundleType:Pi.bundleType,version:Pi.version,rendererPackageName:Pi.rendererPackageName,rendererConfig:Pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yc(t),t===null?null:t.stateNode},findFiberByHostInstance:Pi.findFiberByHostInstance||kg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ds=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ds.isDisabled&&Ds.supportsFiber)try{Br=Ds.inject(Eg),jt=Ds}catch{}}et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cg;et.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ha(e))throw Error(L(200));return bg(t,e,null,n)};et.createRoot=function(t,e){if(!Ha(t))throw Error(L(299));var n=!1,i="",s=Mf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wa(t,1,!1,null,null,n,!1,i,s),t[Lt]=e.current,ns(t.nodeType===8?t.parentNode:t),new Va(e)};et.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=Yc(e),t=t===null?null:t.stateNode,t};et.flushSync=function(t){return kn(t)};et.hydrate=function(t,e,n){if(!Gr(e))throw Error(L(200));return Xr(null,t,e,!0,n)};et.hydrateRoot=function(t,e,n){if(!Ha(t))throw Error(L(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=Mf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=kf(e,null,t,1,n??null,s,!1,r,o),t[Lt]=e.current,ns(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Jr(e)};et.render=function(t,e,n){if(!Gr(e))throw Error(L(200));return Xr(null,t,e,!1,n)};et.unmountComponentAtNode=function(t){if(!Gr(t))throw Error(L(40));return t._reactRootContainer?(kn(function(){Xr(null,null,t,!1,function(){t._reactRootContainer=null,t[Lt]=null})}),!0):!1};et.unstable_batchedUpdates=Aa;et.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Gr(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return Xr(t,e,n,!1,i)};et.version="18.3.1-next-f1338f8080-20240426";function Cf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cf)}catch(t){console.error(t)}}Cf(),Mc.exports=et;var Pg=Mc.exports,uh=Pg;ql.createRoot=uh.createRoot,ql.hydrateRoot=uh.hydrateRoot;function te(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function wn(t,e){return t.width===e.width&&t.height===e.height}var Ng=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function zg(t){return new Ng(t)}var Tg=function(){function t(e,n,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=te({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(r){return r},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return te({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=te(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;wn(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,i=te(this._transformBitmapSize(e,this._canvasElementClientSize)),s=wn(this.bitmapSize,i)?null:i;n===null&&s===null||n!==null&&s!==null&&wn(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Lg().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=hh(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=zg(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var i=hh(this._canvasElement);if(i!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Ig(r[0],s):te({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var i=n.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],r=te({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Rg(t,e){return new Tg(t,e.transform,e.options)}function hh(t){return t.ownerDocument.defaultView}function Lg(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Ig(t,e){return te({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Fg=function(){function t(e,n,i){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Mn(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new Fg(s,n,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.1.0
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Ef={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var ch,dh;function Cn(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function Pf(t,e,n,i){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(i,e+s),t.stroke()}function Ee(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Qe(t){if(t===void 0)throw new Error("Value is undefined");return t}function T(t){if(t===null)throw new Error("Value is null");return t}function Gt(t){return T(Qe(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(ch||(ch={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(dh||(dh={}));class me{constructor(){this.t=[]}i(e,n,i){const s={h:e,l:n,o:i===!0};this.t.push(s)}_(e){const n=this.t.findIndex(i=>e===i.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,i){const s=[...this.t];this.t=this.t.filter(r=>!r.o),s.forEach(r=>r.h(e,n,i))}v(){return this.t.length>0}m(){this.t=[]}}function Ze(t,...e){for(const n of e)for(const i in n)n[i]!==void 0&&Object.prototype.hasOwnProperty.call(n,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof n[i]!="object"||t[i]===void 0||Array.isArray(n[i])?t[i]=n[i]:Ze(t[i],n[i]));return t}function En(t){return typeof t=="number"&&isFinite(t)}function cs(t){return typeof t=="number"&&t%1==0}function ws(t){return typeof t=="string"}function $s(t){return typeof t=="boolean"}function Nt(t){const e=t;if(!e||typeof e!="object")return e;let n,i,s;for(i in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],n[i]=s&&typeof s=="object"?Nt(s):s);return n}function fh(t){return t!==null}function ds(t){return t===null?void 0:t}const Nf="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function fs(t,e,n){return e===void 0&&(e=Nf),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class Bg{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),i=this.W();return e.k===n&&e.T===i||(e.k=n,e.T=i,e.P=fs(n,i),e.A=2.5/12*n,e.I=e.A,e.V=n/12*e.C,e.B=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Rl(t){return t<0?0:t>255?255:Math.round(t)||0}function ph(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Ag{constructor(e,n){this.q=new Map,this.j=e,n&&(this.q=n)}Y(e,n){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${n*s})`}Z(e){const n=this.K(e);return{G:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,X:ph(n)>160?"black":"white"}}J(e){return ph(this.K(e))}tt(e,n,i){const[s,r,o,a]=this.K(e),[u,h,d,c]=this.K(n),f=[Rl(s+i*(u-s)),Rl(r+i*(h-r)),Rl(o+i*(d-o)),(g=a+i*(c-a),g<=0||g>1?Math.min(Math.max(g,0),1):Math.round(1e4*g)/1e4)];var g;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const i=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const u=window.getComputedStyle(a).color;return document.body.removeChild(a),u}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.j.length)for(const o of this.j){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const r=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,r),r}}class Og{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,i){this.it.forEach(s=>{s.nt(e,n,i)})}}class Rn{nt(e,n,i){e.useBitmapCoordinateSpace(s=>this.et(s,n,i))}}class Dg extends Rn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=u=>{e.beginPath();for(let h=s.to-1;h>=s.from;--h){const d=r.ot[h],c=Math.round(d._t*n)+o,f=d.ut*i,g=u*i+o;e.moveTo(c,f),e.arc(c,f,g,0,2*Math.PI)}e.fill()};r.ct>0&&(e.fillStyle=r.dt,a(r.ft+r.ct)),e.fillStyle=r.vt,a(r.ft)}}function $g(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const Wg={from:0,to:1};class Ug{constructor(e,n,i){this.Mt=new Og,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.yt=i,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map($g),this.bt=this.St.map(n=>{const i=new Dg;return i.ht(n),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),n=this.yt.Vt(),i=this.Ct.Bt(),s=this.O.Et();this.Pt(),n.forEach((r,o)=>{const a=this.St[o],u=r.At(i),h=r.Lt();!e&&u!==null&&r.It()&&h!==null?(a.vt=u.zt,a.ft=u.ft,a.ct=u.Ot,a.ot[0].gt=u.gt,a.ot[0].ut=r.Ft().Nt(u.gt,h.Wt),a.dt=u.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=i,a.ot[0]._t=s.qt(i),a.lt=Wg):a.lt=null})}}class Vg extends Rn{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=this.jt.Yt.It,o=this.jt.Kt.It;if(!r&&!o)return;const a=Math.round(this.jt._t*i),u=Math.round(this.jt.ut*s);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*i),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,Cn(e,this.jt.Yt.Zt),function(h,d,c,f){h.beginPath();const g=h.lineWidth%2?.5:0;h.moveTo(d+g,c),h.lineTo(d+g,f),h.stroke()}(e,a,0,n.height)),o&&u>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*s),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,Cn(e,this.jt.Kt.Zt),Pf(e,u,0,n.width))}}class Hg{constructor(e,n){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new Vg(this.Gt),this.Jt=e,this.yt=n}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),n=this.yt.Qt().N().crosshair,i=this.Gt;if(n.mode===2)return i.Kt.It=!1,void(i.Yt.It=!1);i.Kt.It=e&&this.Jt.ti(this.yt),i.Yt.It=e&&this.Jt.ii(),i.Kt.ct=n.horzLine.width,i.Kt.Zt=n.horzLine.style,i.Kt.R=n.horzLine.color,i.Yt.ct=n.vertLine.width,i.Yt.Zt=n.vertLine.style,i.Yt.R=n.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function Kg(t,e,n,i,s,r){t.fillRect(e+r,n,i-2*r,r),t.fillRect(e+r,n+s-r,i-2*r,r),t.fillRect(e,n,r,s),t.fillRect(e+i-r,n,r,s)}function Zr(t,e,n,i,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,n,i,s),t.restore()}function mh(t,e,n,i,s,r){t.beginPath(),t.roundRect?t.roundRect(e,n,i,s,r):(t.lineTo(e+i-r[1],n),r[1]!==0&&t.arcTo(e+i,n,e+i,n+r[1],r[1]),t.lineTo(e+i,n+s-r[2]),r[2]!==0&&t.arcTo(e+i,n+s,e+i-r[2],n+s,r[2]),t.lineTo(e+r[3],n+s),r[3]!==0&&t.arcTo(e,n+s,e,n+s-r[3],r[3]),t.lineTo(e,n+r[0]),r[0]!==0&&t.arcTo(e,n,e+r[0],n,r[0]))}function gh(t,e,n,i,s,r,o=0,a=[0,0,0,0],u=""){if(t.save(),!o||!u||u===r)return mh(t,e,n,i,s,a),t.fillStyle=r,t.fill(),void t.restore();const h=o/2;var d;mh(t,e+h,n+h,i-o,s-o,(d=-h,a.map(c=>c===0?c:c+d))),r!=="transparent"&&(t.fillStyle=r,t.fill()),u!=="transparent"&&(t.lineWidth=o,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function zf(t,e,n,i,s,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,i,s),t.restore()}class vh{constructor(e,n){this.ht(e,n)}ht(e,n){this.jt=e,this.ei=n}$t(e,n){return this.jt.It?e.k+e.A+e.I:0}nt(e,n,i,s){if(!this.jt.It||this.jt.ri.length===0)return;const r=this.jt.R,o=this.ei.G,a=e.useBitmapCoordinateSpace(u=>{const h=u.context;h.font=n.P;const d=this.hi(u,n,i,s),c=d.ai;return d.li?gh(h,c.oi,c._i,c.ui,c.ci,o,c.di,[c.ft,0,0,c.ft],o):gh(h,c.fi,c._i,c.ui,c.ci,o,c.di,[0,c.ft,c.ft,0],o),this.jt.pi&&(h.fillStyle=r,h.fillRect(c.fi,c.mi,c.wi-c.fi,c.gi)),this.jt.Mi&&(h.fillStyle=n.D,h.fillRect(d.li?c.bi-c.di:0,c._i,c.di,c.Si-c._i)),d});e.useMediaCoordinateSpace(({context:u})=>{const h=a.xi;u.font=n.P,u.textAlign=a.li?"right":"left",u.textBaseline="middle",u.fillStyle=r,u.fillText(this.jt.ri,h.Ci,(h._i+h.Si)/2+h.yi)})}hi(e,n,i,s){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:h}=e,d=this.jt.pi||!this.jt.ki?n.C:0,c=this.jt.Pi?n.S:0,f=n.A+this.ei.Ti,g=n.I+this.ei.Ri,y=n.V,w=n.B,C=this.jt.ri,v=n.k,p=i.Di(r,C),m=Math.ceil(i.Ii(r,C)),S=v+f+g,b=n.S+y+w+m+d,N=Math.max(1,Math.floor(h));let k=Math.round(S*h);k%2!=N%2&&(k+=1);const I=c>0?Math.max(1,Math.floor(c*u)):0,U=Math.round(b*u),O=Math.round(d*u),D=this.ei.Vi??this.ei.Bi??this.ei.Ei,H=Math.round(D*h)-Math.floor(.5*h),J=Math.floor(H+N/2-k/2),G=J+k,z=s==="right",j=z?a.width-c:c,P=z?o.width-I:I;let M,x,E;return z?(M=P-U,x=P-O,E=j-d-y-c):(M=P+U,x=P+O,E=j+d+y),{li:z,ai:{_i:J,mi:H,Si:G,ui:U,ci:k,ft:2*u,di:I,oi:M,fi:P,wi:x,gi:N,bi:o.width},xi:{_i:J/h,Si:G/h,Ci:E,yi:p}}}}class qr{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||vh)(this.Li,this.Ai),this.Ni=new(e||vh)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Oi.$t(e,n),this.Ni.$t(e,n))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class Yg extends qr{constructor(e,n,i){super(),this.Jt=e,this.Ki=n,this.Zi=i}Yi(e,n,i){if(e.It=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const r=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||r===null)return;const o=this.Ki.Xi().Z(s.labelBackgroundColor);i.G=o.G,e.R=o.X;const a=2/12*this.Ki.k();i.Ti=a,i.Ri=a;const u=this.Zi(this.Ki);i.Ei=u.Ei,e.ri=this.Ki.Ji(u.gt,r),e.It=!0}}const Qg=/[1-9]/g;class Tf{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,n){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.P,Math.round(n.Qi.Ii(f,T(this.jt).ri,Qg))));if(i<=0)return;const s=n.ts,r=i+2*s,o=r/2,a=this.jt.ss;let u=this.jt.Ei,h=Math.floor(u-o)+.5;h<0?(u+=Math.abs(0-h),h=Math.floor(u-o)+.5):h+r>a&&(u-=Math.abs(a-(h+r)),h=Math.floor(u-o)+.5);const d=h+r,c=Math.ceil(0+n.S+n.C+n.A+n.k+n.I);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:g,verticalPixelRatio:y})=>{const w=T(this.jt);f.fillStyle=w.G;const C=Math.round(h*g),v=Math.round(0*y),p=Math.round(d*g),m=Math.round(c*y),S=Math.round(2*g);if(f.beginPath(),f.moveTo(C,v),f.lineTo(C,m-S),f.arcTo(C,m,C+S,m,S),f.lineTo(p-S,m),f.arcTo(p,m,p,m-S,S),f.lineTo(p,v),f.fill(),w.pi){const b=Math.round(w.Ei*g),N=v,k=Math.round((N+n.C)*y);f.fillStyle=w.R;const I=Math.max(1,Math.floor(g)),U=Math.floor(.5*g);f.fillRect(b-U,N,I,k-N)}}),e.useMediaCoordinateSpace(({context:f})=>{const g=T(this.jt),y=0+n.S+n.C+n.A+n.k/2;f.font=n.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=g.R;const w=n.Qi.Di(f,"Apr0");f.translate(h+s,y+w),f.fillText(g.ri,0,0)})}}class Jg{constructor(e,n,i){this.xt=!0,this.Xt=new Tf,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=n,this.Zi=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const i=this.ns.Et();if(i.Gi())return;e.ss=i.ss();const s=this.Zi();if(s===null)return;e.Ei=s.Ei;const r=i.es(this.Ct.Bt());e.ri=i.rs(T(r)),e.It=!0;const o=this.ns.Xi().Z(n.labelBackgroundColor);e.G=o.G,e.R=o.X,e.pi=i.N().ticksVisible}}class Rf{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var yh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(yh||(yh={}));class Gg extends Rf{constructor(e,n){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=n,this.Ts=((s,r)=>o=>{const a=r(),u=s();if(o===T(this.yt).Rs())return{gt:u,Ei:a};{const h=T(o.Lt());return{gt:o.Ds(a,h),Ei:a}}})(()=>this.ps,()=>this.Cs);const i=((s,r)=>()=>{const o=this.ns.Et().Is(s()),a=r();return o&&Number.isFinite(a)?{wt:o,Ei:a}:null})(()=>this.vs,()=>this.si());this.Vs=new Jg(this,e,i)}N(){return this.Ps}Bs(e,n){this.ys=e,this.ks=n}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,n,i){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,n,i)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const n=this.ns,i=n.Et();let s=null,r=null;for(const h of n.Us()){const d=h.qs().$s(e,-1);if(d){if(d.js===e)return e;(s===null||d.js>s)&&(s=d.js)}const c=h.qs().$s(e,1);if(c){if(c.js===e)return e;(r===null||c.js<r)&&(r=c.js)}}const o=[s,r].filter(fh);if(o.length===0)return e;const a=i.qt(e),u=o.map(h=>Math.abs(a-i.qt(h)));return o[u.indexOf(Math.min(...u))]}Ys(e){let n=this.bs.get(e);n||(n=new Hg(this,e),this.bs.set(e,n));let i=this.Ss.get(e);return i||(i=new Ug(this.ns,this,e),this.Ss.set(e,i)),[n,i]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,n){this.ws&&this.yt===e||this.gs.clear();const i=[];return this.yt===e&&i.push(this.Zs(this.gs,n,this.Ts)),i}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(e=>{var n,i;(n=this.bs.get(e))==null||n.kt(),(i=this.Ss.get(e))==null||i.kt()}),this.gs.forEach(e=>e.kt()),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,n,i){this.Qs(e,n,i)&&this.Ws()}Qs(e,n,i){const s=this.xs,r=this.Cs,o=this.ps,a=this.vs,u=this.yt,h=this.Js(i);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=i;const d=h!==null?h.Lt():null;return h!==null&&d!==null?(this.ps=n,this.Cs=h.Nt(n,d)):(this.ps=NaN,this.Cs=NaN),s!==this.xs||r!==this.Cs||a!==this.vs||o!==this.ps||u!==this.yt}Fs(){const e=this.ns.tn().map(i=>i.qs().sn()).filter(fh),n=e.length===0?null:Math.max(...e);this.vs=n!==null?n:NaN}Zs(e,n,i){let s=e.get(n);return s===void 0&&(s=new Yg(this,n,i),e.set(n,s)),s}}function el(t){return t==="left"||t==="right"}class Ce{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,n){const i=function(s,r){return s===void 0?r:{an:Math.max(s.an,r.an),ln:s.ln||r.ln}}(this.nn.get(e),n);this.nn.set(e,i)}_n(){return this.rn}un(e){const n=this.nn.get(e);return n===void 0?{an:this.rn}:{an:Math.max(this.rn,n.an),ln:n.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const n of e.en)this.xn(n);this.rn=Math.max(this.rn,e.rn),e.nn.forEach((n,i)=>{this.hn(i,n)})}static Cn(){return new Ce(2)}static yn(){return new Ce(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex(n=>n.fn===5);e!==-1&&this.en.splice(e,1)}}class Lf{formatTickmarks(e){return e.map(n=>this.format(n))}}const xh=".";function zt(t,e){if(!En(t))return"n/a";if(!cs(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class tl extends Lf{constructor(e,n){if(super(),n||(n=1),En(e)&&cs(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=n,this.Pn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const n=this.Ki/this.kn;let i=Math.floor(e),s="";const r=this.Rn!==void 0?this.Rn:NaN;if(n>1){let o=+(Math.round(e*n)-i*n).toFixed(this.Rn);o>=n&&(o-=n,i+=1),s=xh+zt(+o.toFixed(this.Rn)*this.kn,r)}else i=Math.round(i*n)/n,r>0&&(s=xh+zt(0,r));return i.toFixed(0)+s}}class If extends tl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Xg extends Lf{constructor(e){super(),this.Dn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.In(e):e<999995?n+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.In(e/1e9)+"B")}In(e){let n;const i=Math.pow(10,this.Dn);return n=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,r)=>r)}}const Zg=/[2-9]/g;class ps{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,n,i){return this.Nn(e,n,i).width}Di(e,n,i){const s=this.Nn(e,n,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Nn(e,n,i){const s=i||Zg,r=String(n).replace(s,"0");if(this.Ln.has(r))return Qe(this.Ln.get(r)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&n.length||(this.Ln.set(r,{Fn:o,Wn:this.Bn}),this.An[this.Bn]=r,this.Vn++,this.Bn++),o}}class qg{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,n,i){this.Hn=e,this.M=n,this.Un=i}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class Ff{constructor(e,n,i){this.jn=e,this.$n=new ps(50),this.Yn=n,this.O=i,this.F=-1,this.Xt=new qg(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const n=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(n===null)return null;const i=e.Xn(n);if(i==="overlay")return null;const s=this.O.Jn();return s.k!==this.F&&(this.F=s.k,this.$n.On()),this.Xt.qn(this.jn.ji(),s,i),this.Xt}}class ev extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,n){var o;if(!((o=this.jt)!=null&&o.It))return null;const{ut:i,ct:s,te:r}=this.jt;return n>=i-s-7&&n<=i+s+7?{ie:this.jt,te:r}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null||this.jt.It===!1)return;const r=Math.round(this.jt.ut*s);r<0||r>n.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*i),Cn(e,this.jt.Zt),Pf(e,r,0,n.width))}}class Ka{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new ev,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class tv extends Ka{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),n=e.ae().ae;if(n!==2&&n!==3)return;const i=this.ee.N();if(!i.baseLineVisible||!this.ee.It())return;const s=this.ee.Lt();s!==null&&(this.se.It=!0,this.se.ut=e.Nt(s.Wt,s.Wt),this.se.R=i.baseLineColor,this.se.ct=i.baseLineWidth,this.se.Zt=i.baseLineStyle)}}class nv extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){const s=this.jt;if(s===null)return;const r=Math.max(1,Math.floor(n)),o=r%2/2,a=Math.round(s.oe.x*n)+o,u=s.oe.y*i;e.fillStyle=s._e,e.beginPath();const h=Math.max(2,1.5*s.ue)*n;e.arc(a,u,h,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.ce,e.beginPath(),e.arc(a,u,s.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=s.de,e.beginPath(),e.arc(a,u,s.ft*n+r/2,0,2*Math.PI,!1),e.stroke()}}const iv=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class sv{constructor(e){this.Xt=new nv,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),n=this.Ce-e;if(n>0)return void(n<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),n=e.Ie(),i=this.ye.Lt();if(n===null||i===null)return;const s=this.ye.Ve(!0);if(s.Be||!n.Ee(s.js))return;const r={x:e.qt(s.js),y:this.ye.Ft().Nt(s.gt,i.Wt)},o=s.R,a=this.ye.N().lineWidth,u=this.Ae(this.Le(),o);this.Xt.ht({_e:o,ue:a,ce:u.ce,de:u.de,ft:u.ft,oe:r})}De(){const e=this.Xt.le();if(e!==null){const n=this.Ae(this.Le(),e._e);e.ce=n.ce,e.de=n.de,e.ft=n.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,n,i,s){const r=i+(s-i)*n;return this.ye.Qt().Xi().Y(e,r)}Ae(e,n){const i=e%2600/2600;let s;for(const h of iv)if(i>=h.fe&&i<=h.pe){s=h;break}Ee(s!==void 0,"Last price animation internal logic error");const r=(i-s.fe)/(s.pe-s.fe);return{ce:this.ze(n,r,s.we,s.ge),de:this.ze(n,r,s.Me,s.be),ft:(o=r,a=s.ve,u=s.me,a+(u-a)*o)};var o,a,u}}class rv extends Ka{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const n=this.ee.N();if(!n.priceLineVisible||!this.ee.It())return;const i=this.ee.Ve(n.priceLineSource===0);i.Be||(e.It=!0,e.ut=i.Ei,e.R=this.ee.Oe(i.R),e.ct=n.priceLineWidth,e.Zt=n.priceLineStyle)}}class lv extends qr{constructor(e){super(),this.Jt=e}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.Jt;if(!s.It())return;const r=s.N(),o=r.lastValueVisible,a=s.Ne()!=="",u=r.seriesLastValueMode===0,h=s.Ve(!1);if(h.Be)return;o&&(e.ri=this.Fe(h,o,u),e.It=e.ri.length!==0),(a||u)&&(n.ri=this.We(h,o,a,u),n.It=n.ri.length>0);const d=s.Oe(h.R),c=this.Jt.Qt().Xi().Z(d);i.G=c.G,i.Ei=h.Ei,n.Ht=s.Qt().Ut(h.Ei/s.Ft().$t()),e.Ht=d,e.R=c.X,n.R=c.X}We(e,n,i,s){let r="";const o=this.Jt.Ne();return i&&o.length!==0&&(r+=`${o} `),n&&s&&(r+=this.Jt.Ft().He()?e.Ue:e.$e),r.trim()}Fe(e,n,i){return n?i?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}}function wh(t,e,n,i){const s=Number.isFinite(e),r=Number.isFinite(n);return s&&r?t(e,n):s||r?s?e:n:i}class Oe{constructor(e,n){this.qe=e,this.je=n}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new Oe(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new Oe(wh(Math.min,this.Ze(),e.Ze(),-1/0),wh(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!En(e)||this.je-this.qe===0)return;const n=.5*(this.je+this.qe);let i=this.je-n,s=this.qe-n;i*=e,s*=e,this.je=n+i,this.qe=n+s}Qe(e){En(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new Oe(e.minValue,e.maxValue)}}class Rr{constructor(e,n){this.sr=e,this.nr=n||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Rr(Oe.ir(e.priceRange),e.margins)}}const ov=[2,4,8,16,32,64,128,256,512],av="Custom series with conflation reducer must have a priceValueBuilder method";class uv extends Ka{constructor(e,n){super(e),this.hr=n}he(){const e=this.se;e.It=!1;const n=this.hr.N();if(!this.ee.It()||!n.lineVisible)return;const i=this.hr.ar();i!==null&&(e.It=!0,e.ut=i,e.R=n.color,e.ct=n.lineWidth,e.Zt=n.lineStyle,e.te=this.hr.N().id)}}class hv extends qr{constructor(e,n){super(),this.ye=e,this.hr=n}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.hr.N(),r=s.axisLabelVisible,o=s.title!=="",a=this.ye;if(!r||!a.It())return;const u=this.hr.ar();if(u===null)return;o&&(n.ri=s.title,n.It=!0),n.Ht=a.Qt().Ut(u/a.Ft().$t()),e.ri=this.lr(s.price),e.It=!0;const h=this.ye.Qt().Xi().Z(s.axisLabelColor||s.color);i.G=h.G;const d=s.axisLabelTextColor||h.X;e.R=d,n.R=d,i.Ei=u}lr(e){const n=this.ye.Lt();return n===null?"":this.ye.Ft().Ji(e,n.Wt)}}class cv{constructor(e,n){this.ye=e,this.Ps=n,this._r=new uv(e,this),this.jn=new hv(e,this),this.ur=new Ff(this.jn,e,e.Qt())}cr(e){Ze(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,n=e.Ft();if(e.Qt().Et().Gi()||n.Gi())return null;const i=e.Lt();return i===null?null:n.Nt(this.Ps.price,i.Wt)}}class dv{constructor(){this.wr=new WeakMap}gr(e,n,i){const s=1/n*i;if(e>=s)return 1;const r=s/e,o=Math.pow(2,Math.floor(Math.log2(r)));return Math.min(o,512)}Mr(e,n,i,s=!1,r){if(e.length===0||n<=1)return e;const o=this.br(n);if(o<=1)return e;const a=this.Sr(e);let u=a.Cr.get(o);return u!==void 0||(u=this.yr(e,o,i,s,r,a.Cr),a.Cr.set(o,u)),u}kr(e,n,i,s,r=!1,o){if(i<1||e.length===0)return e;const a=this.Sr(e),u=a.Cr.get(i);if(!u)return this.Mr(e,i,s,r,o);const h=this.Pr(e,n,i,u,r,s,o);return a.Cr.set(i,h),h}br(e){if(e<=2)return 2;for(const n of ov)if(e<=n)return n;return 512}Tr(e){if(e.length===0)return 0;const n=e[0],i=e[e.length-1];return 31*e.length+17*n.js+13*i.js}yr(e,n,i,s=!1,r,o=new Map){if(n===2)return this.Rr(e,2,i,s,r);const a=n/2;let u=o.get(a);return u||(u=this.yr(e,a,i,s,r,o),o.set(a,u)),this.Dr(u,i,s,r)}Rr(e,n,i,s=!1,r){const o=this.Ir(e,n,i,s,r);return this.Vr(o,s)}Dr(e,n,i=!1,s){const r=this.Ir(e,2,n,i,s);return this.Vr(r,i)}Ir(e,n,i,s=!1,r){const o=[];for(let a=0;a<e.length;a+=n)if(e.length-a>=n){const u=this.Br(e[a],e[a+1],i,s,r);u.Er=!1,o.push(u)}else if(o.length===0)o.push(this.Ar(e[a],!0));else{const u=o[o.length-1];o[o.length-1]=this.Lr(u,e[a],i,s,r)}return o}zr(e,n){return(e??1)+(n??1)}Br(e,n,i,s=!1,r){if(!s||!i||!r){const h=e.Wt[1]>n.Wt[1]?e.Wt[1]:n.Wt[1],d=e.Wt[2]<n.Wt[2]?e.Wt[2]:n.Wt[2];return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:h,$r:d,qr:n.Wt[3],jr:this.zr(e.jr,n.jr),Yr:void 0,Er:!1}}const o=i(this.Kr(e,r),this.Kr(n,r)),a=r(o),u=a.length?a[a.length-1]:0;return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],u),$r:Math.min(e.Wt[2],u),qr:u,jr:this.zr(e.jr,n.jr),Yr:o,Er:!1}}Lr(e,n,i,s=!1,r){if(!s||!i||!r)return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:e.Ur>n.Wt[1]?e.Ur:n.Wt[1],$r:e.$r<n.Wt[2]?e.$r:n.Wt[2],qr:n.Wt[3],jr:e.jr+(n.jr??1),Yr:e.Yr,Er:!1};const o=e.Yr,a=this.Kr(n,r),u=o?{data:o,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:r(o)}:null,h=u?i(u,a):a.data,d=u?r(h):a.priceValues,c=d.length?d[d.length-1]:0;return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:Math.max(e.Ur,c),$r:Math.min(e.$r,c),qr:c,jr:e.jr+(n.jr??1),Yr:h,Er:!1}}Zr(e,n,i,s,r,o,a=!1,u){const h=n===s?r:e[n];if(i-n==1)return this.Ar(h,!0);const d=n+1===s?r:e[n+1];let c=this.Br(h,d,o,a,u);for(let f=n+2;f<i;f++){const g=f===s?r:e[f];c=this.Lr(c,g,o,a,u)}return c}Kr(e,n){const i=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:n(i)}}Xr(e,n=!1){const i=n===!0,s=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[i?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:i?s?e.Yr:{wt:e.Fr}:void 0}}Vr(e,n=!1){return e.map(i=>this.Xr(i,n))}Pr(e,n,i,s,r=!1,o,a){if(s.length===0)return s;const u=e.length-1,h=Math.floor(u/i)*i;if(Math.min(h+i,e.length)-h<i&&e.length>i){const d=e.slice();return d[d.length-1]=n,this.Mr(d,i,o,r,a)}if(Math.floor((u-1)/i)===Math.floor(u/i)||s.length===1){const d=Math.min(h+i,e.length),c=d-h;if(c<=0)return s;const f=c===1?this.Ar(h===u?n:e[h],!0):this.Zr(e,h,d,u,n,o,r,a);return s[s.length-1]=this.Xr(f,r),s}{const d=e.slice();return d[d.length-1]=n,this.Mr(d,i,o,r,a)}}Ar(e,n=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:n}}Sr(e){const n=this.Jr(e),i=this.Tr(e);return n.Qr!==i&&(n.Cr.clear(),n.Qr=i),n}Jr(e){let n=this.wr.get(e);return n===void 0&&(n={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,n)),n}}class fv extends Rf{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const pv={Bar:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,o=T(t(n,i)),a=Gt(o.Wt[0])<=Gt(o.Wt[3]);return{th:o.R??(a?s:r)}},Candlestick:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,u=e.wickUpColor,h=e.wickDownColor,d=T(t(n,i)),c=Gt(d.Wt[0])<=Gt(d.Wt[3]);return{th:d.R??(c?s:r),ih:d.Ht??(c?o:a),sh:d.nh??(c?u:h)}},Custom:(t,e,n,i)=>({th:T(t(n,i)).R??e.color}),Area:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.vt??e.lineColor,vt:s.vt??e.lineColor,eh:s.eh??e.topColor,rh:s.rh??e.bottomColor}},Baseline:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:s.hh??e.topLineColor,ah:s.ah??e.bottomLineColor,oh:s.oh??e.topFillColor1,_h:s._h??e.topFillColor2,uh:s.uh??e.bottomFillColor1,dh:s.dh??e.bottomFillColor2}},Line:(t,e,n,i)=>{const s=T(t(n,i));return{th:s.R??e.color,vt:s.R??e.color}},Histogram:(t,e,n,i)=>({th:T(t(n,i)).R??e.color})};class mv{constructor(e){this.fh=(n,i)=>i!==void 0?i.Wt:this.ye.qs().ph(n),this.ye=e,this.mh=pv[e.wh()]}gh(e,n){return this.mh(this.fh,this.ye.N(),e,n)}}function Bf(t,e,n,i,s=0,r=e.length){let o=r-s;for(;0<o;){const a=o>>1,u=s+a;i(e[u],n)===t?(s=u+1,o-=a+1):o=a}return s}const fi=Bf.bind(null,!0),Af=Bf.bind(null,!1);var _h;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(_h||(_h={}));const Ut=30;class gv{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,n=0){const i=this.Th(e,n);return i===null?null:{...this.Rh(i),js:this.Ph(i)}}Dh(){return this.Mh}Ih(e,n,i){if(this.Gi())return null;let s=null;for(const r of i)s=Ws(s,this.Vh(e,n,r));return s}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map(n=>n.js)}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,n){const i=this.Eh(e);if(i===null&&n!==0)switch(n){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return i}Ah(e){let n=this.zh(e);return n>0&&(n-=1),n!==this.Mh.length&&this.Ph(n)<e?n:null}Lh(e){const n=this.Oh(e);return n!==this.Mh.length&&e<this.Ph(n)?n:null}Eh(e){const n=this.zh(e);return n===this.Mh.length||e<this.Mh[n].js?null:n}zh(e){return fi(this.Mh,e,(n,i)=>n.js<i)}Oh(e){return Af(this.Mh,e,(n,i)=>n.js>i)}Nh(e,n,i){let s=null;for(let r=e;r<n;r++){const o=this.Mh[r].Wt[i];Number.isNaN(o)||(s===null?s={Fh:o,Wh:o}:(o<s.Fh&&(s.Fh=o),o>s.Wh&&(s.Wh=o)))}return s}Vh(e,n,i){if(this.Gi())return null;let s=null;const r=T(this.kh()),o=T(this.sn()),a=Math.max(e,r),u=Math.min(n,o),h=Math.ceil(a/Ut)*Ut,d=Math.max(h,Math.floor(u/Ut)*Ut);{const f=this.zh(a),g=this.Oh(Math.min(u,h,n));s=Ws(s,this.Nh(f,g,i))}let c=this.bh.get(i);c===void 0&&(c=new Map,this.bh.set(i,c));for(let f=Math.max(h+1,a);f<d;f+=Ut){const g=Math.floor(f/Ut);let y=c.get(g);if(y===void 0){const w=this.zh(g*Ut),C=this.Oh((g+1)*Ut-1);y=this.Nh(w,C,i),c.set(g,y)}s=Ws(s,y)}{const f=this.zh(d),g=this.Oh(u);s=Ws(s,this.Nh(f,g,i))}return s}}function Ws(t,e){return t===null?e:e===null?t:{Fh:Math.min(t.Fh,e.Fh),Wh:Math.max(t.Wh,e.Wh)}}function Ll(){return new gv}const Lr={setLineStyle:Cn};class vv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Lr)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Lr)}}class yv{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new vv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}class Of{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){var e,n;(n=(e=this.Zh).updateAllViews)==null||n.call(e)}Ys(){var i,s,r;const e=((s=(i=this.Zh).paneViews)==null?void 0:s.call(i))??[];if(((r=this.Kh)==null?void 0:r.qh)===e)return this.Kh.jh;const n=e.map(o=>new yv(o));return this.Kh={qh:e,jh:n},n}Qn(e,n){var i,s;return((s=(i=this.Zh).hitTest)==null?void 0:s.call(i,e,n))??null}}let xv=class extends Of{ds(){return[]}};class wv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Lr)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Lr)}}class Sh{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new wv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}function Df(t){var e,n,i;return{ri:t.text(),Ei:t.coordinate(),Vi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),G:t.backColor(),It:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((i=t.tickVisible)==null?void 0:i.call(t))??!0}}class _v{constructor(e,n){this.Xt=new Tf,this.Xh=e,this.Jh=n}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...Df(this.Xh)}),this.Xt}}class Sv extends qr{constructor(e,n){super(),this.Xh=e,this.Ki=n}Yi(e,n,i){const s=Df(this.Xh);i.G=s.G,e.R=s.R;const r=2/12*this.Ki.k();i.Ti=r,i.Ri=r,i.Ei=s.Ei,i.Vi=s.Vi,e.ri=s.ri,e.It=s.It,e.pi=s.pi}}class jv extends Of{constructor(e,n){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=n}fs(){var s,r,o;const e=((r=(s=this.Zh).timeAxisViews)==null?void 0:r.call(s))??[];if(((o=this.Qh)==null?void 0:o.qh)===e)return this.Qh.jh;const n=this.ye.Qt().Et(),i=e.map(a=>new _v(a,n));return this.Qh={qh:e,jh:i},i}Ks(){var s,r,o;const e=((r=(s=this.Zh).priceAxisViews)==null?void 0:r.call(s))??[];if(((o=this.ta)==null?void 0:o.qh)===e)return this.ta.jh;const n=this.ye.Ft(),i=e.map(a=>new Sv(a,n));return this.ta={qh:e,jh:i},i}na(){var i,s,r;const e=((s=(i=this.Zh).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.ia)==null?void 0:r.qh)===e)return this.ia.jh;const n=e.map(o=>new Sh(o));return this.ia={qh:e,jh:n},n}ea(){var i,s,r;const e=((s=(i=this.Zh).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.sa)==null?void 0:r.qh)===e)return this.sa.jh;const n=e.map(o=>new Sh(o));return this.sa={qh:e,jh:n},n}ra(e,n){var i,s;return((s=(i=this.Zh).autoscaleInfo)==null?void 0:s.call(i,e,n))??null}}function Il(t,e,n,i){t.forEach(s=>{e(s).forEach(r=>{r.Yh()===n&&i.push(r)})})}function Fl(t){return t.Ys()}function bv(t){return t.na()}function kv(t){return t.ea()}const Mv=["Area","Line","Baseline"];class nl extends fv{constructor(e,n,i,s,r){super(e),this.jt=Ll(),this._r=new rv(this),this.ha=[],this.aa=new tv(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new dv,this.da=new Map,this.fa=null,this.Ps=i,this.pa=n;const o=new lv(this);if(this.gs=[o],this.ur=new Ff(o,this,e),Mv.includes(this.pa)&&(this.la=new sv(this)),this.va(),this.$h=s(this,this.Qt(),r),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const n={Be:!0},i=this.Ft();if(this.Qt().Et().Gi()||i.Gi()||this.jt.Gi())return n;const s=this.Qt().Et().Ie(),r=this.Lt();if(s===null||r===null)return n;let o,a;if(e){const c=this.jt.Ch();if(c===null)return n;o=c,a=c.js}else{const c=this.jt.$s(s.bi(),-1);if(c===null||(o=this.jt.ph(c.js),o===null))return n;a=c.js}const u=o.Wt[3],h=this.ga().gh(a,{Wt:o}),d=i.Nt(u,r.Wt);return{Be:!1,gt:u,ri:i.Ji(u,r.Wt),Ue:i.Ma(u),$e:i.ba(u,r.Wt),R:h.th,Ei:d,js:a}}ga(){return this.oa!==null||(this.oa=new mv(this)),this.oa}N(){return this.Ps}cr(e){const n=this.Qt(),{priceScaleId:i,visible:s,priceFormat:r}=e;i!==void 0&&i!==this.Ps.priceScaleId&&n.Sa(this,i),s!==void 0&&s!==this.Ps.visible&&n.xa();const o=e.conflationThresholdFactor!==void 0;Ze(this.Ps,e),o&&(this.da.clear(),this.Qt().dr()),r!==void 0&&(this.va(),n.Ca()),n.ya(this),n.ka(),this.$h.kt("options")}ht(e,n){this.jt.ht(e),this.da.clear();const i=this.Qt().Et().N();i.enableConflation&&i.precomputeConflationOnInit&&this.Pa(i.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(n&&n.Ta?this.la.Pe():e.length===0&&this.la.ke());const s=this.Qt().Kn(this);this.Qt().Ra(s),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const n=new cv(this,e);return this.ha.push(n),this.Qt().ya(this),n}Ia(e){const n=this.ha.indexOf(e);n!==-1&&this.ha.splice(n,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const n=e.Aa();return this.jt.$s(n,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const n=this.za();if(!this.da.has(n))return;const i=this.pa==="Custom",s=i&&this.fa||void 0,r=i&&this.$h.Oa?u=>{const h=u,d=this.$h.Oa(h);return Array.isArray(d)?d:[typeof d=="number"?d:0]}:void 0,o=this.ca.kr(this.jt.Dh(),e,n,s,i,r),a=Ll();a.ht(o),this.da.set(n,a)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const n=this.za(),i=this.da.get(n);return i||(this.Fa(n),this.da.get(n)??this.jt)}Wa(e){const n=this.jt.ph(e);return n===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3]}:n.Wt[3]}Ha(e){const n=[];Il(this.ua,Fl,"top",n);const i=this.la;return i!==null&&i.It()&&(this._a===null&&i.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),i.Te(),n.unshift(i)),n}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const n=this.ha.map(i=>i.pr());return e.push(...n),Il(this.ua,Fl,"normal",e),e}qa(){return this.ja(Fl,"bottom")}Ya(e){return this.ja(bv,e)}Ka(e){return this.ja(kv,e)}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}ds(){return[this.ur,...this.ha.map(e=>e.vr())]}Ks(e,n){if(n!==this.hs&&!this.$a())return[];const i=[...this.gs];for(const s of this.ha)i.push(s.mr());return this.ua.forEach(s=>{i.push(...s.Ks())}),i}fs(){const e=[];return this.ua.forEach(n=>{e.push(...n.fs())}),e}ra(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.Ga(e,n);return s===null?null:s.tr()});return Rr.ir(i)}return this.Ga(e,n)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){var e;this.$h.kt();for(const n of this.gs)n.kt();for(const n of this.ha)n.kt();this._r.kt(),this.aa.kt(),(e=this.la)==null||e.kt(),this.ua.forEach(n=>n.Ws())}Ft(){return T(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.jt.ph(e);return n===null?null:{gt:n.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new jv(e,this))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e)}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!el(this.Ft().ol())}Ga(e,n){if(!cs(e)||!cs(n)||this.jt.Gi())return null;const i=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],s=this.jt.Ih(e,n,i);let r=s!==null?new Oe(s.Fh,s.Wh):null,o=null;if(this.wh()==="Histogram"){const a=this.Ps.base,u=new Oe(a,a);r=r!==null?r.Sn(u):u}return this.ua.forEach(a=>{const u=a.ra(e,n);if(u!=null&&u.priceRange){const h=new Oe(u.priceRange.minValue,u.priceRange.maxValue);r=r!==null?r.Sn(h):h}u!=null&&u.margins&&(o=u.margins)}),new Rr(r,o)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.Ja=new Xg(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new If(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new tl(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,n){const i=[];return Il(this.ua,e,n,i),i}za(){const{ul:e,cl:n,dl:i}=this.fl();return this.ca.gr(e,n,i)}fl(){const e=this.Qt().Et(),n=e.ul(),i=window.devicePixelRatio||1,s=e.N().conflationThresholdFactor;return{ul:n,cl:i,dl:this.Ps.conflationThresholdFactor??s??1}}pl(e){const n=this.jt.Dh();let i;if(this.pa==="Custom"&&this.fa!==null){const r=this.rl();if(!r)throw new Error(av);i=this.ca.Mr(n,e,this.fa,!0,o=>r(o))}else i=this.ca.Mr(n,e);const s=Ll();return s.ht(i),s}Fa(e){const n=this.pl(e);this.da.set(e,n)}Pa(e){var i;if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const n=this.Qt().Et().vl();for(const s of n){const r=()=>{this.ml(s)},o=typeof window=="object"&&window||typeof self=="object"&&self;(i=o==null?void 0:o.gl)!=null&&i.wl?o.gl.wl(()=>{r()},{Ml:e}):Promise.resolve().then(()=>r())}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const n=this.pl(e);this.da.set(e,n)}}const Cv=[3],Ev=[0,1,2,3];class Pv{constructor(e){this.Ps=e}bl(e,n,i){let s=e;if(this.Ps.mode===0)return s;const r=i.Rs(),o=r.Lt();if(o===null)return s;const a=r.Nt(e,o),u=i.Sl().filter(d=>d instanceof nl).reduce((d,c)=>{if(i.Zn(c)||!c.It())return d;const f=c.Ft(),g=c.qs();if(f.Gi()||!g.Ee(n))return d;const y=g.ph(n);if(y===null)return d;const w=Gt(c.Lt()),C=this.Ps.mode===3?Ev:Cv;return d.concat(C.map(v=>f.Nt(y.Wt[v],w.Wt)))},[]);if(u.length===0)return s;u.sort((d,c)=>Math.abs(d-a)-Math.abs(c-a));const h=u[0];return s=r.Ds(h,o),s}}function Vi(t,e,n){return Math.min(Math.max(t,e),n)}function Us(t,e,n){return e-t<=n}function Ya(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Nv extends Rn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=Math.max(1,Math.floor(i));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=T(this.jt);if(o.xl){e.strokeStyle=o.Cl,Cn(e,o.yl),e.beginPath();for(const a of o.kl){const u=Math.round(a.Pl*i);e.moveTo(u,-r),e.lineTo(u,n.height+r)}e.stroke()}if(o.Tl){e.strokeStyle=o.Rl,Cn(e,o.Dl),e.beginPath();for(const a of o.Il){const u=Math.round(a.Pl*s);e.moveTo(-r,u),e.lineTo(n.width+r,u)}e.stroke()}})}}class zv{constructor(e){this.Xt=new Nv,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,n={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(i=>({Pl:i.coord}))};this.Xt.ht(n),this.xt=!1}return this.Xt}}class Tv{constructor(e){this.$h=new zv(e)}pr(){return this.$h}}const Bl={Bl:4,El:1e-4};function Gn(t,e){const n=100*(t-e)/e;return e<0?-n:n}function Rv(t,e){const n=Gn(t.Ze(),e),i=Gn(t.Ge(),e);return new Oe(n,i)}function Hi(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function Lv(t,e){const n=Hi(t.Ze(),e),i=Hi(t.Ge(),e);return new Oe(n,i)}function Ir(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.log10(n+e.El)+e.Bl;return t<0?-i:i}function Ki(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.pow(10,n-e.Bl)-e.El;return t<0?-i:i}function Ni(t,e){if(t===null)return null;const n=Ir(t.Ze(),e),i=Ir(t.Ge(),e);return new Oe(n,i)}function Xn(t,e){if(t===null)return null;const n=Ki(t.Ze(),e),i=Ki(t.Ge(),e);return new Oe(n,i)}function Al(t){if(t===null)return Bl;const e=Math.abs(t.Ge()-t.Ze());if(e>=1||e<1e-15)return Bl;const n=Math.ceil(Math.abs(Math.log10(e))),i=Bl.Bl+n;return{Bl:i,El:1/Math.pow(10,i)}}class Ol{constructor(e,n){if(this.Al=e,this.Ll=n,function(i){if(i<0)return!1;if(i>1e18)return!0;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let i=this.Al;i!==1;){if(i%2==0)this.zl.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),i/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,n,i){const s=this.Al===0?0:1/this.Al;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ll[0];for(;;){const c=Us(r,s,1e-14)&&r>s+1e-14,f=Us(r,i*a,1e-14),g=Us(r,1,1e-14);if(!(c&&f&&g))break;r/=a,a=this.Ll[++o%this.Ll.length]}if(r<=s+1e-14&&(r=s),r=Math.max(1,r),this.zl.length>0&&(u=r,h=1,d=1e-14,Math.abs(u-h)<d))for(o=0,a=this.zl[0];Us(r,i*a,1e-14)&&r>s+1e-14;)r/=a,a=this.zl[++o%this.zl.length];var u,h,d;return r}}class jh{constructor(e,n,i,s){this.Nl=[],this.Ki=e,this.Al=n,this.Fl=i,this.Wl=s}Ol(e,n){if(e<n)throw new Error("high < low");const i=this.Ki.$t(),s=(e-n)*this.Hl()/i,r=new Ol(this.Al,[2,2.5,2]),o=new Ol(this.Al,[2,2,2.5]),a=new Ol(this.Al,[2.5,2,2]),u=[];return u.push(r.Ol(e,n,s),o.Ol(e,n,s),a.Ol(e,n,s)),function(h){if(h.length<1)throw Error("array is empty");let d=h[0];for(let c=1;c<h.length;++c)h[c]<d&&(d=h[c]);return d}(u)}Ul(){const e=this.Ki,n=e.Lt();if(n===null)return void(this.Nl=[]);const i=e.$t(),s=this.Fl(i-1,n),r=this.Fl(0,n),o=this.Ki.N().entireTextOnly?this.$l()/2:0,a=o,u=i-1-o,h=Math.max(s,r),d=Math.min(s,r);if(h===d)return void(this.Nl=[]);const c=this.Ol(h,d);if(this.ql(n,c,h,d,a,u),e.jl()&&this.Yl(c,d,h)){const y=this.Ki.Kl();this.Zl(n,c,a,u,y,2*y)}const f=this.Nl.map(y=>y.Gl),g=this.Ki.Xl(f);for(let y=0;y<this.Nl.length;y++)this.Nl[y].Jl=g[y]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,n,i,s,r,o){const a=this.Nl,u=this.Ki;let h=i%n;h+=h<0?n:0;const d=i>=s?1:-1;let c=null,f=0;for(let g=i-h;g>s;g-=n){const y=this.Wl(g,e,!0);c!==null&&Math.abs(y-c)<this.Hl()||y<r||y>o||(f<a.length?(a[f].Pl=y,a[f].Jl=u.Ql(g),a[f].Gl=g):a.push({Pl:y,Jl:u.Ql(g),Gl:g}),f++,c=y,u.io()&&(n=this.Ol(g*d,s)))}a.length=f}Zl(e,n,i,s,r,o){const a=this.Nl,u=this.so(e,i,r,o),h=this.so(e,s,-o,-r),d=this.Wl(0,e,!0)-this.Wl(n,e,!0);a.length>0&&a[0].Pl-u.Pl<d/2&&a.shift(),a.length>0&&h.Pl-a[a.length-1].Pl<d/2&&a.pop(),a.unshift(u),a.push(h)}so(e,n,i,s){const r=(i+s)/2,o=this.Fl(n+i,e),a=this.Fl(n+s,e),u=Math.min(o,a),h=Math.max(o,a),d=Math.max(.1,this.Ol(h,u)),c=this.Fl(n+r,e),f=c-c%d,g=this.Wl(f,e,!0);return{Jl:this.Ki.Ql(f),Pl:g,Gl:f}}Yl(e,n,i){let s=Gt(this.Ki.er());return this.Ki.io()&&(s=Xn(s,this.Ki.no())),s.Ze()-n<e&&i-s.Ge()<e}}function $f(t){return t.slice().sort((e,n)=>T(e._s())-T(n._s()))}var bh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(bh||(bh={}));const kh=new If,Mh=new tl(100,1);class Iv{constructor(e,n,i,s,r){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new me,this.fo=new me,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=Mh,this.So=Al(null),this.xo=e,this.Ps=n,this.Co=i,this.yo=s,this.ko=r,this.Po=new jh(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(Ze(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const n=Qe(e.scaleMargins.top),i=Qe(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(n+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+i}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const n=this.ae();let i=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),n.ae===1&&e.ae!==n.ae&&(function(r,o){if(r===null)return!1;const a=Ki(r.Ze(),o),u=Ki(r.Ge(),o);return isFinite(a)&&isFinite(u)}(this.sr,this.So)?(i=Xn(this.sr,this.So),i!==null&&this.Lo(i)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==n.ae&&(i=Ni(this.sr,this.So),i!==null&&this.Lo(i));const s=n.ae!==this.Ps.mode;s&&(n.ae===2||this.He())&&this._l(),s&&(n.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&n.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(n,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,n){const i=this.sr;(n||i===null&&e!==null||i!==null&&!i.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,n){return this.He()?e=Gn(e,n):this.Eo()&&(e=Hi(e,n)),this.Ro(e,n)}Yo(e,n,i){this.Uo();const s=this.Ho(),r=T(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),d=u/(a-o),c=i===void 0?0:i.from,f=i===void 0?e.length:i.to,g=this.Ko();for(let y=c;y<f;y++){const w=e[y],C=w.gt;if(isNaN(C))continue;let v=C;g!==null&&(v=g(w.gt,n));const p=s+d*(v-o),m=h?p:this.eo-1-p;w.ut=m}}Zo(e,n,i){this.Uo();const s=this.Ho(),r=T(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),d=u/(a-o),c=i===void 0?0:i.from,f=i===void 0?e.length:i.to,g=this.Ko();for(let y=c;y<f;y++){const w=e[y];let C=w.Hr,v=w.Ur,p=w.$r,m=w.qr;g!==null&&(C=g(w.Hr,n),v=g(w.Ur,n),p=g(w.$r,n),m=g(w.qr,n));let S=s+d*(C-o),b=h?S:this.eo-1-S;w.Go=b,S=s+d*(v-o),b=h?S:this.eo-1-S,w.Xo=b,S=s+d*(p-o),b=h?S:this.eo-1-S,w.Jo=b,S=s+d*(m-o),b=h?S:this.eo-1-S,w.Qo=b}}Ds(e,n){const i=this.To(e,n);return this.t_(i,n)}t_(e,n){let i=e;return this.He()?i=function(s,r){return r<0&&(s=-s),s/100*r+r}(i,n):this.Eo()&&(i=function(s,r){return s-=100,r<0&&(s=-s),s/100*r+r}(i,n)),i}Sl(){return this.po}Dt(){return this.mo||(this.mo=$f(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const n of this.po){const i=n.Lt();i!==null&&(e===null||i.Ea<e.Ea)&&(e=i)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const n=this.Po.Vl();return this.wo={Vl:n,e_:e},this.do.p(),n}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=T(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let n=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const i=T(this.ho).Ke();n=Math.max(n,.1),i.Je(n),this.Lo(i)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=T(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const n=T(this.er()).Xe()/(this.Fo()-1);let i=e-this.bo;this.Ao()&&(i*=-1);const s=i*n,r=T(this.ho).Ke();r.Qe(s),this.Lo(r,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,n){switch(this.Ps.mode){case 2:return this.c_(Gn(e,n));case 3:return this.Xa().format(Hi(e,n));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,T(this.vo).Xa())}ba(e,n){return e=Gn(e,n),this.c_(e,kh)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach(e=>e.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const i of this.po)i._s()<e&&(e=i._s(),this.vo=i);let n=100;this.vo!==null&&(n=Math.round(this.vo.qh())),this.Ja=Mh,this.He()?(this.Ja=kh,n=100):this.Eo()?(this.Ja=new tl(100,1),n=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new jh(this,n,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,n){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?Ir(e,this.So):e;const i=T(this.er()),s=this.Ho()+(this.Fo()-1)*(e-i.Ze())/i.Xe();return this.jo(s)}To(e,n){if(this.Uo(),this.Gi())return 0;const i=this.jo(e),s=T(this.er()),r=s.Ze()+s.Xe()*((i-this.Ho())/(this.Fo()-1));return this.io()?Ki(r,this.So):r}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let n=null;const i=this.p_();let s=0,r=0;for(const u of i){if(!u.It())continue;const h=u.Lt();if(h===null)continue;const d=u.ra(e.Aa(),e.bi());let c=d&&d.er();if(c!==null){switch(this.Ps.mode){case 1:c=Ni(c,this.So);break;case 2:c=Rv(c,h.Wt);break;case 3:c=Lv(c,h.Wt)}if(n=n===null?c:n.Sn(T(c)),d!==null){const f=d.rr();f!==null&&(s=Math.max(s,f.above),r=Math.max(r,f.below))}}}if(this.jl()&&(s=Math.max(s,this.Kl()),r=Math.max(r,this.Kl())),s===this.uo&&r===this.co||(this.uo=s,this.co=r,this.wo=null,this.Io()),n!==null){if(n.Ze()===n.Ge()){const u=5*this.m_();this.io()&&(n=Xn(n,this.So)),n=new Oe(n.Ze()-u,n.Ge()+u),this.io()&&(n=Ni(n,this.So))}if(this.io()){const u=Xn(n,this.So),h=Al(u);if(o=h,a=this.So,o.Bl!==a.Bl||o.El!==a.El){const d=this.ho!==null?Xn(this.ho,this.So):null;this.So=h,n=Ni(u,h),d!==null&&(this.ho=Ni(d,h))}}this.Lo(n)}else this.sr===null&&(this.Lo(new Oe(-.5,.5)),this.So=Al(null));var o,a}Ko(){return this.He()?Gn:this.Eo()?Hi:this.io()?e=>Ir(e,this.So):null}g_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.format(e)):n(e)}M_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.formatTickmarks(e)):n(e)}lr(e,n){return this.g_(e,this.yo.priceFormatter,n)}f_(e,n){const i=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),n)}c_(e,n){return this.g_(e,this.yo.percentageFormatter,n)}d_(e,n){const i=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),n)}}function Ch(t){return t instanceof nl}class Eh{constructor(e,n){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new me,this.ua=[],this.Jh=e,this.ns=n,this.k_=new Tv(this);const i=n.N();this.P_=this.T_("left",i.leftPriceScale),this.R_=this.T_("right",i.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(i)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const n=Array.from(this.b_.values());for(const i of n){const s=T(i[0].Ft());s.cr(e.overlayPriceScales),e.localization&&s._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?Qe(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(e=>{e.m&&e.m()}),this.ua=this.ua.filter(e=>{const n=e.Gh();return n.detached&&n.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach(n=>{if(this.Zn(n)){const i=n.Ft();i!==null&&i.No(e)}}),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(Ch)}Sl(){return this.po}Zn(e){const n=e.Ft();return n===null||this.P_!==n&&this.R_!==n}i_(e,n,i){this.W_(e,n,i?e._s():this.po.length)}n_(e,n){const i=this.po.indexOf(e);Ee(i!==-1,"removeDataSource: invalid data source"),this.po.splice(i,1),n||this.po.forEach((o,a)=>o.us(a));const s=T(e.Ft()).ol();if(this.b_.has(s)){const o=Qe(this.b_.get(s)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.b_.delete(s))}const r=e.Ft();r&&r.Sl().indexOf(e)>=0&&(r.n_(e),this.H_(r)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,n){e.h_(n)}Y_(e,n){e.a_(n),this.z_()}K_(e){e.l_()}Z_(e,n){e.o_(n)}G_(e,n){e.__(n),this.z_()}X_(e){e.u_()}z_(){this.po.forEach(e=>{e.Ws()})}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const n=this.Jh.Ie();e.Do({ln:!0}),n!==null&&e.v_(n),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(e=>{this.Zn(e)&&this.H_(e.Ft())}),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=$f(this.po)),this.mo}su(e,n){n=Vi(n,0,this.po.length-1);const i=this.po.indexOf(e);Ee(i!==-1,"setSeriesOrder: invalid data source"),this.po.splice(i,1),this.po.splice(n,0,e),this.po.forEach((s,r)=>s.us(r)),this.mo=null;for(const s of[this.P_,this.R_])s.s_(),s._l();this.ns.dr()}Vt(){return this.Dt().filter(Ch)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new xv(e))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}J_(e){const n=e.p_();if(n&&n.length>0&&!this.Jh.Gi()){const i=this.Jh.Ie();i!==null&&e.v_(i)}e.Ws()}W_(e,n,i){let s=this.V_(n);if(s===null&&(s=this.T_(n,this.ns.N().overlayPriceScales)),this.po.splice(i,0,e),!el(n)){const r=this.b_.get(n)||[];r.push(e),this.b_.set(n,r)}e.us(i),s.i_(e),e.cs(s),this.H_(s),this.mo=null}D_(e,n,i){n.ae!==i.ae&&this.J_(e)}T_(e,n){const i={visible:!0,autoScale:!0,...Nt(n)},s=new Iv(e,i,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return s.No(this.$t()),s}}function Vs(t){return{hu:t.hu,au:{te:t.lu.externalId},ou:t.lu.cursorStyle}}function Fv(t,e,n,i){for(const s of t){const r=s.Tt(i);if(r!==null&&r.Qn){const o=r.Qn(e,n);if(o!==null)return{_u:s,au:o}}}return null}function Bv(t){return t.Ys!==void 0}function Wf(t,e,n){const i=[t,...t.Dt()],s=function(r,o,a){var f;let u,h;for(const g of r){const y=((f=g.Za)==null?void 0:f.call(g,o,a))??[];for(const w of y)d=w.zOrder,c=u==null?void 0:u.zOrder,(!c||d==="top"&&c!=="top"||d==="normal"&&c==="bottom")&&(u=w,h=g)}var d,c;return u&&h?{lu:u,hu:h}:null}(i,e,n);if((s==null?void 0:s.lu.zOrder)==="top")return Vs(s);for(const r of i){if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&!s.lu.isBackground)return Vs(s);if(Bv(r)){const o=Fv(r.Ys(t),e,n,t);if(o!==null)return{hu:r,_u:o._u,au:o.au}}if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&s.lu.isBackground)return Vs(s)}return s!=null&&s.lu?Vs(s):null}class Av{constructor(e,n,i=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=n,this.zn=i}du(e){const n=e.time,i=this.cu.cacheKey(n),s=this.Ln.get(i);if(s!==void 0)return s.fu;if(this.Vn===this.zn){const o=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(Qe(o)),this.En++,this.Vn--}const r=this.uu(e);return this.Ln.set(i,{fu:r,Wn:this.Bn}),this.An.set(this.Bn,i),this.Vn++,this.Bn++,r}}class si{constructor(e,n){Ee(e<=n,"right should be >= left"),this.pu=e,this.vu=n}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function Ph(t,e){return t===null||e===null?t===e:t.Ye(e)}class Ov{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,n){this.Su(n),this.Ln=null;for(let i=n;i<e.length;++i){const s=e[i];let r=this.wu.get(s.timeWeight);r===void 0&&(r=[],this.wu.set(s.timeWeight,r)),r.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}xu(e,n,i,s,r){const o=Math.ceil(n/e);return this.Ln!==null&&this.Ln.Cu===o&&r===this.Ln.yu&&i===this.Ln.ku||(this.Ln={yu:r,ku:i,Vl:this.Pu(o,i,s),Cu:o}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const n=[];this.wu.forEach((i,s)=>{e<=i[0].index?n.push(s):i.splice(fi(i,e,r=>r.index<e),1/0)});for(const i of n)this.wu.delete(i)}Pu(e,n,i){let s=[];const r=o=>!n||i.has(o.index);for(const o of Array.from(this.wu.keys()).sort((a,u)=>u-a)){if(!this.wu.get(o))continue;const a=s;s=[];const u=a.length;let h=0;const d=Qe(this.wu.get(o)),c=d.length;let f=1/0,g=-1/0;for(let y=0;y<c;y++){const w=d[y],C=w.index;for(;h<u;){const v=a[h],p=v.index;if(!(p<C&&r(v))){f=p;break}h++,s.push(v),g=p,f=1/0}if(f-C>=e&&C-g>=e&&r(w))s.push(w),g=C;else if(this.gu)return a}for(;h<u;h++)r(a[h])&&s.push(a[h])}return s}}class ri{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new si(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new ri(null)}}function Dv(t,e){return t.weight>e.weight?t:e}class $v{constructor(e,n,i,s){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new Ov,this.Au=new Map,this.Lu=ri.Iu(),this.zu=!0,this.Ou=new me,this.Nu=new me,this.Fu=new me,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=n,this.yo=i,this.Yu=n.rightOffset,this.Ku=n.barSpacing,this.ns=e,this.Zu(n),this.cu=s,this.Gu(),this.Eu.Mu(n.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){Ze(this.yo,e),this.tc(),this.Gu()}cr(e,n){Ze(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){var n;return((n=this.Bu[e])==null?void 0:n.time)??null}es(e){return this.Bu[e]??null}ec(e,n){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return n?this.Bu.length-1:null;const i=fi(this.Bu,this.cu.key(e),(s,r)=>this.cu.key(s.time)<r);return this.cu.key(e)<this.cu.key(this.Bu[i].time)?n?i:null:i}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const n={from:e.Aa(),to:e.bi()};return this.oc(n)}oc(e){const n=Math.round(e.from),i=Math.round(e.to),s=T(this._c()),r=T(this.uc());return{from:T(this.es(Math.max(s,n))),to:T(this.es(Math.min(r,i)))}}cc(e){return{from:T(this.ec(e.from,!0)),to:T(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const n=this.ac(),i=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.Ku*e/i;this.Ku=s}if(this.Ps.fixLeftEdge&&n!==null&&n.Aa()<=0){const s=i-e;this.Yu-=Math.round(s/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!cs(e))return 0;const n=this.vc()+this.Yu-e;return this.S_-(n+.5)*this.Ku-1}mc(e,n){const i=this.vc(),s=n===void 0?0:n.from,r=n===void 0?e.length:n.to;for(let o=s;o<r;o++){const a=e[o].wt,u=i+this.Yu-a,h=this.S_-(u+.5)*this.Ku-1;e[o]._t=h}}wc(e,n){const i=Math.ceil(this.gc(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(i)?this.bc(i):i}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const n=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const i=this.Yu*n/this.Ku;this.Yu=i}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,n=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(n/e),s=T(this.Ie()),r=Math.max(s.Aa(),s.Aa()-i),o=Math.max(s.bi(),s.bi()-i),a=this.Eu.xu(e,n,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),u=this._c()+i,h=this.uc()-i,d=this.yc(),c=this.Ps.fixLeftEdge||d,f=this.Ps.fixRightEdge||d;let g=0;for(const y of a){if(!(r<=y.index&&y.index<=o))continue;let w;g<this.qu.length?(w=this.qu[g],w.coord=this.qt(y.index),w.label=this.kc(y),w.weight=y.weight):(w={needAlignCoordinate:!1,coord:this.qt(y.index),label:this.kc(y),weight:y.weight},this.qu.push(w)),this.Ku>n/2&&!d?w.needAlignCoordinate=!1:w.needAlignCoordinate=c&&y.index<=u||f&&y.index>=h,g++}return this.qu.length=g,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,n){const i=this.gc(e),s=this.ul(),r=s+n*(s/10);this.gn(r),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(i-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const n=Vi(this.S_-e,0,this.S_),i=Vi(this.S_-T(this.Mo),0,this.S_);n!==0&&i!==0&&this.gn(this.Wu.ul*n/i)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const n=(this.bo-e)/this.ul();this.Yu=T(this.Wu).Cc+n,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.Yu,s=performance.now();this.ns.vn({Ec:r=>(r-s)/n>=1,Ac:r=>{const o=(r-s)/n;return o>=1?e:i+(e-i)*o}})}kt(e,n){this.zu=!0,this.Bu=e,this.Eu.bu(e,n),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,n){const i=e.mu(),s=n&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-s)/i),this.Yu=e.bi()-this.vc(),n&&(this.Yu=s?s/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),n=this.uc();if(e===null||n===null)return;const i=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new si(e,n+i),!0)}Wc(e){const n=new si(e.from,e.to);this.Nc(n)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const n of e)for(const i of n.ll())this.Uu.set(i,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),n=this.Ps.minBarSpacing;if(n>=e)return[1];const i=[1];let s=2;for(;s<=512;)n<e/s&&i.push(s),s*=2;return i}yc(){const e=this.ns.N().handleScroll,n=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const n=this.Uc(e),i=this.vc()+this.Yu-n;return Math.round(1e6*i)/1e6}xc(e){const n=this.Ku;this.Ku=e,this.dc(),n!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(ri.Iu());const e=this.vc(),n=this.S_/this.Ku,i=this.Yu+e,s=new si(i-n+1,i);this.qc(new ri(s))}dc(){const e=Vi(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const n=e/this.Ku,i=Math.pow(2,Math.floor(Math.log2(n)));this.ju=Math.min(i,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const n=this.Zc();this.Yu>n&&(this.Yu=n,this.zu=!0)}Kc(){const e=this._c(),n=this.Vu;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let n=this.Au.get(e.weight);return n===void 0&&(n=new Av(i=>this.Gc(i),this.cu),this.Au.set(e.weight,n)),n.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const n=this.Lu;this.Lu=e,Ph(n.Ru(),this.Lu.Ru())||this.Ou.p(),Ph(n.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const n=this.Ie();if(n===null)return;const i=n.Aa()-e;if(i<0){const s=this.Yu-i-1;this.Mn(s)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const n=function*(s){const r=Math.round(s),o=r<s;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(e),i=this.uc();for(;i;){const s=n.next().value;if(this.Uu.get(s))return s;if(s<0||s>i)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(n)}}}var Nh,zh,Th,Rh,Lh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Nh||(Nh={}));class Wv{constructor(e,n,i){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new me,this.nd=new me,this.ed=null,this.rd=e,this.Ps=n,this.cu=i,this.ko=new Ag(this.Ps.layout.colorParsers),this.hd=new Bg(this),this.Jh=new $v(this,n.timeScale,this.Ps.localization,i),this.Ct=new Gg(this,n.crosshair),this.ad=new Pv(n.crosshair),n.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ce.yn())}dr(){this.dd(Ce.Cn())}Ua(){this.dd(new Ce(1))}ya(e){const n=this.fd(e);this.dd(n)}pd(){return this.td}vd(e){var i,s,r,o;if(((i=this.td)==null?void 0:i.hu)===(e==null?void 0:e.hu)&&((r=(s=this.td)==null?void 0:s.au)==null?void 0:r.te)===((o=e==null?void 0:e.au)==null?void 0:o.te))return;const n=this.td;this.td=e,n!==null&&this.ya(n.hu),e!==null&&e.hu!==(n==null?void 0:n.hu)&&this.ya(e.hu)}N(){return this.Ps}cr(e){Ze(this.Ps,e),this.Xc.forEach(n=>n.I_(e)),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,n,i=0){const s=this.Xc[i];if(s===void 0)return;if(e==="left")return Ze(this.Ps,{leftPriceScale:n}),s.I_({leftPriceScale:n}),this.sd.p(),void this.Ca();if(e==="right")return Ze(this.Ps,{rightPriceScale:n}),s.I_({rightPriceScale:n}),this.sd.p(),void this.Ca();const r=this.wd(e,i);r!==null&&(r.Ft.cr(n),this.sd.p())}wd(e,n){const i=this.Xc[n];if(i===void 0)return null;const s=i.V_(e);return s!==null?{Gs:i,Ft:s}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,n){e.No(n),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach(n=>n.L_(e)),this.Sc()}Sd(e){this.Xc.length!==1&&(Ee(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,n){if(this.Xc.length<2)return;Ee(e>=0&&e<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc.reduce((c,f)=>c+f.E_(),0),r=this.Xc.reduce((c,f)=>c+f.$t(),0),o=r-30*(this.Xc.length-1);n=Math.min(o,Math.max(30,n));const a=s/r,u=i.$t();i.A_(n*a);let h=n-u,d=this.Xc.length-1;for(const c of this.Xc)if(c!==i){const f=Math.min(o,Math.max(30,c.$t()-h/d));h-=c.$t()-f,d-=1;const g=f*a;c.A_(g)}this.Ca()}Cd(e,n){Ee(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc[n];this.Xc[e]=s,this.Xc[n]=i,this.Ca()}yd(e,n){if(Ee(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index"),e===n)return;const[i]=this.Xc.splice(e,1);this.Xc.splice(n,0,i),this.Ca()}j_(e,n,i){e.j_(n,i)}Y_(e,n,i){e.Y_(n,i),this.ka(),this.dd(this.kd(e,2))}K_(e,n){e.K_(n),this.dd(this.kd(e,2))}Z_(e,n,i){n.Vo()||e.Z_(n,i)}G_(e,n,i){n.Vo()||(e.G_(n,i),this.ka(),this.dd(this.kd(e,2)))}X_(e,n){n.Vo()||(e.X_(n),this.dd(this.kd(e,2)))}Q_(e,n){e.Q_(n),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,n){const i=this.Et();if(i.Gi()||n===0)return;const s=i.ss();e=Math.max(1,Math.min(e,s)),i.Rc(e,n),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter(e=>e.It())),this.Qc}xa(){this.Qc=null}Ad(e,n,i,s,r){this.Ct.Bs(e,n);let o=NaN,a=this.Jh.wc(e,!0);const u=this.Jh.Ie();u!==null&&(a=Math.min(Math.max(u.Aa(),a),u.bi())),a=this.Ct.Hs(a);const h=s.Rs(),d=h.Lt();if(d!==null&&(o=h.Ds(n,d)),o=this.ad.bl(o,a,s),this.Ct.zs(a,o,s),this.Ua(),!r){const c=Wf(s,e,n);this.vd(c&&{hu:c.hu,au:c.au,ou:c.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:n},i)}}Ld(e,n,i){const s=i.Rs(),r=s.Lt(),o=s.Nt(e,T(r)),a=this.Jh.ec(n,!0),u=this.Jh.qt(T(a));this.Ad(u,o,null,i,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const n=this.Ct.As(),i=this.Ct.Ls();this.Ad(n,i,null,e)}this.Ct.Ws()}Od(e,n,i){const s=this.Jh.Is(0);n!==void 0&&i!==void 0&&this.Jh.kt(n,i);const r=this.Jh.Is(0),o=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&s!==null&&r!==null){const u=a.Ee(o),h=this.cu.key(s)>this.cu.key(r),d=e!==null&&e>o&&!h,c=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=u&&(i!==void 0||c)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(d&&!f){const g=e-o;this.Jh.Mn(this.Jh.Cc()-g)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if(function(i){return i instanceof Eh}(e))return e;const n=this.Xc.find(i=>i.Dt().includes(e));return n===void 0?null:n}Sc(){this.Xc.forEach(e=>e.iu()),this.ka()}m(){this.Xc.forEach(e=>e.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,n){const i=this.ld(n);this.Wd(e,i),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const n=this.Kn(e),i=this.Jc.indexOf(e);Ee(i!==-1,"Series not found");const s=T(n);this.Jc.splice(i,1),s.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(s)}Sa(e,n){const i=T(this.Kn(e));i.n_(e,!0),i.i_(e,n,!0)}Fc(){const e=Ce.Cn();e.cn(),this.dd(e)}$d(e){const n=Ce.Cn();n.pn(e),this.dd(n)}wn(){const e=Ce.Cn();e.wn(),this.dd(e)}gn(e){const n=Ce.Cn();n.gn(e),this.dd(n)}Mn(e){const n=Ce.Cn();n.Mn(e),this.dd(n)}vn(e){const n=Ce.Cn();n.vn(e),this.dd(n)}dn(){const e=Ce.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,n){if(Ee(n>=0,"Index should be greater or equal to 0"),n===this.Yd(e))return;const i=T(this.Kn(e));i.n_(e);const s=this.ld(n);this.Wd(e,s),i.Sl().length===0&&this.Ud(i),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const n=this.ud,i=this.od;if(n===i)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==i||this.ed.rh!==n)this.ed={eh:i,rh:n,Zd:new Map};else{const r=this.ed.Zd.get(e);if(r!==void 0)return r}const s=this.ko.tt(i,n,e/100);return this.ed.Zd.set(e,s),s}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const n=new Eh(this.Jh,this);this.Xc.push(n);const i=e??this.Xc.length-1,s=Ce.yn();return s.hn(i,{an:0,ln:!0}),this.dd(s),n}ld(e){return Ee(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex(n=>n.F_().includes(e))}kd(e,n){const i=new Ce(n);if(e!==null){const s=this.Xc.indexOf(e);i.hn(s,{an:n})}return i}fd(e,n){return n===void 0&&(n=2),this.kd(this.Kn(e),n)}dd(e){this.rd&&this.rd(e),this.Xc.forEach(n=>n.eu().pr().kt())}Wd(e,n){const i=e.N().priceScaleId,s=i!==void 0?i:this.qd();n.i_(e,s),el(s)||e.cr(e.N())}_d(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function Uf(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Yo(t){return!En(t)&&!ws(t)}function Vf(t){return En(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(zh||(zh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Th||(Th={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Rh||(Rh={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Lh||(Lh={}));const Ih=t=>t.getUTCFullYear();function Uv(t,e,n){return e.replace(/yyyy/g,(i=>zt(Ih(i),4))(t)).replace(/yy/g,(i=>zt(Ih(i)%100,2))(t)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(i=>zt((s=>s.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>zt((s=>s.getUTCDate())(i),2))(t))}class Hf{constructor(e="yyyy-MM-dd",n="default"){this.Qd=e,this.tf=n}du(e){return Uv(e,this.Qd,this.tf)}}class Vv{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",zt(e.getUTCHours(),2)).replace("%m",zt(e.getUTCMinutes(),2)).replace("%s",zt(e.getUTCSeconds(),2))}}const Hv={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Kv{constructor(e={}){const n={...Hv,...e};this.hf=new Hf(n.sf,n.rf),this.af=new Vv(n.nf),this.lf=n.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function Hs(t){return 60*t*60*1e3}function Dl(t){return 60*t*1e3}const Ks=[{_f:(Fh=1,1e3*Fh),uf:10},{_f:Dl(1),uf:20},{_f:Dl(5),uf:21},{_f:Dl(30),uf:22},{_f:Hs(1),uf:30},{_f:Hs(3),uf:31},{_f:Hs(6),uf:32},{_f:Hs(12),uf:33}];var Fh;function Bh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Ks.length-1;n>=0;--n)if(Math.floor(e.getTime()/Ks[n]._f)!==Math.floor(t.getTime()/Ks[n]._f))return Ks[n].uf;return 0}function $l(t){let e=t;if(ws(t)&&(e=Qa(t)),!Yo(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(n.getTime()/1e3),df:e}}function Ah(t){if(!Vf(t))throw new Error("time must be of type isUTCTimestamp");return{cf:t}}function Qa(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Oh(t){ws(t.time)&&(t.time=Qa(t.time))}class Dh{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(Oh)}(e):Oh(e)}createConverterToInternalObj(e){return T(function(n){return n.length===0?null:Yo(n[0].time)||ws(n[0].time)?$l:Ah}(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.df===void 0?new Date(1e3*n.cf).getTime():new Date(Date.UTC(n.df.year,n.df.month-1,n.df.day)).getTime()}convertHorzItemToInternal(e){return Vf(n=e)?Ah(n):Yo(n)?$l(n):$l(Qa(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Kv({sf:n,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new Hf(n,e.locale)}formatHorzItem(e){const n=e;return this.ff.du(new Date(1e3*n.cf))}formatTickmark(e,n){const i=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const r=s.tickMarkFormatter(e.originalTime,i,n.locale);if(r!==null)return r}return function(r,o,a){const u={};switch(o){case 0:u.year="numeric";break;case 1:u.month="short";break;case 2:u.day="numeric";break;case 3:u.hour12=!1,u.hour="2-digit",u.minute="2-digit";break;case 4:u.hour12=!1,u.hour="2-digit",u.minute="2-digit",u.second="2-digit"}const h=r.df===void 0?new Date(1e3*r.cf):new Date(Date.UTC(r.df.year,r.df.month-1,r.df.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(a,u)}(e.time,i,n.locale)}maxTickMarkWeight(e){let n=e.reduce(Dv,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(i,s=0){if(i.length===0)return;let r=s===0?null:i[s-1].time.cf,o=r!==null?new Date(1e3*r):null,a=0;for(let u=s;u<i.length;++u){const h=i[u],d=new Date(1e3*h.time.cf);o!==null&&(h.timeWeight=Bh(d,o)),a+=h.time.cf-(r||h.time.cf),r=h.time.cf,o=d}if(s===0&&i.length>1){const u=Math.ceil(a/(i.length-1)),h=new Date(1e3*(i[0].time.cf-u));i[0].timeWeight=Bh(new Date(1e3*i[0].time.cf),h)}})(e,n)}static pf(e){return Ze({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const pi=typeof window<"u";function $h(){return!!pi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Wl(){return!!pi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Qo(t){return t+t%2}function Yv(t){pi&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class il{constructor(e,n,i){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!Wl(),this.Uf=s=>{this.$f(s)},this.qf=s=>{if(this.jf(s)){const r=this.Yf(s);if(++this.gf,this.Mf&&this.gf>1){const{Kf:o}=this.Zf(wt(s),this.bf);o<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}}else{const r=this.Yf(s);if(++this.vf,this.mf&&this.vf>1){const{Kf:o}=this.Zf(wt(s),this.wf);o<5&&!this.Pf&&this.tp(r,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=n,this.Ps=i,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const n=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",n)},this.np.addEventListener("mousemove",n),this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const n=this.Yf(e);this.tp(n,this.Jf.op),this.Hf=!0}_p(e){const n=Ul(e.changedTouches,T(this.Wf));if(n===null||(this.Ff=Ys(e),this.Af!==null)||this.Of)return;this.zf=!0;const i=this.Zf(wt(n),T(this.yf)),{up:s,cp:r,Kf:o}=i;if(this.kf||!(o<5)){if(!this.kf){const a=.5*s,u=r>=a&&!this.Ps.dp(),h=a>r&&!this.Ps.fp();u||h||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(e,n);this.Gf(a,this.Jf.pp),Fn(e)}}}vp(e){if(e.button!==0)return;const n=this.Zf(wt(e),T(this.Cf)),{Kf:i}=n;if(i>=5&&(this.Pf=!0,this.sp()),this.Pf){const s=this.Yf(e);this.tp(s,this.Jf.mp)}}Zf(e,n){const i=Math.abs(n._t-e._t),s=Math.abs(n.ut-e.ut);return{up:i,cp:s,Kf:i+s}}wp(e){let n=Ul(e.changedTouches,T(this.Wf));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Wf=null,this.Ff=Ys(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const i=this.Yf(e,n);if(this.Gf(i,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:s}=this.Zf(wt(n),this.bf);s<30&&!this.Tf&&this.Gf(i,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(i,this.Jf.Mp),this.Jf.Mp&&Fn(e));this.gf===0&&Fn(e),e.touches.length===0&&this.xf&&(this.xf=!1,Fn(e))}$f(e){if(e.button!==0)return;const n=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),$h()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(n,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:i}=this.Zf(wt(e),this.wf);i<5&&!this.Pf&&this.tp(n,this.Jf.ip),this.sp()}else this.Pf||this.tp(n,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const n=e.changedTouches[0];this.Wf=n.identifier,this.Ff=Ys(e);const i=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=wt(n),this.Ef&&(this.Ef(),this.Ef=null);{const r=this._p.bind(this),o=this.wp.bind(this);this.Ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const s=this.Yf(e,n);this.Gf(s,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=wt(n))}kp(e){if(e.button!==0)return;const n=this.np.ownerDocument.documentElement;$h()&&n.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=wt(e),this.Bf&&(this.Bf(),this.Bf=null);{const s=this.vp.bind(this),r=this.$f.bind(this);this.Bf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",r)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",r)}if(this.Nf=!0,this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=wt(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,n=i=>{this.Jf.Tp&&(i.composed&&this.np.contains(i.composedPath()[0])||i.target&&this.np.contains(i.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",n)},this.Rf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}Wl()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Yv(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",e=>this.Ep(e.touches),{passive:!0}),this.np.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const n=Wh(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,n),Fn(e)}},{passive:!1}),this.np.addEventListener("touchend",e=>{this.Ep(e.touches)}))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const n=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Lf=Wh(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const n=this.Yf(e);this.tp(n,this.Jf.zp),this.Hf=!Wl()}Cp(e){const n=Ul(e.touches,T(this.Wf));if(n===null)return;const i=this.Yf(e,n);this.Gf(i,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Ys(e)<this.Ff+500}Gf(e,n){n&&n.call(this.Jf,e)}tp(e,n){n&&n.call(this.Jf,e)}Yf(e,n){const i=n||e,s=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:i.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Fn(e)}}}}function Wh(t,e){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function Fn(t){t.cancelable&&t.preventDefault()}function wt(t){return{_t:t.pageX,ut:t.pageY}}function Ys(t){return t.timeStamp||performance.now()}function Ul(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class Qv{constructor(e,n,i){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[n],this.Gp=e.Zp()[i],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return te({width:this.Kp.sv().width,height:1})}nv(){return te({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,n,i){const s=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(n,i,s.width,s.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.Jp.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Jp.appendChild(i);const r={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new il(i,r,{dp:()=>!1,fp:()=>!0}),this.Up={hv:i,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const n=this.Kp.cv().E_()+this.Gp.cv().E_(),i=n/(this.Kp.sv().height+this.Gp.sv().height),s=30*i;n<=2*s||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:n-s,vv:n,mv:i,wv:s},this.Up.rv.style.display="block")}_v(e){const n=this.jp;if(n===null)return;const i=(e.pageY-n.dv)*n.mv,s=Vi(n.fv+i,n.wv,n.pv);this.Kp.cv().A_(s),this.Gp.cv().A_(n.vv-s),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function Vl(t,e){return t.gv-e.gv}function Hl(t,e,n){const i=(t.gv-e.gv)/(t.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),n)}class Jv{constructor(e,n,i,s){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=n,this.Rv=i,this.kn=s}Dv(e,n){if(this.Mv!==null){if(this.Mv.wt===n)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:n,gv:e}}fe(e,n){if(this.Mv===null||this.bv===null||n-this.Mv.wt>50)return;let i=0;const s=Hl(this.Mv,this.bv,this.Tv),r=Vl(this.Mv,this.bv),o=[s],a=[r];if(i+=r,this.Sv!==null){const h=Hl(this.bv,this.Sv,this.Tv);if(Math.sign(h)===Math.sign(s)){const d=Vl(this.bv,this.Sv);if(o.push(h),a.push(d),i+=d,this.xv!==null){const c=Hl(this.Sv,this.xv,this.Tv);if(Math.sign(c)===Math.sign(s)){const f=Vl(this.Sv,this.xv);o.push(c),a.push(f),i+=f}}}}let u=0;for(let h=0;h<o.length;++h)u+=a[h]/i*o[h];Math.abs(u)<this.Pv||(this.Cv={gv:e,wt:n},this.kv=u,this.yv=function(h,d){const c=Math.log(d);return Math.log(1*c/-h)/c}(Math.abs(u),this.Rv))}Ac(e){const n=T(this.Cv),i=e-n.wt;return n.gv+this.kv*(Math.pow(this.Rv,i)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const n=e-T(this.Cv).wt;return Math.min(n,this.yv)}}class Gv{constructor(e,n){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=n,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Pn(t,e){const n=T(t.ownerDocument).createElement("canvas");t.appendChild(n);const i=Rg(n,{options:{allowResizeObserver:!0},transform:(s,r)=>({width:Math.max(s.width,r.width),height:Math.max(s.height,r.height)})});return i.resizeCanvasElement(e),i}function Nn(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Jo(t,e,n,i){t.Uh&&t.Uh(e,n,i)}function or(t,e,n,i){t.nt(e,n,i)}function Go(t,e,n,i){const s=t(n,i);for(const r of s){const o=r.Tt(i);o!==null&&e(o)}}function Kl(t,e){return n=>{var i,s;return function(r){return r.Ft!==void 0}(n)?(((i=n.Ft())==null?void 0:i.ol())??"")!==e?[]:((s=n.Ya)==null?void 0:s.call(n,t))??[]:[]}}function Uh(t,e,n,i){if(!t.length)return;let s=0;const r=t[0].$t(i,!0);let o=e===1?n/2-(t[0].Hi()-r/2):t[0].Hi()-r/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const u=t[a],h=t[a-1],d=h.$t(i,!1),c=u.Hi(),f=h.Hi();if(e===1?c>f-d:c<f+d){const g=f-d*e;u.Ui(g);const y=g-e*d/2;if((e===1?y<0:y>n)&&o>0){const w=e===1?-1-y:y-n,C=Math.min(w,o);for(let v=s;v<t.length;v++)t[v].Ui(t[v].Hi()+e*C);o-=C}}else s=a,o=e===1?f-d-c:c-(f+d)}}class Vh{constructor(e,n,i,s){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new ps(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=n,this.Co=n.layout,this.hd=i,this.Jv=s==="left",this.Qv=Kl("normal",s),this.tm=Kl("top",s),this.im=Kl("bottom",s),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Pn(this.Jp,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=Pn(this.Jp,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new il(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Nn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Nn(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const n=this.lm(),i=T(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));i.save();const s=this.Ki.Vl();i.font=this._m(),s.length>0&&(e=Math.max(this.qv.Ii(i,s[0].Jl),this.qv.Ii(i,s[s.length-1].Jl)));const r=this.um();for(let h=r.length;h--;){const d=this.qv.Ii(i,r[h].ri());d>e&&(e=d)}const o=this.Ki.Lt();if(o!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const h=this.Ki.Ds(1,o),d=this.Ki.Ds(this.Uv.height-2,o);e=Math.max(e,this.qv.Ii(i,this.Ki.Ji(Math.floor(Math.min(h,d))+.11111111111111,o)),this.qv.Ii(i,this.Ki.Ji(Math.ceil(Math.max(h,d))-.11111111111111,o)))}var a;i.restore();const u=e||34;return Qo(Math.ceil(n.S+n.C+n.V+n.B+5+u))}dm(e){this.Uv!==null&&wn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return T(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,T(this.Ft()))}pm(e){if(this.Uv===null)return;const n={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const s=Mn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r)}),this.yt.Mm(s,this.im),this.bm(s),this.yt.Mm(s,this.Qv),this.Sm(s))}this.nm.applySuggestedBitmapSize();const i=Mn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.xm(i),this.yt.Mm(i,this.tm))}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e.drawImage(o,n,i)}}kt(){var e;(e=this.Ki)==null||e.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!0,n.j_(i,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv(),s=this.Ki;n.Y_(i,s,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv(),i=this.Ki;this.$v&&(this.$v=!1,e.K_(n,i))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!1,n.K_(i,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],n=this.Ki===null?void 0:this.Ki;return(i=>{for(let s=0;s<i.length;++s){const r=i[s].Ks(this.yt.cv(),n);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.yt.cv().Qt(),o=r.$(),a=r.Kd();o===a?Zr(e,0,0,i,s,o):zf(e,0,0,i,s,o,a)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const s=Math.max(1,Math.floor(this.lm().S*i));let r;r=this.Jv?n.width-s:0,e.fillRect(r,0,s,n.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const n=this.Ki.Vl(),i=this.Ki.N(),s=this.lm(),r=this.Jv?this.Uv.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:u})=>{o.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(u)),d=Math.floor(.5*u),c=Math.round(s.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(r*a),Math.round(f.Pl*u)-d,c,h);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this._m(),o.fillStyle=i.textColor??this.Co.textColor,o.textAlign=this.Jv?"right":"left",o.textBaseline="middle";const a=this.Jv?Math.round(r-s.V):Math.round(r+s.C+s.V),u=n.map(h=>this.qv.Di(o,h.Jl));for(let h=n.length;h--;){const d=n[h];o.fillText(d.Jl,a,d.Pl+u[h])}})}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const n=[],i=this.Ki.Dt().slice(),s=this.yt.cv(),r=this.lm();this.Ki===s.Gn()&&this.yt.cv().Dt().forEach(u=>{s.Zn(u)&&i.push(u)});const o=this.Ki.Sl()[0],a=this.Ki;i.forEach(u=>{const h=u.Ks(s,a);h.forEach(d=>{d.$i()&&d.Wi()===null&&(d.Ui(null),n.push(d))}),o===u&&h.length>0&&(e=h[0].Ei())}),this.Ki.N().alignLabels&&this.ym(n,r,e)}ym(e,n,i){if(this.Uv===null)return;const s=e.filter(o=>o.Ei()<=i),r=e.filter(o=>o.Ei()>i);s.sort((o,a)=>a.Ei()-o.Ei()),s.length&&r.length&&r.push(s[0]),r.sort((o,a)=>o.Ei()-a.Ei());for(const o of e){const a=Math.floor(o.$t(n)/2),u=o.Ei();u>-a&&u<a&&o.Ui(a),u>this.Uv.height-a&&u<this.Uv.height+a&&o.Ui(this.Uv.height-a)}Uh(s,1,this.Uv.height,n),Uh(r,-1,this.Uv.height,n)}Sm(e){if(this.Uv===null)return;const n=this.um(),i=this.lm(),s=this.Jv?"right":"left";n.forEach(r=>{r.qi()&&r.Tt(T(this.Ki)).nt(e,i,this.qv,s)})}xm(e){if(this.Uv===null||this.Ki===null)return;const n=this.yt.Gv().Qt(),i=[],s=this.yt.cv(),r=n.gd().Ks(s,this.Ki);r.length&&i.push(r);const o=this.lm(),a=this.Jv?"right":"left";i.forEach(u=>{u.forEach(h=>{h.Tt(T(this.Ki)).nt(e,o,this.qv,a)})})}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return fs(this.Co.fontSize,this.Co.fontFamily)}}function Xv(t,e){var n;return((n=t.qa)==null?void 0:n.call(t,e))??[]}function Hh(t,e){var n;return((n=t.Ys)==null?void 0:n.call(t,e))??[]}function Kh(t,e){var n;return((n=t.ds)==null?void 0:n.call(t,e))??[]}function Zv(t,e){var n;return((n=t.Ha)==null?void 0:n.call(t,e))??[]}class Ja{constructor(e,n){this.Uv=te({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new me,this.Vm=new me,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=n,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(i),this.sm=Pn(i,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Pn(i,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new il(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Nn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Nn(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return T(this.Nm)}qm(e){var n;this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(Ja.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new Gv(this.Wm,this.Lv),this.Tm.kt()):((n=this.Tm)==null||n.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(T(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(T(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const n={x:e.localX,y:e.localY};this.iw(n,n,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,n){if(!this.Lv.N().handleScale.pinch)return;const i=5*(n-this.Bm);this.Bm=n,this.ns().Td(e._t,i)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const n=this.ns().gd();this.Am!==null&&n.It()&&(this.zm={x:n.si(),y:n.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const n=e.localX,i=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const s=T(this.zm),r=s.x+(n-this.Am.x),o=s.y+(i-this.Am.y);this.Zm(r,o,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,n){const i=this.Nm;return i===null?null:Wf(i,e,n)}hw(e,n){T(n==="left"?this.km:this.Pm).dm(te({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){wn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=T(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const n of e.Sl())if(e.Zn(n)){const i=n.Ft();i!==null&&e.H_(i),n.Ws()}for(const n of e.ru())n.Ws()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e!==null&&e.drawImage(o,n,i)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const n={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=Mn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r)}),this.Nm&&(this.lw(s,Xv),this.ow(s),this.lw(s,Hh),this.lw(s,Kh)))}this.nm.applySuggestedBitmapSize();const i=Mn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this._w(i),this.lw(i,Zv),this.lw(i,Kh))}uw(){return this.km}cw(){return this.Pm}Mm(e,n){this.lw(e,n)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,n){const i=n.localX,s=n.localY;e.v()&&e.p(this.ns().Et().wc(i),{x:i,y:s},n)}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.ns(),o=r.$(),a=r.Kd();o===a?Zr(e,0,0,i,s,a):zf(e,0,0,i,s,o,a)}ow(e){const n=T(this.Nm),i=n.eu().pr().Tt(n);i!==null&&i.nt(e,!1)}_w(e){this.dw(e,Hh,or,this.ns().gd())}lw(e,n){const i=T(this.Nm),s=i.Dt(),r=i.ru();for(const o of r)this.dw(e,n,Jo,o);for(const o of s)this.dw(e,n,Jo,o);for(const o of r)this.dw(e,n,or,o);for(const o of s)this.dw(e,n,or,o)}dw(e,n,i,s){const r=T(this.Nm),o=r.Qt().pd(),a=o!==null&&o.hu===s,u=o!==null&&a&&o.au!==void 0?o.au.ie:void 0;Go(n,h=>i(h,e,a,u),s,r)}jm(){if(this.Nm===null)return;const e=this.Lv,n=this.Nm.U_().N().visible,i=this.Nm.q_().N().visible;n||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),i||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const s=e.Qt().Nd();n&&this.km===null&&(this.km=new Vh(this,e.N(),s,"left"),this.Hm.appendChild(this.km.iv())),i&&this.Pm===null&&(this.Pm=new Vh(this,e.N(),s,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,n,i){e=Math.max(0,Math.min(e,this.Uv.width-1)),n=Math.max(0,Math.min(n,this.Uv.height-1)),this.ns().Ad(e,n,i,T(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,n,i){this.Am=e,this.Lm=!1,this.Zm(n.x,n.y,i);const s=this.ns().gd();this.zm={x:s.si(),y:s.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const n=this.ns(),i=this.cv();if(n.X_(i,i.Rs()),this.Rm=null,this.Dm=!1,n.Vd(),this.Om!==null){const s=performance.now(),r=n.Et();this.Om.fe(r.Cc(),s),this.Om.Ec(s)||n.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)T(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const n=this.ns(),i=n.Et();if(i.Gi())return;const s=this.Lv.N(),r=s.handleScroll,o=s.kineticScroll;if((!r.pressedMouseMove||e.Np)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Np))return;const a=this.Nm.Rs(),u=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:u,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&o.touch||!e.Np&&o.mouse){const h=i.ul();this.Om=new Jv(.2/h,7/h,.997,15/h),this.Om.Dv(i.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||n.Z_(this.Nm,a,e.localY),n.Dd(e.localX),this.Dm=!0}this.Dm&&(a.Gi()||n.G_(this.Nm,a,e.localY),n.Id(e.localX),this.Om!==null&&this.Om.Dv(i.Cc(),u))}}class Yh{constructor(e,n,i,s,r){this.xt=!0,this.Uv=te({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=i.Nd,this.Ps=n,this.ww=s,this.gw=r,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Pn(this.Jp,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Nn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){wn(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const n=Mn(this.sm,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(i=>{this.wm(i),this.gm(i)})}nv(){return this.sm.bitmapSize}ev(e,n,i){const s=this.nv();s.width>0&&s.height>0&&e.drawImage(this.sm.canvasElement,n,i)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.hd.N().S*i),o=Math.floor(this.hd.N().S*s),a=this.Jv?n.width-r:0;e.fillRect(a,0,r,o)}wm({context:e,bitmapSize:n}){Zr(e,0,0,n.width,n.height,this.gw())}}function Ga(t){return e=>{var n;return((n=e.Ka)==null?void 0:n.call(e,t))??[]}}const qv=Ga("normal"),ey=Ga("top"),ty=Ga("bottom");class ny{constructor(e,n){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=te({width:0,height:0}),this.xw=new me,this.qv=new ps(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=n,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Pn(this.kw,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const i=this.sm.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.nm=Pn(this.kw,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const s=this.nm.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new il(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Nn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Nn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,n,i){wn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(te({width:n,height:e.height})),this.bw!==null&&this.bw.dm(te({width:i,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e.drawImage(o,n,i)}}pm(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=Mn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r),this.Aw(s,ty)}),this.bm(s),this.Aw(s,qv)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const i=Mn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],i),this.Aw(i,ey))}Aw(e,n){const i=this.Lv.Qt().tn();for(const s of i)Go(n,r=>Jo(r,e,!1,void 0),s,void 0);for(const s of i)Go(n,r=>or(r,e,!1,void 0),s,void 0)}wm({context:e,bitmapSize:n}){Zr(e,0,0,n.width,n.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:n,verticalPixelRatio:i}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const s=Math.max(1,Math.floor(this.Bw().S*i));e.fillRect(0,0,n.width,s)}}bm(e){const n=this.Lv.Qt().Et(),i=n.Vl();if(!i||i.length===0)return;const s=this.cu.maxTickMarkWeight(i),r=this.Bw(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:u,verticalPixelRatio:h})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const d=Math.max(1,Math.floor(u)),c=Math.floor(.5*u);a.beginPath();const f=Math.round(r.C*h);for(let g=i.length;g--;){const y=Math.round(i[g].coord*u);a.rect(y-c,0,d,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const u=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const h of i)if(h.weight<s){const d=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,d,u)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const h of i)if(h.weight>=s){const d=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,d,u)}})}Ow(e,n,i){const s=this.qv.Ii(e,i),r=s/2,o=Math.floor(n-r)+.5;return o<0?n+=Math.abs(0-o):o+s>this.Uv.width&&(n-=Math.abs(this.Uv.width-(o+s))),n}Lw(e,n){const i=this.Bw();for(const s of e)for(const r of s.fs())r.Tt().nt(n,i)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return fs(this.F(),this.Ps.fontFamily)}Nw(){return fs(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new ps,Ew:0});const e=this.M,n=this._m();if(e.P!==n){const i=this.F();e.k=i,e.P=n,e.A=3*i/12,e.I=3*i/12,e.ts=9*i/12,e.L=0,e.Ew=4*i/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),n=e.N();n.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),n.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const i={Nd:this.Lv.Qt().Nd()},s=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,r=()=>e.Kd();n.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new Yh("left",n,i,s,r),this.Cw.appendChild(this.Mw.iv())),n.rightPriceScale.visible&&this.bw===null&&(this.bw=new Yh("right",n,i,s,r),this.yw.appendChild(this.bw.iv()))}}var pc;const iy=!!pi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!pi&&((pc=navigator==null?void 0:navigator.userAgentData)!=null&&pc.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class sy{constructor(e,n,i){var s;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new me,this.Vm=new me,this.nd=new me,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=n,this.cu=i,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(s=this.Vv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Yl(this.Ps)&&this.Jw(!0),this.ns=new Wv(this.rd.bind(this),this.Ps,i),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new ny(this,this.cu),this.Zw.appendChild(this.tg.iv());const r=n.autoSize&&this.ig();let o=this.Ps.width,a=this.Ps.height;if(r||o===0||a===0){const u=e.getBoundingClientRect();o=o||u.width,a=a||u.height}this.sg(o,a),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],T(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,n,i=!1){if(this.eo===n&&this.S_===e)return;const s=function(a){const u=Math.floor(a.width),h=Math.floor(a.height);return te({width:u-u%2,height:h-h%2})}(te({width:e,height:n}));this.eo=s.height,this.S_=s.width;const r=this.eo+"px",o=this.S_+"px";T(this.Vv).style.height=r,T(this.Vv).style.width=o,this.Zw.style.height=r,this.Zw.style.width=o,i?this.lg(Ce.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=Ce.yn());for(let n=0;n<this.Fw.length;n++)this.Fw[n].pm(e.un(n).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){var s;const n=Yl(this.Ps);this.ns.cr(e);const i=Yl(this.Ps);i!==n&&this.Jw(i),(s=e.layout)!=null&&s.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const n=this.cg(null),i=document.createElement("canvas");i.width=n.width,i.height=n.height;const s=T(i.getContext("2d"));return this.cg(s,e),i}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:T(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return Qe(this.Fw[e]).sv()}og(){this.Ww.forEach(e=>{e.kt()})}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,n){let i=0,s=0;const r=this.Fw[0],o=(u,h)=>{let d=0;for(let c=0;c<this.Fw.length;c++){const f=this.Fw[c],g=T(u==="left"?f.uw():f.cw()),y=g.nv();if(e!==null&&g.ev(e,h,d,n),d+=y.height,c<this.Fw.length-1){const w=this.Ww[c],C=w.nv();e!==null&&w.ev(e,h,d),d+=C.height}}};this.fg()&&(o("left",0),i+=T(r.uw()).nv().width);for(let u=0;u<this.Fw.length;u++){const h=this.Fw[u],d=h.nv();if(e!==null&&h.ev(e,i,s,n),s+=d.height,u<this.Fw.length-1){const c=this.Ww[u],f=c.nv();e!==null&&c.ev(e,i,s),s+=f.height}}i+=r.nv().width,this.pg()&&(o("right",i),i+=T(r.cw()).nv().width);const a=(u,h,d)=>{T(u==="left"?this.tg.Tw():this.tg.Rw()).ev(T(e),h,d)};if(this.Ps.timeScale.visible){const u=this.tg.nv();if(e!==null){let h=0;this.fg()&&(a("left",h,s),h=T(r.uw()).nv().width),this.tg.ev(e,h,s,n),h+=u.width,this.pg()&&a("right",h,s)}s+=u.height}return te({width:i,height:s})}Mg(){let e=0,n=0,i=0;for(const C of this.Fw)this.fg()&&(n=Math.max(n,T(C.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(i=Math.max(i,T(C.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=C.E_();n=Qo(n),i=Qo(i);const s=this.S_,r=this.eo,o=Math.max(s-n-i,0),a=1*this.Ww.length,u=this.Ps.timeScale.visible;let h=u?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var d;h=(d=h)+d%2;const c=a+h,f=r<c?0:r-c,g=f/e;let y=0;const w=window.devicePixelRatio||1;for(let C=0;C<this.Fw.length;++C){const v=this.Fw[C];v.qm(this.ns.Xs()[C]);let p=0,m=0;m=C===this.Fw.length-1?Math.ceil((f-y)*w)/w:Math.round(v.E_()*g*w)/w,p=Math.max(m,2),y+=p,v.dm(te({width:o,height:p})),this.fg()&&v.hw(n,"left"),this.pg()&&v.hw(i,"right"),v.cv()&&this.ns.bd(v.cv(),p)}this.tg.Iw(te({width:u?o:0,height:h}),u?n:0,u?i:0),this.ns.L_(o),this.Uw!==n&&(this.Uw=n),this.$w!==i&&(this.$w=i)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return iy?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.bg(e),i=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(s)*Math.min(1,Math.abs(s)),o=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(o,r)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*i)}lg(e,n){var s;const i=e._n();i===3&&this.Sg(),i!==3&&i!==2||(this.xg(e),this.Cg(e,n),this.tg.kt(),this.Fw.forEach(r=>{r.Ym()}),((s=this.qw)==null?void 0:s._n())===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,n),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,n){for(const i of e.bn())this.xn(i,n)}xg(e){const n=this.ns.Xs();for(let i=0;i<n.length;i++)e.un(i).ln&&n[i].tu()}xn(e,n){const i=this.ns.Et();switch(e.fn){case 0:i.Fc();break;case 1:i.Wc(e.Wt);break;case 2:i.gn(e.Wt);break;case 3:i.Mn(e.Wt);break;case 4:i.Pc();break;case 5:e.Wt.Ec(n)||i.Mn(e.Wt.Ac(n))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(n=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const i=this.qw;this.qw=null,this.lg(i,n);for(const s of i.bn())if(s.fn===5&&!s.Wt.Ec(n)){this.Qt().vn(s.Wt);break}}}))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),n=e.length,i=this.Fw.length;for(let s=n;s<i;s++){const r=Qe(this.Fw.pop());this.Zw.removeChild(r.iv()),r.nw().u(this),r.ew().u(this),r.m();const o=this.Ww.pop();o!==void 0&&this.hg(o)}for(let s=i;s<n;s++){const r=new Ja(this,e[s]);if(r.nw().i(this.yg.bind(this,r),this),r.ew().i(this.kg.bind(this,r),this),this.Fw.push(r),s>0){const o=new Qv(this,s-1,s);this.Ww.push(o),this.Zw.insertBefore(o.iv(),this.tg.iv())}this.Zw.insertBefore(r.iv(),this.tg.iv())}for(let s=0;s<n;s++){const r=e[s],o=this.Fw[s];o.cv()!==r?o.qm(r):o.$m()}this.eg(),this.Mg()}Pg(e,n,i,s){var c;const r=new Map;e!==null&&this.ns.tn().forEach(f=>{const g=f.qs().$s(e);g!==null&&r.set(f,g)});let o;if(e!==null){const f=(c=this.ns.Et().es(e))==null?void 0:c.originalTime;f!==void 0&&(o=f)}const a=this.Qt().pd(),u=a!==null&&a.hu instanceof nl?a.hu:void 0,h=a!==null&&a.au!==void 0?a.au.te:void 0,d=this.Tg(s);return{Gr:o,js:e??void 0,Rg:n??void 0,Dg:d!==-1?d:void 0,Ig:u,Vg:r,Bg:h,Eg:i??void 0}}Tg(e){let n=-1;if(e)n=this.Fw.indexOf(e);else{const i=this.Qt().gd().Gs();i!==null&&(n=this.Qt().Xs().indexOf(i))}return n}yg(e,n,i,s){this.Im.p(()=>this.Pg(n,i,s,e))}kg(e,n,i,s){this.Vm.p(()=>this.Pg(n,i,s,e))}Qw(e,n,i){var s;this.mg(((s=this.Qt().pd())==null?void 0:s.ou)??null),this.nd.p(()=>this.Pg(e,n,i))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.sg(n.contentRect.width,n.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Yl(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function ry(t){return t.open===void 0&&t.value===void 0}function ly(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Qh(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.color!==void 0&&(r.R=n.color),r}function oy(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.lineColor!==void 0&&(r.vt=n.lineColor),n.topColor!==void 0&&(r.eh=n.topColor),n.bottomColor!==void 0&&(r.rh=n.bottomColor),r}function ay(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.topLineColor!==void 0&&(r.hh=n.topLineColor),n.bottomLineColor!==void 0&&(r.ah=n.bottomLineColor),n.topFillColor1!==void 0&&(r.oh=n.topFillColor1),n.topFillColor2!==void 0&&(r._h=n.topFillColor2),n.bottomFillColor1!==void 0&&(r.uh=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(r.dh=n.bottomFillColor2),r}function uy(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),s}function hy(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),n.borderColor!==void 0&&(s.Ht=n.borderColor),n.wickColor!==void 0&&(s.nh=n.wickColor),s}function cy(t,e,n,i,s){const r=Qe(s)(n),o=Math.max(...r),a=Math.min(...r),u=r[r.length-1],h=[u,o,a,u],{time:d,color:c,...f}=n;return{js:e,wt:t,Wt:h,Gr:i,le:f,R:c}}function Bn(t){return t.Wt!==void 0}function Jh(t,e){return e.customValues!==void 0&&(t.Ag=e.customValues),t}function dn(t){return(e,n,i,s,r,o)=>function(a,u){return u?u(a):ry(a)}(i,o)?Jh({wt:e,js:n,Gr:s},i):Jh(t(e,n,i,s,r),i)}function Gh(t){return{Candlestick:dn(hy),Bar:dn(uy),Area:dn(oy),Baseline:dn(ay),Histogram:dn(Qh),Line:dn(Qh),Custom:dn(cy)}[t]}function Xh(t){return{js:0,Lg:new Map,Ea:t}}function Zh(t,e){if(t!==void 0&&t.length!==0)return{zg:e.key(t[0].wt),Og:e.key(t[t.length-1].wt)}}function qh(t){let e;return t.forEach(n=>{e===void 0&&(e=n.Gr)}),Qe(e)}class dy{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,n){let i=this.Ng.size!==0,s=!1;const r=this.Fg.get(e);if(r!==void 0)if(this.Fg.size===1)i=!1,s=!0,this.Ng.clear();else for(const u of this.Hg)u.pointData.Lg.delete(e)&&(s=!0);let o=[];if(n.length!==0){const u=n.map(g=>g.time),h=this.cu.createConverterToInternalObj(n),d=Gh(e.wh()),c=e.rl(),f=e.hl();o=n.map((g,y)=>{const w=h(g.time),C=this.cu.key(w);let v=this.Ng.get(C);v===void 0&&(v=Xh(w),this.Ng.set(C,v),s=!0);const p=d(w,v.js,g,u[y],c,f);return v.Lg.set(e,p),p})}i&&this.$g(),this.qg(e,o);let a=-1;if(s){const u=[];this.Ng.forEach(h=>{u.push({timeWeight:0,time:h.Ea,pointData:h,originalTime:qh(h.Lg)})}),u.sort((h,d)=>this.cu.key(h.time)-this.cu.key(d.time)),a=this.jg(u)}return this.Yg(e,a,function(u,h,d){const c=Zh(u,d),f=Zh(h,d);if(c!==void 0&&f!==void 0)return{Kg:!1,Ta:c.Og>=f.Og&&c.zg>=f.zg}}(this.Fg.get(e),r,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,n,i){if(i&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const s=n;(function(v){v.Gr===void 0&&(v.Gr=v.time)})(s),this.cu.preprocessData(n);const r=this.cu.createConverterToInternalObj([n])(n.time),o=this.Wg.get(e);if(!i&&o!==void 0&&this.cu.key(r)<this.cu.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.Ng.get(this.cu.key(r));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const u=a===void 0;a===void 0&&(a=Xh(r),this.Ng.set(this.cu.key(r),a));const h=Gh(e.wh()),d=e.rl(),c=e.hl(),f=h(r,a.js,n,s.Gr,d,c),g=!i&&!u&&o!==void 0&&this.cu.key(r)===this.cu.key(o);a.Lg.set(e,f),i?this.Gg(e,f,a.js):g&&e.La()&&Bn(f)?(e.kr(f),this.Xg(e,f)):this.Xg(e,f);const y={Ta:Bn(f),Kg:i};if(!u)return this.Yg(e,-1,y);const w={timeWeight:0,time:a.Ea,pointData:a,originalTime:qh(a.Lg)},C=fi(this.Hg,this.cu.key(w.time),(v,p)=>this.cu.key(v.time)<p);this.Hg.splice(C,0,w);for(let v=C;v<this.Hg.length;++v)Qs(this.Hg[v].pointData,v);return this.cu.fillWeightsForPoints(this.Hg,C),this.Yg(e,C,y)}Jg(e,n){const i=this.Fg.get(e);if(i===void 0||n<=0)return[[],this.Qg()];n=Math.min(n,i.length);const s=i.splice(-n).reverse();i.length===0?this.Wg.delete(e):this.Wg.set(e,i[i.length-1].wt);for(const r of s){const o=this.Ng.get(this.cu.key(r.wt));if(o&&(o.Lg.delete(e),o.Lg.size===0)){this.Ng.delete(this.cu.key(o.Ea)),this.Hg.splice(o.js,1);for(let a=o.js;a<this.Hg.length;++a)Qs(this.Hg[a].pointData,a)}}return[s,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,n){let i=this.Fg.get(e);i===void 0&&(i=[],this.Fg.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.cu.key(n.wt)>this.cu.key(s.wt)?Bn(n)&&i.push(n):Bn(n)?i[i.length-1]=n:i.splice(-1,1),this.Wg.set(e,n.wt)}Gg(e,n,i){const s=this.Fg.get(e);if(s===void 0)return;const r=fi(s,i,(o,a)=>o.js<a);Bn(n)?s[r]=n:s.splice(r,1)}qg(e,n){n.length!==0?(this.Fg.set(e,n.filter(Bn)),this.Wg.set(e,n[n.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let n=-1;for(let i=0;i<this.Hg.length&&i<e.length;++i){const s=this.Hg[i],r=e[i];if(this.cu.key(s.time)!==this.cu.key(r.time)){n=i;break}r.timeWeight=s.timeWeight,Qs(r.pointData,i)}if(n===-1&&this.Hg.length!==e.length&&(n=Math.min(this.Hg.length,e.length)),n===-1)return-1;for(let i=n;i<e.length;++i)Qs(e[i].pointData,i);return this.cu.fillWeightsForPoints(e,n),this.Hg=e,n}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].js))}),e}Yg(e,n,i){const s=this.Qg();if(n!==-1)this.Fg.forEach((r,o)=>{s.F_.set(o,{le:r,iM:o===e?i:void 0})}),this.Fg.has(e)||s.F_.set(e,{le:[],iM:i}),s.Et.sM=this.Hg,s.Et.nM=n;else{const r=this.Fg.get(e);s.F_.set(e,{le:r||[],iM:i})}return s}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Qs(t,e){t.js=e,t.Lg.forEach(n=>{n.js=e})}function fy(t,e){return t.wt<e}function py(t,e){return e<t.wt}function Kf(t,e,n){const i=e.Aa(),s=e.bi(),r=fi(t,i,fy),o=Af(t,s,py);if(!n)return{from:r,to:o};let a=r,u=o;return r>0&&r<t.length&&t[r].wt>=i&&(a=r-1),o>0&&o<t.length&&t[o-1].wt<=s&&(u=o+1),{from:a,to:u}}class Xa{constructor(e,n,i){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=n,this._M=i}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map(e=>({...e,...this.ee.ga().gh(e.wt)}))}fM(){this.lM=null}uM(){const e=this.re.Et(),n=e.N().enableConflation?e.Hc():0;n!==this.oM&&(this.rM=!0,this.oM=n),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),n=this.re.Et();if(this.fM(),n.Gi()||e.Gi())return;const i=n.Ie();if(i===null||this.ee.qs().yh()===0)return;const s=this.ee.Lt();s!==null&&(this.lM=Kf(this.aM,i,this._M),this.mM(e,n,s.Wt),this.wM())}}class my{constructor(e,n){this.gM=e,this.Ki=n}nt(e,n,i){this.gM.draw(e,this.Ki,n,i)}}class gy extends Xa{constructor(e,n,i){super(e,n,!1),this.$h=i,this.cM=new my(this.$h.renderer(),s=>{const r=e.Lt();return r===null?null:e.Ft().Nt(s,r.Wt)})}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>({wt:n.js,_t:NaN,...e.gh(n.js),MM:n.le}))}mM(e,n){n.mc(this.aM,ds(this.lM))}wM(){this.$h.update({bars:this.aM.map(vy),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function vy(t){return{x:t._t,time:t.wt,originalData:t.MM,barColor:t.th}}const yy={color:"#2196f3"},xy=(t,e,n)=>{const i=Gt(n);return new gy(t,e,i)};function Za(t){const e={value:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function ec(t){const e=Za(t);return t.R!==void 0&&(e.color=t.R),e}function wy(t){const e=Za(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.eh!==void 0&&(e.topColor=t.eh),t.rh!==void 0&&(e.bottomColor=t.rh),e}function _y(t){const e=Za(t);return t.hh!==void 0&&(e.topLineColor=t.hh),t.ah!==void 0&&(e.bottomLineColor=t.ah),t.oh!==void 0&&(e.topFillColor1=t.oh),t._h!==void 0&&(e.topFillColor2=t._h),t.uh!==void 0&&(e.bottomFillColor1=t.uh),t.dh!==void 0&&(e.bottomFillColor2=t.dh),e}function Yf(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function Sy(t){const e=Yf(t);return t.R!==void 0&&(e.color=t.R),e}function jy(t){const e=Yf(t),{R:n,Ht:i,nh:s}=t;return n!==void 0&&(e.color=n),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function ar(t){return{Area:wy,Line:ec,Baseline:_y,Histogram:ec,Bar:Sy,Candlestick:jy,Custom:by}[t]}function by(t){const e=t.Gr;return{...t.le,time:e}}const ky={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},My={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},Cy={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Nf,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Ql={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Ey={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function tc(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:Cy,crosshair:ky,grid:My,overlayPriceScales:{...Ql},leftPriceScale:{...Ql,visible:!1},rightPriceScale:{...Ql,visible:!0},timeScale:Ey,localization:{locale:pi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Qf{constructor(e,n,i){this.Yp=e,this.bM=n,this.SM=i??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return el(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new Oe(e.from,e.to))}getVisibleRange(){let e,n,i=this.Ki().er();if(i===null)return null;if(this.Ki().io()){const s=this.Ki().m_(),r=Uf(s);i=Xn(i,this.Ki().no()),e=Number((Math.round(i.Ze()/s)*s).toFixed(r)),n=Number((Math.round(i.Ge()/s)*s).toFixed(r))}else e=i.Ze(),n=i.Ge();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return T(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class Py{constructor(e,n,i,s){this.Yp=e,this.yt=i,this.xM=n,this.CM=s}getHeight(){return this.yt.$t()}setHeight(e){const n=this.Yp.Qt(),i=n.Gd(this.yt);n.xd(i,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const n=this.paneIndex();n!==e&&(Ee(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(n,e))}getSeries(){return this.yt.F_().map(e=>this.xM(e))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Qf(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,n={},i=0){return this.CM.addCustomSeries(e,n,i)}addSeries(e,n={}){return this.CM.addSeries(e,n,this.paneIndex())}}const Ny={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class nc{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class zy{constructor(e,n,i,s,r,o){this.kM=new me,this.ee=e,this.PM=n,this.TM=i,this.cu=r,this.CM=s,this.RM=o}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Ds(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ri(new si(e.from,e.to)).Ru(),i=this.ee.qs();if(i.Gi())return null;const s=i.$s(n.Aa(),1),r=i.$s(n.bi(),-1),o=T(i.kh()),a=T(i.sn());if(s!==null&&r!==null&&s.js>r.js)return{barsBefore:e.from-o,barsAfter:a-e.to};const u={barsBefore:s===null||s.js===o?e.from-o:s.js-o,barsAfter:r===null||r.js===a?a-e.to:a-r.js};return s!==null&&r!==null&&(u.from=s.Gr,u.to=r.Gr),u}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,n=!1){this.ee.wh(),this.PM.VM(this.ee,e,n),this.IM("update")}pop(e=1){const n=this.PM.BM(this.ee,e);n.length!==0&&this.IM("update");const i=ar(this.seriesType());return n.map(s=>i(s))}dataByIndex(e,n){const i=this.ee.qs().$s(e,n);return i===null?null:ar(this.seriesType())(i)}data(){const e=ar(this.seriesType());return this.ee.qs().Dh().map(n=>e(n))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return Nt(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const n=Ze(Nt(Ny),e),i=this.ee.Da(n);return new nc(i)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map(e=>new nc(e))}seriesType(){return this.ee.wh()}lastValueData(e){const n=this.ee.Ve(e);return n.Be?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,n=T(this.ee.Qt().Kn(e));return this.RM(n)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const n=this.ee.Qt().Kn(this.ee);n!==null&&n.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class Ty{constructor(e,n,i){this.EM=new me,this.Nu=new me,this.xw=new me,this.ns=e,this.Jh=e.Et(),this.tg=n,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=i}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,n){n?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},i=this.Jh.cc(n);this.ns.$d(i)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){Ee(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const n=this.ns.Et();return n.Gi()?null:n.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,n){const i=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(i,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.Jh.qt(n)}coordinateToTime(e){const n=this.ns.Et(),i=n.wc(e),s=n.es(i);return s===null?null:s.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...Nt(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function ic(t){return function(e){if($s(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;$s(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),$s(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;$s(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class Ry{constructor(e,n,i){this.OM=new Map,this.NM=new Map,this.FM=new me,this.WM=new me,this.HM=new me,this.Xc=new WeakMap,this.UM=new dy(n);const s=i===void 0?Nt(tc()):Ze(Nt(tc()),ic(i));this.$M=n,this.Yp=new sy(e,s,n),this.Yp.nw().i(o=>{this.FM.v()&&this.FM.p(this.qM(o()))},this),this.Yp.ew().i(o=>{this.WM.v()&&this.WM.p(this.qM(o()))},this),this.Yp.Md().i(o=>{this.HM.v()&&this.HM.p(this.qM(o()))},this);const r=this.Yp.Qt();this.jM=new Ty(r,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,n,i){this.autoSizeActive()||this.Yp.sg(e,n,i)}addCustomSeries(e,n={},i=0){const s=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...yy,...r.defaultOptions()},YM:xy,KM:r}))(Gt(e));return this.ZM(s,n,i)}addSeries(e,n={},i=0){return this.ZM(e,n,i)}removeSeries(e){const n=Qe(this.OM.get(e)),i=this.UM.Hd(n);this.Yp.Qt().Hd(n),this.GM(i),this.OM.delete(e),this.NM.delete(n)}DM(e,n){this.GM(this.UM.Ug(e,n))}VM(e,n,i){this.GM(this.UM.Zg(e,n,i))}BM(e,n){const[i,s]=this.UM.Jg(e,n);return i.length!==0&&this.GM(s),i}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,n=0){return new Qf(this.Yp,e,n)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(ic(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,n=!1){let i,s;try{n||(i=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),s=this.Yp.ug(e)}finally{n||i===void 0||this.Yp.Qt().cr({crosshair:{mode:i}})}return s}addPane(e=!1){const n=this.Yp.Qt().Xd();return n.O_(e),this.XM(n)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,n){this.Yp.Qt().Cd(e,n)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(e=>this.XM(e))}paneSize(e=0){const n=this.Yp.gg(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,i){const s=this.OM.get(i);if(s===void 0)return;const r=this.Yp.Qt().Kn(s);r!==null&&this.Yp.Qt().Ld(e,n,r)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,n={},i=0){Ee(e.YM!==void 0),function(u){if(u===void 0||u.type==="custom")return;const h=u;h.minMove!==void 0&&h.precision===void 0&&(h.precision=Uf(h.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(u){u.borderColor!==void 0&&(u.borderUpColor=u.borderColor,u.borderDownColor=u.borderColor),u.wickColor!==void 0&&(u.wickUpColor=u.wickColor,u.wickDownColor=u.wickColor)}(n);const s=Ze(Nt(Ef),Nt(e.defaultOptions),n),r=e.YM,o=new nl(this.Yp.Qt(),e.type,s,r,e.KM);this.Yp.Qt().Fd(o,i);const a=new zy(o,this,this,this,this.$M,u=>this.XM(u));return this.OM.set(a,o),this.NM.set(o,a),a}GM(e){const n=this.Yp.Qt();n.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach((i,s)=>s.ht(i.le,i.iM)),n.Et().Ju(),n.Sc()}JM(e){return Qe(this.NM.get(e))}qM(e){const n=new Map;e.Vg.forEach((s,r)=>{const o=r.wh(),a=ar(o)(s);if(o!=="Custom")Ee(ly(a));else{const u=r.hl();Ee(!u||u(a)===!1)}n.set(this.JM(r),a)});const i=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:i,hoveredObjectId:e.Bg,seriesData:n,sourceEvent:e.Eg}}XM(e){let n=this.Xc.get(e);return n||(n=new Py(this.Yp,i=>this.JM(i),e,this),this.Xc.set(e,n)),n}}function Ly(t){if(ws(t)){const e=document.getElementById(t);return Ee(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function Iy(t,e,n){const i=Ly(t),s=new Ry(i,e,n);return e.setOptions(s.options()),s}function Fy(t,e){return Iy(t,new Dh,Dh.pf(e))}class By extends Xa{constructor(e,n){super(e,n,!0)}mM(e,n,i){n.mc(this.aM,ds(this.lM)),e.Yo(this.aM,i,ds(this.lM))}QM(e,n){return{wt:e,gt:n,_t:NaN,ut:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>{let i;if((n.jr??1)>1){const s=n.Wt[1],r=n.Wt[2],o=n.Wt[3];i=Math.abs(s-o)>Math.abs(r-o)?s:r}else i=n.Wt[3];return this.tb(n.js,i,e)})}}function Ay(t,e,n,i,s,r,o){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:a,horizontalPixelRatio:u,verticalPixelRatio:h}=t,d=e[i.from];let c=r(t,d),f=d;if(i.to-i.from<2){const g=s/2;a.beginPath();const y={_t:d._t-g,ut:d.ut},w={_t:d._t+g,ut:d.ut};a.moveTo(y._t*u,y.ut*h),a.lineTo(w._t*u,w.ut*h),o(t,c,y,w)}else{const g=(w,C)=>{o(t,c,f,C),a.beginPath(),c=w,f=C};let y=f;a.beginPath(),a.moveTo(d._t*u,d.ut*h);for(let w=i.from+1;w<i.to;++w){y=e[w];const C=r(t,y);switch(n){case 0:a.lineTo(y._t*u,y.ut*h);break;case 1:a.lineTo(y._t*u,e[w-1].ut*h),C!==c&&(g(C,y),a.lineTo(y._t*u,e[w-1].ut*h)),a.lineTo(y._t*u,y.ut*h);break;case 2:{const[v,p]=Oy(e,w-1,w);a.bezierCurveTo(v._t*u,v.ut*h,p._t*u,p.ut*h,y._t*u,y.ut*h);break}}n!==1&&C!==c&&(g(C,y),a.moveTo(y._t*u,y.ut*h))}(f!==y||f===y&&n===1)&&o(t,c,f,y)}}const sc=6;function Jl(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function rc(t,e){return{_t:t._t/e,ut:t.ut/e}}function Oy(t,e,n){const i=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var r,o;return[(r=t[e],o=rc(Jl(t[n],t[i]),sc),{_t:r._t+o._t,ut:r.ut+o.ut}),Jl(t[n],rc(Jl(t[s],t[e]),sc))]}function Dy(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class $y extends Rn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:i,ib:s,sb:r,ct:o,Zt:a,nb:u}=this.rt;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineWidth=o*e.verticalPixelRatio,Cn(h,a),h.lineJoin="round";const d=this.eb.bind(this);r!==void 0&&Ay(e,n,r,i,s,d,Dy),u&&function(c,f,g,y,w){if(y.to-y.from<=0)return;const{horizontalPixelRatio:C,verticalPixelRatio:v,context:p}=c;let m=null;const S=Math.max(1,Math.floor(C))%2/2,b=g*v+S;for(let N=y.to-1;N>=y.from;--N){const k=f[N];if(k){const I=w(c,k);I!==m&&(p.beginPath(),m!==null&&p.fill(),p.fillStyle=I,m=I);const U=Math.round(k._t*C)+S,O=k.ut*v;p.moveTo(U,O),p.arc(U,O,b,0,2*Math.PI)}}p.fill()}(e,n,u,i,d)}}class Wy extends $y{eb(e,n){return n.vt}}class Uy extends By{constructor(){super(...arguments),this.cM=new Wy}tb(e,n,i){return{...this.QM(e,n),...i.gh(e)}}wM(){const e=this.ee.N(),n={ot:this.aM,Zt:e.lineStyle,sb:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,nb:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(n)}}const Gl={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(t,e)=>new Uy(t,e)};class Vy extends Xa{constructor(e,n){super(e,n,!1)}mM(e,n,i){n.mc(this.aM,ds(this.lM)),e.Zo(this.aM,i,ds(this.lM))}Lb(e,n,i){return{wt:e,Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>this.tb(n.js,n,e))}}class Hy extends Rn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(e){this.jt=e}et(e){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:n}=e;this.Ib=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),u=Math.floor(r*a*o),h=Math.floor(r*o),d=Math.min(u,h);return Math.max(Math.floor(o),d)}(this.jt.ul,n),this.Ib>=2&&Math.floor(n)%2!=this.Ib%2&&this.Ib--;const i=this.jt.qs;this.jt.zb&&this.Ob(e,i,this.jt.lt),this.jt.Mi&&this.gm(e,i,this.jt.lt);const s=this.Nb(n);(!this.jt.Mi||this.Ib>2*s)&&this.Fb(e,i,this.jt.lt)}Ob(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",u=Math.min(Math.floor(r),Math.floor(this.jt.ul*r));u=Math.max(Math.floor(r),Math.min(u,this.Ib));const h=Math.floor(.5*u);let d=null;for(let c=i.from;c<i.to;c++){const f=n[c];f.sh!==a&&(s.fillStyle=f.sh,a=f.sh);const g=Math.round(Math.min(f.Go,f.Qo)*o),y=Math.round(Math.max(f.Go,f.Qo)*o),w=Math.round(f.Xo*o),C=Math.round(f.Jo*o);let v=Math.round(r*f._t)-h;const p=v+u-1;d!==null&&(v=Math.max(d+1,v),v=Math.min(v,p));const m=p-v+1;s.fillRect(v,w,m,g-w),s.fillRect(v,y+1,m,C-y),d=p}}Nb(e){let n=Math.floor(1*e);this.Ib<=2*n&&(n=Math.floor(.5*(this.Ib-1)));const i=Math.max(Math.floor(e),n);return this.Ib<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}gm(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);let h=null;for(let d=i.from;d<i.to;d++){const c=n[d];c.ih!==a&&(s.fillStyle=c.ih,a=c.ih);let f=Math.round(c._t*r)-Math.floor(.5*this.Ib);const g=f+this.Ib-1,y=Math.round(Math.min(c.Go,c.Qo)*o),w=Math.round(Math.max(c.Go,c.Qo)*o);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,g)),this.jt.ul*r>2*u)Kg(s,f,y,g-f+1,w-y+1,u);else{const C=g-f+1;s.fillRect(f,y,C,w-y+1)}h=g}}Fb(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);for(let h=i.from;h<i.to;h++){const d=n[h];let c=Math.round(Math.min(d.Go,d.Qo)*o),f=Math.round(Math.max(d.Go,d.Qo)*o),g=Math.round(d._t*r)-Math.floor(.5*this.Ib),y=g+this.Ib-1;if(d.th!==a){const w=d.th;s.fillStyle=w,a=w}this.jt.Mi&&(g+=u,c+=u,y-=u,f-=u),c>f||s.fillRect(g,c,y-g+1,f-c+1)}}}class Ky extends Vy{constructor(){super(...arguments),this.cM=new Hy}tb(e,n,i){return{...this.Lb(e,n,i),...i.gh(e)}}wM(){const e=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:e.wickVisible,Mi:e.borderVisible,lt:this.lM})}}const Yy={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(t,e)=>new Ky(t,e)};class Qy{constructor(e,n){this.ee=e,this.Zh=n,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(e){this.Zh&&this.Zh.cr&&this.Zh.cr(e)}jb(){this.ee.attachPrimitive(this.Zh)}}const Jy={autoScale:!0,zOrder:"normal"};function Yi(t,e){return Ya(Math.min(Math.max(t,12),30)*e)}function mi(t,e){switch(t){case"arrowDown":case"arrowUp":return Yi(e,1);case"circle":return Yi(e,.8);case"square":return Yi(e,.7)}}function Jf(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(Yi(t,1))}function Gf(t){return Math.max(Yi(t,.1),3)}function lc(t,e,n){return e?t:n?Math.ceil(t/2):0}function oc(t,e,n,i){const s=(mi("arrowUp",i)-1)/2*n.pS,r=(Ya(i/2)-1)/2*n.pS;e.beginPath(),t?(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut-s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut+s),e.lineTo(n._t-r,n.ut+s),e.lineTo(n._t-r,n.ut)):(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut+s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut-s),e.lineTo(n._t-r,n.ut-s),e.lineTo(n._t-r,n.ut)),e.fill()}function ac(t,e,n,i,s,r){const o=(mi("arrowUp",i)-1)/2,a=(Ya(i/2)-1)/2;return s>=e-a-2&&s<=e+a+2&&r>=(t?n:n-o)-2&&r<=(t?n+o:n)+2?!0:(()=>{if(s<e-o-3||s>e+o+3||r<(t?n-o-3:n)||r>(t?n:n+o+3))return!1;const u=Math.abs(s-e);return Math.abs(r-n)+3>=u/2})()}class Gy{constructor(){this.jt=null,this.$n=new ps,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(e){this.jt=e}qn(e,n,i){this.F===e&&this.W===n||(this.F=e,this.W=n,this.jv=fs(e,n),this.$n.On()),this.vS=i}Qn(e,n){if(this.jt===null||this.jt.lt===null)return null;for(let i=this.jt.lt.from;i<this.jt.lt.to;i++){const s=this.jt.ot[i];if(s&&Zy(s,e,n))return{zOrder:"normal",externalId:s.te??""}}return null}draw(e){this.vS!=="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}drawBackground(e){this.vS==="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.jt!==null&&this.jt.lt!==null){e.textBaseline="middle",e.font=this.jv;for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){const r=this.jt.ot[s];r.ri!==void 0&&(r.ri.ss=this.$n.Ii(e,r.ri.mS),r.ri.$t=this.F,r.ri._t=r._t-r.ri.ss/2),Xy(r,e,n,i)}}}}function Xy(t,e,n,i){e.fillStyle=t.R,t.ri!==void 0&&function(s,r,o,a,u,h){s.save(),s.scale(u,h),s.fillText(r,o,a),s.restore()}(e,t.ri.mS,t.ri._t,t.ri.ut,n,i),function(s,r,o){if(s.yh!==0){switch(s.wS){case"arrowDown":return void oc(!1,r,o,s.yh);case"arrowUp":return void oc(!0,r,o,s.yh);case"circle":return void function(a,u,h){const d=(mi("circle",h)-1)/2;a.beginPath(),a.arc(u._t,u.ut,d*u.pS,0,2*Math.PI,!1),a.fill()}(r,o,s.yh);case"square":return void function(a,u,h){const d=mi("square",h),c=(d-1)*u.pS/2,f=u._t-c,g=u.ut-c;a.fillRect(f,g,d*u.pS,d*u.pS)}(r,o,s.yh)}s.wS}}(t,e,function(s,r,o){const a=Math.max(1,Math.floor(r))%2/2;return{_t:Math.round(s._t*r)+a,ut:s.ut*o,pS:r}}(t,n,i))}function Zy(t,e,n){return!(t.ri===void 0||!function(i,s,r,o,a,u){const h=o/2;return a>=i&&a<=i+r&&u>=s-h&&u<=s+h}(t.ri._t,t.ri.ut,t.ri.ss,t.ri.$t,e,n))||function(i,s,r){if(i.yh===0)return!1;switch(i.wS){case"arrowDown":return ac(!0,i._t,i.ut,i.yh,s,r);case"arrowUp":return ac(!1,i._t,i.ut,i.yh,s,r);case"circle":return function(o,a,u,h,d){const c=2+mi("circle",u)/2,f=o-h,g=a-d;return Math.sqrt(f*f+g*g)<=c}(i._t,i.ut,i.yh,s,r);case"square":return function(o,a,u,h,d){const c=mi("square",u),f=(c-1)/2,g=o-f,y=a-f;return h>=g&&h<=g+c&&d>=y&&d<=y+c}(i._t,i.ut,i.yh,s,r)}}(t,e,n)}function uc(t){return t==="atPriceTop"||t==="atPriceBottom"||t==="atPriceMiddle"}function qy(t,e,n,i,s,r,o,a){const u=function(y,w,C){if(uc(w.position)&&w.price!==void 0)return w.price;if("value"in(v=y)&&typeof v.value=="number")return y.value;var v;if(function(p){return"open"in p&&"high"in p&&"low"in p&&"close"in p}(y)){if(w.position==="inBar")return y.close;if(w.position==="aboveBar")return C?y.low:y.high;if(w.position==="belowBar")return C?y.high:y.low}}(n,e,o.priceScale().options().invertScale);if(u===void 0)return;const h=uc(e.position),d=a.timeScale(),c=En(e.size)?Math.max(e.size,0):1,f=Jf(d.options().barSpacing)*c,g=f/2;switch(t.yh=f,e.position){case"inBar":case"atPriceMiddle":return t.ut=T(o.priceToCoordinate(u)),void(t.ri!==void 0&&(t.ri.ut=t.ut+g+r+.6*s));case"aboveBar":case"atPriceTop":{const y=h?0:i.gS;return t.ut=T(o.priceToCoordinate(u))-g-y,t.ri!==void 0&&(t.ri.ut=t.ut-g-.6*s,i.gS+=1.2*s),void(h||(i.gS+=f+r))}case"belowBar":case"atPriceBottom":{const y=h?0:i.MS;return t.ut=T(o.priceToCoordinate(u))+g+y,t.ri!==void 0&&(t.ri.ut=t.ut+g+r+.6*s,i.MS+=1.2*s),void(h||(i.MS+=f+r))}}}class e0{constructor(e,n,i){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new Gy,this.ye=e,this.Lv=n,this.jt={ot:[],lt:null},this.Ps=i}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const e=this.Lv.options().layout;return this.Xt.qn(e.fontSize,e.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(e){this.bS=e,this.kt("data")}kt(e){this.xt=!0,e==="data"&&(this.SS=!0)}yS(e){this.xt=!0,this.Ps=e}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const e=this.Lv.timeScale(),n=this.bS;this.SS&&(this.jt.ot=n.map(h=>({wt:h.time,_t:0,ut:0,yh:0,wS:h.shape,R:h.color,te:h.id,kS:h.kS,ri:void 0})),this.SS=!1);const i=this.Lv.options().layout;this.jt.lt=null;const s=e.getVisibleLogicalRange();if(s===null)return;const r=new si(Math.floor(s.from),Math.ceil(s.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let o=NaN;const a=Gf(e.options().barSpacing),u={gS:a,MS:a};this.jt.lt=Kf(this.jt.ot,r,!0);for(let h=this.jt.lt.from;h<this.jt.lt.to;h++){const d=n[h];d.time!==o&&(u.gS=a,u.MS=a,o=d.time);const c=this.jt.ot[h];c._t=T(e.logicalToCoordinate(d.time)),d.text!==void 0&&d.text.length>0&&(c.ri={mS:d.text,_t:0,ut:0,ss:0,$t:0});const f=this.ye.dataByIndex(d.time,0);f!==null&&qy(c,d,f,u,i.fontSize,a,this.ye,this.Lv)}this.xt=!1}}function hc(t){return{...Jy,...t}}class t0{constructor(e){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=hc(e)}attached(e){this.ES(),this.Lv=e.chart,this.ye=e.series,this.$h=new e0(this.ye,T(this.Lv),this.Ps),this.dS=e.requestUpdate,this.ye.subscribeDataChanged(n=>this.IM(n)),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(e){this.BS=!0,this.bS=e,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(e,n){var i;return this.$h?((i=this.$h.renderer())==null?void 0:i.Qn(e,n))??null:null}autoscaleInfo(e,n){if(this.Ps.autoScale&&this.$h){const i=this.zS();if(i)return{priceRange:null,margins:i}}return null}cr(e){this.Ps=hc({...this.Ps,...e}),this.Jb&&this.Jb()}zS(){const e=T(this.Lv).timeScale().options().barSpacing;if(this.RS||e!==this.VS){if(this.VS=e,this.bS.length>0){const n=Gf(e),i=1.5*Jf(e)+2*n,s=this.OS();this.DS={above:lc(i,s.aboveBar,s.inBar),below:lc(i,s.belowBar,s.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){var s;if(!this.BS||!this.Lv||!this.ye)return;const e=this.Lv.timeScale(),n=(s=this.ye)==null?void 0:s.data();if(e.getVisibleLogicalRange()==null||!this.ye||n.length===0)return void(this.PS=[]);const i=e.timeToIndex(T(n[0].time),!0);this.PS=this.bS.map((r,o)=>{const a=e.timeToIndex(r.time,!0),u=a<i?1:-1,h=T(this.ye).dataByIndex(a,u),d={time:e.timeToIndex(T(h).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,kS:o,text:r.text,size:r.size,price:r.price,Gr:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return{...d,position:r.position,price:r.price}}return{...d,position:r.position,price:r.price}}),this.BS=!1}LS(e){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(e))}IM(e){this.BS=!0,this.Jb()}}class n0 extends Qy{constructor(e,n,i){super(e,n),i&&this.setMarkers(i)}setMarkers(e){this.Zh.CS(e)}markers(){return this.Zh.AS()}}function i0(t,e,n){return new n0(t,new t0({}))}({...Ef});const X="/api";async function ne(t,e){const n=await fetch(t,e);if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return n.json()}async function s0(){return ne(`${X}/profiles`)}async function qa(t){return ne(`${X}/profiles/${encodeURIComponent(t)}`)}async function eu(t,e){await ne(`${X}/profiles/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_data:e})})}async function r0(t){return ne(`${X}/profiles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})}async function l0(t){return ne(`${X}/profiles?path=${encodeURIComponent(t)}`,{method:"DELETE"})}async function o0(t){return ne(`${X}/auth/check?profile_path=${encodeURIComponent(t)}`)}async function a0(t,e){return ne(`${X}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function Xo(t,e,n){return ne(`${X}/auth/set-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,current_password:e,new_password:n})})}async function u0(t,e){return ne(`${X}/auth/remove-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function h0(){return ne(`${X}/presets`)}async function c0(t,e){return ne(`${X}/presets/${t}/preview?profile_path=${encodeURIComponent(e)}`)}async function d0(t,e,n){const i={preset_id:t};return n&&Object.keys(n).length>0&&(i.options=n),ne(`${X}/presets/${t}/apply?profile_path=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}async function f0(t){return ne(`${X}/runtime/${t}`)}async function cc(t,e,n){await ne(`${X}/runtime/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,kill_switch:n})})}async function p0(t){return ne(`${X}/runtime/${t}/temp-settings`)}async function dc(t,e){await ne(`${X}/runtime/${t}/temp-settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function m0(t,e){return ne(`${X}/loop/${t}/start?profile_path=${encodeURIComponent(e)}`,{method:"POST"})}async function g0(t){return ne(`${X}/loop/${t}/stop`,{method:"POST"})}async function v0(t,e=100){return ne(`${X}/loop/${t}/log?lines=${e}`)}async function Xf(t,e=50,n){const i=new URLSearchParams({limit:String(e)});n&&i.set("profile_path",n);const s=`${X}/data/${t}/trades?${i}`,r=await ne(s);return r!=null&&typeof r=="object"&&"trades"in r&&Array.isArray(r.trades)?{trades:r.trades,display_currency:r.display_currency}:{trades:Array.isArray(r)?r:[],display_currency:void 0}}async function y0(t,e=50){return ne(`${X}/data/${t}/executions?limit=${e}`)}async function x0(t){return ne(`${X}/data/${t}/rejection-breakdown`)}async function w0(t,e){const n=e?`${X}/data/${t}/stats?profile_path=${encodeURIComponent(e)}`:`${X}/data/${t}/stats`;return ne(n)}async function _0(t,e){const n=e?`${X}/data/${t}/stats-by-preset?profile_path=${encodeURIComponent(e)}`:`${X}/data/${t}/stats-by-preset`;return ne(n)}async function S0(t,e){const n=e?`${X}/data/${t}/mt5-report?profile_path=${encodeURIComponent(e)}`:`${X}/data/${t}/mt5-report`,i=await fetch(n);if(!i.ok)return null;const s=await i.json();return(s==null?void 0:s.source)==="mt5"?s:null}async function Zf(t,e,n){return ne(`${X}/trades/${t}/${e}/close?profile_path=${encodeURIComponent(n)}`,{method:"POST"})}async function j0(t,e,n=!0){const i=new URLSearchParams({profile_path:e});return n&&i.set("force_profit_refresh","true"),ne(`${X}/data/${t}/sync-trades?${i}`,{method:"POST"})}async function b0(t,e){return ne(`${X}/data/${t}/technical-analysis?profile_path=${encodeURIComponent(e)}`)}const k0=()=>{try{const t=sessionStorage.getItem("unlockedProfiles");return t?new Set(JSON.parse(t)):new Set}catch{return new Set}},Xl=t=>{sessionStorage.setItem("unlockedProfiles",JSON.stringify([...t]))};function M0(){const[t,e]=R.useState("run"),[n,i]=R.useState([]),[s,r]=R.useState(null),[o,a]=R.useState(null),[u,h]=R.useState(!1),[d,c]=R.useState(""),[f,g]=R.useState(null),[y,w]=R.useState(!1),[C,v]=R.useState(!1),[p,m]=R.useState(""),[S,b]=R.useState(""),[N,k]=R.useState(null),[I,U]=R.useState(!1),[O,D]=R.useState({}),[H,J]=R.useState(k0),[G,z]=R.useState(""),[j,P]=R.useState(null),[M,x]=R.useState(!1),E=async()=>{try{const F=await s0();i(F);const Z={};await Promise.all(F.map(async ue=>{try{const{has_password:at}=await o0(ue.path);Z[ue.path]=at}catch{Z[ue.path]=!1}})),D(Z),r(ue=>F.length===0?null:ue&&F.some(at=>at.path===ue.path)?ue:F[0])}catch(F){a(F.message)}};R.useEffect(()=>{E()},[]);const W=s&&O[s.path]&&!H.has(s.path),V=async()=>{if(s){P(null),x(!0);try{const{success:F}=await a0(s.path,G);if(F){const Z=new Set(H);Z.add(s.path),J(Z),Xl(Z),z("")}else P("Incorrect password")}catch(F){P(F.message)}finally{x(!1)}}},le=()=>{if(!s)return;const F=new Set(H);F.delete(s.path),J(F),Xl(F),z(""),P(null)},ae=async()=>{const F=d.trim();if(!F){g("Enter a name");return}if(C){if(!p||p.length<4){g("Password must be at least 4 characters");return}if(p!==S){g("Passwords do not match");return}}g(null),w(!0);try{const Z=await r0(F);if(C&&p){await Xo(Z.path,null,p);const ue=new Set(H);ue.add(Z.path),J(ue),Xl(ue)}await E(),r(Z),c(""),m(""),b(""),v(!1),h(!1)}catch(Z){g(Z.message)}finally{w(!1)}},ge=async()=>{if(N){U(!0);try{await l0(N.path),E(),k(null)}catch(F){a(F.message)}finally{U(!1)}}};return l.jsxs("div",{className:"app",children:[l.jsxs("aside",{className:"sidebar",children:[l.jsx("h1",{children:"USDJPY Assistant"}),l.jsx("p",{className:"subtitle",children:"Trading Bot Dashboard"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Account"}),l.jsx("select",{value:(s==null?void 0:s.path)||"",onChange:F=>{const Z=n.find(ue=>ue.path===F.target.value);r(Z||null),z(""),P(null)},children:n.map(F=>l.jsxs("option",{value:F.path,children:[O[F.path]?" ":"",F.name]},F.path))}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{h(!u),g(null),c(""),m(""),b(""),v(!1)},children:"Add account"}),l.jsx("button",{type:"button",className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>s&&k(s),disabled:!s||n.length===0,children:"Remove account"}),s&&O[s.path]&&H.has(s.path)&&l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:le,children:"Lock"})]})]}),u&&l.jsxs("div",{className:"card",style:{marginTop:12,padding:12},children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"New account name"}),l.jsx("input",{type:"text",value:d,onChange:F=>c(F.target.value),placeholder:"e.g. uncle_demo"})]}),l.jsx("div",{className:"form-group",style:{marginBottom:8},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:C,onChange:F=>v(F.target.checked),style:{width:"auto"}}),"Set password (recommended)"]})}),C&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:p,onChange:F=>m(F.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Confirm password"}),l.jsx("input",{type:"password",value:S,onChange:F=>b(F.target.value),placeholder:"Confirm password"})]}),l.jsx("p",{style:{fontSize:"0.7rem",color:"var(--warning)",marginBottom:8,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."})]}),f&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginBottom:8},children:f}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-primary",style:{fontSize:"0.8rem"},onClick:ae,disabled:y,children:y?"Creating":"Create"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem"},onClick:()=>{h(!1),g(null),c(""),m(""),b(""),v(!1)},disabled:y,children:"Cancel"})]})]}),N&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsx("h3",{className:"card-title",children:"Remove account"}),l.jsxs("p",{style:{marginBottom:16},children:["Remove ",l.jsx("strong",{children:N.name}),"? This will delete the profile file. Logs and trade history for this account are kept."]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-danger",onClick:ge,disabled:I,children:I?"Removing":"Remove"}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(null),disabled:I,children:"Cancel"})]})]})}),l.jsxs("nav",{style:{marginTop:24},children:[l.jsx("button",{className:`nav-item ${t==="run"?"active":""}`,onClick:()=>e("run"),children:"Run / Status"}),l.jsx("button",{className:`nav-item ${t==="analysis"?"active":""}`,onClick:()=>e("analysis"),children:"Analysis"}),l.jsx("button",{className:`nav-item ${t==="presets"?"active":""}`,onClick:()=>e("presets"),children:"Presets"}),l.jsx("button",{className:`nav-item ${t==="profile"?"active":""}`,onClick:()=>e("profile"),children:"Profile Editor"}),l.jsx("button",{className:`nav-item ${t==="logs"?"active":""}`,onClick:()=>e("logs"),children:"Logs & Stats"}),l.jsx("button",{className:`nav-item ${t==="guide"?"active":""}`,onClick:()=>e("guide"),children:"Help / Guide"})]})]}),l.jsxs("main",{className:"main-content",children:[o&&l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",o]}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>a(null),children:"Dismiss"})]}),s?W?l.jsxs("div",{className:"card",style:{maxWidth:400,margin:"40px auto",textAlign:"center"},children:[l.jsx("h2",{style:{marginBottom:16},children:"Profile Locked"}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:[l.jsx("strong",{children:s.name})," is password-protected. Enter your password to continue."]}),l.jsxs("div",{className:"form-group",style:{marginBottom:16,textAlign:"left"},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:G,onChange:F=>z(F.target.value),onKeyDown:F=>F.key==="Enter"&&V(),placeholder:"Enter password",autoFocus:!0})]}),j&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:j}),l.jsx("button",{className:"btn btn-primary",onClick:V,disabled:M||!G,style:{width:"100%",marginBottom:16},children:M?"Unlocking...":"Unlock"}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"There is no forgot-password option. If you've lost your password, contact the administrator."})]}):l.jsxs(l.Fragment,{children:[t==="run"&&l.jsx(C0,{profile:s}),t==="analysis"&&l.jsx(E0,{profile:s}),t==="presets"&&l.jsx(N0,{profile:s}),t==="profile"&&l.jsx(z0,{profile:s,authStatus:O,onAuthChange:E}),t==="logs"&&l.jsx(T0,{profile:s}),t==="guide"&&l.jsx(R0,{})]}):l.jsx("div",{className:"card",children:l.jsxs("p",{children:["No accounts yet. Use ",l.jsx("strong",{children:"Add account"})," in the sidebar to create one, or add a profile JSON in the profiles/ folder."]})})]})]})}function C0({profile:t}){var m,S;const[e,n]=R.useState(null),[i,s]=R.useState(""),[r,o]=R.useState(!1),[a,u]=R.useState(null),[h,d]=R.useState(null),c=()=>{f0(t.name).then(n).catch(console.error),v0(t.name,50).then(b=>s(b.content)).catch(console.error),p0(t.name).then(u).catch(console.error),qa(t.path).then(d).catch(console.error)};R.useEffect(()=>{c();const b=setInterval(c,3e3);return()=>clearInterval(b)},[t.name]);const f=async b=>{e&&(await cc(t.name,b,e.kill_switch),c())},g=async b=>{e&&(await cc(t.name,e.mode,b),c())},y=async()=>{o(!0);try{await m0(t.name,t.path),c()}finally{o(!1)}},w=async()=>{o(!0);try{await g0(t.name),c()}finally{o(!1)}},C=async(b,N)=>{if(!a)return;const k={...a,[b]:N};u(k);try{await dc(t.name,k)}catch(I){console.error("Failed to update temp settings:",I)}},v=async()=>{const b={m5_trend_ema_fast:null,m5_trend_ema_slow:null,m1_zone_entry_ema_slow:null,m1_pullback_cross_ema_slow:null};u(b);try{await dc(t.name,b)}catch(N){console.error("Failed to reset temp settings:",N)}},p=!!((h==null?void 0:h.active_preset_name)==="kt_cg_trial_3"||(m=h==null?void 0:h.execution)!=null&&m.policies&&((S=(h==null?void 0:h.execution).policies)!=null&&S.some(b=>b.type==="kt_cg_counter_trend_pullback")));return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Run / Status"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Loop Control"}),l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("span",{children:"Status:"}),e!=null&&e.loop_running?l.jsxs("span",{className:"status status-running",children:[l.jsx("span",{className:"status-dot"}),"Running"]}):l.jsxs("span",{className:"status status-stopped",children:[l.jsx("span",{className:"status-dot"}),"Stopped"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-success",onClick:y,disabled:r||(e==null?void 0:e.loop_running),children:"Start Loop"}),l.jsx("button",{className:"btn btn-danger",onClick:w,disabled:r||!(e!=null&&e.loop_running),children:"Stop Loop"})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Runtime Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Mode"}),l.jsxs("select",{value:(e==null?void 0:e.mode)||"DISARMED",onChange:b=>f(b.target.value),children:[l.jsx("option",{value:"DISARMED",children:"DISARMED"}),l.jsx("option",{value:"ARMED_MANUAL_CONFIRM",children:"ARMED_MANUAL_CONFIRM"}),l.jsx("option",{value:"ARMED_AUTO_DEMO",children:"ARMED_AUTO_DEMO"})]})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.kill_switch)||!1,onChange:b=>g(b.target.checked),style:{width:"auto"}}),"Kill Switch (disable all execution)"]})})]})]}),p&&a&&l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Apply Temporary Settings"}),l.jsx("p",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:16},children:"Override EMA periods for the current session. Leave blank to use preset defaults."}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16},children:[l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:8},children:"M5 Trend  fast / slow EMAs (default 9 / 21)"}),l.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[l.jsx("input",{type:"number",step:"1",min:"1",placeholder:"9",value:a.m5_trend_ema_fast??"",onChange:b=>C("m5_trend_ema_fast",b.target.value?parseInt(b.target.value):null),style:{flex:1,padding:"8px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"1rem"}}),l.jsx("span",{style:{color:"var(--text-secondary)"},children:"/"}),l.jsx("input",{type:"number",step:"1",min:"1",placeholder:"21",value:a.m5_trend_ema_slow??"",onChange:b=>C("m5_trend_ema_slow",b.target.value?parseInt(b.target.value):null),style:{flex:1,padding:"8px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"1rem"}})]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:8},children:"M1 Zone Entry  slow EMA (default 13)"}),l.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:6},children:["BUY when M5 BULL and M1 EMA 9 ",">"," this EMA"]}),l.jsx("input",{type:"number",step:"1",min:"1",placeholder:"13",value:a.m1_zone_entry_ema_slow??"",onChange:b=>C("m1_zone_entry_ema_slow",b.target.value?parseInt(b.target.value):null),style:{width:"100%",padding:"8px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"1rem"}})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:8},children:"M1 Pullback Cross  slow EMA (default 15)"}),l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:6},children:"Trigger when M1 EMA 9 crosses this EMA"}),l.jsx("input",{type:"number",step:"1",min:"1",placeholder:"15",value:a.m1_pullback_cross_ema_slow??"",onChange:b=>C("m1_pullback_cross_ema_slow",b.target.value?parseInt(b.target.value):null),style:{width:"100%",padding:"8px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"1rem"}})]})]}),l.jsx("button",{className:"btn btn-secondary mt-4",onClick:v,children:"Reset to Defaults"})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Loop Log (last 50 lines)"}),l.jsx("div",{className:"log-viewer",children:i||"(no log yet)"})]})]})}function fc({ohlc:t,trades:e,emaFast:n,emaSlow:i,emaStack:s,height:r=300,onCloseTrade:o}){const a=R.useRef(null),u=R.useRef(null),h=R.useRef(null);if(R.useEffect(()=>{if(!a.current||t.length===0)return;const c=Fy(a.current,{width:a.current.clientWidth,height:r,layout:{background:{color:"#1a1a2e"},textColor:"#d1d5db"},grid:{vertLines:{color:"#2d2d44"},horzLines:{color:"#2d2d44"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2d2d44"},timeScale:{borderColor:"#2d2d44",timeVisible:!0,secondsVisible:!1}});u.current=c;const f=c.addSeries(Yy,{upColor:"#10b981",downColor:"#ef4444",borderUpColor:"#10b981",borderDownColor:"#ef4444",wickUpColor:"#10b981",wickDownColor:"#ef4444"});h.current=f;const g=t.map(p=>({time:p.time,open:p.open,high:p.high,low:p.low,close:p.close}));f.setData(g);const y={lastValueVisible:!1,priceLineVisible:!1},w={ema8:"#f59e0b",ema13:"#3b82f6",ema21:"#8b5cf6",ema34:"#06b6d4",ema50:"#10b981",ema89:"#6366f1",ema200:"#a855f7"};n&&n.length>0&&c.addSeries(Gl,{color:"#3b82f6",lineWidth:2,title:"EMA Fast",...y}).setData(n.map(m=>({time:m.time,value:m.value}))),i&&i.length>0&&c.addSeries(Gl,{color:"#10b981",lineWidth:2,title:"SMA Slow",...y}).setData(i.map(m=>({time:m.time,value:m.value}))),s&&Object.entries(s).forEach(([p,m])=>{if(m&&m.length>0){const S=w[p]||"#94a3b8";c.addSeries(Gl,{color:S,lineWidth:1,title:p.toUpperCase(),...y}).setData(m.map(N=>({time:N.time,value:N.value})))}});const C=[];e.forEach(p=>{const m=p.side.toLowerCase()==="buy",N=m?"#3b82f6":"#ef4444";p.entry_time!=null&&C.push({time:p.entry_time,position:m?"belowBar":"aboveBar",color:N,shape:m?"arrowUp":"arrowDown",text:""}),p.exit_time!=null&&C.push({time:p.exit_time,position:m?"aboveBar":"belowBar",color:N,shape:"circle",text:""})}),C.length>0&&i0(f).setMarkers(C),c.timeScale().fitContent();const v=()=>{a.current&&u.current&&u.current.applyOptions({width:a.current.clientWidth})};return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v),c.remove()}},[t,e,n,i,s,r]),t.length===0)return l.jsx("div",{style:{height:r,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)",borderRadius:6,color:"var(--text-secondary)"},children:"No chart data available"});const d=e.filter(c=>!c.exit_time&&!c.exit_price);return l.jsxs("div",{style:{position:"relative",width:"100%",height:r},children:[l.jsx("div",{ref:a,style:{width:"100%",height:r,borderRadius:6,overflow:"hidden"}}),o&&d.length>0&&l.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(26, 26, 46, 0.9)",border:"1px solid var(--border)",borderRadius:6,padding:8,fontSize:"0.75rem",maxWidth:180,zIndex:10},children:[l.jsx("div",{style:{fontWeight:600,marginBottom:6,color:"var(--text-secondary)"},children:"Active Trades"}),d.map(c=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"4px 0",borderTop:"1px solid var(--border)"},children:[l.jsxs("span",{style:{color:c.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:500},children:[c.side.toUpperCase()," @ ",c.entry_price.toFixed(3)]}),l.jsx("button",{onClick:()=>o(c),style:{background:"var(--danger)",border:"none",borderRadius:3,color:"white",padding:"2px 6px",fontSize:"0.65rem",cursor:"pointer"},children:"Close"})]},c.trade_id))]})]})}function E0({profile:t}){const[e,n]=R.useState(null),[i,s]=R.useState(!0),[r,o]=R.useState(null),[a,u]=R.useState(null),[h,d]=R.useState(null),[c,f]=R.useState(null),[g,y]=R.useState([]),[w,C]=R.useState(null),[v,p]=R.useState(null),[m,S]=R.useState(!1),b=async()=>{try{const[z,j]=await Promise.all([b0(t.name,t.path),Xf(t.name,50).then(M=>M.trades).catch(()=>[])]);n(z);const P=j.filter(M=>M.trade_id&&M.entry_price).map(M=>{const x=M.timestamp_utc,E=M.exit_timestamp_utc,W=x?Math.floor(new Date(x).getTime()/1e3):void 0,V=E?Math.floor(new Date(E).getTime()/1e3):void 0;return{trade_id:String(M.trade_id),entry_price:Number(M.entry_price),stop_price:M.stop_price!=null?Number(M.stop_price):null,target_price:M.target_price!=null?Number(M.target_price):null,side:String(M.side||"buy"),entry_time:W,exit_time:V,exit_price:M.exit_price!=null?Number(M.exit_price):void 0}});y(P),o(null),f(new Date)}catch(z){o(z.message)}finally{s(!1)}};R.useEffect(()=>{s(!0),b();const z=setInterval(b,3e4);return()=>clearInterval(z)},[t.name,t.path]),R.useEffect(()=>{const z=j=>{j.key==="Escape"&&w&&C(null)};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[w]);const N=async z=>{S(!0);try{await Zf(t.name,z.trade_id,t.path),p(null),b()}catch(j){alert(`Failed to close trade: ${j.message}`)}finally{S(!1)}},k=z=>{u(a===z?null:z)},I=z=>{const j={bull:{bg:"rgba(16, 185, 129, 0.2)",color:"var(--success)"},bear:{bg:"rgba(239, 68, 68, 0.2)",color:"var(--danger)"},sideways:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"},unknown:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"}},P=j[z]||j.unknown;return l.jsx("span",{style:{padding:"4px 10px",borderRadius:4,background:P.bg,color:P.color,fontWeight:600,fontSize:"0.85rem",textTransform:"uppercase"},children:z})},U=z=>{const j={oversold:"var(--success)",overbought:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:j[z.zone]||"inherit"},children:z.zone.charAt(0).toUpperCase()+z.zone.slice(1)}),z.value!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",z.value.toFixed(1),")"]})]})},O=z=>{const j={positive:"var(--success)",negative:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsx("span",{style:{color:j[z.direction]||"inherit"},children:z.direction.charAt(0).toUpperCase()+z.direction.slice(1)})},D=z=>{const j={elevated:"var(--warning)",low:"var(--accent)",normal:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:j[z.state]||"inherit"},children:z.state.charAt(0).toUpperCase()+z.state.slice(1)}),z.value_pips!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",z.value_pips," pips)"]})]})},H=["H4","H1","M30","M15","M5","M3","M1"],J={H4:"4H",H1:"1H",M30:"30m",M15:"15m",M5:"5m",M3:"3m",M1:"1m"},G=z=>{const j=[];if(z.ema_stack&&Object.keys(z.ema_stack).length>0){const P=Object.keys(z.ema_stack).map(M=>M.replace(/^ema/i,"")).filter(Boolean).sort((M,x)=>parseInt(M,10)-parseInt(x,10));P.length>0&&j.push(`EMA ${P.join("/")}`)}return z.ema_fast&&z.ema_fast.length>0&&z.ema_slow&&z.ema_slow.length>0&&j.push("SMA slow"),j.length>0?j.join("  "):""};return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Technical Analysis"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[c&&l.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:["Updated: ",c.toLocaleTimeString()]}),l.jsx("button",{className:"btn btn-secondary",onClick:b,disabled:i,children:i?"Loading...":"Refresh"})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16,fontSize:"0.9rem"},children:"Real-time technical analysis across multiple timeframes. Auto-refreshes every 30 seconds. Click on a timeframe to expand detailed view."}),r&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--danger)"},children:l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",r]})}),(e==null?void 0:e.current_tick)&&l.jsx("div",{className:"card mb-4",children:l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.bid.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Bid"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.ask.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Ask"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsxs("div",{className:"stat-value",style:{color:e.current_tick.spread_pips>1?"var(--warning)":"var(--success)"},children:[e.current_tick.spread_pips," pips"]}),l.jsx("div",{className:"stat-label",children:"Spread"})]})]})}),e&&H.map(z=>{var M,x,E,W,V,le,ae,ge;const j=e.timeframes[z];if(!j)return null;const P=a===z;return l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{className:"flex-between",style:{marginBottom:P?16:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:"1.1rem",minWidth:40},children:z}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:J[z]||z})]}),I(j.regime)]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),U(j.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),O(j.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),D(j.atr)]}),l.jsx("button",{type:"button",onClick:()=>k(z),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"var(--accent)",fontSize:"0.9rem"},"aria-label":P?"Collapse chart":"Expand chart",children:P?"":""})]})]}),!P&&l.jsx("p",{style:{margin:"12px 0 0 0",color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:j.summary}),P&&l.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsxs("h4",{style:{margin:0,color:"var(--accent)",fontSize:"0.9rem"},children:[z," Chart (",J[z]||z,")"]}),G(j)&&l.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:G(j)}),g.length>0&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["(",g.filter(F=>!F.exit_time).length," open, ",g.length," total)"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem",marginLeft:"auto"},onClick:()=>d(h===z?null:z),children:h===z?"Shrink":"Enlarge"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem"},onClick:()=>C(z),children:"Fullscreen"})]}),l.jsx(fc,{ohlc:j.ohlc||[],trades:g,emaFast:j.ema_fast,emaSlow:j.ema_slow,emaStack:j.ema_stack,height:h===z?520:280,onCloseTrade:F=>p(F)})]}),l.jsx("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:16,borderLeft:"4px solid var(--accent)"},children:l.jsx("p",{style:{margin:0,fontSize:"0.95rem"},children:j.summary})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"RSI (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((M=j.rsi.value)==null?void 0:M.toFixed(2))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Zone:"}),l.jsx("span",{style:{marginLeft:8},children:U(j.rsi)})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[j.rsi.zone==="oversold"&&"Price may be undervalued. Potential buy opportunity if trend supports.",j.rsi.zone==="overbought"&&"Price may be overextended. Consider caution with longs.",j.rsi.zone==="neutral"&&"Momentum is balanced. Follow the trend direction."]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"MACD (12,26,9)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Line:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((x=j.macd.line)==null?void 0:x.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Signal:"}),l.jsx("span",{style:{marginLeft:8},children:((E=j.macd.signal)==null?void 0:E.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Histogram:"}),l.jsx("span",{style:{marginLeft:8,color:j.macd.histogram&&j.macd.histogram>0?"var(--success)":"var(--danger)"},children:((W=j.macd.histogram)==null?void 0:W.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Direction:"}),l.jsx("span",{style:{marginLeft:8},children:O(j.macd)})]})]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"ATR (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((V=j.atr.value)==null?void 0:V.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Pips:"}),l.jsx("span",{style:{marginLeft:8},children:j.atr.value_pips??"-"})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[j.atr.state==="elevated"&&"Volatility is high. Consider wider stops and smaller position sizes.",j.atr.state==="low"&&"Volatility is low. Smaller moves expected, watch for breakouts.",j.atr.state==="normal"&&"Volatility is within normal range."]})]}),(()=>{const F=j.bollinger;return!F||typeof F!="object"?null:l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Bollinger Bands (20, 2)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Upper:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:F.upper!=null?Number(F.upper).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Middle:"}),l.jsx("span",{style:{marginLeft:8},children:F.middle!=null?Number(F.middle).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Lower:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:F.lower!=null?Number(F.lower).toFixed(5):"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Price relative to bands indicates volatility and potential mean reversion. For display only; not used in automation."})]})})(),typeof j.vwap=="number"&&l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"VWAP"}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:Number(j.vwap).toFixed(5)})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Volume-weighted average price (uses tick volume when available). For display only; not used in automation."})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Price Levels (100-bar)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Current:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((le=j.price.current)==null?void 0:le.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent High:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--success)"},children:((ae=j.price.recent_high)==null?void 0:ae.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent Low:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--danger)"},children:((ge=j.price.recent_low)==null?void 0:ge.toFixed(3))??"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:j.price.current&&j.price.recent_high&&j.price.recent_low&&l.jsxs(l.Fragment,{children:["Price is ",((j.price.current-j.price.recent_low)/(j.price.recent_high-j.price.recent_low)*100).toFixed(0),"% of the way from recent low to high."]})})]})]})]})]},z)}),i&&!e&&l.jsx("div",{className:"card",children:l.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center"},children:"Loading technical analysis..."})}),w&&e&&e.timeframes[w]&&(()=>{const z=e.timeframes[w],j=typeof window<"u"?window.innerHeight-200:500;return l.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-primary)",zIndex:1e3,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[l.jsxs("h2",{style:{margin:0,fontSize:"1.2rem"},children:[w," Chart (",J[w]||w,")"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(null),children:"Close (ESC)"})]}),l.jsx("div",{style:{flex:1,padding:16,overflow:"hidden"},children:l.jsx(fc,{ohlc:z.ohlc||[],trades:g,emaFast:z.ema_fast,emaSlow:z.ema_slow,emaStack:z.ema_stack,height:j,onCloseTrade:P=>p(P)})}),l.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--border)",background:"var(--bg-secondary)",display:"flex",flexWrap:"wrap",gap:20,alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"Regime:"}),I(z.regime)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),U(z.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),O(z.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),D(z.atr)]}),l.jsx("div",{style:{flex:1,minWidth:200},children:l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:z.summary})})]})]})})(),v&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:1100,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:8,padding:24,maxWidth:400,width:"90%",border:"1px solid var(--border)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:"Close Trade?"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:8},children:"Are you sure you want to close this trade?"}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:20},children:[l.jsxs("div",{style:{color:v.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:600,fontSize:"1rem"},children:[v.side.toUpperCase()," @ ",v.entry_price.toFixed(3)]}),v.stop_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:4},children:["SL: ",v.stop_price.toFixed(3)]}),v.target_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["TP: ",v.target_price.toFixed(3)]})]}),l.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(null),disabled:m,children:"Cancel"}),l.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>N(v),disabled:m,style:{background:"var(--danger)"},children:m?"Closing...":"Close Trade"})]})]})})]})}const Zl={scalper:{default:{label:"Default (5, 9, 13)",values:[5,9,13]},alt1:{label:"Ultra-fast (3, 5, 8)",values:[3,5,8]},alt2:{label:"Standard (8, 13, 21)",values:[8,13,21]}},day_trader:{default:{label:"Default (13, 21, 34)",values:[13,21,34]},alt1:{label:"Faster (8, 13, 21)",values:[8,13,21]},alt2:{label:"Slower (21, 34, 55)",values:[21,34,55]}},swing_trader:{default:{label:"Default (21, 50, 100)",values:[21,50,100]},alt1:{label:"Classic (20, 50, 200)",values:[20,50,200]},alt2:{label:"Medium (34, 89, 144)",values:[34,89,144]}}};function Re({label:t,value:e,onAdjust:n,onChange:i,step:s=1,min:r,max:o}){if(e==null)return null;const a=u=>{const h=parseFloat(u.target.value);if(!isNaN(h)&&i){let d=h;r!==void 0&&(d=Math.max(r,d)),o!==void 0&&(d=Math.min(o,d)),i(d)}};return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--bg-secondary)",borderRadius:6,border:"1px solid var(--border)"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:t}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("button",{onClick:()=>n(-1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),l.jsx("input",{type:"number",value:s<1?e.toFixed(2):e,onChange:a,step:s,min:r,max:o,style:{width:60,textAlign:"center",fontWeight:600,fontFamily:"monospace",padding:"4px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",fontSize:"0.85rem"}}),l.jsx("button",{onClick:()=>n(1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})}function P0({profile:t,currentProfile:e,onComplete:n}){var z,j,P,M,x,E,W,V,le,ae,ge,F,Z,ue,at,cn,We,_s,At,Ss,Ot;const[i,s]=R.useState(1),[r,o]=R.useState({tradingStyle:null,riskTolerance:null,entryStyle:null,emaStack:"default",multipleStrategyA:null,multipleStrategyB:null}),[a,u]=R.useState(!1),[h,d]=R.useState(!1),[c,f]=R.useState(!1),[g,y]=R.useState(null),[w,C]=R.useState(null),v=r.entryStyle==="multiple"?[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Choose Strategies",description:"Pick two strategies to combine"},{num:5,title:"Review",description:"Review your configuration"},{num:6,title:"Fine-Tune",description:"Adjust individual settings"}]:[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Review",description:"Review your configuration"},{num:5,title:"Fine-Tune",description:"Adjust individual settings"}],[p,m]=R.useState(null),S=r.entryStyle==="multiple"?6:5;R.useEffect(()=>{r.entryStyle!=="multiple"&&i>5&&s(5)},[r.entryStyle,i]);const b=()=>{switch(i){case 1:return r.tradingStyle!==null;case 2:return r.riskTolerance!==null;case 3:return r.entryStyle!==null;case 4:return r.entryStyle==="multiple"?r.multipleStrategyA!==null&&r.multipleStrategyB!==null&&r.multipleStrategyA!==r.multipleStrategyB:!0;default:return!0}},N=()=>{const _=e,K={schema_version:1,profile_name:t.name,symbol:(_==null?void 0:_.symbol)??"USDJPY",pip_size:.01,broker_type:(_==null?void 0:_.broker_type)??"mt5",oanda_token:(_==null?void 0:_.oanda_token)??null,oanda_account_id:(_==null?void 0:_.oanda_account_id)??null,oanda_environment:(_==null?void 0:_.oanda_environment)??"practice",display_currency:(_==null?void 0:_.display_currency)??"USD",deposit_amount:(_==null?void 0:_.deposit_amount)??null,leverage_ratio:(_==null?void 0:_.leverage_ratio)??null,created_utc:(_==null?void 0:_.created_utc)??new Date().toISOString().slice(0,19).replace("T"," ")+"Z",risk:{},strategy:{timeframes:{},setups:{},filters:{alignment:{enabled:!1,method:"score",weights:{H4:1,M15:1,M1:1},min_score_to_trade:-3},ema_stack_filter:{enabled:!1,timeframe:"M1",periods:[8,13,21],min_separation_pips:0},atr_filter:{enabled:!1,timeframe:"M1",atr_period:14,min_atr_pips:0,max_atr_pips:null}}},trade_management:{target:{}},execution:{policies:[],loop_poll_seconds:5,loop_poll_seconds_fast:2}},B=K.risk,$=K.strategy,q=$.timeframes,ve=$.setups,ye=K.trade_management.target,xe=K.execution,_e=(()=>{var kt;if(!r.tradingStyle)return[8,13,21];const _i=Zl[r.tradingStyle],Ln=r.emaStack||"default";return((kt=_i[Ln])==null?void 0:kt.values)||_i.default.values})();switch(r.tradingStyle){case"scalper":q.M1={ema_fast:9,sma_slow:21,ema_stack:_e},q.M15={ema_fast:9,sma_slow:21,ema_stack:_e},q.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ve.m1_cross_entry={enabled:!0,timeframe:"M1",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:3}},ye.mode="fixed_pips",ye.pips_default=8,ye.rr_default=1,xe.loop_poll_seconds=3,xe.loop_poll_seconds_fast=1;break;case"day_trader":q.M1={ema_fast:13,sma_slow:30,ema_stack:_e},q.M15={ema_fast:13,sma_slow:30,ema_stack:_e},q.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ve.m15_cross_entry={enabled:!0,timeframe:"M15",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:5}},ye.mode="fixed_pips",ye.pips_default=15,ye.rr_default=1.5,xe.loop_poll_seconds=10,xe.loop_poll_seconds_fast=5;break;case"swing_trader":q.M1={ema_fast:21,sma_slow:50,ema_stack:_e},q.M15={ema_fast:21,sma_slow:50,ema_stack:_e},q.H4={ema_fast:21,sma_slow:50,ema_stack:_e},ve.h4_cross_entry={enabled:!0,timeframe:"H4",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:2}},ye.mode="fixed_pips",ye.pips_default=30,ye.rr_default=2,xe.loop_poll_seconds=60,xe.loop_poll_seconds_fast=30;break}const $t=(e==null?void 0:e.risk)||{},xi=$t.max_lots??.1,wi=$t.max_spread_pips??2,sl=$t.max_trades_per_day??10,rl=$t.min_stop_pips,ll=typeof rl=="number"&&rl>=0?Math.max(1,Math.min(100,rl)):10;switch(r.riskTolerance){case"conservative":B.max_lots=Math.round(xi*.35*100)/100||.05,B.max_spread_pips=Math.round(wi*.25*10)/10||.5,B.min_stop_pips=ll,B.max_trades_per_day=Math.max(1,Math.round(sl*.5)),B.max_open_trades=1,B.cooldown_minutes_after_loss=15,B.require_stop=!0,B.risk_per_trade_pct=.5,B.max_daily_loss_pct=2;break;case"moderate":B.max_lots=Math.round(xi*.67*100)/100||.1,B.max_spread_pips=Math.round(wi*.5*10)/10||.8,B.min_stop_pips=ll,B.max_trades_per_day=Math.max(1,Math.round(sl*1)),B.max_open_trades=2,B.cooldown_minutes_after_loss=5,B.require_stop=!0,B.risk_per_trade_pct=1,B.max_daily_loss_pct=4;break;case"aggressive":B.max_lots=Math.round(xi*1*100)/100||.15,B.max_spread_pips=Math.round(wi*.6*10)/10||1.2,B.min_stop_pips=ll,B.max_trades_per_day=Math.max(1,Math.round(sl*1)),B.max_open_trades=3,B.cooldown_minutes_after_loss=0,B.require_stop=!0,B.risk_per_trade_pct=2,B.max_daily_loss_pct=6;break}const Fe=[],js=Object.keys(ve)[0]||"m1_cross_entry",gt=r.tradingStyle==="swing_trader"?"H4":r.tradingStyle==="day_trader"?"M15":"M1",vt=ye.pips_default,yt=B.min_stop_pips;switch(r.entryStyle){case"ema_cross":Fe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:js});break;case"rsi_dips":Fe.push({type:"indicator_based",id:"custom_rsi_buy",enabled:!0,timeframe:gt,regime:"bull",side:"buy",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"oversold",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:vt,sl_pips:yt}),Fe.push({type:"indicator_based",id:"custom_rsi_sell",enabled:!0,timeframe:gt,regime:"bear",side:"sell",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"overbought",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:vt,sl_pips:yt});break;case"price_levels":$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Fe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:js});break;case"bollinger_bands":Fe.push({type:"bollinger_bands",id:"custom_bb_buy",enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:vt,sl_pips:yt}),Fe.push({type:"bollinger_bands",id:"custom_bb_sell",enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:vt,sl_pips:yt});break;case"vwap":Fe.push({type:"vwap",id:"custom_vwap_buy",enabled:!0,timeframe:gt,trigger:"cross_above",side:"buy",tp_pips:vt,sl_pips:yt}),Fe.push({type:"vwap",id:"custom_vwap_sell",enabled:!0,timeframe:gt,trigger:"cross_below",side:"sell",tp_pips:vt,sl_pips:yt});break;case"multiple":{const _i=(Ln,kt)=>{if(Ln==="ema_cross"){Fe.push({type:"confirmed_cross",id:`${kt}_ema_cross`,enabled:!0,setup_id:js});return}if(Ln==="price_levels"){$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Fe.push({type:"confirmed_cross",id:`${kt}_confirmed_cross`,enabled:!0,setup_id:js});return}if(Ln==="bollinger_bands"){Fe.push({type:"bollinger_bands",id:`${kt}_bb_buy`,enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:vt,sl_pips:yt}),Fe.push({type:"bollinger_bands",id:`${kt}_bb_sell`,enabled:!0,timeframe:gt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:vt,sl_pips:yt});return}Ln==="vwap"&&(Fe.push({type:"vwap",id:`${kt}_vwap_buy`,enabled:!0,timeframe:gt,trigger:"cross_above",side:"buy",tp_pips:vt,sl_pips:yt}),Fe.push({type:"vwap",id:`${kt}_vwap_sell`,enabled:!0,timeframe:gt,trigger:"cross_below",side:"sell",tp_pips:vt,sl_pips:yt}))};r.multipleStrategyA&&_i(r.multipleStrategyA,"custom_ms_a"),r.multipleStrategyB&&_i(r.multipleStrategyB,"custom_ms_b");break}}xe.policies=Fe;const qf=r.tradingStyle==="scalper"?"Scalp":r.tradingStyle==="day_trader"?"DayT":"Swing",ep=r.riskTolerance==="conservative"?"Cons":r.riskTolerance==="moderate"?"Mod":"Agg",tp=r.entryStyle==="ema_cross"?"EMAC":r.entryStyle==="rsi_dips"?"RSI":r.entryStyle==="price_levels"?"PL":r.entryStyle==="bollinger_bands"?"BB":r.entryStyle==="vwap"?"VWAP":"MS";return K.active_preset_name=`Custom: ${qf}/${ep}/${tp}`,K},k=()=>{if(i<S&&s(i+1),i===3&&r.entryStyle!=="multiple"||i===4&&r.entryStyle==="multiple"){const _=N();C(_),m(JSON.parse(JSON.stringify(_)))}},I=()=>{i>1&&s(i-1)},U=async()=>{f(!0),y(null);try{const _=JSON.parse(JSON.stringify(p||w||N())),K=(e==null?void 0:e.risk)||{},B=_.risk||{};_.risk=K;const $=(q,ve)=>typeof q=="number"&&typeof ve=="number"?Math.min(q,ve):q;_.effective_risk={...B,max_lots:$(B.max_lots??.1,K.max_lots??1),max_spread_pips:$(B.max_spread_pips??2,K.max_spread_pips??5),max_trades_per_day:$(B.max_trades_per_day??10,K.max_trades_per_day??100),max_open_trades:$(B.max_open_trades??2,K.max_open_trades??10)},_.broker_type=(e==null?void 0:e.broker_type)??"mt5",_.oanda_token=(e==null?void 0:e.oanda_token)??null,_.oanda_account_id=(e==null?void 0:e.oanda_account_id)??null,_.oanda_environment=(e==null?void 0:e.oanda_environment)??"practice",_.display_currency=(e==null?void 0:e.display_currency)??"USD",_.deposit_amount=(e==null?void 0:e.deposit_amount)??null,_.leverage_ratio=(e==null?void 0:e.leverage_ratio)??null,e!=null&&e.created_utc&&(_.created_utc=e.created_utc),await eu(t.path,_),n()}catch(_){y(_.message)}finally{f(!1)}},O=()=>{w&&m(JSON.parse(JSON.stringify(w)))},D=(_,K)=>{if(!p)return;const B=JSON.parse(JSON.stringify(p));let $=B;for(let q=0;q<_.length-1;q++)$[_[q]]===void 0&&($[_[q]]={}),$=$[_[q]];$[_[_.length-1]]=K,m(B)},H=(_,K,B,$,q)=>{if(!p)return;let ve=p;for(let Dt=0;Dt<_.length-1;Dt++)if(ve=ve[_[Dt]],!ve)return;const ye=ve[_[_.length-1]];if(typeof ye!="number")return;let xe=ye+K*(q||1);B!==void 0&&(xe=Math.max(B,xe)),$!==void 0&&(xe=Math.min($,xe)),D(_,Number(xe.toFixed(4)))},J=(()=>{if(i!==5||!p||!e)return!1;const _=e.risk||{},K=_.max_lots,B=_.max_spread_pips,$=_.max_trades_per_day,q=p.risk||{},ve=q.max_lots,ye=q.max_spread_pips,xe=q.max_trades_per_day,Dt=K!=null&&ve!=null&&ve>K,_e=B!=null&&ye!=null&&ye>B,$t=$!=null&&xe!=null&&xe>$;return Dt||_e||$t})(),G=({selected:_,onClick:K,title:B,description:$,icon:q,details:ve})=>l.jsxs("div",{onClick:K,style:{padding:20,borderRadius:8,border:`2px solid ${_?"var(--accent)":"var(--border)"}`,background:_?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",cursor:"pointer",transition:"all 0.2s ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:q}),l.jsx("h4",{style:{margin:0,color:_?"var(--accent)":"var(--text-primary)"},children:B})]}),l.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:$}),ve&&l.jsx("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.8rem",color:"var(--text-secondary)"},children:ve.map((ye,xe)=>l.jsx("li",{children:ye},xe))})]});return l.jsxs("div",{children:[l.jsx("div",{className:"card mb-4",children:l.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:v.map(_=>l.jsxs("div",{style:{flex:1,textAlign:"center",opacity:_.num<=i?1:.5},children:[l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:_.num<i?"var(--success)":_.num===i?"var(--accent)":"var(--bg-tertiary)",color:_.num<=i?"white":"var(--text-secondary)",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:600,marginBottom:8},children:_.num<i?"":_.num}),l.jsx("div",{style:{fontSize:"0.85rem",fontWeight:_.num===i?600:400},children:_.title})]},_.num))})}),i===1&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 1: Trading Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How do you want to trade? This determines the timeframe focus and trade duration."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.tradingStyle==="scalper",onClick:()=>o({...r,tradingStyle:"scalper"}),title:"Scalper",icon:"",description:"Quick trades (1-5 minutes), small profits, many opportunities",details:["Focuses on M1 (1-minute) chart","8 pip profit targets","Fast polling (1-3 seconds)","Best for active monitoring"]}),l.jsx(G,{selected:r.tradingStyle==="day_trader",onClick:()=>o({...r,tradingStyle:"day_trader"}),title:"Day Trader",icon:"",description:"Trades within the day (5-60 minutes), moderate targets",details:["Focuses on M15 (15-minute) chart","15 pip profit targets","Moderate polling (5-10 seconds)","Good balance of activity and patience"]}),l.jsx(G,{selected:r.tradingStyle==="swing_trader",onClick:()=>o({...r,tradingStyle:"swing_trader"}),title:"Swing Trader",icon:"",description:"Hold for hours or days, larger moves, fewer trades",details:["Focuses on H4 (4-hour) chart","30+ pip profit targets","Slow polling (30-60 seconds)","Minimal monitoring needed"]})]}),r.tradingStyle&&l.jsxs("div",{style:{marginTop:20},children:[l.jsxs("button",{type:"button",onClick:()=>d(!h),style:{background:"transparent",border:"none",color:"var(--accent)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,padding:0},children:[l.jsx("span",{style:{transform:h?"rotate(90deg)":"rotate(0)",transition:"transform 0.2s"},children:""}),"Advanced: EMA Stack (optional)"]}),h&&l.jsxs("div",{style:{marginTop:12,padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"3px solid var(--accent)"},children:[l.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:"The EMA Stack defines the moving average periods used for trend detection. Leave as default unless you have a specific preference."}),l.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[l.jsxs("label",{children:["EMA Stack for ",r.tradingStyle==="scalper"?"Scalping":r.tradingStyle==="day_trader"?"Day Trading":"Swing Trading"]}),l.jsx("select",{value:r.emaStack||"default",onChange:_=>o({...r,emaStack:_.target.value}),children:r.tradingStyle&&Object.entries(Zl[r.tradingStyle]).map(([_,K])=>l.jsx("option",{value:_,children:K.label},_))})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Current selection: ",r.tradingStyle&&r.emaStack&&((z=Zl[r.tradingStyle][r.emaStack])==null?void 0:z.values.join(", "))," EMA periods"]})]})]})]}),i===2&&(()=>{const _=(e==null?void 0:e.risk)||{},K=_.max_lots??.1,B=_.max_spread_pips??2,$=_.max_trades_per_day??10,q=Math.round(K*.35*100)/100||.05,ve=Math.max(1,Math.round($*.5)),ye=Math.round(B*.25*10)/10||.5,xe=Math.round(K*.67*100)/100||.1,Dt=Math.max(1,Math.round($*1)),_e=Math.round(B*.5*10)/10||.8,$t=Math.round(K*1*100)/100||.15,xi=Math.max(1,Math.round($*1)),wi=Math.round(B*.6*10)/10||1.2;return l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 2: Risk Tolerance"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How much risk are you comfortable with per trade? Values scale from your Profile Editor limits."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.riskTolerance==="conservative",onClick:()=>o({...r,riskTolerance:"conservative"}),title:"Conservative",icon:"",description:"Lower risk, smaller positions, strict filters",details:[`${q} lots per trade`,`Max ${ve} trades per day`,`${ye} pip max spread`,"15 min cooldown after loss","2% max daily loss"]}),l.jsx(G,{selected:r.riskTolerance==="moderate",onClick:()=>o({...r,riskTolerance:"moderate"}),title:"Moderate",icon:"",description:"Balanced risk and reward",details:[`${xe} lots per trade`,`Max ${Dt} trades per day`,`${_e} pip max spread`,"5 min cooldown after loss","4% max daily loss"]}),l.jsx(G,{selected:r.riskTolerance==="aggressive",onClick:()=>o({...r,riskTolerance:"aggressive"}),title:"Aggressive",icon:"",description:"Higher risk for potentially higher returns",details:[`${$t} lots per trade`,`Max ${xi} trades per day`,`${wi} pip max spread`,"No cooldown after loss","6% max daily loss"]})]})]})})(),i===3&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 3: Entry Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How should the bot decide when to enter a trade?"}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.entryStyle==="ema_cross",onClick:()=>o({...r,entryStyle:"ema_cross",multipleStrategyA:null,multipleStrategyB:null}),title:"EMA Cross",icon:"",description:"Buy or sell based on EMA/SMA cross direction",details:["BUY: EMA crosses above SMA","SELL: EMA crosses below SMA","Waits for confirmation bar","Works in both trends"]}),l.jsx(G,{selected:r.entryStyle==="rsi_dips",onClick:()=>o({...r,entryStyle:"rsi_dips",multipleStrategyA:null,multipleStrategyB:null}),title:"RSI Dips",icon:"",description:"Buy oversold dips, sell overbought rallies",details:["BUY: RSI < 30 in uptrend","SELL: RSI > 70 in downtrend","Mean-reversion style","MACD confirmation included"]}),l.jsx(G,{selected:r.entryStyle==="price_levels",onClick:()=>o({...r,entryStyle:"price_levels",multipleStrategyA:null,multipleStrategyB:null}),title:"Price Levels",icon:"",description:"EMA cross with multi-timeframe alignment filter",details:["Bi-directional EMA cross","Requires H4/M15/M1 agreement","Higher quality signals","Fewer but better trades"]}),l.jsx(G,{selected:r.entryStyle==="bollinger_bands",onClick:()=>o({...r,entryStyle:"bollinger_bands",multipleStrategyA:null,multipleStrategyB:null}),title:"Bollinger Bands",icon:"",description:"Mean reversion at lower/upper band",details:["BUY: price at/below lower band in uptrend","SELL: price at/above upper band in downtrend","M15, 20-period, 2 std dev","Clear levels for entry"]}),l.jsx(G,{selected:r.entryStyle==="vwap",onClick:()=>o({...r,entryStyle:"vwap",multipleStrategyA:null,multipleStrategyB:null}),title:"VWAP",icon:"",description:"Entries on price vs VWAP",details:["BUY: price crosses above VWAP","SELL: price crosses below VWAP","Volume-weighted average price","Good for intraday trend"]}),l.jsx(G,{selected:r.entryStyle==="multiple",onClick:()=>o({...r,entryStyle:"multiple"}),title:"Multiple Strategies",icon:"",description:"Combine two strategies of your choice (EMA Cross, Price Levels, Bollinger Bands, or VWAP)",details:["Pick Strategy A and Strategy B in the next step","EMA Cross, Price Levels, Bollinger Bands, VWAP","Maximum flexibility","Good for active traders"]})]})]}),i===4&&r.entryStyle==="multiple"&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 4: Choose two strategies to combine"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Select Strategy A and Strategy B. They must be different. RSI is not available in combinations."}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy A"}),l.jsxs("select",{value:r.multipleStrategyA??"",onChange:_=>o({...r,multipleStrategyA:_.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy B"}),l.jsxs("select",{value:r.multipleStrategyB??"",onChange:_=>o({...r,multipleStrategyB:_.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]})]}),r.multipleStrategyA&&r.multipleStrategyB&&r.multipleStrategyA===r.multipleStrategyB&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.9rem",marginTop:8},children:"Please choose two different strategies."})]}),(i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple")&&l.jsx("div",{children:l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:r.entryStyle==="multiple"?"Step 5: Review & Save":"Step 4: Review & Save"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Review your custom configuration before saving."}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"4px solid var(--accent)",marginBottom:20},children:[l.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Your Configuration Summary"}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Style:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.tradingStyle==="scalper"&&" Scalper",r.tradingStyle==="day_trader"&&" Day Trader",r.tradingStyle==="swing_trader"&&" Swing Trader"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Risk:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.riskTolerance==="conservative"&&" Conservative",r.riskTolerance==="moderate"&&" Moderate",r.riskTolerance==="aggressive"&&" Aggressive"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Entry:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.entryStyle==="ema_cross"&&" EMA Cross",r.entryStyle==="rsi_dips"&&" RSI Dips",r.entryStyle==="price_levels"&&" Price Levels",r.entryStyle==="bollinger_bands"&&" Bollinger Bands",r.entryStyle==="vwap"&&" VWAP",r.entryStyle==="multiple"&&r.multipleStrategyA&&r.multipleStrategyB&&l.jsxs(l.Fragment,{children:[" Multiple (",r.multipleStrategyA.replace("_"," "),"+",r.multipleStrategyB.replace("_"," "),")"]}),r.entryStyle==="multiple"&&(!r.multipleStrategyA||!r.multipleStrategyB)&&" Multiple"]})]})]})]}),w&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"What this means:"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"var(--text-secondary)",lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Position Size:"})," ",String(((j=w.risk)==null?void 0:j.max_lots)??"-")," lots per trade"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Profit Target:"})," ",String(((M=(P=w.trade_management)==null?void 0:P.target)==null?void 0:M.pips_default)??"-")," pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Max Trades/Day:"})," ",String(((x=w.risk)==null?void 0:x.max_trades_per_day)??"-")]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Polling Speed:"})," Every ",String(((E=w.execution)==null?void 0:E.loop_poll_seconds)??"-")," seconds"]})]})]}),l.jsx("div",{style:{marginBottom:20},children:l.jsxs("button",{className:"btn btn-secondary",style:{fontSize:"0.85rem"},onClick:()=>u(!a),children:[a?"Hide":"Show"," Advanced Settings"]})}),a&&w&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"Full Configuration (JSON):"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(w,null,2)}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:"For advanced customization, edit the profile directly in the Profile Editor after saving."})]}),g&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",g]})})]})}),(i===5&&r.entryStyle!=="multiple"||i===6&&r.entryStyle==="multiple")&&p&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:r.entryStyle==="multiple"?"Step 6: Fine-Tune Settings":"Step 5: Fine-Tune Settings"}),l.jsx("button",{className:"btn btn-secondary",onClick:O,style:{fontSize:"0.8rem"},children:"Reset to Wizard Defaults"})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Adjust any settings using the +/- buttons or type directly. These values come from your wizard choices."}),J&&l.jsxs("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.15)",border:"1px solid var(--danger)",borderRadius:8,marginBottom:20},children:[l.jsx("strong",{style:{color:"var(--danger)"},children:"Profile limit exceeded"}),l.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"You have violated your Profile Editor risk settings. This change cannot be made until you update your risk settings in the Profile Editor."})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Risk Settings"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Max Lots",value:(W=p.risk)==null?void 0:W.max_lots,onAdjust:_=>H(["risk","max_lots"],_,.01,10,.01),onChange:_=>D(["risk","max_lots"],_),step:.01,min:.01,max:10}),l.jsx(Re,{label:"Min Stop Pips",value:(V=p.risk)==null?void 0:V.min_stop_pips,onAdjust:_=>H(["risk","min_stop_pips"],_,1,100,1),onChange:_=>D(["risk","min_stop_pips"],_),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Spread Pips",value:(le=p.risk)==null?void 0:le.max_spread_pips,onAdjust:_=>H(["risk","max_spread_pips"],_,.1,5,.1),onChange:_=>D(["risk","max_spread_pips"],_),step:.1,min:.1,max:5}),l.jsx(Re,{label:"Max Trades/Day",value:(ae=p.risk)==null?void 0:ae.max_trades_per_day,onAdjust:_=>H(["risk","max_trades_per_day"],_,1,100,1),onChange:_=>D(["risk","max_trades_per_day"],_),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Open Trades",value:(ge=p.risk)==null?void 0:ge.max_open_trades,onAdjust:_=>H(["risk","max_open_trades"],_,1,10,1),onChange:_=>D(["risk","max_open_trades"],_),step:1,min:1,max:10}),l.jsx(Re,{label:"Loss Cooldown (min)",value:(F=p.risk)==null?void 0:F.cooldown_minutes_after_loss,onAdjust:_=>H(["risk","cooldown_minutes_after_loss"],_,0,60,1),onChange:_=>D(["risk","cooldown_minutes_after_loss"],_),step:1,min:0,max:60}),l.jsx(Re,{label:"Max Daily Loss %",value:(Z=p.risk)==null?void 0:Z.max_daily_loss_pct,onAdjust:_=>H(["risk","max_daily_loss_pct"],_,.5,20,.5),onChange:_=>D(["risk","max_daily_loss_pct"],_),step:.5,min:.5,max:20})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Profit Target"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Target Pips",value:(at=(ue=p.trade_management)==null?void 0:ue.target)==null?void 0:at.pips_default,onAdjust:_=>H(["trade_management","target","pips_default"],_,1,100,1),onChange:_=>D(["trade_management","target","pips_default"],_),step:1,min:1,max:100}),l.jsx(Re,{label:"R:R Ratio",value:(We=(cn=p.trade_management)==null?void 0:cn.target)==null?void 0:We.rr_default,onAdjust:_=>H(["trade_management","target","rr_default"],_,.5,5,.1),onChange:_=>D(["trade_management","target","rr_default"],_),step:.1,min:.5,max:5})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Execution"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Poll Interval (sec)",value:(_s=p.execution)==null?void 0:_s.loop_poll_seconds,onAdjust:_=>H(["execution","loop_poll_seconds"],_,1,120,1),onChange:_=>D(["execution","loop_poll_seconds"],_),step:1,min:1,max:120}),l.jsx(Re,{label:"Fast Poll (sec)",value:(At=p.execution)==null?void 0:At.loop_poll_seconds_fast,onAdjust:_=>H(["execution","loop_poll_seconds_fast"],_,1,60,1),onChange:_=>D(["execution","loop_poll_seconds_fast"],_),step:1,min:1,max:60})]})]}),(Ot=(Ss=p.execution)==null?void 0:Ss.policies)==null?void 0:Ot.map((_,K)=>l.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.9rem"},children:["Policy: ",_.id," (",_.type,")"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:10},children:[_.type==="indicator_based"&&l.jsxs(l.Fragment,{children:[l.jsx(Re,{label:"RSI Period",value:_.rsi_period,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_period=Math.max(2,Math.min(50,_.rsi_period+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_period=Math.max(2,Math.min(50,B)),D(["execution","policies"],$)},step:1,min:2,max:50}),l.jsx(Re,{label:"RSI Oversold",value:_.rsi_oversold,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_oversold=Math.max(10,Math.min(50,_.rsi_oversold+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_oversold=Math.max(10,Math.min(50,B)),D(["execution","policies"],$)},step:1,min:10,max:50}),l.jsx(Re,{label:"RSI Overbought",value:_.rsi_overbought,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_overbought=Math.max(50,Math.min(90,_.rsi_overbought+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_overbought=Math.max(50,Math.min(90,B)),D(["execution","policies"],$)},step:1,min:50,max:90}),l.jsx(Re,{label:"TP Pips",value:_.tp_pips,onAdjust:B=>{const $=p.execution.policies;$[K].tp_pips=Math.max(1,Math.min(100,_.tp_pips+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].tp_pips=Math.max(1,Math.min(100,B)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsx(Re,{label:"SL Pips",value:_.sl_pips,onAdjust:B=>{const $=p.execution.policies;$[K].sl_pips=Math.max(1,Math.min(100,_.sl_pips+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].sl_pips=Math.max(1,Math.min(100,B)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Side:"}),l.jsx("span",{style:{fontWeight:600,color:_.side==="buy"?"var(--success)":"var(--danger)"},children:_.side.toUpperCase()})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Regime:"}),l.jsx("span",{style:{fontWeight:600},children:_.regime})]})]}),_.type==="confirmed_cross"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Setup:"}),l.jsx("span",{style:{fontWeight:600},children:_.setup_id}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"(bi-directional)"})]})]})]},K)),g&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginTop:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",g]})})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[l.jsx("button",{className:"btn btn-secondary",onClick:I,disabled:i===1,children:" Back"}),l.jsxs("div",{style:{display:"flex",gap:12},children:[i<S&&l.jsx("button",{className:"btn btn-primary",onClick:k,disabled:!b(),children:i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple"?"Fine-Tune Settings ":"Next "}),(i>=4&&r.entryStyle!=="multiple"||i>=5&&r.entryStyle==="multiple")&&l.jsx("button",{className:"btn btn-success",onClick:U,disabled:c||J,style:{minWidth:160},children:c?"Saving...":" Save Configuration"})]})]})]})}function N0({profile:t}){var j,P,M;const[e,n]=R.useState([]),[i,s]=R.useState(null),[r,o]=R.useState(null),[a,u]=R.useState(null),[h,d]=R.useState(!1),[c,f]=R.useState(null),[g,y]=R.useState(null),[w,C]=R.useState(!1),[v,p]=R.useState(!0),[m,S]=R.useState(null),[b,N]=R.useState(!1),k=()=>{qa(t.path).then(y).catch(console.error)};R.useEffect(()=>{h0().then(x=>{n(x)}).catch(console.error),k()},[t.path]),R.useEffect(()=>{i&&i!=="custom"?c0(i,t.path).then(x=>u(x)).catch(console.error):u(null)},[i,t.path]),R.useEffect(()=>{if(w&&g){const x=g.effective_risk,E=g.risk,W=g.execution,V=g.trade_management,le=V==null?void 0:V.target,ae=W==null?void 0:W.policies;let ge=0,F=20,Z=!1,ue=.15,at=5,cn=100;if(ae){for(const We of ae)if("cooldown_minutes"in We&&(ge=We.cooldown_minutes),"sl_pips"in We&&(F=We.sl_pips),"swing_level_filter_enabled"in We&&(Z=We.swing_level_filter_enabled,ue=We.swing_danger_zone_pct??.15,at=We.swing_confirmation_bars??5,cn=We.swing_lookback_bars??100),ge>0||F!==20)break}S({max_lots:(x==null?void 0:x.max_lots)??(E==null?void 0:E.max_lots)??.01,min_stop_pips:(x==null?void 0:x.min_stop_pips)??(E==null?void 0:E.min_stop_pips)??5,max_spread_pips:(x==null?void 0:x.max_spread_pips)??(E==null?void 0:E.max_spread_pips)??2,max_trades_per_day:(x==null?void 0:x.max_trades_per_day)??(E==null?void 0:E.max_trades_per_day)??10,max_open_trades:(x==null?void 0:x.max_open_trades)??(E==null?void 0:E.max_open_trades)??5,cooldown_minutes_after_loss:(x==null?void 0:x.cooldown_minutes_after_loss)??(E==null?void 0:E.cooldown_minutes_after_loss)??0,target_pips:(le==null?void 0:le.pips_default)??.5,loop_poll_seconds:(W==null?void 0:W.loop_poll_seconds)??5,policy_cooldown_minutes:ge,policy_sl_pips:F,swing_level_filter_enabled:Z,swing_danger_zone_pct:ue,swing_confirmation_bars:at,swing_lookback_bars:cn})}},[w,g]);const I=async()=>{var x;if(!(!m||!g)){N(!0);try{const E=g.risk,W=g.effective_risk,V=g.execution,le=g.trade_management,ae=Math.min(m.max_lots,(E==null?void 0:E.max_lots)??m.max_lots),ge=Math.min(m.max_spread_pips,(E==null?void 0:E.max_spread_pips)??m.max_spread_pips),F=Math.min(m.max_trades_per_day,(E==null?void 0:E.max_trades_per_day)??m.max_trades_per_day),Z=Math.min(m.max_open_trades,(E==null?void 0:E.max_open_trades)??m.max_open_trades),ue=Math.max(m.min_stop_pips,(E==null?void 0:E.min_stop_pips)??0),at={...W||{},max_lots:ae,min_stop_pips:ue,max_spread_pips:ge,max_trades_per_day:F,max_open_trades:Z,cooldown_minutes_after_loss:Math.max(0,m.cooldown_minutes_after_loss)},cn={...le||{},target:{...(le==null?void 0:le.target)||{},pips_default:m.target_pips}},We=((x=V==null?void 0:V.policies)==null?void 0:x.map(Ot=>{const _={};return"cooldown_minutes"in Ot&&(_.cooldown_minutes=Math.max(0,m.policy_cooldown_minutes)),"sl_pips"in Ot&&(_.sl_pips=Math.max(1,m.policy_sl_pips)),Ot.type==="kt_cg_hybrid"&&(_.swing_level_filter_enabled=m.swing_level_filter_enabled,_.swing_danger_zone_pct=Math.max(.05,Math.min(.5,m.swing_danger_zone_pct)),_.swing_confirmation_bars=Math.max(2,Math.min(20,m.swing_confirmation_bars)),_.swing_lookback_bars=Math.max(20,Math.min(500,m.swing_lookback_bars))),Object.keys(_).length>0?{...Ot,..._}:Ot}))||[],_s={...V||{},loop_poll_seconds:Math.max(.5,m.loop_poll_seconds),policies:We};let At=g.active_preset_name||"";At.includes("(customized)")||(At=At?`${At} (customized)`:"custom (customized)");const Ss={...g,active_preset_name:At,effective_risk:at,trade_management:cn,execution:_s};await eu(t.path,Ss),f("Temporary settings applied successfully!"),k(),setTimeout(()=>f(null),3e3)}catch(E){f(`Error: ${E.message}`)}finally{N(!1)}}},U=async()=>{if(!(!i||i==="custom")){d(!0);try{const x=i==="vwap_trend"?{vwap_session_filter_enabled:v}:void 0;await d0(i,t.path,x),f(`Preset "${i}" applied successfully!`),k(),setTimeout(()=>f(null),3e3)}catch(x){f(`Error: ${x.message}`)}finally{d(!1)}}},O=(x,E)=>{E.stopPropagation(),o(r===x?null:x)},D=e.find(x=>x.id===i),H=g==null?void 0:g.active_preset_name,J=g==null?void 0:g.risk,G=g==null?void 0:g.effective_risk,z=g==null?void 0:g.execution;return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Presets"}),l.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:'Select a preset to preview changes, then apply to your profile. Click "Pros & Cons" to see details.'}),H&&l.jsxs("div",{className:"card mb-4",style:{borderColor:"var(--accent)",borderWidth:2,background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, var(--bg-secondary) 100%)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:4},children:"ACTIVE PRESET"}),l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--accent)"},children:H})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>C(!w),style:{fontSize:"0.8rem"},children:w?"Hide Settings":"View Settings"}),w&&l.jsx("button",{className:"btn btn-primary",onClick:I,disabled:b||!m,style:{fontSize:"0.8rem"},children:b?"Applying...":"Apply Temporary Settings"})]})]}),w&&J&&l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[G&&l.jsx("div",{style:{marginBottom:12,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Effective (used when running): preset risk capped by Profile Editor limits."}),m&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Lots (effective)"}),l.jsx("input",{type:"number",step:"0.01",min:"0.01",value:m.max_lots,onChange:x=>S({...m,max_lots:parseFloat(x.target.value)||.01}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_lots]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Min Stop Pips"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:m.min_stop_pips,onChange:x=>S({...m,min_stop_pips:parseFloat(x.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Floor: ",J.min_stop_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:m.max_spread_pips,onChange:x=>S({...m,max_spread_pips:parseFloat(x.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_spread_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Trades/Day"}),l.jsx("input",{type:"number",step:"1",min:"1",value:m.max_trades_per_day,onChange:x=>S({...m,max_trades_per_day:parseInt(x.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_trades_per_day]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Open Trades"}),l.jsx("input",{type:"number",step:"1",min:"1",value:m.max_open_trades,onChange:x=>S({...m,max_open_trades:parseInt(x.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_open_trades]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Loss (min)"}),l.jsx("input",{type:"number",step:"1",min:"0",value:m.cooldown_minutes_after_loss,onChange:x=>S({...m,cooldown_minutes_after_loss:parseInt(x.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Target Pips"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:m.target_pips,onChange:x=>S({...m,target_pips:parseFloat(x.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Stop Loss Pips"}),l.jsx("input",{type:"number",step:"1",min:"1",max:"500",value:m.policy_sl_pips,onChange:x=>S({...m,policy_sl_pips:parseFloat(x.target.value)||20}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Must be  Min Stop Pips (",m.min_stop_pips,")"]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Poll Interval (s)"}),l.jsx("input",{type:"number",step:"0.5",min:"0.5",value:m.loop_poll_seconds,onChange:x=>S({...m,loop_poll_seconds:parseFloat(x.target.value)||.5}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Trade (min)"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:m.policy_cooldown_minutes,onChange:x=>S({...m,policy_cooldown_minutes:parseFloat(x.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]})]}),m&&((j=z==null?void 0:z.policies)==null?void 0:j.some(x=>x.type==="kt_cg_hybrid"))&&l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:12},children:"Swing Level Filter (blocks trades near M15 swing highs/lows)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Swing Filter Enabled"}),l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:m.swing_level_filter_enabled,onChange:x=>S({...m,swing_level_filter_enabled:x.target.checked}),style:{width:18,height:18,cursor:"pointer"}}),l.jsx("span",{style:{fontWeight:600,color:m.swing_level_filter_enabled?"var(--success)":"var(--text-secondary)"},children:m.swing_level_filter_enabled?"ON":"OFF"})]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Danger Zone %"}),l.jsx("input",{type:"number",step:"0.01",min:"0.05",max:"0.50",value:m.swing_danger_zone_pct,onChange:x=>S({...m,swing_danger_zone_pct:parseFloat(x.target.value)||.15}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"0.15 = 15% of range"})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Confirmation Bars"}),l.jsx("input",{type:"number",step:"1",min:"2",max:"20",value:m.swing_confirmation_bars,onChange:x=>S({...m,swing_confirmation_bars:parseInt(x.target.value)||5}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"Bars before/after swing"})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Lookback Bars"}),l.jsx("input",{type:"number",step:"10",min:"20",max:"500",value:m.swing_lookback_bars,onChange:x=>S({...m,swing_lookback_bars:parseInt(x.target.value)||100}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsx("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:"M15 bars to scan"})]})]})]}),((P=z==null?void 0:z.policies)==null?void 0:P.length)>0&&l.jsxs("div",{style:{marginTop:12},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:8},children:"Active Policies:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:(M=z==null?void 0:z.policies)==null?void 0:M.map((x,E)=>l.jsxs("span",{style:{padding:"4px 8px",background:"var(--bg-tertiary)",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:[x.type,": ",x.id]},E))})]})]})]}),c&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:c})}),l.jsxs("div",{className:"grid-3 mb-4",children:[e.map(x=>{const E=H===x.id;return l.jsxs("div",{className:`preset-card ${i===x.id?"selected":""}`,onClick:()=>s(x.id),style:E?{borderColor:"var(--success)",borderWidth:2}:{},children:[E&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:x.name}),l.jsx("div",{className:"preset-description",children:x.description}),l.jsx("button",{className:"btn btn-secondary",style:{marginTop:8,fontSize:"0.75rem",padding:"4px 8px"},onClick:W=>O(x.id,W),children:r===x.id?"Hide":"Pros & Cons"}),r===x.id&&l.jsxs("div",{className:"proscons-dropdown",style:{marginTop:12,textAlign:"left"},children:[x.pros.length>0&&l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",fontSize:"0.8rem",marginBottom:4},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:x.pros.map((W,V)=>l.jsx("li",{style:{marginBottom:2},children:W},V))})]}),x.cons.length>0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",fontSize:"0.8rem",marginBottom:4},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:x.cons.map((W,V)=>l.jsx("li",{style:{marginBottom:2},children:W},V))})]})]})]},x.id)}),(()=>{const x=H==null?void 0:H.startsWith("Custom:");return l.jsxs("div",{className:`preset-card ${i==="custom"?"selected":""}`,onClick:()=>s("custom"),style:{borderStyle:"dashed",...x?{borderColor:"var(--success)",borderWidth:2}:{}},children:[x&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:"Custom"}),l.jsx("div",{className:"preset-description",children:x?`Currently running: ${H}`:"Use the wizard to create a custom configuration."})]})})()]}),i&&i!=="custom"&&a&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsxs("h3",{className:"card-title",style:{margin:0},children:["Preview: ",(D==null?void 0:D.name)||i]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[i==="vwap_trend"&&l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:"0.9rem"},children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Optional: Session Filter (London + NY)"}),l.jsxs("select",{value:v?"on":"off",onChange:x=>p(x.target.value==="on"),title:"Turn On to only allow trades during London (816 UTC) or NY (1321 UTC) sessions; Off to trade any time.",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)"},children:[l.jsx("option",{value:"on",children:"On"}),l.jsx("option",{value:"off",children:"Off"})]})]}),l.jsx("button",{className:"btn btn-primary",onClick:U,disabled:h,children:h?"Applying...":"Apply Preset"})]})]}),D&&(D.pros.length>0||D.cons.length>0)&&l.jsxs("div",{className:"grid-2 mb-4",children:[D.pros.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(16, 185, 129, 0.1)",borderRadius:6,border:"1px solid var(--success)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:8,fontSize:"0.85rem"},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.pros.map((x,E)=>l.jsx("li",{style:{marginBottom:4},children:x},E))})]}),D.cons.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(245, 158, 11, 0.1)",borderRadius:6,border:"1px solid var(--warning)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",marginBottom:8,fontSize:"0.85rem"},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.cons.map((x,E)=>l.jsx("li",{style:{marginBottom:4},children:x},E))})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12,fontSize:"0.8rem"},children:"These settings will be changed when you apply:"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(a.changes||a,null,2)})]}),i==="custom"&&l.jsx(P0,{profile:t,currentProfile:g,onComplete:()=>{f("Custom configuration saved!"),setTimeout(()=>f(null),3e3)}})]})}function z0({profile:t,authStatus:e,onAuthChange:n}){const[i,s]=R.useState(null),[r,o]=R.useState(!1),[a,u]=R.useState(null),[h,d]=R.useState(null),[c,f]=R.useState(0),[g,y]=R.useState(null),[w,C]=R.useState(""),[v,p]=R.useState(""),[m,S]=R.useState(""),[b,N]=R.useState(null),[k,I]=R.useState(!1),U=e[t.path]||!1,O=()=>{y(null),C(""),p(""),S(""),N(null)},D=async()=>{if(!v||v.length<4){N("Password must be at least 4 characters");return}if(v!==m){N("Passwords do not match");return}I(!0),N(null);try{await Xo(t.path,null,v),n(),O(),u("Password set successfully!"),setTimeout(()=>u(null),3e3)}catch(x){N(x.message)}finally{I(!1)}},H=async()=>{if(!w){N("Enter current password");return}if(!v||v.length<4){N("New password must be at least 4 characters");return}if(v!==m){N("New passwords do not match");return}I(!0),N(null);try{await Xo(t.path,w,v),n(),O(),u("Password changed successfully!"),setTimeout(()=>u(null),3e3)}catch(x){N(x.message)}finally{I(!1)}},J=async()=>{if(!w){N("Enter current password");return}I(!0),N(null);try{await u0(t.path,w),n(),O(),u("Password removed. Profile is now non-secure."),setTimeout(()=>u(null),3e3)}catch(x){N(x.message)}finally{I(!1)}};R.useEffect(()=>{s(null),d(null),qa(t.path).then(x=>{s(x),d(null)}).catch(x=>{d(x.message),s(null)})},[t.path,c]);const G=async()=>{if(i){o(!0),u(null);try{await eu(t.path,i),u("Profile saved!"),setTimeout(()=>u(null),2e3)}catch(x){u(`Error: ${x.message}`)}finally{o(!1)}}};if(!i)return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),h?l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Failed to load profile: ",h]}),l.jsx("button",{className:"btn btn-primary",onClick:()=>f(x=>x+1),children:"Retry"})]}):l.jsx("div",{className:"card",children:"Loading profile..."})]});const z=i.risk||{},j=i.execution||{},P=(x,E,W)=>{s({...i,[x]:{...i[x]||{},[E]:W}})},M=(x,E)=>{s({...i,[x]:E})};return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),a&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:a})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Basic Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Symbol"}),l.jsx("input",{value:i.symbol||"",onChange:x=>s({...i,symbol:x.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Pip Size"}),l.jsx("input",{type:"number",step:"0.001",value:i.pip_size||.01,onChange:x=>s({...i,pip_size:parseFloat(x.target.value)})})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Account Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Deposit amount and leverage ratio for your reference."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Deposit Amount ($)"}),l.jsx("input",{type:"number",placeholder:"e.g., 100000",value:i.deposit_amount||"",onChange:x=>M("deposit_amount",x.target.value?parseFloat(x.target.value):null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Leverage Ratio"}),l.jsxs("select",{value:i.leverage_ratio||"",onChange:x=>M("leverage_ratio",x.target.value?parseInt(x.target.value):null),children:[l.jsx("option",{value:"",children:"Select leverage..."}),l.jsx("option",{value:"50",children:"1:50"}),l.jsx("option",{value:"100",children:"1:100"}),l.jsx("option",{value:"200",children:"1:200"}),l.jsx("option",{value:"400",children:"1:400"}),l.jsx("option",{value:"500",children:"1:500"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Display Currency (Stats & Logs)"}),l.jsxs("select",{value:i.display_currency||"USD",onChange:x=>M("display_currency",x.target.value),children:[l.jsx("option",{value:"USD",children:"USD"}),l.jsx("option",{value:"JPY",children:"JPY"})]}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Profits and balances will be shown in this currency. JPY uses current rate from your symbol."})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Broker Connection"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Choose MetaTrader 5 (Windows) or OANDA (works on Mac/Linux and PaaS like Railway). OANDA is available in Japan and Canada."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Broker Type"}),l.jsxs("select",{value:i.broker_type||"mt5",onChange:x=>M("broker_type",x.target.value),children:[l.jsx("option",{value:"mt5",children:"MetaTrader 5 (MT5)"}),l.jsx("option",{value:"oanda",children:"OANDA"})]})]}),i.broker_type==="oanda"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA API Key"}),l.jsx("input",{type:"password",autoComplete:"off",placeholder:"Paste your OANDA API token",value:i.oanda_token||"",onChange:x=>M("oanda_token",x.target.value||null)}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Create a token in OANDA Practice or Live account: Account  Manage API Access."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Account ID (optional)"}),l.jsx("input",{type:"text",placeholder:"Leave blank to use first account",value:i.oanda_account_id||"",onChange:x=>M("oanda_account_id",x.target.value||null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Environment"}),l.jsxs("select",{value:i.oanda_environment||"practice",onChange:x=>M("oanda_environment",x.target.value),children:[l.jsx("option",{value:"practice",children:"Practice (demo)"}),l.jsx("option",{value:"live",children:"Live"})]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Risk Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16,marginTop:-8},children:"These limits are final and cannot be overridden by presets or the custom wizard."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Lots"}),l.jsx("input",{type:"number",step:"0.01",value:z.max_lots||.1,onChange:x=>P("risk","max_lots",parseFloat(x.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",value:z.max_spread_pips||2,onChange:x=>P("risk","max_spread_pips",parseFloat(x.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Trades/Day"}),l.jsx("input",{type:"number",value:z.max_trades_per_day||10,onChange:x=>P("risk","max_trades_per_day",parseInt(x.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Open Trades"}),l.jsx("input",{type:"number",min:1,max:20,value:z.max_open_trades??2,onChange:x=>P("risk","max_open_trades",parseInt(x.target.value)||1)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Cooldown After Loss (minutes)"}),l.jsx("input",{type:"number",min:0,max:120,value:z.cooldown_minutes_after_loss??0,onChange:x=>P("risk","cooldown_minutes_after_loss",parseInt(x.target.value)||0)})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:z.require_stop||!1,onChange:x=>P("risk","require_stop",x.target.checked),style:{width:"auto"}}),"Require Stop Loss"]})}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Min Stop Pips"}),l.jsx("input",{type:"number",step:"1",min:1,max:500,value:z.min_stop_pips??10,onChange:x=>P("risk","min_stop_pips",parseFloat(x.target.value)||10)}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Minimum stop loss distance in pips. Default is 10."})]})]})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Profile Security"}),U?l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile is protected by a password."}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>y("change"),children:"Change Password"}),l.jsx("button",{className:"btn btn-danger",onClick:()=>y("remove"),children:"Remove Password"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile has no password. Anyone with access to this computer can open it."}),l.jsx("button",{className:"btn btn-primary",onClick:()=>y("add"),children:"Add Password"})]})]}),g&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsxs("h3",{className:"card-title",children:[g==="add"&&"Add Password",g==="change"&&"Change Password",g==="remove"&&"Remove Password"]}),(g==="change"||g==="remove")&&l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:"Current Password"}),l.jsx("input",{type:"password",value:w,onChange:x=>C(x.target.value),placeholder:"Enter current password"})]}),(g==="add"||g==="change")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:g==="change"?"New Password":"Password"}),l.jsx("input",{type:"password",value:v,onChange:x=>p(x.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsxs("label",{children:["Confirm ",g==="change"?"New ":"","Password"]}),l.jsx("input",{type:"password",value:m,onChange:x=>S(x.target.value),placeholder:"Confirm password"})]})]}),g==="remove"&&l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12},children:"This will remove password protection. Anyone with access to this computer will be able to open this profile."}),(g==="add"||g==="change")&&l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--warning)",marginBottom:12,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."}),b&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:b}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:g==="remove"?"btn btn-danger":"btn btn-primary",onClick:g==="add"?D:g==="change"?H:J,disabled:k,children:k?"Processing...":g==="add"?"Set Password":g==="change"?"Change Password":"Remove Password"}),l.jsx("button",{className:"btn btn-secondary",onClick:O,disabled:k,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Execution Settings"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Loop Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:j.loop_poll_seconds||5,onChange:x=>P("execution","loop_poll_seconds",parseFloat(x.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Fast Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:j.loop_poll_seconds_fast||2,onChange:x=>P("execution","loop_poll_seconds_fast",parseFloat(x.target.value))})]})]}),l.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:["Policies: ",(j.policies||[]).length," configured. Use the Streamlit UI or edit JSON directly for full policy management."]})]}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{className:"btn btn-primary",onClick:G,disabled:r,children:r?"Saving...":"Save Profile"})})]})}function T0({profile:t}){const[e,n]=R.useState(null),[i,s]=R.useState({}),[r,o]=R.useState([]),[a,u]=R.useState(void 0),[h,d]=R.useState([]),[c,f]=R.useState(!1),[g,y]=R.useState(null),[w,C]=R.useState(null),[v,p]=R.useState(null),[m,S]=R.useState(null),[b,N]=R.useState(null),[k,I]=R.useState(null),[U,O]=R.useState("summary"),D=()=>{w0(t.name,t.path).then(n).catch(console.error),x0(t.name).then(s).catch(console.error),Xf(t.name,20,t.path).then(j=>{o(j.trades),u(j.display_currency)}).catch(console.error),y0(t.name,20).then(d).catch(console.error),_0(t.name,t.path).then(S).catch(console.error),S0(t.name,t.path).then(j=>I(j??null)).catch(()=>I(null))};R.useEffect(()=>{D()},[t.name,t.path]);const H=async()=>{f(!0),y(null);try{const j=await j0(t.name,t.path),P=[];j.trades_updated>0&&P.push(`${j.trades_updated} trade(s) synced`),j.trades_imported&&j.trades_imported>0&&P.push(`${j.trades_imported} trade(s) imported from broker history`),j.position_ids_backfilled&&j.position_ids_backfilled>0&&P.push(`${j.position_ids_backfilled} position ID(s) backfilled`),j.profit_backfilled&&j.profit_backfilled>0&&P.push(`${j.profit_backfilled} profit(s) updated from broker`),P.length>0?(y(P.join(", ")),D()):y("All trades up to date"),setTimeout(()=>y(null),4e3)}catch(j){y(`Sync error: ${j.message}`)}finally{f(!1)}},J=async j=>{const P=String(j.trade_id||"");if(P){C(P);try{const M=await Zf(t.name,P,t.path);y(`Closed trade: ${M.pips>=0?"+":""}${M.pips.toFixed(2)} pips`),D(),setTimeout(()=>y(null),3e3)}catch(M){y(`Close error: ${M.message}`)}finally{C(null),p(null)}}},G=Object.values(i).reduce((j,P)=>j+P,0),z=j=>j.exit_price===null||j.exit_price===void 0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Logs & Stats"}),l.jsx("button",{className:"btn btn-secondary",onClick:H,disabled:c,children:c?"Syncing...":"Sync from broker"})]}),g&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--accent)"},children:l.jsx("p",{children:g})}),v&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:0},children:[l.jsx("h3",{className:"card-title",children:"Confirm Close Trade"}),l.jsx("p",{style:{marginBottom:16},children:"Are you sure you want to close this trade?"}),l.jsx("div",{style:{background:"var(--bg-tertiary)",padding:12,borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{margin:0,fontSize:"0.9rem"},children:[l.jsx("strong",{children:"Side:"})," ",String(v.side||"").toUpperCase(),l.jsx("br",{}),l.jsx("strong",{children:"Entry:"})," ",typeof v.entry_price=="number"?v.entry_price.toFixed(3):"-",l.jsx("br",{}),l.jsx("strong",{children:"Size:"})," ",typeof v.size_lots=="number"?v.size_lots:"-"," lots"]})}),l.jsx("p",{style:{color:"var(--warning)",fontSize:"0.85rem",marginBottom:16},children:"This will send a close order to your broker immediately."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-danger",onClick:()=>J(v),disabled:w!==null,children:w?"Closing...":"Close Trade"}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>p(null),disabled:w!==null,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Quick Stats"}),e&&e.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.7rem",background:"var(--success)",color:"white",padding:"4px 8px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4,marginBottom:16},children:e&&e.source==="mt5"?"Stats from broker deal history (same as View  Reports in MT5)":"Stats from local records. Use a broker connection (MT5 or OANDA) to see live report data."}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.closed_trades)||0}),l.jsx("div",{className:"stat-label",children:"Closed Trades"}),e&&e.wins!=null&&e.losses!=null&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:[l.jsxs("span",{style:{color:"var(--success)"},children:[e.wins," W"]})," / ",l.jsxs("span",{style:{color:"var(--danger)"},children:[e.losses," L"]})]})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.win_rate)!=null?`${(e.win_rate*100).toFixed(1)}%`:"-"}),l.jsx("div",{className:"stat-label",children:"Win Rate"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.avg_pips)!=null?e.avg_pips.toFixed(3):"-"}),l.jsx("div",{className:"stat-label",children:"Avg Pips"})]})]}),e&&e.total_profit!=null||e&&(e.total_commission!=null||e.total_swap!=null)?l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)",display:"flex",flexWrap:"wrap",gap:24},children:[e&&e.total_profit!=null&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:e.total_profit>=0?"var(--success)":"var(--danger)"},children:[e.total_profit>=0?"+":"",e.total_profit.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_commission!=null&&e.total_commission!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_commission.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_swap!=null&&e.total_swap!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Swap"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_swap.toFixed(2)," ",e.display_currency||"USD"]})]})]}):null,e&&e.source==="database"&&e.trades_without_profit!=null&&e.trades_without_profit>0&&l.jsx("p",{style:{marginTop:12,marginBottom:0,fontSize:"0.85rem",color:"var(--warning)"},children:"Some trades lack profit data. Sync from broker and refresh to see stats from broker report."})]}),k&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Account Report"}),l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Balance, equity, and closed P/L from your broker (MT5 or OANDA)"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("div",{onClick:()=>O(U==="summary"?null:"summary"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Summary"}),l.jsx("span",{children:U==="summary"?"":""})]}),U==="summary"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Balance"}),l.jsx("br",{}),k.summary.balance.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Equity"}),l.jsx("br",{}),k.summary.equity.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Margin"}),l.jsx("br",{}),k.summary.margin.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Free Margin"}),l.jsx("br",{}),k.summary.free_margin.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>O(U==="closed"?null:"closed"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Closed P/L"}),l.jsx("span",{children:U==="closed"?"":""})]}),U==="closed"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12,fontSize:"0.9rem"},children:[l.jsxs("div",{children:["Total Profit: ",l.jsxs("span",{style:{color:k.closed_pl.total_profit>=0?"var(--success)":"var(--danger)",fontWeight:600},children:[k.closed_pl.total_profit>=0?"+":"",k.closed_pl.total_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Commission: ",k.closed_pl.total_commission.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Swap: ",k.closed_pl.total_swap.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Gross Profit: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.gross_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Gross Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.gross_loss.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Profit Factor: ",k.closed_pl.profit_factor.toFixed(2)]}),l.jsxs("div",{children:["Largest Win: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.largest_profit_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Largest Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.largest_loss_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Expected Payoff: ",k.closed_pl.expected_payoff.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>O(U==="longshort"?null:"longshort"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Long / Short"}),l.jsx("span",{children:U==="longshort"?"":""})]}),U==="longshort"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:["Long: ",k.long_short.long_wins,"W / ",k.long_short.long_trades-k.long_short.long_wins,"L (",(k.long_short.long_win_pct*100).toFixed(0),"% win)"]}),l.jsxs("div",{children:["Short: ",k.long_short.short_wins,"W / ",k.long_short.short_trades-k.long_short.short_wins,"L (",(k.long_short.short_win_pct*100).toFixed(0),"% win)"]})]})]})]})]}),m&&Object.keys(m.presets).length>0&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Performance by Preset"}),m.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16,marginTop:8,fontSize:"0.85rem"},children:["Preset names come from your local DB; win/loss and profit use broker history when available. For best accuracy, run ",l.jsx("strong",{children:"Sync from broker"})," so closed trades have position IDs, then refresh."]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(m.presets).sort(([,j],[,P])=>(P.total_pips||0)-(j.total_pips||0)).map(([j,P])=>{var E,W,V,le,ae,ge,F;const M=b===j,x=((E=Object.entries(m.presets).sort(([,Z],[,ue])=>(ue.total_pips||0)-(Z.total_pips||0))[0])==null?void 0:E[0])===j;return l.jsxs("div",{style:{border:`1px solid ${x?"var(--success)":"var(--border)"}`,borderRadius:8,overflow:"hidden",background:x?"rgba(34, 197, 94, 0.05)":"var(--bg-secondary)"},children:[l.jsxs("div",{onClick:()=>N(M?null:j),style:{padding:16,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontWeight:600},children:j}),x&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"BEST"})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4},children:[P.total_trades," trades | Win: ",P.win_rate!=null?`${(P.win_rate*100).toFixed(0)}%`:"-"," | Total: ",l.jsxs("span",{style:{color:(P.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[P.total_pips>=0?"+":"",((W=P.total_pips)==null?void 0:W.toFixed(1))||0," pips"]}),P.total_profit!=null&&l.jsxs(l.Fragment,{children:[" | Profit: ",l.jsxs("span",{style:{color:P.total_profit>=0?"var(--success)":"var(--danger)"},children:[P.total_profit>=0?"+":"",P.total_profit.toFixed(2)," ",m.display_currency||"USD"]})]}),P.total_commission!=null&&P.total_commission!==0&&l.jsxs(l.Fragment,{children:[" | Commission: ",P.total_commission.toFixed(2)," ",m.display_currency||"USD"]})]})]}),l.jsx("span",{style:{fontSize:"1.2rem"},children:M?"":""})]}),M&&l.jsx("div",{style:{padding:"0 16px 16px 16px",borderTop:"1px solid var(--border)",paddingTop:16},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Trades"}),l.jsx("div",{style:{fontWeight:700},children:P.total_trades})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win / Loss"}),l.jsxs("div",{style:{fontWeight:700},children:[l.jsx("span",{style:{color:"var(--success)"},children:P.wins})," /",l.jsx("span",{style:{color:"var(--danger)"},children:P.losses})]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Rate"}),l.jsx("div",{style:{fontWeight:700,color:(P.win_rate||0)>=.5?"var(--success)":"var(--warning)"},children:P.win_rate!=null?`${(P.win_rate*100).toFixed(1)}%`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Pips"}),l.jsxs("div",{style:{fontWeight:700,color:(P.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[P.total_pips>=0?"+":"",((V=P.total_pips)==null?void 0:V.toFixed(2))||0]})]}),P.total_profit!=null&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontWeight:700,color:P.total_profit>=0?"var(--success)":"var(--danger)"},children:[P.total_profit>=0?"+":"",P.total_profit.toFixed(2)," ",m.display_currency||"USD"]})]}),P.total_commission!=null&&P.total_commission!==0&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontWeight:700},children:[P.total_commission.toFixed(2)," ",m.display_currency||"USD"]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg Pips"}),l.jsx("div",{style:{fontWeight:700},children:((le=P.avg_pips)==null?void 0:le.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg R:R"}),l.jsx("div",{style:{fontWeight:700},children:((ae=P.avg_rr)==null?void 0:ae.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Best Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--success)"},children:P.best_trade!=null?`+${P.best_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Worst Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--danger)"},children:P.worst_trade!=null?`${P.worst_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Streak"}),l.jsx("div",{style:{fontWeight:700},children:P.win_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Loss Streak"}),l.jsx("div",{style:{fontWeight:700},children:P.loss_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Profit Factor"}),l.jsx("div",{style:{fontWeight:700,color:(P.profit_factor||0)>=1?"var(--success)":"var(--danger)"},children:((ge=P.profit_factor)==null?void 0:ge.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Max Drawdown"}),l.jsxs("div",{style:{fontWeight:700,color:"var(--warning)"},children:[((F=P.max_drawdown)==null?void 0:F.toFixed(1))||0," pips"]})]})]})})]},j)})})]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Rejection Breakdown"}),Object.entries(i).length===0?l.jsx("p",{style:{color:"var(--text-secondary)"},children:"No executions yet."}):Object.entries(i).map(([j,P])=>l.jsxs("div",{className:"breakdown-bar",children:[l.jsx("span",{className:"breakdown-label",children:j}),l.jsxs("div",{className:"breakdown-value",children:[l.jsx("div",{className:"breakdown-fill",style:{width:`${P/G*100}%`}}),l.jsx("span",{className:"breakdown-count",children:P})]})]},j))]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Recent Trades"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Side"}),l.jsx("th",{children:"Entry"}),l.jsx("th",{children:"Exit"}),l.jsx("th",{children:"Pips"}),l.jsx("th",{children:"R"}),l.jsx("th",{children:"Profit"}),l.jsx("th",{children:"Source"}),l.jsx("th",{children:"Exit Reason"}),l.jsx("th",{children:"Action"})]})}),l.jsx("tbody",{children:r.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No trades yet."})}):r.map((j,P)=>{const M=String(j.opened_by||""),x=String(j.exit_reason||""),W=(V=>{if(!V)return{text:"-",color:"inherit"};switch(V){case"hit_take_profit":return{text:"TP",color:"var(--success)"};case"hit_stop_loss":return{text:"SL",color:"var(--danger)"};case"user_closed_early":return{text:"User",color:"var(--warning)"};case"UI_manual_close":return{text:"UI",color:"var(--accent)"};case"mt5_history_import":return{text:"Imported",color:"var(--text-secondary)"};default:return{text:V.replace(/_/g," "),color:"var(--text-secondary)"}}})(x);return l.jsxs("tr",{children:[l.jsx("td",{children:String(j.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(j.side||"")}),l.jsx("td",{children:typeof j.entry_price=="number"?j.entry_price.toFixed(3):"-"}),l.jsx("td",{children:typeof j.exit_price=="number"?j.exit_price.toFixed(3):"-"}),l.jsx("td",{style:{color:typeof j.pips=="number"?j.pips>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof j.pips=="number"?j.pips.toFixed(2):"-"}),l.jsx("td",{children:typeof j.r_multiple=="number"?j.r_multiple.toFixed(2):"-"}),l.jsx("td",{style:{color:typeof j.profit_display=="number"?j.profit_display>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof j.profit_display=="number"?`${j.profit_display>=0?"+":""}${j.profit_display.toFixed(2)} ${a||(e==null?void 0:e.display_currency)||"USD"}`:"-"}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 6px",borderRadius:4,background:M==="program"?"rgba(59, 130, 246, 0.2)":"rgba(156, 163, 175, 0.2)",color:M==="program"?"var(--accent)":"var(--text-secondary)"},children:M==="program"?"Bot":M==="manual"?"Manual":"-"})}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",color:W.color},children:W.text})}),l.jsx("td",{children:z(j)&&(j.mt5_order_id||j.mt5_position_id)?l.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>p(j),disabled:w===String(j.trade_id),children:"Close"}):z(j)?l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No position ID"}):l.jsx("span",{style:{color:"var(--success)",fontSize:"0.75rem"},children:"Closed"})})]},P)})})]})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Recent Executions"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Mode"}),l.jsx("th",{children:"Placed"}),l.jsx("th",{children:"Reason"})]})}),l.jsx("tbody",{children:h.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No executions yet."})}):h.map((j,P)=>l.jsxs("tr",{children:[l.jsx("td",{children:String(j.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(j.mode||"")}),l.jsx("td",{children:j.placed?"Yes":"No"}),l.jsx("td",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:String(j.reason||"")})]},P))})]})})]})]})}function R0(){const[t,e]=R.useState("quickstart"),n=s=>{e(t===s?null:s)},i=({id:s,title:r,icon:o,children:a})=>l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>n(s),children:[l.jsxs("h3",{className:"card-title",style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[l.jsx("span",{style:{fontSize:"1.3rem"},children:o}),r]}),l.jsx("span",{style:{color:"var(--accent)",fontSize:"1.2rem"},children:t===s?"":"+"})]}),t===s&&l.jsx("div",{style:{marginTop:16},children:a})]});return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Help / Guide"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:24},children:"Welcome to the USDJPY Trading Assistant! This guide will help you get started and understand how to use the bot effectively."}),l.jsxs(i,{id:"quickstart",title:"Quick Start (5 Steps)",icon:"",children:[l.jsx("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,marginBottom:16},children:l.jsxs("ol",{style:{margin:0,paddingLeft:24,lineHeight:2.2},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Select or create an account"})," using the sidebar dropdown. Each account has its own settings and trade history."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Presets"})," and pick a preset that matches your style (start with ",l.jsx("em",{children:"Conservative Scalping"})," if unsure), then click ",l.jsx("strong",{children:"Apply Preset"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Run / Status"}),", set the mode to ",l.jsx("strong",{children:"ARMED_AUTO_DEMO"}),", then click ",l.jsx("strong",{children:"Start Loop"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Watch the log"})," - the bot will show heartbeats every few seconds and log its trading decisions."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Check Logs & Stats"})," to see your trades, win rate, and performance metrics."]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Tip:"})," The bot only trades on demo accounts for safety. For MT5, have the terminal running and connected; for OANDA, set your API key in Profile Editor."]})]}),l.jsxs(i,{id:"presets",title:"Understanding Presets",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"Presets are pre-configured trading strategies. Each preset has different characteristics:"}),l.jsx("div",{className:"table-container",style:{marginBottom:16},children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Preset"}),l.jsx("th",{children:"Style"}),l.jsx("th",{children:"Trades/Day"}),l.jsx("th",{children:"Target"}),l.jsx("th",{children:"Risk Level"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Conservative Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--success)"},children:"Low"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Aggressive Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"15-25"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--danger)"},children:"High"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Moderate Swing"})}),l.jsx("td",{children:"Longer holds"}),l.jsx("td",{children:"2-5"}),l.jsx("td",{children:"20 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"RSI Mean Reversion"})}),l.jsx("td",{children:"Counter-trend"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"10 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Custom"})}),l.jsx("td",{children:"Your choice"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Configurable"})]})]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Recommendation:"})," Start with ",l.jsx("em",{children:"Conservative Scalping"})," to see how the bot works with minimal risk. Once comfortable, try other presets or create a custom configuration."]})]}),l.jsx(i,{id:"dashboard",title:"Reading the Dashboard",icon:"",children:l.jsxs("div",{className:"grid-2",style:{gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Run / Status Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Status:"})," Shows if the trading loop is running or stopped"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mode:"})," DISARMED (no trades), ARMED_MANUAL_CONFIRM (prompts before trading), ARMED_AUTO_DEMO (fully automated)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Kill Switch:"})," Emergency stop - prevents any new trades"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Log:"})," Real-time output showing heartbeats and decisions"]})]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Logs & Stats Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Quick Stats:"})," Closed trades, win rate, average pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Rejection Breakdown:"})," Why trades weren't taken (spread, filters, etc.)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Recent Trades:"})," Your trade history with P/L"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sync from broker:"})," Updates trade data from your broker (MT5 or OANDA)"]})]})]})]})}),l.jsxs(i,{id:"analysis",title:"Technical Analysis Page",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"The Analysis page provides real-time technical analysis across three timeframes (H4, M15, M1):"}),l.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Regime:"})," Current market trend - BULL (uptrend), BEAR (downtrend), or SIDEWAYS"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"RSI:"})," Relative Strength Index - Oversold (below 30, potential buy), Overbought (above 70, potential sell), Neutral"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"MACD:"})," Momentum indicator - Positive (bullish momentum), Negative (bearish momentum)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"ATR:"})," Average True Range - Elevated (high volatility), Normal, Low (quiet market)"]})]}),l.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Click on any timeframe card to expand and see detailed indicator values. The page auto-refreshes every 30 seconds."})]}),l.jsx(i,{id:"faq",title:"Common Questions",icon:"",children:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"Why isn't the bot trading?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Check these common reasons:",l.jsx("br",{})," ",l.jsx("strong",{children:"Spread too wide:"})," The bot waits for good spreads to avoid slippage",l.jsx("br",{})," ",l.jsx("strong",{children:"Alignment filters:"})," Multi-timeframe conditions must match",l.jsx("br",{})," ",l.jsx("strong",{children:"Max trades reached:"})," Daily trade limit hit",l.jsx("br",{})," ",l.jsx("strong",{children:"Kill switch on:"})," Check the Run page",l.jsx("br",{})," ",l.jsx("strong",{children:"Market closed:"})," Forex markets close on weekends"]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"How do I close a trade?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Go to ",l.jsx("strong",{children:"Logs & Stats"}),", find your open trade in the Recent Trades table, and click the ",l.jsx("strong",{children:"Close"})," button. You'll be asked to confirm before the close order is sent."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"What does the kill switch do?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["The kill switch ",l.jsx("strong",{children:"immediately stops all new trades"})," from being placed. It does not close existing positions - use the Close button for that. Toggle it on if you need to pause the bot quickly."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"My trade history is missing?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Click ",l.jsx("strong",{children:"Sync from broker"})," on the Logs & Stats page. This will import any trades that were opened or closed in your broker platform, including trades closed by hitting TP/SL."]})]})]})}),l.jsx(i,{id:"glossary",title:"Glossary",icon:"",children:l.jsx("div",{className:"grid-2",style:{gap:12},children:[{term:"Pip",def:"Smallest price move. For USDJPY, 1 pip = 0.01 (e.g., 154.50 to 154.51)"},{term:"Lot",def:"Trade size. 0.01 = micro lot (1,000 units), 0.1 = mini lot (10,000 units), 1.0 = standard lot (100,000 units)"},{term:"Spread",def:"Difference between buy (ask) and sell (bid) price. Lower = better."},{term:"EMA",def:"Exponential Moving Average - weighted average of recent prices, responds quickly to changes"},{term:"SMA",def:"Simple Moving Average - equal-weighted average of prices over a period"},{term:"RSI",def:"Relative Strength Index (0-100). Below 30 = oversold, above 70 = overbought"},{term:"MACD",def:"Moving Average Convergence Divergence - momentum indicator showing trend direction"},{term:"ATR",def:"Average True Range - measures market volatility"},{term:"Regime",def:"Current market trend: bullish (up), bearish (down), or sideways"},{term:"Stop Loss (SL)",def:"Price level where trade closes to limit losses"},{term:"Take Profit (TP)",def:"Price level where trade closes to lock in profits"},{term:"R-Multiple",def:"Risk-adjusted return. R of 2 means you made 2x your risked amount"}].map((s,r)=>l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("strong",{style:{color:"var(--accent)"},children:[s.term,":"]}),l.jsx("span",{style:{marginLeft:8,color:"var(--text-secondary)",fontSize:"0.9rem"},children:s.def})]},r))})}),l.jsxs("div",{className:"card",style:{borderColor:"var(--warning)",background:"rgba(245, 158, 11, 0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--warning)",display:"flex",alignItems:"center",gap:8},children:" Important Safety Notice"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:["This bot is designed for ",l.jsx("strong",{children:"demo trading only"}),". It will refuse to trade on live accounts."]}),l.jsx("li",{children:"Trading carries risk. Past performance does not guarantee future results."}),l.jsx("li",{children:"Always monitor the bot and understand what it's doing before trusting it with larger positions."}),l.jsx("li",{children:"Start with conservative settings and small position sizes while you learn."})]})]})]})}ql.createRoot(document.getElementById("root")).render(l.jsx(yp.StrictMode,{children:l.jsx(M0,{})}));
