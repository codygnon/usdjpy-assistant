(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fc={exports:{}},Ir={},pc={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),np=Symbol.for("react.portal"),ip=Symbol.for("react.fragment"),sp=Symbol.for("react.strict_mode"),rp=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),op=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),up=Symbol.for("react.suspense"),hp=Symbol.for("react.memo"),cp=Symbol.for("react.lazy"),eu=Symbol.iterator;function dp(t){return t===null||typeof t!="object"?null:(t=eu&&t[eu]||t["@@iterator"],typeof t=="function"?t:null)}var mc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gc=Object.assign,vc={};function pi(t,e,n){this.props=t,this.context=e,this.refs=vc,this.updater=n||mc}pi.prototype.isReactComponent={};pi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yc(){}yc.prototype=pi.prototype;function Xo(t,e,n){this.props=t,this.context=e,this.refs=vc,this.updater=n||mc}var qo=Xo.prototype=new yc;qo.constructor=Xo;gc(qo,pi.prototype);qo.isPureReactComponent=!0;var tu=Array.isArray,xc=Object.prototype.hasOwnProperty,Zo={current:null},wc={key:!0,ref:!0,__self:!0,__source:!0};function _c(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)xc.call(e,i)&&!wc.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),h=0;h<a;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:fs,type:t,key:r,ref:o,props:s,_owner:Zo.current}}function fp(t,e){return{$$typeof:fs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ea(t){return typeof t=="object"&&t!==null&&t.$$typeof===fs}function pp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nu=/\/+/g;function ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pp(""+t.key):e.toString(36)}function Qs(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fs:case np:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+ll(o,0):i,tu(s)?(n="",t!=null&&(n=t.replace(nu,"$&/")+"/"),Qs(s,e,n,"",function(h){return h})):s!=null&&(ea(s)&&(s=fp(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",tu(t))for(var a=0;a<t.length;a++){r=t[a];var u=i+ll(r,a);o+=Qs(r,e,n,u,s)}else if(u=dp(t),typeof u=="function")for(t=u.call(t),a=0;!(r=t.next()).done;)r=r.value,u=i+ll(r,a++),o+=Qs(r,e,n,u,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function js(t,e,n){if(t==null)return t;var i=[],s=0;return Qs(t,i,"","",function(r){return e.call(n,r,s++)}),i}function mp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var De={current:null},Js={transition:null},gp={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Js,ReactCurrentOwner:Zo};function Sc(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:js,forEach:function(t,e,n){js(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return js(t,function(){e++}),e},toArray:function(t){return js(t,function(e){return e})||[]},only:function(t){if(!ea(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=pi;Y.Fragment=ip;Y.Profiler=rp;Y.PureComponent=Xo;Y.StrictMode=sp;Y.Suspense=up;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gp;Y.act=Sc;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=gc({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Zo.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)xc.call(e,u)&&!wc.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){a=Array(u);for(var h=0;h<u;h++)a[h]=arguments[h+2];i.children=a}return{$$typeof:fs,type:t.type,key:s,ref:r,props:i,_owner:o}};Y.createContext=function(t){return t={$$typeof:op,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lp,_context:t},t.Consumer=t};Y.createElement=_c;Y.createFactory=function(t){var e=_c.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:ap,render:t}};Y.isValidElement=ea;Y.lazy=function(t){return{$$typeof:cp,_payload:{_status:-1,_result:t},_init:mp}};Y.memo=function(t,e){return{$$typeof:hp,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Js.transition;Js.transition={};try{t()}finally{Js.transition=e}};Y.unstable_act=Sc;Y.useCallback=function(t,e){return De.current.useCallback(t,e)};Y.useContext=function(t){return De.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return De.current.useDeferredValue(t)};Y.useEffect=function(t,e){return De.current.useEffect(t,e)};Y.useId=function(){return De.current.useId()};Y.useImperativeHandle=function(t,e,n){return De.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return De.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return De.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return De.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return De.current.useReducer(t,e,n)};Y.useRef=function(t){return De.current.useRef(t)};Y.useState=function(t){return De.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return De.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return De.current.useTransition()};Y.version="18.3.1";pc.exports=Y;var R=pc.exports;const vp=tp(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=R,xp=Symbol.for("react.element"),wp=Symbol.for("react.fragment"),_p=Object.prototype.hasOwnProperty,Sp=yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function jc(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)_p.call(e,i)&&!jp.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:xp,type:t,key:r,ref:o,props:s,_owner:Sp.current}}Ir.Fragment=wp;Ir.jsx=jc;Ir.jsxs=jc;fc.exports=Ir;var l=fc.exports,ql={},bc={exports:{}},Ze={},kc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(w,_){var I=w.length;w.push(_);e:for(;0<I;){var U=I-1>>>1,V=w[U];if(0<s(V,_))w[U]=_,w[I]=V,I=U;else break e}}function n(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var _=w[0],I=w.pop();if(I!==_){w[0]=I;e:for(var U=0,V=w.length,pe=V>>>1;U<pe;){var oe=2*(U+1)-1,we=w[oe],F=oe+1,ee=w[F];if(0>s(we,I))F<V&&0>s(ee,we)?(w[U]=ee,w[F]=I,U=F):(w[U]=we,w[oe]=I,U=oe);else if(F<V&&0>s(ee,I))w[U]=ee,w[F]=I,U=F;else break e}}return _}function s(w,_){var I=w.sortIndex-_.sortIndex;return I!==0?I:w.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],h=[],c=1,d=null,f=3,m=!1,y=!1,x=!1,M=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(w){for(var _=n(h);_!==null;){if(_.callback===null)i(h);else if(_.startTime<=w)i(h),_.sortIndex=_.expirationTime,e(u,_);else break;_=n(h)}}function b(w){if(x=!1,v(w),!y)if(n(u)!==null)y=!0,S(P);else{var _=n(h);_!==null&&C(b,_.startTime-w)}}function P(w,_){y=!1,x&&(x=!1,g(L),L=-1),m=!0;var I=f;try{for(v(_),d=n(u);d!==null&&(!(d.expirationTime>_)||w&&!D());){var U=d.callback;if(typeof U=="function"){d.callback=null,f=d.priorityLevel;var V=U(d.expirationTime<=_);_=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(u)&&i(u),v(_)}else i(u);d=n(u)}if(d!==null)var pe=!0;else{var oe=n(h);oe!==null&&C(b,oe.startTime-_),pe=!1}return pe}finally{d=null,f=I,m=!1}}var E=!1,k=null,L=-1,W=5,O=-1;function D(){return!(t.unstable_now()-O<W)}function H(){if(k!==null){var w=t.unstable_now();O=w;var _=!0;try{_=k(!0,w)}finally{_?J():(E=!1,k=null)}}else E=!1}var J;if(typeof p=="function")J=function(){p(H)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,N=G.port2;G.port1.onmessage=H,J=function(){N.postMessage(null)}}else J=function(){M(H,0)};function S(w){k=w,E||(E=!0,J())}function C(w,_){L=M(function(){w(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(w){w.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,S(P))},t.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<w?Math.floor(1e3/w):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(w){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var I=f;f=_;try{return w()}finally{f=I}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(w,_){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var I=f;f=w;try{return _()}finally{f=I}},t.unstable_scheduleCallback=function(w,_,I){var U=t.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?U+I:U):I=U,w){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=I+V,w={id:c++,callback:_,priorityLevel:w,startTime:I,expirationTime:V,sortIndex:-1},I>U?(w.sortIndex=I,e(h,w),n(u)===null&&w===n(h)&&(x?(g(L),L=-1):x=!0,C(b,I-U))):(w.sortIndex=V,e(u,w),y||m||(y=!0,S(P))),w},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(w){var _=f;return function(){var I=f;f=_;try{return w.apply(this,arguments)}finally{f=I}}}})(Mc);kc.exports=Mc;var bp=kc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=R,qe=bp;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cc=new Set,Ki={};function En(t,e){si(t,e),si(t+"Capture",e)}function si(t,e){for(Ki[t]=e,t=0;t<e.length;t++)Cc.add(e[t])}var zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=Object.prototype.hasOwnProperty,Mp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iu={},su={};function Cp(t){return Zl.call(su,t)?!0:Zl.call(iu,t)?!1:Mp.test(t)?su[t]=!0:(iu[t]=!0,!1)}function Ep(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pp(t,e,n,i){if(e===null||typeof e>"u"||Ep(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $e(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ne[t]=new $e(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ne[e]=new $e(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ne[t]=new $e(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ne[t]=new $e(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ne[t]=new $e(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ne[t]=new $e(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ne[t]=new $e(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ne[t]=new $e(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ne[t]=new $e(t,5,!1,t.toLowerCase(),null,!1,!1)});var ta=/[\-:]([a-z])/g;function na(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ta,na);Ne[e]=new $e(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ta,na);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ta,na);Ne[e]=new $e(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new $e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ne[t]=new $e(t,1,!1,t.toLowerCase(),null,!0,!0)});function ia(t,e,n,i){var s=Ne.hasOwnProperty(e)?Ne[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pp(e,n,s,i)&&(n=null),i||s===null?Cp(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var It=kp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bs=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),Bn=Symbol.for("react.fragment"),sa=Symbol.for("react.strict_mode"),eo=Symbol.for("react.profiler"),Ec=Symbol.for("react.provider"),Pc=Symbol.for("react.context"),ra=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),no=Symbol.for("react.suspense_list"),la=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),Nc=Symbol.for("react.offscreen"),ru=Symbol.iterator;function wi(t){return t===null||typeof t!="object"?null:(t=ru&&t[ru]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,ol;function Pi(t){if(ol===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ol=e&&e[1]||""}return`
`+ol+t}var al=!1;function ul(t,e){if(!t||al)return"";al=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{al=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pi(t):""}function Np(t){switch(t.tag){case 5:return Pi(t.type);case 16:return Pi("Lazy");case 13:return Pi("Suspense");case 19:return Pi("SuspenseList");case 0:case 2:case 15:return t=ul(t.type,!1),t;case 11:return t=ul(t.type.render,!1),t;case 1:return t=ul(t.type,!0),t;default:return""}}function io(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bn:return"Fragment";case Fn:return"Portal";case eo:return"Profiler";case sa:return"StrictMode";case to:return"Suspense";case no:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pc:return(t.displayName||"Context")+".Consumer";case Ec:return(t._context.displayName||"Context")+".Provider";case ra:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case la:return e=t.displayName||null,e!==null?e:io(t.type)||"Memo";case Wt:e=t._payload,t=t._init;try{return io(t(e))}catch{}}return null}function zp(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return io(e);case 8:return e===sa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function sn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zc(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tp(t){var e=zc(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ks(t){t._valueTracker||(t._valueTracker=Tp(t))}function Tc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zc(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function ar(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function so(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lu(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=sn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rc(t,e){e=e.checked,e!=null&&ia(t,"checked",e,!1)}function ro(t,e){Rc(t,e);var n=sn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lo(t,e.type,n):e.hasOwnProperty("defaultValue")&&lo(t,e.type,sn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ou(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lo(t,e,n){(e!=="number"||ar(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ni=Array.isArray;function Gn(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+sn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function oo(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function au(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(Ni(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:sn(n)}}function Lc(t,e){var n=sn(e.value),i=sn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function uu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ic(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ao(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ic(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ms,Fc=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ms.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rp=["Webkit","ms","Moz","O"];Object.keys(Ri).forEach(function(t){Rp.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ri[e]=Ri[t]})});function Bc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ri.hasOwnProperty(t)&&Ri[t]?(""+e).trim():e+"px"}function Ac(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Bc(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var Lp=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uo(t,e){if(e){if(Lp[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function ho(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=null;function oa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fo=null,Xn=null,qn=null;function hu(t){if(t=gs(t)){if(typeof fo!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Dr(e),fo(t.stateNode,t.type,e))}}function Oc(t){Xn?qn?qn.push(t):qn=[t]:Xn=t}function Dc(){if(Xn){var t=Xn,e=qn;if(qn=Xn=null,hu(t),e)for(t=0;t<e.length;t++)hu(e[t])}}function $c(t,e){return t(e)}function Wc(){}var hl=!1;function Uc(t,e,n){if(hl)return t(e,n);hl=!0;try{return $c(t,e,n)}finally{hl=!1,(Xn!==null||qn!==null)&&(Wc(),Dc())}}function Qi(t,e){var n=t.stateNode;if(n===null)return null;var i=Dr(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var po=!1;if(zt)try{var _i={};Object.defineProperty(_i,"passive",{get:function(){po=!0}}),window.addEventListener("test",_i,_i),window.removeEventListener("test",_i,_i)}catch{po=!1}function Ip(t,e,n,i,s,r,o,a,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(c){this.onError(c)}}var Li=!1,ur=null,hr=!1,mo=null,Fp={onError:function(t){Li=!0,ur=t}};function Bp(t,e,n,i,s,r,o,a,u){Li=!1,ur=null,Ip.apply(Fp,arguments)}function Ap(t,e,n,i,s,r,o,a,u){if(Bp.apply(this,arguments),Li){if(Li){var h=ur;Li=!1,ur=null}else throw Error(T(198));hr||(hr=!0,mo=h)}}function Pn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cu(t){if(Pn(t)!==t)throw Error(T(188))}function Op(t){var e=t.alternate;if(!e){if(e=Pn(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return cu(s),t;if(r===i)return cu(s),e;r=r.sibling}throw Error(T(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==i)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Hc(t){return t=Op(t),t!==null?Kc(t):null}function Kc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kc(t);if(e!==null)return e;t=t.sibling}return null}var Yc=qe.unstable_scheduleCallback,du=qe.unstable_cancelCallback,Dp=qe.unstable_shouldYield,$p=qe.unstable_requestPaint,de=qe.unstable_now,Wp=qe.unstable_getCurrentPriorityLevel,aa=qe.unstable_ImmediatePriority,Qc=qe.unstable_UserBlockingPriority,cr=qe.unstable_NormalPriority,Up=qe.unstable_LowPriority,Jc=qe.unstable_IdlePriority,Fr=null,_t=null;function Vp(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Fr,t,void 0,(t.current.flags&128)===128)}catch{}}var ct=Math.clz32?Math.clz32:Yp,Hp=Math.log,Kp=Math.LN2;function Yp(t){return t>>>=0,t===0?32:31-(Hp(t)/Kp|0)|0}var Cs=64,Es=4194304;function zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function dr(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=zi(a):(r&=o,r!==0&&(i=zi(r)))}else o=n&~s,o!==0?i=zi(o):r!==0&&(i=zi(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ct(e),s=1<<n,i|=t[n],e&=~s;return i}function Qp(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jp(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-ct(r),a=1<<o,u=s[o];u===-1?(!(a&n)||a&i)&&(s[o]=Qp(a,e)):u<=e&&(t.expiredLanes|=a),r&=~a}}function go(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Gc(){var t=Cs;return Cs<<=1,!(Cs&4194240)&&(Cs=64),t}function cl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ps(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ct(e),t[e]=n}function Gp(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ct(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function ua(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ct(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var q=0;function Xc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qc,ha,Zc,ed,td,vo=!1,Ps=[],Jt=null,Gt=null,Xt=null,Ji=new Map,Gi=new Map,Vt=[],Xp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(t,e){switch(t){case"focusin":case"focusout":Jt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Xt=null;break;case"pointerover":case"pointerout":Ji.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gi.delete(e.pointerId)}}function Si(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=gs(e),e!==null&&ha(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function qp(t,e,n,i,s){switch(e){case"focusin":return Jt=Si(Jt,t,e,n,i,s),!0;case"dragenter":return Gt=Si(Gt,t,e,n,i,s),!0;case"mouseover":return Xt=Si(Xt,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ji.set(r,Si(Ji.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Gi.set(r,Si(Gi.get(r)||null,t,e,n,i,s)),!0}return!1}function nd(t){var e=dn(t.target);if(e!==null){var n=Pn(e);if(n!==null){if(e=n.tag,e===13){if(e=Vc(n),e!==null){t.blockedOn=e,td(t.priority,function(){Zc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yo(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);co=i,n.target.dispatchEvent(i),co=null}else return e=gs(n),e!==null&&ha(e),t.blockedOn=n,!1;e.shift()}return!0}function pu(t,e,n){Gs(t)&&n.delete(e)}function Zp(){vo=!1,Jt!==null&&Gs(Jt)&&(Jt=null),Gt!==null&&Gs(Gt)&&(Gt=null),Xt!==null&&Gs(Xt)&&(Xt=null),Ji.forEach(pu),Gi.forEach(pu)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,vo||(vo=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,Zp)))}function Xi(t){function e(s){return ji(s,t)}if(0<Ps.length){ji(Ps[0],t);for(var n=1;n<Ps.length;n++){var i=Ps[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Jt!==null&&ji(Jt,t),Gt!==null&&ji(Gt,t),Xt!==null&&ji(Xt,t),Ji.forEach(e),Gi.forEach(e),n=0;n<Vt.length;n++)i=Vt[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Vt.length&&(n=Vt[0],n.blockedOn===null);)nd(n),n.blockedOn===null&&Vt.shift()}var Zn=It.ReactCurrentBatchConfig,fr=!0;function em(t,e,n,i){var s=q,r=Zn.transition;Zn.transition=null;try{q=1,ca(t,e,n,i)}finally{q=s,Zn.transition=r}}function tm(t,e,n,i){var s=q,r=Zn.transition;Zn.transition=null;try{q=4,ca(t,e,n,i)}finally{q=s,Zn.transition=r}}function ca(t,e,n,i){if(fr){var s=yo(t,e,n,i);if(s===null)_l(t,e,i,pr,n),fu(t,i);else if(qp(s,t,e,n,i))i.stopPropagation();else if(fu(t,i),e&4&&-1<Xp.indexOf(t)){for(;s!==null;){var r=gs(s);if(r!==null&&qc(r),r=yo(t,e,n,i),r===null&&_l(t,e,i,pr,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else _l(t,e,i,null,n)}}var pr=null;function yo(t,e,n,i){if(pr=null,t=oa(i),t=dn(t),t!==null)if(e=Pn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pr=t,null}function id(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wp()){case aa:return 1;case Qc:return 4;case cr:case Up:return 16;case Jc:return 536870912;default:return 16}default:return 16}}var Kt=null,da=null,Xs=null;function sd(){if(Xs)return Xs;var t,e=da,n=e.length,i,s="value"in Kt?Kt.value:Kt.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Xs=s.slice(t,1<i?1-i:void 0)}function qs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ns(){return!0}function mu(){return!1}function et(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ns:mu,this.isPropagationStopped=mu,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),e}var mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=et(mi),ms=he({},mi,{view:0,detail:0}),nm=et(ms),dl,fl,bi,Br=he({},ms,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(dl=t.screenX-bi.screenX,fl=t.screenY-bi.screenY):fl=dl=0,bi=t),dl)},movementY:function(t){return"movementY"in t?t.movementY:fl}}),gu=et(Br),im=he({},Br,{dataTransfer:0}),sm=et(im),rm=he({},ms,{relatedTarget:0}),pl=et(rm),lm=he({},mi,{animationName:0,elapsedTime:0,pseudoElement:0}),om=et(lm),am=he({},mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),um=et(am),hm=he({},mi,{data:0}),vu=et(hm),cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fm[t])?!!e[t]:!1}function pa(){return pm}var mm=he({},ms,{key:function(t){if(t.key){var e=cm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gm=et(mm),vm=he({},Br,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yu=et(vm),ym=he({},ms,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),xm=et(ym),wm=he({},mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_m=et(wm),Sm=he({},Br,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jm=et(Sm),bm=[9,13,27,32],ma=zt&&"CompositionEvent"in window,Ii=null;zt&&"documentMode"in document&&(Ii=document.documentMode);var km=zt&&"TextEvent"in window&&!Ii,rd=zt&&(!ma||Ii&&8<Ii&&11>=Ii),xu=" ",wu=!1;function ld(t,e){switch(t){case"keyup":return bm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function od(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var An=!1;function Mm(t,e){switch(t){case"compositionend":return od(e);case"keypress":return e.which!==32?null:(wu=!0,xu);case"textInput":return t=e.data,t===xu&&wu?null:t;default:return null}}function Cm(t,e){if(An)return t==="compositionend"||!ma&&ld(t,e)?(t=sd(),Xs=da=Kt=null,An=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rd&&e.locale!=="ko"?null:e.data;default:return null}}var Em={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Em[t.type]:e==="textarea"}function ad(t,e,n,i){Oc(i),e=mr(e,"onChange"),0<e.length&&(n=new fa("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Fi=null,qi=null;function Pm(t){xd(t,0)}function Ar(t){var e=$n(t);if(Tc(e))return t}function Nm(t,e){if(t==="change")return e}var ud=!1;if(zt){var ml;if(zt){var gl="oninput"in document;if(!gl){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),gl=typeof Su.oninput=="function"}ml=gl}else ml=!1;ud=ml&&(!document.documentMode||9<document.documentMode)}function ju(){Fi&&(Fi.detachEvent("onpropertychange",hd),qi=Fi=null)}function hd(t){if(t.propertyName==="value"&&Ar(qi)){var e=[];ad(e,qi,t,oa(t)),Uc(Pm,e)}}function zm(t,e,n){t==="focusin"?(ju(),Fi=e,qi=n,Fi.attachEvent("onpropertychange",hd)):t==="focusout"&&ju()}function Tm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ar(qi)}function Rm(t,e){if(t==="click")return Ar(e)}function Lm(t,e){if(t==="input"||t==="change")return Ar(e)}function Im(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ft=typeof Object.is=="function"?Object.is:Im;function Zi(t,e){if(ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Zl.call(e,s)||!ft(t[s],e[s]))return!1}return!0}function bu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ku(t,e){var n=bu(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bu(n)}}function cd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dd(){for(var t=window,e=ar();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ar(t.document)}return e}function ga(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Fm(t){var e=dd(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cd(n.ownerDocument.documentElement,n)){if(i!==null&&ga(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=ku(n,r);var o=ku(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Bm=zt&&"documentMode"in document&&11>=document.documentMode,On=null,xo=null,Bi=null,wo=!1;function Mu(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wo||On==null||On!==ar(i)||(i=On,"selectionStart"in i&&ga(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Bi&&Zi(Bi,i)||(Bi=i,i=mr(xo,"onSelect"),0<i.length&&(e=new fa("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=On)))}function zs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Dn={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},vl={},fd={};zt&&(fd=document.createElement("div").style,"AnimationEvent"in window||(delete Dn.animationend.animation,delete Dn.animationiteration.animation,delete Dn.animationstart.animation),"TransitionEvent"in window||delete Dn.transitionend.transition);function Or(t){if(vl[t])return vl[t];if(!Dn[t])return t;var e=Dn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fd)return vl[t]=e[n];return t}var pd=Or("animationend"),md=Or("animationiteration"),gd=Or("animationstart"),vd=Or("transitionend"),yd=new Map,Cu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ln(t,e){yd.set(t,e),En(e,[t])}for(var yl=0;yl<Cu.length;yl++){var xl=Cu[yl],Am=xl.toLowerCase(),Om=xl[0].toUpperCase()+xl.slice(1);ln(Am,"on"+Om)}ln(pd,"onAnimationEnd");ln(md,"onAnimationIteration");ln(gd,"onAnimationStart");ln("dblclick","onDoubleClick");ln("focusin","onFocus");ln("focusout","onBlur");ln(vd,"onTransitionEnd");si("onMouseEnter",["mouseout","mouseover"]);si("onMouseLeave",["mouseout","mouseover"]);si("onPointerEnter",["pointerout","pointerover"]);si("onPointerLeave",["pointerout","pointerover"]);En("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));En("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));En("onBeforeInput",["compositionend","keypress","textInput","paste"]);En("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));En("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));En("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ti));function Eu(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Ap(i,e,void 0,t),t.currentTarget=null}function xd(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],u=a.instance,h=a.currentTarget;if(a=a.listener,u!==r&&s.isPropagationStopped())break e;Eu(s,a,h),r=u}else for(o=0;o<i.length;o++){if(a=i[o],u=a.instance,h=a.currentTarget,a=a.listener,u!==r&&s.isPropagationStopped())break e;Eu(s,a,h),r=u}}}if(hr)throw t=mo,hr=!1,mo=null,t}function ie(t,e){var n=e[ko];n===void 0&&(n=e[ko]=new Set);var i=t+"__bubble";n.has(i)||(wd(e,t,2,!1),n.add(i))}function wl(t,e,n){var i=0;e&&(i|=4),wd(n,t,i,e)}var Ts="_reactListening"+Math.random().toString(36).slice(2);function es(t){if(!t[Ts]){t[Ts]=!0,Cc.forEach(function(n){n!=="selectionchange"&&(Dm.has(n)||wl(n,!1,t),wl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ts]||(e[Ts]=!0,wl("selectionchange",!1,e))}}function wd(t,e,n,i){switch(id(e)){case 1:var s=em;break;case 4:s=tm;break;default:s=ca}n=s.bind(null,e,n,t),s=void 0,!po||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _l(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=dn(a),o===null)return;if(u=o.tag,u===5||u===6){i=r=o;continue e}a=a.parentNode}}i=i.return}Uc(function(){var h=r,c=oa(n),d=[];e:{var f=yd.get(t);if(f!==void 0){var m=fa,y=t;switch(t){case"keypress":if(qs(n)===0)break e;case"keydown":case"keyup":m=gm;break;case"focusin":y="focus",m=pl;break;case"focusout":y="blur",m=pl;break;case"beforeblur":case"afterblur":m=pl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=sm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=xm;break;case pd:case md:case gd:m=om;break;case vd:m=_m;break;case"scroll":m=nm;break;case"wheel":m=jm;break;case"copy":case"cut":case"paste":m=um;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=yu}var x=(e&4)!==0,M=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var p=h,v;p!==null;){v=p;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,g!==null&&(b=Qi(p,g),b!=null&&x.push(ts(p,b,v)))),M)break;p=p.return}0<x.length&&(f=new m(f,y,null,n,c),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==co&&(y=n.relatedTarget||n.fromElement)&&(dn(y)||y[Tt]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=h,y=y?dn(y):null,y!==null&&(M=Pn(y),y!==M||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=h),m!==y)){if(x=gu,b="onMouseLeave",g="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=yu,b="onPointerLeave",g="onPointerEnter",p="pointer"),M=m==null?f:$n(m),v=y==null?f:$n(y),f=new x(b,p+"leave",m,n,c),f.target=M,f.relatedTarget=v,b=null,dn(c)===h&&(x=new x(g,p+"enter",y,n,c),x.target=v,x.relatedTarget=M,b=x),M=b,m&&y)t:{for(x=m,g=y,p=0,v=x;v;v=Rn(v))p++;for(v=0,b=g;b;b=Rn(b))v++;for(;0<p-v;)x=Rn(x),p--;for(;0<v-p;)g=Rn(g),v--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=Rn(x),g=Rn(g)}x=null}else x=null;m!==null&&Pu(d,f,m,x,!1),y!==null&&M!==null&&Pu(d,M,y,x,!0)}}e:{if(f=h?$n(h):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var P=Nm;else if(_u(f))if(ud)P=Lm;else{P=Tm;var E=zm}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(P=Rm);if(P&&(P=P(t,h))){ad(d,P,n,c);break e}E&&E(t,f,h),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&lo(f,"number",f.value)}switch(E=h?$n(h):window,t){case"focusin":(_u(E)||E.contentEditable==="true")&&(On=E,xo=h,Bi=null);break;case"focusout":Bi=xo=On=null;break;case"mousedown":wo=!0;break;case"contextmenu":case"mouseup":case"dragend":wo=!1,Mu(d,n,c);break;case"selectionchange":if(Bm)break;case"keydown":case"keyup":Mu(d,n,c)}var k;if(ma)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else An?ld(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(rd&&n.locale!=="ko"&&(An||L!=="onCompositionStart"?L==="onCompositionEnd"&&An&&(k=sd()):(Kt=c,da="value"in Kt?Kt.value:Kt.textContent,An=!0)),E=mr(h,L),0<E.length&&(L=new vu(L,t,null,n,c),d.push({event:L,listeners:E}),k?L.data=k:(k=od(n),k!==null&&(L.data=k)))),(k=km?Mm(t,n):Cm(t,n))&&(h=mr(h,"onBeforeInput"),0<h.length&&(c=new vu("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:h}),c.data=k))}xd(d,e)})}function ts(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mr(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Qi(t,n),r!=null&&i.unshift(ts(t,r,s)),r=Qi(t,e),r!=null&&i.push(ts(t,r,s))),t=t.return}return i}function Rn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pu(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,u=a.alternate,h=a.stateNode;if(u!==null&&u===i)break;a.tag===5&&h!==null&&(a=h,s?(u=Qi(n,r),u!=null&&o.unshift(ts(n,u,a))):s||(u=Qi(n,r),u!=null&&o.push(ts(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $m=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function Nu(t){return(typeof t=="string"?t:""+t).replace($m,`
`).replace(Wm,"")}function Rs(t,e,n){if(e=Nu(e),Nu(t)!==e&&n)throw Error(T(425))}function gr(){}var _o=null,So=null;function jo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bo=typeof setTimeout=="function"?setTimeout:void 0,Um=typeof clearTimeout=="function"?clearTimeout:void 0,zu=typeof Promise=="function"?Promise:void 0,Vm=typeof queueMicrotask=="function"?queueMicrotask:typeof zu<"u"?function(t){return zu.resolve(null).then(t).catch(Hm)}:bo;function Hm(t){setTimeout(function(){throw t})}function Sl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Xi(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Xi(e)}function qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gi=Math.random().toString(36).slice(2),wt="__reactFiber$"+gi,ns="__reactProps$"+gi,Tt="__reactContainer$"+gi,ko="__reactEvents$"+gi,Km="__reactListeners$"+gi,Ym="__reactHandles$"+gi;function dn(t){var e=t[wt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tt]||n[wt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tu(t);t!==null;){if(n=t[wt])return n;t=Tu(t)}return e}t=n,n=t.parentNode}return null}function gs(t){return t=t[wt]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $n(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Dr(t){return t[ns]||null}var Mo=[],Wn=-1;function on(t){return{current:t}}function se(t){0>Wn||(t.current=Mo[Wn],Mo[Wn]=null,Wn--)}function ne(t,e){Wn++,Mo[Wn]=t.current,t.current=e}var rn={},Ie=on(rn),Ve=on(!1),yn=rn;function ri(t,e){var n=t.type.contextTypes;if(!n)return rn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function He(t){return t=t.childContextTypes,t!=null}function vr(){se(Ve),se(Ie)}function Ru(t,e,n){if(Ie.current!==rn)throw Error(T(168));ne(Ie,e),ne(Ve,n)}function _d(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(T(108,zp(t)||"Unknown",s));return he({},n,i)}function yr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rn,yn=Ie.current,ne(Ie,t),ne(Ve,Ve.current),!0}function Lu(t,e,n){var i=t.stateNode;if(!i)throw Error(T(169));n?(t=_d(t,e,yn),i.__reactInternalMemoizedMergedChildContext=t,se(Ve),se(Ie),ne(Ie,t)):se(Ve),ne(Ve,n)}var kt=null,$r=!1,jl=!1;function Sd(t){kt===null?kt=[t]:kt.push(t)}function Qm(t){$r=!0,Sd(t)}function an(){if(!jl&&kt!==null){jl=!0;var t=0,e=q;try{var n=kt;for(q=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}kt=null,$r=!1}catch(s){throw kt!==null&&(kt=kt.slice(t+1)),Yc(aa,an),s}finally{q=e,jl=!1}}return null}var Un=[],Vn=0,xr=null,wr=0,tt=[],nt=0,xn=null,Mt=1,Ct="";function hn(t,e){Un[Vn++]=wr,Un[Vn++]=xr,xr=t,wr=e}function jd(t,e,n){tt[nt++]=Mt,tt[nt++]=Ct,tt[nt++]=xn,xn=t;var i=Mt;t=Ct;var s=32-ct(i)-1;i&=~(1<<s),n+=1;var r=32-ct(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Mt=1<<32-ct(e)+s|n<<s|i,Ct=r+t}else Mt=1<<r|n<<s|i,Ct=t}function va(t){t.return!==null&&(hn(t,1),jd(t,1,0))}function ya(t){for(;t===xr;)xr=Un[--Vn],Un[Vn]=null,wr=Un[--Vn],Un[Vn]=null;for(;t===xn;)xn=tt[--nt],tt[nt]=null,Ct=tt[--nt],tt[nt]=null,Mt=tt[--nt],tt[nt]=null}var Ge=null,Je=null,le=!1,ht=null;function bd(t,e){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Iu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ge=t,Je=qt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ge=t,Je=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xn!==null?{id:Mt,overflow:Ct}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ge=t,Je=null,!0):!1;default:return!1}}function Co(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eo(t){if(le){var e=Je;if(e){var n=e;if(!Iu(t,e)){if(Co(t))throw Error(T(418));e=qt(n.nextSibling);var i=Ge;e&&Iu(t,e)?bd(i,n):(t.flags=t.flags&-4097|2,le=!1,Ge=t)}}else{if(Co(t))throw Error(T(418));t.flags=t.flags&-4097|2,le=!1,Ge=t}}}function Fu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ge=t}function Ls(t){if(t!==Ge)return!1;if(!le)return Fu(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jo(t.type,t.memoizedProps)),e&&(e=Je)){if(Co(t))throw kd(),Error(T(418));for(;e;)bd(t,e),e=qt(e.nextSibling)}if(Fu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Je=qt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Je=null}}else Je=Ge?qt(t.stateNode.nextSibling):null;return!0}function kd(){for(var t=Je;t;)t=qt(t.nextSibling)}function li(){Je=Ge=null,le=!1}function xa(t){ht===null?ht=[t]:ht.push(t)}var Jm=It.ReactCurrentBatchConfig;function ki(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var i=n.stateNode}if(!i)throw Error(T(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function Is(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bu(t){var e=t._init;return e(t._payload)}function Md(t){function e(g,p){if(t){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function n(g,p){if(!t)return null;for(;p!==null;)e(g,p),p=p.sibling;return null}function i(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=nn(g,p),g.index=0,g.sibling=null,g}function r(g,p,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,p,v,b){return p===null||p.tag!==6?(p=Nl(v,g.mode,b),p.return=g,p):(p=s(p,v),p.return=g,p)}function u(g,p,v,b){var P=v.type;return P===Bn?c(g,p,v.props.children,b,v.key):p!==null&&(p.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Wt&&Bu(P)===p.type)?(b=s(p,v.props),b.ref=ki(g,p,v),b.return=g,b):(b=rr(v.type,v.key,v.props,null,g.mode,b),b.ref=ki(g,p,v),b.return=g,b)}function h(g,p,v,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=zl(v,g.mode,b),p.return=g,p):(p=s(p,v.children||[]),p.return=g,p)}function c(g,p,v,b,P){return p===null||p.tag!==7?(p=gn(v,g.mode,b,P),p.return=g,p):(p=s(p,v),p.return=g,p)}function d(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Nl(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case bs:return v=rr(p.type,p.key,p.props,null,g.mode,v),v.ref=ki(g,null,p),v.return=g,v;case Fn:return p=zl(p,g.mode,v),p.return=g,p;case Wt:var b=p._init;return d(g,b(p._payload),v)}if(Ni(p)||wi(p))return p=gn(p,g.mode,v,null),p.return=g,p;Is(g,p)}return null}function f(g,p,v,b){var P=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return P!==null?null:a(g,p,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case bs:return v.key===P?u(g,p,v,b):null;case Fn:return v.key===P?h(g,p,v,b):null;case Wt:return P=v._init,f(g,p,P(v._payload),b)}if(Ni(v)||wi(v))return P!==null?null:c(g,p,v,b,null);Is(g,v)}return null}function m(g,p,v,b,P){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(v)||null,a(p,g,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case bs:return g=g.get(b.key===null?v:b.key)||null,u(p,g,b,P);case Fn:return g=g.get(b.key===null?v:b.key)||null,h(p,g,b,P);case Wt:var E=b._init;return m(g,p,v,E(b._payload),P)}if(Ni(b)||wi(b))return g=g.get(v)||null,c(p,g,b,P,null);Is(p,b)}return null}function y(g,p,v,b){for(var P=null,E=null,k=p,L=p=0,W=null;k!==null&&L<v.length;L++){k.index>L?(W=k,k=null):W=k.sibling;var O=f(g,k,v[L],b);if(O===null){k===null&&(k=W);break}t&&k&&O.alternate===null&&e(g,k),p=r(O,p,L),E===null?P=O:E.sibling=O,E=O,k=W}if(L===v.length)return n(g,k),le&&hn(g,L),P;if(k===null){for(;L<v.length;L++)k=d(g,v[L],b),k!==null&&(p=r(k,p,L),E===null?P=k:E.sibling=k,E=k);return le&&hn(g,L),P}for(k=i(g,k);L<v.length;L++)W=m(k,g,L,v[L],b),W!==null&&(t&&W.alternate!==null&&k.delete(W.key===null?L:W.key),p=r(W,p,L),E===null?P=W:E.sibling=W,E=W);return t&&k.forEach(function(D){return e(g,D)}),le&&hn(g,L),P}function x(g,p,v,b){var P=wi(v);if(typeof P!="function")throw Error(T(150));if(v=P.call(v),v==null)throw Error(T(151));for(var E=P=null,k=p,L=p=0,W=null,O=v.next();k!==null&&!O.done;L++,O=v.next()){k.index>L?(W=k,k=null):W=k.sibling;var D=f(g,k,O.value,b);if(D===null){k===null&&(k=W);break}t&&k&&D.alternate===null&&e(g,k),p=r(D,p,L),E===null?P=D:E.sibling=D,E=D,k=W}if(O.done)return n(g,k),le&&hn(g,L),P;if(k===null){for(;!O.done;L++,O=v.next())O=d(g,O.value,b),O!==null&&(p=r(O,p,L),E===null?P=O:E.sibling=O,E=O);return le&&hn(g,L),P}for(k=i(g,k);!O.done;L++,O=v.next())O=m(k,g,L,O.value,b),O!==null&&(t&&O.alternate!==null&&k.delete(O.key===null?L:O.key),p=r(O,p,L),E===null?P=O:E.sibling=O,E=O);return t&&k.forEach(function(H){return e(g,H)}),le&&hn(g,L),P}function M(g,p,v,b){if(typeof v=="object"&&v!==null&&v.type===Bn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case bs:e:{for(var P=v.key,E=p;E!==null;){if(E.key===P){if(P=v.type,P===Bn){if(E.tag===7){n(g,E.sibling),p=s(E,v.props.children),p.return=g,g=p;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Wt&&Bu(P)===E.type){n(g,E.sibling),p=s(E,v.props),p.ref=ki(g,E,v),p.return=g,g=p;break e}n(g,E);break}else e(g,E);E=E.sibling}v.type===Bn?(p=gn(v.props.children,g.mode,b,v.key),p.return=g,g=p):(b=rr(v.type,v.key,v.props,null,g.mode,b),b.ref=ki(g,p,v),b.return=g,g=b)}return o(g);case Fn:e:{for(E=v.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(g,p.sibling),p=s(p,v.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else e(g,p);p=p.sibling}p=zl(v,g.mode,b),p.return=g,g=p}return o(g);case Wt:return E=v._init,M(g,p,E(v._payload),b)}if(Ni(v))return y(g,p,v,b);if(wi(v))return x(g,p,v,b);Is(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,v),p.return=g,g=p):(n(g,p),p=Nl(v,g.mode,b),p.return=g,g=p),o(g)):n(g,p)}return M}var oi=Md(!0),Cd=Md(!1),_r=on(null),Sr=null,Hn=null,wa=null;function _a(){wa=Hn=Sr=null}function Sa(t){var e=_r.current;se(_r),t._currentValue=e}function Po(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ei(t,e){Sr=t,wa=Hn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ue=!0),t.firstContext=null)}function rt(t){var e=t._currentValue;if(wa!==t)if(t={context:t,memoizedValue:e,next:null},Hn===null){if(Sr===null)throw Error(T(308));Hn=t,Sr.dependencies={lanes:0,firstContext:t}}else Hn=Hn.next=t;return e}var fn=null;function ja(t){fn===null?fn=[t]:fn.push(t)}function Ed(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,ja(e)):(n.next=s.next,s.next=n),e.interleaved=n,Rt(t,i)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ut=!1;function ba(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zt(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Q&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Rt(t,n)}return s=i.interleaved,s===null?(e.next=e,ja(i)):(e.next=s.next,s.next=e),i.interleaved=e,Rt(t,n)}function Zs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ua(t,n)}}function Au(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jr(t,e,n,i){var s=t.updateQueue;Ut=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,h=u.next;u.next=null,o===null?r=h:o.next=h,o=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=u))}if(r!==null){var d=s.baseState;o=0,c=h=u=null,a=r;do{var f=a.lane,m=a.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,x=a;switch(f=e,m=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=he({},d,f);break e;case 2:Ut=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(h=c=m,u=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(c===null&&(u=d),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);_n|=o,t.lanes=o,t.memoizedState=d}}function Ou(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(T(191,s));s.call(i)}}}var vs={},St=on(vs),is=on(vs),ss=on(vs);function pn(t){if(t===vs)throw Error(T(174));return t}function ka(t,e){switch(ne(ss,e),ne(is,t),ne(St,vs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ao(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ao(e,t)}se(St),ne(St,e)}function ai(){se(St),se(is),se(ss)}function Nd(t){pn(ss.current);var e=pn(St.current),n=ao(e,t.type);e!==n&&(ne(is,t),ne(St,n))}function Ma(t){is.current===t&&(se(St),se(is))}var ae=on(0);function br(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bl=[];function Ca(){for(var t=0;t<bl.length;t++)bl[t]._workInProgressVersionPrimary=null;bl.length=0}var er=It.ReactCurrentDispatcher,kl=It.ReactCurrentBatchConfig,wn=0,ue=null,Se=null,be=null,kr=!1,Ai=!1,rs=0,Gm=0;function ze(){throw Error(T(321))}function Ea(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ft(t[n],e[n]))return!1;return!0}function Pa(t,e,n,i,s,r){if(wn=r,ue=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,er.current=t===null||t.memoizedState===null?eg:tg,t=n(i,s),Ai){r=0;do{if(Ai=!1,rs=0,25<=r)throw Error(T(301));r+=1,be=Se=null,e.updateQueue=null,er.current=ng,t=n(i,s)}while(Ai)}if(er.current=Mr,e=Se!==null&&Se.next!==null,wn=0,be=Se=ue=null,kr=!1,e)throw Error(T(300));return t}function Na(){var t=rs!==0;return rs=0,t}function xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?ue.memoizedState=be=t:be=be.next=t,be}function lt(){if(Se===null){var t=ue.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=be===null?ue.memoizedState:be.next;if(e!==null)be=e,Se=t;else{if(t===null)throw Error(T(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},be===null?ue.memoizedState=be=t:be=be.next=t}return be}function ls(t,e){return typeof e=="function"?e(t):e}function Ml(t){var e=lt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var i=Se,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,u=null,h=r;do{var c=h.lane;if((wn&c)===c)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(a=u=d,o=i):u=u.next=d,ue.lanes|=c,_n|=c}h=h.next}while(h!==null&&h!==r);u===null?o=i:u.next=a,ft(i,e.memoizedState)||(Ue=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,ue.lanes|=r,_n|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cl(t){var e=lt(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);ft(r,e.memoizedState)||(Ue=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function zd(){}function Td(t,e){var n=ue,i=lt(),s=e(),r=!ft(i.memoizedState,s);if(r&&(i.memoizedState=s,Ue=!0),i=i.queue,za(Id.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,os(9,Ld.bind(null,n,i,s,e),void 0,null),ke===null)throw Error(T(349));wn&30||Rd(n,e,s)}return s}function Rd(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ld(t,e,n,i){e.value=n,e.getSnapshot=i,Fd(e)&&Bd(t)}function Id(t,e,n){return n(function(){Fd(e)&&Bd(t)})}function Fd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ft(t,n)}catch{return!0}}function Bd(t){var e=Rt(t,1);e!==null&&dt(e,t,1,-1)}function Du(t){var e=xt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},e.queue=t,t=t.dispatch=Zm.bind(null,ue,t),[e.memoizedState,t]}function os(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ue.updateQueue,e===null?(e={lastEffect:null,stores:null},ue.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ad(){return lt().memoizedState}function tr(t,e,n,i){var s=xt();ue.flags|=t,s.memoizedState=os(1|e,n,void 0,i===void 0?null:i)}function Wr(t,e,n,i){var s=lt();i=i===void 0?null:i;var r=void 0;if(Se!==null){var o=Se.memoizedState;if(r=o.destroy,i!==null&&Ea(i,o.deps)){s.memoizedState=os(e,n,r,i);return}}ue.flags|=t,s.memoizedState=os(1|e,n,r,i)}function $u(t,e){return tr(8390656,8,t,e)}function za(t,e){return Wr(2048,8,t,e)}function Od(t,e){return Wr(4,2,t,e)}function Dd(t,e){return Wr(4,4,t,e)}function $d(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wd(t,e,n){return n=n!=null?n.concat([t]):null,Wr(4,4,$d.bind(null,e,t),n)}function Ta(){}function Ud(t,e){var n=lt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ea(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Vd(t,e){var n=lt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ea(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Hd(t,e,n){return wn&21?(ft(n,e)||(n=Gc(),ue.lanes|=n,_n|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ue=!0),t.memoizedState=n)}function Xm(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var i=kl.transition;kl.transition={};try{t(!1),e()}finally{q=n,kl.transition=i}}function Kd(){return lt().memoizedState}function qm(t,e,n){var i=tn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Yd(t))Qd(e,n);else if(n=Ed(t,e,n,i),n!==null){var s=Ae();dt(n,t,i,s),Jd(n,e,i)}}function Zm(t,e,n){var i=tn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yd(t))Qd(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,ft(a,o)){var u=e.interleaved;u===null?(s.next=s,ja(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Ed(t,e,s,i),n!==null&&(s=Ae(),dt(n,t,i,s),Jd(n,e,i))}}function Yd(t){var e=t.alternate;return t===ue||e!==null&&e===ue}function Qd(t,e){Ai=kr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jd(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,ua(t,n)}}var Mr={readContext:rt,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},eg={readContext:rt,useCallback:function(t,e){return xt().memoizedState=[t,e===void 0?null:e],t},useContext:rt,useEffect:$u,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,tr(4194308,4,$d.bind(null,e,t),n)},useLayoutEffect:function(t,e){return tr(4194308,4,t,e)},useInsertionEffect:function(t,e){return tr(4,2,t,e)},useMemo:function(t,e){var n=xt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=qm.bind(null,ue,t),[i.memoizedState,t]},useRef:function(t){var e=xt();return t={current:t},e.memoizedState=t},useState:Du,useDebugValue:Ta,useDeferredValue:function(t){return xt().memoizedState=t},useTransition:function(){var t=Du(!1),e=t[0];return t=Xm.bind(null,t[1]),xt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ue,s=xt();if(le){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),ke===null)throw Error(T(349));wn&30||Rd(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,$u(Id.bind(null,i,r,t),[t]),i.flags|=2048,os(9,Ld.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=xt(),e=ke.identifierPrefix;if(le){var n=Ct,i=Mt;n=(i&~(1<<32-ct(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=rs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tg={readContext:rt,useCallback:Ud,useContext:rt,useEffect:za,useImperativeHandle:Wd,useInsertionEffect:Od,useLayoutEffect:Dd,useMemo:Vd,useReducer:Ml,useRef:Ad,useState:function(){return Ml(ls)},useDebugValue:Ta,useDeferredValue:function(t){var e=lt();return Hd(e,Se.memoizedState,t)},useTransition:function(){var t=Ml(ls)[0],e=lt().memoizedState;return[t,e]},useMutableSource:zd,useSyncExternalStore:Td,useId:Kd,unstable_isNewReconciler:!1},ng={readContext:rt,useCallback:Ud,useContext:rt,useEffect:za,useImperativeHandle:Wd,useInsertionEffect:Od,useLayoutEffect:Dd,useMemo:Vd,useReducer:Cl,useRef:Ad,useState:function(){return Cl(ls)},useDebugValue:Ta,useDeferredValue:function(t){var e=lt();return Se===null?e.memoizedState=t:Hd(e,Se.memoizedState,t)},useTransition:function(){var t=Cl(ls)[0],e=lt().memoizedState;return[t,e]},useMutableSource:zd,useSyncExternalStore:Td,useId:Kd,unstable_isNewReconciler:!1};function at(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function No(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ur={isMounted:function(t){return(t=t._reactInternals)?Pn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Ae(),s=tn(t),r=Nt(i,s);r.payload=e,n!=null&&(r.callback=n),e=Zt(t,r,s),e!==null&&(dt(e,t,s,i),Zs(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Ae(),s=tn(t),r=Nt(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Zt(t,r,s),e!==null&&(dt(e,t,s,i),Zs(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ae(),i=tn(t),s=Nt(n,i);s.tag=2,e!=null&&(s.callback=e),e=Zt(t,s,i),e!==null&&(dt(e,t,i,n),Zs(e,t,i))}};function Wu(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Zi(n,i)||!Zi(s,r):!0}function Gd(t,e,n){var i=!1,s=rn,r=e.contextType;return typeof r=="object"&&r!==null?r=rt(r):(s=He(e)?yn:Ie.current,i=e.contextTypes,r=(i=i!=null)?ri(t,s):rn),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ur,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function Uu(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Ur.enqueueReplaceState(e,e.state,null)}function zo(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ba(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=rt(r):(r=He(e)?yn:Ie.current,s.context=ri(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(No(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ur.enqueueReplaceState(s,s.state,null),jr(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ui(t,e){try{var n="",i=e;do n+=Np(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function El(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function To(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ig=typeof WeakMap=="function"?WeakMap:Map;function Xd(t,e,n){n=Nt(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Er||(Er=!0,Wo=i),To(t,e)},n}function qd(t,e,n){n=Nt(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){To(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){To(t,e),typeof i!="function"&&(en===null?en=new Set([this]):en.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vu(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new ig;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=vg.bind(null,t,e,n),e.then(t,t))}function Hu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ku(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nt(-1,1),e.tag=2,Zt(n,e,1))),n.lanes|=1),t)}var sg=It.ReactCurrentOwner,Ue=!1;function Be(t,e,n,i){e.child=t===null?Cd(e,null,n,i):oi(e,t.child,n,i)}function Yu(t,e,n,i,s){n=n.render;var r=e.ref;return ei(e,s),i=Pa(t,e,n,i,r,s),n=Na(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lt(t,e,s)):(le&&n&&va(e),e.flags|=1,Be(t,e,i,s),e.child)}function Qu(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Da(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,Zd(t,e,r,i,s)):(t=rr(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Zi,n(o,i)&&t.ref===e.ref)return Lt(t,e,s)}return e.flags|=1,t=nn(r,i),t.ref=e.ref,t.return=e,e.child=t}function Zd(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Zi(r,i)&&t.ref===e.ref)if(Ue=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Ue=!0);else return e.lanes=t.lanes,Lt(t,e,s)}return Ro(t,e,n,i,s)}function ef(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Yn,Qe),Qe|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ne(Yn,Qe),Qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ne(Yn,Qe),Qe|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ne(Yn,Qe),Qe|=i;return Be(t,e,s,n),e.child}function tf(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ro(t,e,n,i,s){var r=He(n)?yn:Ie.current;return r=ri(e,r),ei(e,s),n=Pa(t,e,n,i,r,s),i=Na(),t!==null&&!Ue?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lt(t,e,s)):(le&&i&&va(e),e.flags|=1,Be(t,e,n,s),e.child)}function Ju(t,e,n,i,s){if(He(n)){var r=!0;yr(e)}else r=!1;if(ei(e,s),e.stateNode===null)nr(t,e),Gd(e,n,i),zo(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=rt(h):(h=He(n)?yn:Ie.current,h=ri(e,h));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||u!==h)&&Uu(e,o,i,h),Ut=!1;var f=e.memoizedState;o.state=f,jr(e,i,o,s),u=e.memoizedState,a!==i||f!==u||Ve.current||Ut?(typeof c=="function"&&(No(e,n,c,i),u=e.memoizedState),(a=Ut||Wu(e,n,a,i,f,u,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=h,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Pd(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:at(e.type,a),o.props=h,d=e.pendingProps,f=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rt(u):(u=He(n)?yn:Ie.current,u=ri(e,u));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==u)&&Uu(e,o,i,u),Ut=!1,f=e.memoizedState,o.state=f,jr(e,i,o,s);var y=e.memoizedState;a!==d||f!==y||Ve.current||Ut?(typeof m=="function"&&(No(e,n,m,i),y=e.memoizedState),(h=Ut||Wu(e,n,h,i,f,y,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=u,i=h):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Lo(t,e,n,i,r,s)}function Lo(t,e,n,i,s,r){tf(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&Lu(e,n,!1),Lt(t,e,r);i=e.stateNode,sg.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=oi(e,t.child,null,r),e.child=oi(e,null,a,r)):Be(t,e,a,r),e.memoizedState=i.state,s&&Lu(e,n,!0),e.child}function nf(t){var e=t.stateNode;e.pendingContext?Ru(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ru(t,e.context,!1),ka(t,e.containerInfo)}function Gu(t,e,n,i,s){return li(),xa(s),e.flags|=256,Be(t,e,n,i),e.child}var Io={dehydrated:null,treeContext:null,retryLane:0};function Fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function sf(t,e,n){var i=e.pendingProps,s=ae.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ne(ae,s&1),t===null)return Eo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Kr(o,i,0,null),t=gn(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Fo(n),e.memoizedState=Io,t):Ra(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rg(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=nn(s,u),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=nn(a,r):(r=gn(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Fo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Io,i}return r=t.child,t=r.sibling,i=nn(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ra(t,e){return e=Kr({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fs(t,e,n,i){return i!==null&&xa(i),oi(e,t.child,null,n),t=Ra(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rg(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=El(Error(T(422))),Fs(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Kr({mode:"visible",children:i.children},s,0,null),r=gn(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&oi(e,t.child,null,o),e.child.memoizedState=Fo(o),e.memoizedState=Io,r);if(!(e.mode&1))return Fs(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(T(419)),i=El(r,i,void 0),Fs(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ue||a){if(i=ke,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Rt(t,s),dt(i,t,s,-1))}return Oa(),i=El(Error(T(421))),Fs(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=yg.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Je=qt(s.nextSibling),Ge=e,le=!0,ht=null,t!==null&&(tt[nt++]=Mt,tt[nt++]=Ct,tt[nt++]=xn,Mt=t.id,Ct=t.overflow,xn=e),e=Ra(e,i.children),e.flags|=4096,e)}function Xu(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Po(t.return,e,n)}function Pl(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function rf(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Be(t,e,i.children,n),i=ae.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xu(t,n,e);else if(t.tag===19)Xu(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ne(ae,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&br(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pl(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&br(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pl(e,!0,n,null,r);break;case"together":Pl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_n|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=nn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=nn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lg(t,e,n){switch(e.tag){case 3:nf(e),li();break;case 5:Nd(e);break;case 1:He(e.type)&&yr(e);break;case 4:ka(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ne(_r,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ne(ae,ae.current&1),e.flags|=128,null):n&e.child.childLanes?sf(t,e,n):(ne(ae,ae.current&1),t=Lt(t,e,n),t!==null?t.sibling:null);ne(ae,ae.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return rf(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(ae,ae.current),i)break;return null;case 22:case 23:return e.lanes=0,ef(t,e,n)}return Lt(t,e,n)}var lf,Bo,of,af;lf=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bo=function(){};of=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,pn(St.current);var r=null;switch(n){case"input":s=so(t,s),i=so(t,i),r=[];break;case"select":s=he({},s,{value:void 0}),i=he({},i,{value:void 0}),r=[];break;case"textarea":s=oo(t,s),i=oo(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=gr)}uo(n,i);var o;n=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var a=s[h];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ki.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in i){var u=i[h];if(a=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&u!==a&&(u!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(r||(r=[]),r.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(r=r||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(r=r||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ki.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&ie("scroll",t),r||a===u||(r=[])):(r=r||[]).push(h,u))}n&&(r=r||[]).push("style",n);var h=r;(e.updateQueue=h)&&(e.flags|=4)}};af=function(t,e,n,i){n!==i&&(e.flags|=4)};function Mi(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Te(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function og(t,e,n){var i=e.pendingProps;switch(ya(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(e),null;case 1:return He(e.type)&&vr(),Te(e),null;case 3:return i=e.stateNode,ai(),se(Ve),se(Ie),Ca(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ls(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ht!==null&&(Ho(ht),ht=null))),Bo(t,e),Te(e),null;case 5:Ma(e);var s=pn(ss.current);if(n=e.type,t!==null&&e.stateNode!=null)of(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(T(166));return Te(e),null}if(t=pn(St.current),Ls(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[wt]=e,i[ns]=r,t=(e.mode&1)!==0,n){case"dialog":ie("cancel",i),ie("close",i);break;case"iframe":case"object":case"embed":ie("load",i);break;case"video":case"audio":for(s=0;s<Ti.length;s++)ie(Ti[s],i);break;case"source":ie("error",i);break;case"img":case"image":case"link":ie("error",i),ie("load",i);break;case"details":ie("toggle",i);break;case"input":lu(i,r),ie("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ie("invalid",i);break;case"textarea":au(i,r),ie("invalid",i)}uo(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Rs(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Rs(i.textContent,a,t),s=["children",""+a]):Ki.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ie("scroll",i)}switch(n){case"input":ks(i),ou(i,r,!0);break;case"textarea":ks(i),uu(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=gr)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ic(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[wt]=e,t[ns]=i,lf(t,e,!1,!1),e.stateNode=t;e:{switch(o=ho(n,i),n){case"dialog":ie("cancel",t),ie("close",t),s=i;break;case"iframe":case"object":case"embed":ie("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ti.length;s++)ie(Ti[s],t);s=i;break;case"source":ie("error",t),s=i;break;case"img":case"image":case"link":ie("error",t),ie("load",t),s=i;break;case"details":ie("toggle",t),s=i;break;case"input":lu(t,i),s=so(t,i),ie("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=he({},i,{value:void 0}),ie("invalid",t);break;case"textarea":au(t,i),s=oo(t,i),ie("invalid",t);break;default:s=i}uo(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var u=a[r];r==="style"?Ac(t,u):r==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fc(t,u)):r==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Yi(t,u):typeof u=="number"&&Yi(t,""+u):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ki.hasOwnProperty(r)?u!=null&&r==="onScroll"&&ie("scroll",t):u!=null&&ia(t,r,u,o))}switch(n){case"input":ks(t),ou(t,i,!1);break;case"textarea":ks(t),uu(t);break;case"option":i.value!=null&&t.setAttribute("value",""+sn(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?Gn(t,!!i.multiple,r,!1):i.defaultValue!=null&&Gn(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gr)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Te(e),null;case 6:if(t&&e.stateNode!=null)af(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(T(166));if(n=pn(ss.current),pn(St.current),Ls(e)){if(i=e.stateNode,n=e.memoizedProps,i[wt]=e,(r=i.nodeValue!==n)&&(t=Ge,t!==null))switch(t.tag){case 3:Rs(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rs(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wt]=e,e.stateNode=i}return Te(e),null;case 13:if(se(ae),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&Je!==null&&e.mode&1&&!(e.flags&128))kd(),li(),e.flags|=98560,r=!1;else if(r=Ls(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(T(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(T(317));r[wt]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Te(e),r=!1}else ht!==null&&(Ho(ht),ht=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?je===0&&(je=3):Oa())),e.updateQueue!==null&&(e.flags|=4),Te(e),null);case 4:return ai(),Bo(t,e),t===null&&es(e.stateNode.containerInfo),Te(e),null;case 10:return Sa(e.type._context),Te(e),null;case 17:return He(e.type)&&vr(),Te(e),null;case 19:if(se(ae),r=e.memoizedState,r===null)return Te(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)Mi(r,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=br(t),o!==null){for(e.flags|=128,Mi(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ne(ae,ae.current&1|2),e.child}t=t.sibling}r.tail!==null&&de()>hi&&(e.flags|=128,i=!0,Mi(r,!1),e.lanes=4194304)}else{if(!i)if(t=br(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!le)return Te(e),null}else 2*de()-r.renderingStartTime>hi&&n!==1073741824&&(e.flags|=128,i=!0,Mi(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=de(),e.sibling=null,n=ae.current,ne(ae,i?n&1|2:n&1),e):(Te(e),null);case 22:case 23:return Aa(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Qe&1073741824&&(Te(e),e.subtreeFlags&6&&(e.flags|=8192)):Te(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function ag(t,e){switch(ya(e),e.tag){case 1:return He(e.type)&&vr(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ai(),se(Ve),se(Ie),Ca(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ma(e),null;case 13:if(se(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return se(ae),null;case 4:return ai(),null;case 10:return Sa(e.type._context),null;case 22:case 23:return Aa(),null;case 24:return null;default:return null}}var Bs=!1,Le=!1,ug=typeof WeakSet=="function"?WeakSet:Set,A=null;function Kn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ce(t,e,i)}else n.current=null}function Ao(t,e,n){try{n()}catch(i){ce(t,e,i)}}var qu=!1;function hg(t,e){if(_o=fr,t=dd(),ga(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,h=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(u=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++h===s&&(a=o),f===r&&++c===i&&(u=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(So={focusedElem:t,selectionRange:n},fr=!1,A=e;A!==null;)if(e=A,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,A=t;else for(;A!==null;){e=A;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,M=y.memoizedState,g=e.stateNode,p=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:at(e.type,x),M);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(b){ce(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,A=t;break}A=e.return}return y=qu,qu=!1,y}function Oi(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Ao(e,n,r)}s=s.next}while(s!==i)}}function Vr(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Oo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uf(t){var e=t.alternate;e!==null&&(t.alternate=null,uf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wt],delete e[ns],delete e[ko],delete e[Km],delete e[Ym])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hf(t){return t.tag===5||t.tag===3||t.tag===4}function Zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Do(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gr));else if(i!==4&&(t=t.child,t!==null))for(Do(t,e,n),t=t.sibling;t!==null;)Do(t,e,n),t=t.sibling}function $o(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for($o(t,e,n),t=t.sibling;t!==null;)$o(t,e,n),t=t.sibling}var Me=null,ut=!1;function Dt(t,e,n){for(n=n.child;n!==null;)cf(t,e,n),n=n.sibling}function cf(t,e,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Fr,n)}catch{}switch(n.tag){case 5:Le||Kn(n,e);case 6:var i=Me,s=ut;Me=null,Dt(t,e,n),Me=i,ut=s,Me!==null&&(ut?(t=Me,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(ut?(t=Me,n=n.stateNode,t.nodeType===8?Sl(t.parentNode,n):t.nodeType===1&&Sl(t,n),Xi(t)):Sl(Me,n.stateNode));break;case 4:i=Me,s=ut,Me=n.stateNode.containerInfo,ut=!0,Dt(t,e,n),Me=i,ut=s;break;case 0:case 11:case 14:case 15:if(!Le&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Ao(n,e,o),s=s.next}while(s!==i)}Dt(t,e,n);break;case 1:if(!Le&&(Kn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ce(n,e,a)}Dt(t,e,n);break;case 21:Dt(t,e,n);break;case 22:n.mode&1?(Le=(i=Le)||n.memoizedState!==null,Dt(t,e,n),Le=i):Dt(t,e,n);break;default:Dt(t,e,n)}}function eh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ug),e.forEach(function(i){var s=xg.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function ot(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Me=a.stateNode,ut=!1;break e;case 3:Me=a.stateNode.containerInfo,ut=!0;break e;case 4:Me=a.stateNode.containerInfo,ut=!0;break e}a=a.return}if(Me===null)throw Error(T(160));cf(r,o,s),Me=null,ut=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){ce(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)df(e,t),e=e.sibling}function df(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ot(e,t),vt(t),i&4){try{Oi(3,t,t.return),Vr(3,t)}catch(x){ce(t,t.return,x)}try{Oi(5,t,t.return)}catch(x){ce(t,t.return,x)}}break;case 1:ot(e,t),vt(t),i&512&&n!==null&&Kn(n,n.return);break;case 5:if(ot(e,t),vt(t),i&512&&n!==null&&Kn(n,n.return),t.flags&32){var s=t.stateNode;try{Yi(s,"")}catch(x){ce(t,t.return,x)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&Rc(s,r),ho(a,o);var h=ho(a,r);for(o=0;o<u.length;o+=2){var c=u[o],d=u[o+1];c==="style"?Ac(s,d):c==="dangerouslySetInnerHTML"?Fc(s,d):c==="children"?Yi(s,d):ia(s,c,d,h)}switch(a){case"input":ro(s,r);break;case"textarea":Lc(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?Gn(s,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?Gn(s,!!r.multiple,r.defaultValue,!0):Gn(s,!!r.multiple,r.multiple?[]:"",!1))}s[ns]=r}catch(x){ce(t,t.return,x)}}break;case 6:if(ot(e,t),vt(t),i&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(x){ce(t,t.return,x)}}break;case 3:if(ot(e,t),vt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(x){ce(t,t.return,x)}break;case 4:ot(e,t),vt(t);break;case 13:ot(e,t),vt(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Fa=de())),i&4&&eh(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Le=(h=Le)||c,ot(e,t),Le=h):ot(e,t),vt(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!c&&t.mode&1)for(A=t,c=t.child;c!==null;){for(d=A=c;A!==null;){switch(f=A,m=f.child,f.tag){case 0:case 11:case 14:case 15:Oi(4,f,f.return);break;case 1:Kn(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){ce(i,n,x)}}break;case 5:Kn(f,f.return);break;case 22:if(f.memoizedState!==null){nh(d);continue}}m!==null?(m.return=f,A=m):nh(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Bc("display",o))}catch(x){ce(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(x){ce(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ot(e,t),vt(t),i&4&&eh(t);break;case 21:break;default:ot(e,t),vt(t)}}function vt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hf(n)){var i=n;break e}n=n.return}throw Error(T(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Yi(s,""),i.flags&=-33);var r=Zu(t);$o(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Zu(t);Do(t,a,o);break;default:throw Error(T(161))}}catch(u){ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cg(t,e,n){A=t,ff(t)}function ff(t,e,n){for(var i=(t.mode&1)!==0;A!==null;){var s=A,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Bs;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Le;a=Bs;var h=Le;if(Bs=o,(Le=u)&&!h)for(A=s;A!==null;)o=A,u=o.child,o.tag===22&&o.memoizedState!==null?ih(s):u!==null?(u.return=o,A=u):ih(s);for(;r!==null;)A=r,ff(r),r=r.sibling;A=s,Bs=a,Le=h}th(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,A=r):th(t)}}function th(t){for(;A!==null;){var e=A;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Le||Vr(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Le)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:at(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Ou(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ou(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var c=h.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Xi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}Le||e.flags&512&&Oo(e)}catch(f){ce(e,e.return,f)}}if(e===t){A=null;break}if(n=e.sibling,n!==null){n.return=e.return,A=n;break}A=e.return}}function nh(t){for(;A!==null;){var e=A;if(e===t){A=null;break}var n=e.sibling;if(n!==null){n.return=e.return,A=n;break}A=e.return}}function ih(t){for(;A!==null;){var e=A;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vr(4,e)}catch(u){ce(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){ce(e,s,u)}}var r=e.return;try{Oo(e)}catch(u){ce(e,r,u)}break;case 5:var o=e.return;try{Oo(e)}catch(u){ce(e,o,u)}}}catch(u){ce(e,e.return,u)}if(e===t){A=null;break}var a=e.sibling;if(a!==null){a.return=e.return,A=a;break}A=e.return}}var dg=Math.ceil,Cr=It.ReactCurrentDispatcher,La=It.ReactCurrentOwner,st=It.ReactCurrentBatchConfig,Q=0,ke=null,xe=null,Pe=0,Qe=0,Yn=on(0),je=0,as=null,_n=0,Hr=0,Ia=0,Di=null,We=null,Fa=0,hi=1/0,bt=null,Er=!1,Wo=null,en=null,As=!1,Yt=null,Pr=0,$i=0,Uo=null,ir=-1,sr=0;function Ae(){return Q&6?de():ir!==-1?ir:ir=de()}function tn(t){return t.mode&1?Q&2&&Pe!==0?Pe&-Pe:Jm.transition!==null?(sr===0&&(sr=Gc()),sr):(t=q,t!==0||(t=window.event,t=t===void 0?16:id(t.type)),t):1}function dt(t,e,n,i){if(50<$i)throw $i=0,Uo=null,Error(T(185));ps(t,n,i),(!(Q&2)||t!==ke)&&(t===ke&&(!(Q&2)&&(Hr|=n),je===4&&Ht(t,Pe)),Ke(t,i),n===1&&Q===0&&!(e.mode&1)&&(hi=de()+500,$r&&an()))}function Ke(t,e){var n=t.callbackNode;Jp(t,e);var i=dr(t,t===ke?Pe:0);if(i===0)n!==null&&du(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&du(n),e===1)t.tag===0?Qm(sh.bind(null,t)):Sd(sh.bind(null,t)),Vm(function(){!(Q&6)&&an()}),n=null;else{switch(Xc(i)){case 1:n=aa;break;case 4:n=Qc;break;case 16:n=cr;break;case 536870912:n=Jc;break;default:n=cr}n=_f(n,pf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pf(t,e){if(ir=-1,sr=0,Q&6)throw Error(T(327));var n=t.callbackNode;if(ti()&&t.callbackNode!==n)return null;var i=dr(t,t===ke?Pe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Nr(t,i);else{e=i;var s=Q;Q|=2;var r=gf();(ke!==t||Pe!==e)&&(bt=null,hi=de()+500,mn(t,e));do try{mg();break}catch(a){mf(t,a)}while(!0);_a(),Cr.current=r,Q=s,xe!==null?e=0:(ke=null,Pe=0,e=je)}if(e!==0){if(e===2&&(s=go(t),s!==0&&(i=s,e=Vo(t,s))),e===1)throw n=as,mn(t,0),Ht(t,i),Ke(t,de()),n;if(e===6)Ht(t,i);else{if(s=t.current.alternate,!(i&30)&&!fg(s)&&(e=Nr(t,i),e===2&&(r=go(t),r!==0&&(i=r,e=Vo(t,r))),e===1))throw n=as,mn(t,0),Ht(t,i),Ke(t,de()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(T(345));case 2:cn(t,We,bt);break;case 3:if(Ht(t,i),(i&130023424)===i&&(e=Fa+500-de(),10<e)){if(dr(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Ae(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bo(cn.bind(null,t,We,bt),e);break}cn(t,We,bt);break;case 4:if(Ht(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-ct(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=de()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dg(i/1960))-i,10<i){t.timeoutHandle=bo(cn.bind(null,t,We,bt),i);break}cn(t,We,bt);break;case 5:cn(t,We,bt);break;default:throw Error(T(329))}}}return Ke(t,de()),t.callbackNode===n?pf.bind(null,t):null}function Vo(t,e){var n=Di;return t.current.memoizedState.isDehydrated&&(mn(t,e).flags|=256),t=Nr(t,e),t!==2&&(e=We,We=n,e!==null&&Ho(e)),t}function Ho(t){We===null?We=t:We.push.apply(We,t)}function fg(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!ft(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ht(t,e){for(e&=~Ia,e&=~Hr,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ct(e),i=1<<n;t[n]=-1,e&=~i}}function sh(t){if(Q&6)throw Error(T(327));ti();var e=dr(t,0);if(!(e&1))return Ke(t,de()),null;var n=Nr(t,e);if(t.tag!==0&&n===2){var i=go(t);i!==0&&(e=i,n=Vo(t,i))}if(n===1)throw n=as,mn(t,0),Ht(t,e),Ke(t,de()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cn(t,We,bt),Ke(t,de()),null}function Ba(t,e){var n=Q;Q|=1;try{return t(e)}finally{Q=n,Q===0&&(hi=de()+500,$r&&an())}}function Sn(t){Yt!==null&&Yt.tag===0&&!(Q&6)&&ti();var e=Q;Q|=1;var n=st.transition,i=q;try{if(st.transition=null,q=1,t)return t()}finally{q=i,st.transition=n,Q=e,!(Q&6)&&an()}}function Aa(){Qe=Yn.current,se(Yn)}function mn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Um(n)),xe!==null)for(n=xe.return;n!==null;){var i=n;switch(ya(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&vr();break;case 3:ai(),se(Ve),se(Ie),Ca();break;case 5:Ma(i);break;case 4:ai();break;case 13:se(ae);break;case 19:se(ae);break;case 10:Sa(i.type._context);break;case 22:case 23:Aa()}n=n.return}if(ke=t,xe=t=nn(t.current,null),Pe=Qe=e,je=0,as=null,Ia=Hr=_n=0,We=Di=null,fn!==null){for(e=0;e<fn.length;e++)if(n=fn[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}fn=null}return t}function mf(t,e){do{var n=xe;try{if(_a(),er.current=Mr,kr){for(var i=ue.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}kr=!1}if(wn=0,be=Se=ue=null,Ai=!1,rs=0,La.current=null,n===null||n.return===null){je=1,as=e,xe=null;break}e:{var r=t,o=n.return,a=n,u=e;if(e=Pe,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=Hu(o);if(m!==null){m.flags&=-257,Ku(m,o,a,r,e),m.mode&1&&Vu(r,h,e),e=m,u=h;var y=e.updateQueue;if(y===null){var x=new Set;x.add(u),e.updateQueue=x}else y.add(u);break e}else{if(!(e&1)){Vu(r,h,e),Oa();break e}u=Error(T(426))}}else if(le&&a.mode&1){var M=Hu(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Ku(M,o,a,r,e),xa(ui(u,a));break e}}r=u=ui(u,a),je!==4&&(je=2),Di===null?Di=[r]:Di.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=Xd(r,u,e);Au(r,g);break e;case 1:a=u;var p=r.type,v=r.stateNode;if(!(r.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(en===null||!en.has(v)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=qd(r,a,e);Au(r,b);break e}}r=r.return}while(r!==null)}yf(n)}catch(P){e=P,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(!0)}function gf(){var t=Cr.current;return Cr.current=Mr,t===null?Mr:t}function Oa(){(je===0||je===3||je===2)&&(je=4),ke===null||!(_n&268435455)&&!(Hr&268435455)||Ht(ke,Pe)}function Nr(t,e){var n=Q;Q|=2;var i=gf();(ke!==t||Pe!==e)&&(bt=null,mn(t,e));do try{pg();break}catch(s){mf(t,s)}while(!0);if(_a(),Q=n,Cr.current=i,xe!==null)throw Error(T(261));return ke=null,Pe=0,je}function pg(){for(;xe!==null;)vf(xe)}function mg(){for(;xe!==null&&!Dp();)vf(xe)}function vf(t){var e=wf(t.alternate,t,Qe);t.memoizedProps=t.pendingProps,e===null?yf(t):xe=e,La.current=null}function yf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ag(n,e),n!==null){n.flags&=32767,xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,xe=null;return}}else if(n=og(n,e,Qe),n!==null){xe=n;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);je===0&&(je=5)}function cn(t,e,n){var i=q,s=st.transition;try{st.transition=null,q=1,gg(t,e,n,i)}finally{st.transition=s,q=i}return null}function gg(t,e,n,i){do ti();while(Yt!==null);if(Q&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(Gp(t,r),t===ke&&(xe=ke=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||As||(As=!0,_f(cr,function(){return ti(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=st.transition,st.transition=null;var o=q;q=1;var a=Q;Q|=4,La.current=null,hg(t,n),df(n,t),Fm(So),fr=!!_o,So=_o=null,t.current=n,cg(n),$p(),Q=a,q=o,st.transition=r}else t.current=n;if(As&&(As=!1,Yt=t,Pr=s),r=t.pendingLanes,r===0&&(en=null),Vp(n.stateNode),Ke(t,de()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Er)throw Er=!1,t=Wo,Wo=null,t;return Pr&1&&t.tag!==0&&ti(),r=t.pendingLanes,r&1?t===Uo?$i++:($i=0,Uo=t):$i=0,an(),null}function ti(){if(Yt!==null){var t=Xc(Pr),e=st.transition,n=q;try{if(st.transition=null,q=16>t?16:t,Yt===null)var i=!1;else{if(t=Yt,Yt=null,Pr=0,Q&6)throw Error(T(331));var s=Q;for(Q|=4,A=t.current;A!==null;){var r=A,o=r.child;if(A.flags&16){var a=r.deletions;if(a!==null){for(var u=0;u<a.length;u++){var h=a[u];for(A=h;A!==null;){var c=A;switch(c.tag){case 0:case 11:case 15:Oi(8,c,r)}var d=c.child;if(d!==null)d.return=c,A=d;else for(;A!==null;){c=A;var f=c.sibling,m=c.return;if(uf(c),c===h){A=null;break}if(f!==null){f.return=m,A=f;break}A=m}}}var y=r.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var M=x.sibling;x.sibling=null,x=M}while(x!==null)}}A=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,A=o;else e:for(;A!==null;){if(r=A,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Oi(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,A=g;break e}A=r.return}}var p=t.current;for(A=p;A!==null;){o=A;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,A=v;else e:for(o=p;A!==null;){if(a=A,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vr(9,a)}}catch(P){ce(a,a.return,P)}if(a===o){A=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,A=b;break e}A=a.return}}if(Q=s,an(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Fr,t)}catch{}i=!0}return i}finally{q=n,st.transition=e}}return!1}function rh(t,e,n){e=ui(n,e),e=Xd(t,e,1),t=Zt(t,e,1),e=Ae(),t!==null&&(ps(t,1,e),Ke(t,e))}function ce(t,e,n){if(t.tag===3)rh(t,t,n);else for(;e!==null;){if(e.tag===3){rh(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(en===null||!en.has(i))){t=ui(n,t),t=qd(e,t,1),e=Zt(e,t,1),t=Ae(),e!==null&&(ps(e,1,t),Ke(e,t));break}}e=e.return}}function vg(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Ae(),t.pingedLanes|=t.suspendedLanes&n,ke===t&&(Pe&n)===n&&(je===4||je===3&&(Pe&130023424)===Pe&&500>de()-Fa?mn(t,0):Ia|=n),Ke(t,e)}function xf(t,e){e===0&&(t.mode&1?(e=Es,Es<<=1,!(Es&130023424)&&(Es=4194304)):e=1);var n=Ae();t=Rt(t,e),t!==null&&(ps(t,e,n),Ke(t,n))}function yg(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xf(t,n)}function xg(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(T(314))}i!==null&&i.delete(e),xf(t,n)}var wf;wf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ve.current)Ue=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ue=!1,lg(t,e,n);Ue=!!(t.flags&131072)}else Ue=!1,le&&e.flags&1048576&&jd(e,wr,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;nr(t,e),t=e.pendingProps;var s=ri(e,Ie.current);ei(e,n),s=Pa(null,e,i,t,s,n);var r=Na();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(i)?(r=!0,yr(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ba(e),s.updater=Ur,e.stateNode=s,s._reactInternals=e,zo(e,i,t,n),e=Lo(null,e,i,!0,r,n)):(e.tag=0,le&&r&&va(e),Be(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(nr(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=_g(i),t=at(i,t),s){case 0:e=Ro(null,e,i,t,n);break e;case 1:e=Ju(null,e,i,t,n);break e;case 11:e=Yu(null,e,i,t,n);break e;case 14:e=Qu(null,e,i,at(i.type,t),n);break e}throw Error(T(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:at(i,s),Ro(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:at(i,s),Ju(t,e,i,s,n);case 3:e:{if(nf(e),t===null)throw Error(T(387));i=e.pendingProps,r=e.memoizedState,s=r.element,Pd(t,e),jr(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=ui(Error(T(423)),e),e=Gu(t,e,i,n,s);break e}else if(i!==s){s=ui(Error(T(424)),e),e=Gu(t,e,i,n,s);break e}else for(Je=qt(e.stateNode.containerInfo.firstChild),Ge=e,le=!0,ht=null,n=Cd(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),i===s){e=Lt(t,e,n);break e}Be(t,e,i,n)}e=e.child}return e;case 5:return Nd(e),t===null&&Eo(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,jo(i,s)?o=null:r!==null&&jo(i,r)&&(e.flags|=32),tf(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&Eo(e),null;case 13:return sf(t,e,n);case 4:return ka(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=oi(e,null,i,n):Be(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:at(i,s),Yu(t,e,i,s,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,ne(_r,i._currentValue),i._currentValue=o,r!==null)if(ft(r.value,o)){if(r.children===s.children&&!Ve.current){e=Lt(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var u=a.firstContext;u!==null;){if(u.context===i){if(r.tag===1){u=Nt(-1,n&-n),u.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var c=h.pending;c===null?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}r.lanes|=n,u=r.alternate,u!==null&&(u.lanes|=n),Po(r.return,n,e),a.lanes|=n;break}u=u.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Po(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Be(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ei(e,n),s=rt(s),i=i(s),e.flags|=1,Be(t,e,i,n),e.child;case 14:return i=e.type,s=at(i,e.pendingProps),s=at(i.type,s),Qu(t,e,i,s,n);case 15:return Zd(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:at(i,s),nr(t,e),e.tag=1,He(i)?(t=!0,yr(e)):t=!1,ei(e,n),Gd(e,i,s),zo(e,i,s,n),Lo(null,e,i,!0,t,n);case 19:return rf(t,e,n);case 22:return ef(t,e,n)}throw Error(T(156,e.tag))};function _f(t,e){return Yc(t,e)}function wg(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(t,e,n,i){return new wg(t,e,n,i)}function Da(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _g(t){if(typeof t=="function")return Da(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ra)return 11;if(t===la)return 14}return 2}function nn(t,e){var n=t.alternate;return n===null?(n=it(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rr(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")Da(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Bn:return gn(n.children,s,r,e);case sa:o=8,s|=8;break;case eo:return t=it(12,n,e,s|2),t.elementType=eo,t.lanes=r,t;case to:return t=it(13,n,e,s),t.elementType=to,t.lanes=r,t;case no:return t=it(19,n,e,s),t.elementType=no,t.lanes=r,t;case Nc:return Kr(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ec:o=10;break e;case Pc:o=9;break e;case ra:o=11;break e;case la:o=14;break e;case Wt:o=16,i=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=it(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function gn(t,e,n,i){return t=it(7,t,i,e),t.lanes=n,t}function Kr(t,e,n,i){return t=it(22,t,i,e),t.elementType=Nc,t.lanes=n,t.stateNode={isHidden:!1},t}function Nl(t,e,n){return t=it(6,t,null,e),t.lanes=n,t}function zl(t,e,n){return e=it(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sg(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cl(0),this.expirationTimes=cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $a(t,e,n,i,s,r,o,a,u){return t=new Sg(t,e,n,a,u),e===1?(e=1,r===!0&&(e|=8)):e=0,r=it(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ba(r),t}function jg(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Sf(t){if(!t)return rn;t=t._reactInternals;e:{if(Pn(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(He(n))return _d(t,n,e)}return e}function jf(t,e,n,i,s,r,o,a,u){return t=$a(n,i,!0,t,s,r,o,a,u),t.context=Sf(null),n=t.current,i=Ae(),s=tn(n),r=Nt(i,s),r.callback=e??null,Zt(n,r,s),t.current.lanes=s,ps(t,s,i),Ke(t,i),t}function Yr(t,e,n,i){var s=e.current,r=Ae(),o=tn(s);return n=Sf(n),e.context===null?e.context=n:e.pendingContext=n,e=Nt(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Zt(s,e,o),t!==null&&(dt(t,s,o,r),Zs(t,s,o)),o}function zr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Wa(t,e){lh(t,e),(t=t.alternate)&&lh(t,e)}function bg(){return null}var bf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ua(t){this._internalRoot=t}Qr.prototype.render=Ua.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));Yr(t,e,null,null)};Qr.prototype.unmount=Ua.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sn(function(){Yr(null,t,null,null)}),e[Tt]=null}};function Qr(t){this._internalRoot=t}Qr.prototype.unstable_scheduleHydration=function(t){if(t){var e=ed();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vt.length&&e!==0&&e<Vt[n].priority;n++);Vt.splice(n,0,t),n===0&&nd(t)}};function Va(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jr(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function oh(){}function kg(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var h=zr(o);r.call(h)}}var o=jf(e,i,t,0,null,!1,!1,"",oh);return t._reactRootContainer=o,t[Tt]=o.current,es(t.nodeType===8?t.parentNode:t),Sn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var h=zr(u);a.call(h)}}var u=$a(t,0,!1,null,null,!1,!1,"",oh);return t._reactRootContainer=u,t[Tt]=u.current,es(t.nodeType===8?t.parentNode:t),Sn(function(){Yr(e,u,n,i)}),u}function Gr(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var u=zr(o);a.call(u)}}Yr(e,o,t,s)}else o=kg(n,e,t,s,i);return zr(o)}qc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zi(e.pendingLanes);n!==0&&(ua(e,n|1),Ke(e,de()),!(Q&6)&&(hi=de()+500,an()))}break;case 13:Sn(function(){var i=Rt(t,1);if(i!==null){var s=Ae();dt(i,t,1,s)}}),Wa(t,1)}};ha=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=Ae();dt(e,t,134217728,n)}Wa(t,134217728)}};Zc=function(t){if(t.tag===13){var e=tn(t),n=Rt(t,e);if(n!==null){var i=Ae();dt(n,t,e,i)}Wa(t,e)}};ed=function(){return q};td=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};fo=function(t,e,n){switch(e){case"input":if(ro(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Dr(i);if(!s)throw Error(T(90));Tc(i),ro(i,s)}}}break;case"textarea":Lc(t,n);break;case"select":e=n.value,e!=null&&Gn(t,!!n.multiple,e,!1)}};$c=Ba;Wc=Sn;var Mg={usingClientEntryPoint:!1,Events:[gs,$n,Dr,Oc,Dc,Ba]},Ci={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cg={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:It.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hc(t),t===null?null:t.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||bg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Os=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Os.isDisabled&&Os.supportsFiber)try{Fr=Os.inject(Cg),_t=Os}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;Ze.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Va(e))throw Error(T(200));return jg(t,e,null,n)};Ze.createRoot=function(t,e){if(!Va(t))throw Error(T(299));var n=!1,i="",s=bf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$a(t,1,!1,null,null,n,!1,i,s),t[Tt]=e.current,es(t.nodeType===8?t.parentNode:t),new Ua(e)};Ze.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Hc(e),t=t===null?null:t.stateNode,t};Ze.flushSync=function(t){return Sn(t)};Ze.hydrate=function(t,e,n){if(!Jr(e))throw Error(T(200));return Gr(null,t,e,!0,n)};Ze.hydrateRoot=function(t,e,n){if(!Va(t))throw Error(T(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=bf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=jf(e,null,t,1,n??null,s,!1,r,o),t[Tt]=e.current,es(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Qr(e)};Ze.render=function(t,e,n){if(!Jr(e))throw Error(T(200));return Gr(null,t,e,!1,n)};Ze.unmountComponentAtNode=function(t){if(!Jr(t))throw Error(T(40));return t._reactRootContainer?(Sn(function(){Gr(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};Ze.unstable_batchedUpdates=Ba;Ze.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Jr(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return Gr(t,e,n,!1,i)};Ze.version="18.3.1-next-f1338f8080-20240426";function kf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kf)}catch(t){console.error(t)}}kf(),bc.exports=Ze;var Eg=bc.exports,ah=Eg;ql.createRoot=ah.createRoot,ql.hydrateRoot=ah.hydrateRoot;function te(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function vn(t,e){return t.width===e.width&&t.height===e.height}var Pg=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){n._observers=n._observers.filter(function(s){return s!==i})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function Ng(t){return new Pg(t)}var zg=function(){function t(e,n,i){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=te({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(r){return r},this._allowResizeObserver=(s=i==null?void 0:i.allowResizeObserver)!==null&&s!==void 0?s:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return te({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=te(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;vn(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,i=te(this._transformBitmapSize(e,this._canvasElementClientSize)),s=vn(this.bitmapSize,i)?null:i;n===null&&s===null||n!==null&&s!==null&&vn(n,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(n,s))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Rg().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=uh(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Ng(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var i=uh(this._canvasElement);if(i!==null){var s=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Lg(r[0],s):te({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var i=n.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var s=i.devicePixelContentBoxSize[0],r=te({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function Tg(t,e){return new zg(t,e.transform,e.options)}function uh(t){return t.ownerDocument.defaultView}function Rg(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Lg(t,e){return te({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var Ig=function(){function t(e,n,i){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function jn(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var i=t.bitmapSize;if(i.width===0||i.height===0)return null;var s=t.canvasElement.getContext("2d",e);return s===null?null:new Ig(s,n,i)}/*!
 * @license
 * TradingView Lightweight Charts v5.1.0
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Mf={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var hh,ch;function bn(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function Cf(t,e,n,i){t.beginPath();const s=t.lineWidth%2?.5:0;t.moveTo(n,e+s),t.lineTo(i,e+s),t.stroke()}function Ee(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Ye(t){if(t===void 0)throw new Error("Value is undefined");return t}function z(t){if(t===null)throw new Error("Value is null");return t}function Qt(t){return z(Ye(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(hh||(hh={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(ch||(ch={}));class fe{constructor(){this.t=[]}i(e,n,i){const s={h:e,l:n,o:i===!0};this.t.push(s)}_(e){const n=this.t.findIndex(i=>e===i.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,i){const s=[...this.t];this.t=this.t.filter(r=>!r.o),s.forEach(r=>r.h(e,n,i))}v(){return this.t.length>0}m(){this.t=[]}}function Xe(t,...e){for(const n of e)for(const i in n)n[i]!==void 0&&Object.prototype.hasOwnProperty.call(n,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof n[i]!="object"||t[i]===void 0||Array.isArray(n[i])?t[i]=n[i]:Xe(t[i],n[i]));return t}function kn(t){return typeof t=="number"&&isFinite(t)}function us(t){return typeof t=="number"&&t%1==0}function ys(t){return typeof t=="string"}function Ds(t){return typeof t=="boolean"}function Et(t){const e=t;if(!e||typeof e!="object")return e;let n,i,s;for(i in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(s=e[i],n[i]=s&&typeof s=="object"?Et(s):s);return n}function dh(t){return t!==null}function hs(t){return t===null?void 0:t}const Ef="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function cs(t,e,n){return e===void 0&&(e=Ef),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class Fg{constructor(e){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",I:0,V:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),i=this.W();return e.k===n&&e.T===i||(e.k=n,e.T=i,e.P=cs(n,i),e.A=2.5/12*n,e.I=e.A,e.V=n/12*e.C,e.B=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function Tl(t){return t<0?0:t>255?255:Math.round(t)||0}function fh(t){return .199*t[0]+.687*t[1]+.114*t[2]}class Bg{constructor(e,n){this.q=new Map,this.j=e,n&&(this.q=n)}Y(e,n){if(e==="transparent")return e;const i=this.K(e),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${n*s})`}Z(e){const n=this.K(e);return{G:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,X:fh(n)>160?"black":"white"}}J(e){return fh(this.K(e))}tt(e,n,i){const[s,r,o,a]=this.K(e),[u,h,c,d]=this.K(n),f=[Tl(s+i*(u-s)),Tl(r+i*(h-r)),Tl(o+i*(c-o)),(m=a+i*(d-a),m<=0||m>1?Math.min(Math.max(m,0),1):Math.round(1e4*m)/1e4)];var m;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const i=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const u=window.getComputedStyle(a).color;return document.body.removeChild(a),u}(e),s=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!s){if(this.j.length)for(const o of this.j){const a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}const r=[parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10),s[4]?parseFloat(s[4]):1];return this.q.set(e,r),r}}class Ag{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,i){this.it.forEach(s=>{s.nt(e,n,i)})}}class Nn{nt(e,n,i){e.useBitmapCoordinateSpace(s=>this.et(s,n,i))}}class Og extends Nn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const s=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(n))%2/2,a=u=>{e.beginPath();for(let h=s.to-1;h>=s.from;--h){const c=r.ot[h],d=Math.round(c._t*n)+o,f=c.ut*i,m=u*i+o;e.moveTo(d,f),e.arc(d,f,m,0,2*Math.PI)}e.fill()};r.ct>0&&(e.fillStyle=r.dt,a(r.ft+r.ct)),e.fillStyle=r.vt,a(r.ft)}}function Dg(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const $g={from:0,to:1};class Wg{constructor(e,n,i){this.Mt=new Ag,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.yt=i,this.Mt.st(this.bt)}kt(e){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const e=this.yt.Dt();e.length!==this.bt.length&&(this.St=e.map(Dg),this.bt=this.St.map(n=>{const i=new Og;return i.ht(n),i}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.It(),n=this.yt.Vt(),i=this.Ct.Bt(),s=this.O.Et();this.Pt(),n.forEach((r,o)=>{const a=this.St[o],u=r.At(i),h=r.Lt();!e&&u!==null&&r.It()&&h!==null?(a.vt=u.zt,a.ft=u.ft,a.ct=u.Ot,a.ot[0].gt=u.gt,a.ot[0].ut=r.Ft().Nt(u.gt,h.Wt),a.dt=u.Ht??this.O.Ut(a.ot[0].ut/r.Ft().$t()),a.ot[0].wt=i,a.ot[0]._t=s.qt(i),a.lt=$g):a.lt=null})}}class Ug extends Nn{constructor(e){super(),this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=this.jt.Yt.It,o=this.jt.Kt.It;if(!r&&!o)return;const a=Math.round(this.jt._t*i),u=Math.round(this.jt.ut*s);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.jt.Yt.ct*i),e.strokeStyle=this.jt.Yt.R,e.fillStyle=this.jt.Yt.R,bn(e,this.jt.Yt.Zt),function(h,c,d,f){h.beginPath();const m=h.lineWidth%2?.5:0;h.moveTo(c+m,d),h.lineTo(c+m,f),h.stroke()}(e,a,0,n.height)),o&&u>=0&&(e.lineWidth=Math.floor(this.jt.Kt.ct*s),e.strokeStyle=this.jt.Kt.R,e.fillStyle=this.jt.Kt.R,bn(e,this.jt.Kt.Zt),Cf(e,u,0,n.width))}}class Vg{constructor(e,n){this.xt=!0,this.Gt={Yt:{ct:1,Zt:0,R:"",It:!1},Kt:{ct:1,Zt:0,R:"",It:!1},_t:0,ut:0},this.Xt=new Ug(this.Gt),this.Jt=e,this.yt=n}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Xt}Rt(){const e=this.Jt.It(),n=this.yt.Qt().N().crosshair,i=this.Gt;if(n.mode===2)return i.Kt.It=!1,void(i.Yt.It=!1);i.Kt.It=e&&this.Jt.ti(this.yt),i.Yt.It=e&&this.Jt.ii(),i.Kt.ct=n.horzLine.width,i.Kt.Zt=n.horzLine.style,i.Kt.R=n.horzLine.color,i.Yt.ct=n.vertLine.width,i.Yt.Zt=n.vertLine.style,i.Yt.R=n.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function Hg(t,e,n,i,s,r){t.fillRect(e+r,n,i-2*r,r),t.fillRect(e+r,n+s-r,i-2*r,r),t.fillRect(e,n,r,s),t.fillRect(e+i-r,n,r,s)}function Xr(t,e,n,i,s,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,n,i,s),t.restore()}function ph(t,e,n,i,s,r){t.beginPath(),t.roundRect?t.roundRect(e,n,i,s,r):(t.lineTo(e+i-r[1],n),r[1]!==0&&t.arcTo(e+i,n,e+i,n+r[1],r[1]),t.lineTo(e+i,n+s-r[2]),r[2]!==0&&t.arcTo(e+i,n+s,e+i-r[2],n+s,r[2]),t.lineTo(e+r[3],n+s),r[3]!==0&&t.arcTo(e,n+s,e,n+s-r[3],r[3]),t.lineTo(e,n+r[0]),r[0]!==0&&t.arcTo(e,n,e+r[0],n,r[0]))}function mh(t,e,n,i,s,r,o=0,a=[0,0,0,0],u=""){if(t.save(),!o||!u||u===r)return ph(t,e,n,i,s,a),t.fillStyle=r,t.fill(),void t.restore();const h=o/2;var c;ph(t,e+h,n+h,i-o,s-o,(c=-h,a.map(d=>d===0?d:d+c))),r!=="transparent"&&(t.fillStyle=r,t.fill()),u!=="transparent"&&(t.lineWidth=o,t.strokeStyle=u,t.closePath(),t.stroke()),t.restore()}function Pf(t,e,n,i,s,r,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,s);a.addColorStop(0,r),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,n,i,s),t.restore()}class gh{constructor(e,n){this.ht(e,n)}ht(e,n){this.jt=e,this.ei=n}$t(e,n){return this.jt.It?e.k+e.A+e.I:0}nt(e,n,i,s){if(!this.jt.It||this.jt.ri.length===0)return;const r=this.jt.R,o=this.ei.G,a=e.useBitmapCoordinateSpace(u=>{const h=u.context;h.font=n.P;const c=this.hi(u,n,i,s),d=c.ai;return c.li?mh(h,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):mh(h,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.jt.pi&&(h.fillStyle=r,h.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.jt.Mi&&(h.fillStyle=n.D,h.fillRect(c.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),c});e.useMediaCoordinateSpace(({context:u})=>{const h=a.xi;u.font=n.P,u.textAlign=a.li?"right":"left",u.textBaseline="middle",u.fillStyle=r,u.fillText(this.jt.ri,h.Ci,(h._i+h.Si)/2+h.yi)})}hi(e,n,i,s){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:u,verticalPixelRatio:h}=e,c=this.jt.pi||!this.jt.ki?n.C:0,d=this.jt.Pi?n.S:0,f=n.A+this.ei.Ti,m=n.I+this.ei.Ri,y=n.V,x=n.B,M=this.jt.ri,g=n.k,p=i.Di(r,M),v=Math.ceil(i.Ii(r,M)),b=g+f+m,P=n.S+y+x+v+c,E=Math.max(1,Math.floor(h));let k=Math.round(b*h);k%2!=E%2&&(k+=1);const L=d>0?Math.max(1,Math.floor(d*u)):0,W=Math.round(P*u),O=Math.round(c*u),D=this.ei.Vi??this.ei.Bi??this.ei.Ei,H=Math.round(D*h)-Math.floor(.5*h),J=Math.floor(H+E/2-k/2),G=J+k,N=s==="right",S=N?a.width-d:d,C=N?o.width-L:L;let w,_,I;return N?(w=C-W,_=C-O,I=S-c-y-d):(w=C+W,_=C+O,I=S+c+y),{li:N,ai:{_i:J,mi:H,Si:G,ui:W,ci:k,ft:2*u,di:L,oi:w,fi:C,wi:_,gi:E,bi:o.width},xi:{_i:J/h,Si:G/h,Ci:I,yi:p}}}}class qr{constructor(e){this.Ai={Ei:0,G:"#000",Ri:0,Ti:0},this.Li={ri:"",It:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",It:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Oi=new(e||gh)(this.Li,this.Ai),this.Ni=new(e||gh)(this.zi,this.Ai)}ri(){return this.Fi(),this.Li.ri}Ei(){return this.Fi(),this.Ai.Ei}kt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Oi.$t(e,n),this.Ni.$t(e,n))}Wi(){return this.Ai.Vi??null}Hi(){return this.Ai.Vi??this.Ai.Bi??this.Ei()}Ui(e){this.Ai.Bi=e??void 0}$i(){return this.Fi(),this.Li.It||this.zi.It}qi(){return this.Fi(),this.Li.It}Tt(e){return this.Fi(),this.Li.pi=this.Li.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Oi}ji(){return this.Fi(),this.Oi.ht(this.Li,this.Ai),this.Ni.ht(this.zi,this.Ai),this.Ni}Fi(){this.xt&&(this.Li.pi=!0,this.zi.pi=!1,this.Yi(this.Li,this.zi,this.Ai))}}class Kg extends qr{constructor(e,n,i){super(),this.Jt=e,this.Ki=n,this.Zi=i}Yi(e,n,i){if(e.It=!1,this.Jt.N().mode===2)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const r=this.Ki.Lt();if(!this.Jt.It()||this.Ki.Gi()||r===null)return;const o=this.Ki.Xi().Z(s.labelBackgroundColor);i.G=o.G,e.R=o.X;const a=2/12*this.Ki.k();i.Ti=a,i.Ri=a;const u=this.Zi(this.Ki);i.Ei=u.Ei,e.ri=this.Ki.Ji(u.gt,r),e.It=!0}}const Yg=/[1-9]/g;class Nf{constructor(){this.jt=null}ht(e){this.jt=e}nt(e,n){if(this.jt===null||this.jt.It===!1||this.jt.ri.length===0)return;const i=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.P,Math.round(n.Qi.Ii(f,z(this.jt).ri,Yg))));if(i<=0)return;const s=n.ts,r=i+2*s,o=r/2,a=this.jt.ss;let u=this.jt.Ei,h=Math.floor(u-o)+.5;h<0?(u+=Math.abs(0-h),h=Math.floor(u-o)+.5):h+r>a&&(u-=Math.abs(a-(h+r)),h=Math.floor(u-o)+.5);const c=h+r,d=Math.ceil(0+n.S+n.C+n.A+n.k+n.I);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:m,verticalPixelRatio:y})=>{const x=z(this.jt);f.fillStyle=x.G;const M=Math.round(h*m),g=Math.round(0*y),p=Math.round(c*m),v=Math.round(d*y),b=Math.round(2*m);if(f.beginPath(),f.moveTo(M,g),f.lineTo(M,v-b),f.arcTo(M,v,M+b,v,b),f.lineTo(p-b,v),f.arcTo(p,v,p,v-b,b),f.lineTo(p,g),f.fill(),x.pi){const P=Math.round(x.Ei*m),E=g,k=Math.round((E+n.C)*y);f.fillStyle=x.R;const L=Math.max(1,Math.floor(m)),W=Math.floor(.5*m);f.fillRect(P-W,E,L,k-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const m=z(this.jt),y=0+n.S+n.C+n.A+n.k/2;f.font=n.P,f.textAlign="left",f.textBaseline="middle",f.fillStyle=m.R;const x=n.Qi.Di(f,"Apr0");f.translate(h+s,y+x),f.fillText(m.ri,0,0)})}}class Qg{constructor(e,n,i){this.xt=!0,this.Xt=new Nf,this.Gt={It:!1,G:"#4c525e",R:"white",ri:"",ss:0,Ei:NaN,pi:!0},this.Ct=e,this.ns=n,this.Zi=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Xt.ht(this.Gt),this.Xt}Rt(){const e=this.Gt;if(e.It=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const i=this.ns.Et();if(i.Gi())return;e.ss=i.ss();const s=this.Zi();if(s===null)return;e.Ei=s.Ei;const r=i.es(this.Ct.Bt());e.ri=i.rs(z(r)),e.It=!0;const o=this.ns.Xi().Z(n.labelBackgroundColor);e.G=o.G,e.R=o.X,e.pi=i.N().ticksVisible}}class zf{constructor(){this.hs=null,this.ls=0}_s(){return this.ls}us(e){this.ls=e}Ft(){return this.hs}cs(e){this.hs=e}ds(e){return[]}fs(){return[]}It(){return!0}}var vh;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(vh||(vh={}));class Jg extends zf{constructor(e,n){super(),this.yt=null,this.ps=NaN,this.vs=0,this.ws=!1,this.gs=new Map,this.Ms=!1,this.bs=new WeakMap,this.Ss=new WeakMap,this.xs=NaN,this.Cs=NaN,this.ys=NaN,this.ks=NaN,this.ns=e,this.Ps=n,this.Ts=((s,r)=>o=>{const a=r(),u=s();if(o===z(this.yt).Rs())return{gt:u,Ei:a};{const h=z(o.Lt());return{gt:o.Ds(a,h),Ei:a}}})(()=>this.ps,()=>this.Cs);const i=((s,r)=>()=>{const o=this.ns.Et().Is(s()),a=r();return o&&Number.isFinite(a)?{wt:o,Ei:a}:null})(()=>this.vs,()=>this.si());this.Vs=new Qg(this,e,i)}N(){return this.Ps}Bs(e,n){this.ys=e,this.ks=n}Es(){this.ys=NaN,this.ks=NaN}As(){return this.ys}Ls(){return this.ks}zs(e,n,i){this.Ms||(this.Ms=!0),this.ws=!0,this.Os(e,n,i)}Bt(){return this.vs}si(){return this.xs}ni(){return this.Cs}It(){return this.ws}Ns(){this.ws=!1,this.Fs(),this.ps=NaN,this.xs=NaN,this.Cs=NaN,this.yt=null,this.Es(),this.Ws()}Hs(e){if(!this.Ps.doNotSnapToHiddenSeriesIndices)return e;const n=this.ns,i=n.Et();let s=null,r=null;for(const h of n.Us()){const c=h.qs().$s(e,-1);if(c){if(c.js===e)return e;(s===null||c.js>s)&&(s=c.js)}const d=h.qs().$s(e,1);if(d){if(d.js===e)return e;(r===null||d.js<r)&&(r=d.js)}}const o=[s,r].filter(dh);if(o.length===0)return e;const a=i.qt(e),u=o.map(h=>Math.abs(a-i.qt(h)));return o[u.indexOf(Math.min(...u))]}Ys(e){let n=this.bs.get(e);n||(n=new Vg(this,e),this.bs.set(e,n));let i=this.Ss.get(e);return i||(i=new Wg(this.ns,this,e),this.Ss.set(e,i)),[n,i]}ti(e){return e===this.yt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ks(e,n){this.ws&&this.yt===e||this.gs.clear();const i=[];return this.yt===e&&i.push(this.Zs(this.gs,n,this.Ts)),i}fs(){return this.ws?[this.Vs]:[]}Gs(){return this.yt}Ws(){this.ns.Xs().forEach(e=>{var n,i;(n=this.bs.get(e))==null||n.kt(),(i=this.Ss.get(e))==null||i.kt()}),this.gs.forEach(e=>e.kt()),this.Vs.kt()}Js(e){return e&&!e.Rs().Gi()?e.Rs():null}Os(e,n,i){this.Qs(e,n,i)&&this.Ws()}Qs(e,n,i){const s=this.xs,r=this.Cs,o=this.ps,a=this.vs,u=this.yt,h=this.Js(i);this.vs=e,this.xs=isNaN(e)?NaN:this.ns.Et().qt(e),this.yt=i;const c=h!==null?h.Lt():null;return h!==null&&c!==null?(this.ps=n,this.Cs=h.Nt(n,c)):(this.ps=NaN,this.Cs=NaN),s!==this.xs||r!==this.Cs||a!==this.vs||o!==this.ps||u!==this.yt}Fs(){const e=this.ns.tn().map(i=>i.qs().sn()).filter(dh),n=e.length===0?null:Math.max(...e);this.vs=n!==null?n:NaN}Zs(e,n,i){let s=e.get(n);return s===void 0&&(s=new Kg(this,n,i),e.set(n,s)),s}}function Zr(t){return t==="left"||t==="right"}class Ce{constructor(e){this.nn=new Map,this.en=[],this.rn=e}hn(e,n){const i=function(s,r){return s===void 0?r:{an:Math.max(s.an,r.an),ln:s.ln||r.ln}}(this.nn.get(e),n);this.nn.set(e,i)}_n(){return this.rn}un(e){const n=this.nn.get(e);return n===void 0?{an:this.rn}:{an:Math.max(this.rn,n.an),ln:n.ln}}cn(){this.dn(),this.en=[{fn:0}]}pn(e){this.dn(),this.en=[{fn:1,Wt:e}]}vn(e){this.mn(),this.en.push({fn:5,Wt:e})}dn(){this.mn(),this.en.push({fn:6})}wn(){this.dn(),this.en=[{fn:4}]}gn(e){this.dn(),this.en.push({fn:2,Wt:e})}Mn(e){this.dn(),this.en.push({fn:3,Wt:e})}bn(){return this.en}Sn(e){for(const n of e.en)this.xn(n);this.rn=Math.max(this.rn,e.rn),e.nn.forEach((n,i)=>{this.hn(i,n)})}static Cn(){return new Ce(2)}static yn(){return new Ce(3)}xn(e){switch(e.fn){case 0:this.cn();break;case 1:this.pn(e.Wt);break;case 2:this.gn(e.Wt);break;case 3:this.Mn(e.Wt);break;case 4:this.wn();break;case 5:this.vn(e.Wt);break;case 6:this.mn()}}mn(){const e=this.en.findIndex(n=>n.fn===5);e!==-1&&this.en.splice(e,1)}}class Tf{formatTickmarks(e){return e.map(n=>this.format(n))}}const yh=".";function Pt(t,e){if(!kn(t))return"n/a";if(!us(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class el extends Tf{constructor(e,n){if(super(),n||(n=1),kn(e)&&us(e)||(e=100),e<0)throw new TypeError("invalid base");this.Ki=e,this.kn=n,this.Pn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Tn(e)}Pn(){if(this.Rn=0,this.Ki>0&&this.kn>0){let e=this.Ki;for(;e>1;)e/=10,this.Rn++}}Tn(e){const n=this.Ki/this.kn;let i=Math.floor(e),s="";const r=this.Rn!==void 0?this.Rn:NaN;if(n>1){let o=+(Math.round(e*n)-i*n).toFixed(this.Rn);o>=n&&(o-=n,i+=1),s=yh+Pt(+o.toFixed(this.Rn)*this.kn,r)}else i=Math.round(i*n)/n,r>0&&(s=yh+Pt(0,r));return i.toFixed(0)+s}}class Rf extends el{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class Gg extends Tf{constructor(e){super(),this.Dn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.In(e):e<999995?n+this.In(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.In(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.In(e/1e9)+"B")}In(e){let n;const i=Math.pow(10,this.Dn);return n=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Dn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(s,r)=>r)}}const Xg=/[2-9]/g;class ds{constructor(e=50){this.Vn=0,this.Bn=1,this.En=1,this.An={},this.Ln=new Map,this.zn=e}On(){this.Vn=0,this.Ln.clear(),this.Bn=1,this.En=1,this.An={}}Ii(e,n,i){return this.Nn(e,n,i).width}Di(e,n,i){const s=this.Nn(e,n,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Nn(e,n,i){const s=i||Xg,r=String(n).replace(s,"0");if(this.Ln.has(r))return Ye(this.Ln.get(r)).Fn;if(this.Vn===this.zn){const a=this.An[this.En];delete this.An[this.En],this.Ln.delete(a),this.En++,this.Vn--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&n.length||(this.Ln.set(r,{Fn:o,Wn:this.Bn}),this.An[this.Bn]=r,this.Vn++,this.Bn++),o}}class qg{constructor(e){this.Hn=null,this.M=null,this.Un="right",this.$n=e}qn(e,n,i){this.Hn=e,this.M=n,this.Un=i}nt(e){this.M!==null&&this.Hn!==null&&this.Hn.nt(e,this.M,this.$n,this.Un)}}class Lf{constructor(e,n,i){this.jn=e,this.$n=new ds(50),this.Yn=n,this.O=i,this.F=-1,this.Xt=new qg(this.$n)}Tt(){const e=this.O.Kn(this.Yn);if(e===null)return null;const n=e.Zn(this.Yn)?e.Gn():this.Yn.Ft();if(n===null)return null;const i=e.Xn(n);if(i==="overlay")return null;const s=this.O.Jn();return s.k!==this.F&&(this.F=s.k,this.$n.On()),this.Xt.qn(this.jn.ji(),s,i),this.Xt}}class Zg extends Nn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}Qn(e,n){var o;if(!((o=this.jt)!=null&&o.It))return null;const{ut:i,ct:s,te:r}=this.jt;return n>=i-s-7&&n<=i+s+7?{ie:this.jt,te:r}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null||this.jt.It===!1)return;const r=Math.round(this.jt.ut*s);r<0||r>n.height||(e.lineCap="butt",e.strokeStyle=this.jt.R,e.lineWidth=Math.floor(this.jt.ct*i),bn(e,this.jt.Zt),Cf(e,r,0,n.width))}}class Ha{constructor(e){this.se={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Zt:0,It:!1},this.ne=new Zg,this.xt=!0,this.ee=e,this.re=e.Qt(),this.ne.ht(this.se)}kt(){this.xt=!0}Tt(){return this.ee.It()?(this.xt&&(this.he(),this.xt=!1),this.ne):null}}class ev extends Ha{constructor(e){super(e)}he(){this.se.It=!1;const e=this.ee.Ft(),n=e.ae().ae;if(n!==2&&n!==3)return;const i=this.ee.N();if(!i.baseLineVisible||!this.ee.It())return;const s=this.ee.Lt();s!==null&&(this.se.It=!0,this.se.ut=e.Nt(s.Wt,s.Wt),this.se.R=i.baseLineColor,this.se.ct=i.baseLineWidth,this.se.Zt=i.baseLineStyle)}}class tv extends Nn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}le(){return this.jt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){const s=this.jt;if(s===null)return;const r=Math.max(1,Math.floor(n)),o=r%2/2,a=Math.round(s.oe.x*n)+o,u=s.oe.y*i;e.fillStyle=s._e,e.beginPath();const h=Math.max(2,1.5*s.ue)*n;e.arc(a,u,h,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.ce,e.beginPath(),e.arc(a,u,s.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=s.de,e.beginPath(),e.arc(a,u,s.ft*n+r/2,0,2*Math.PI,!1),e.stroke()}}const nv=[{fe:0,pe:.25,ve:4,me:10,we:.25,ge:0,Me:.4,be:.8},{fe:.25,pe:.525,ve:10,me:14,we:0,ge:0,Me:.8,be:0},{fe:.525,pe:1,ve:14,me:14,we:0,ge:0,Me:0,be:0}];class iv{constructor(e){this.Xt=new tv,this.xt=!0,this.Se=!0,this.xe=performance.now(),this.Ce=this.xe-1,this.ye=e}ke(){this.Ce=this.xe-1,this.kt()}Pe(){if(this.kt(),this.ye.N().lastPriceAnimation===2){const e=performance.now(),n=this.Ce-e;if(n>0)return void(n<650&&(this.Ce+=2600));this.xe=e,this.Ce=e+2600}}kt(){this.xt=!0}Te(){this.Se=!0}It(){return this.ye.N().lastPriceAnimation!==0}Re(){switch(this.ye.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Ce}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.Se=!1):this.Se&&(this.De(),this.Se=!1),this.Xt}Rt(){this.Xt.ht(null);const e=this.ye.Qt().Et(),n=e.Ie(),i=this.ye.Lt();if(n===null||i===null)return;const s=this.ye.Ve(!0);if(s.Be||!n.Ee(s.js))return;const r={x:e.qt(s.js),y:this.ye.Ft().Nt(s.gt,i.Wt)},o=s.R,a=this.ye.N().lineWidth,u=this.Ae(this.Le(),o);this.Xt.ht({_e:o,ue:a,ce:u.ce,de:u.de,ft:u.ft,oe:r})}De(){const e=this.Xt.le();if(e!==null){const n=this.Ae(this.Le(),e._e);e.ce=n.ce,e.de=n.de,e.ft=n.ft}}Le(){return this.Re()?performance.now()-this.xe:2599}ze(e,n,i,s){const r=i+(s-i)*n;return this.ye.Qt().Xi().Y(e,r)}Ae(e,n){const i=e%2600/2600;let s;for(const h of nv)if(i>=h.fe&&i<=h.pe){s=h;break}Ee(s!==void 0,"Last price animation internal logic error");const r=(i-s.fe)/(s.pe-s.fe);return{ce:this.ze(n,r,s.we,s.ge),de:this.ze(n,r,s.Me,s.be),ft:(o=r,a=s.ve,u=s.me,a+(u-a)*o)};var o,a,u}}class sv extends Ha{constructor(e){super(e)}he(){const e=this.se;e.It=!1;const n=this.ee.N();if(!n.priceLineVisible||!this.ee.It())return;const i=this.ee.Ve(n.priceLineSource===0);i.Be||(e.It=!0,e.ut=i.Ei,e.R=this.ee.Oe(i.R),e.ct=n.priceLineWidth,e.Zt=n.priceLineStyle)}}class rv extends qr{constructor(e){super(),this.Jt=e}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.Jt;if(!s.It())return;const r=s.N(),o=r.lastValueVisible,a=s.Ne()!=="",u=r.seriesLastValueMode===0,h=s.Ve(!1);if(h.Be)return;o&&(e.ri=this.Fe(h,o,u),e.It=e.ri.length!==0),(a||u)&&(n.ri=this.We(h,o,a,u),n.It=n.ri.length>0);const c=s.Oe(h.R),d=this.Jt.Qt().Xi().Z(c);i.G=d.G,i.Ei=h.Ei,n.Ht=s.Qt().Ut(h.Ei/s.Ft().$t()),e.Ht=c,e.R=d.X,n.R=d.X}We(e,n,i,s){let r="";const o=this.Jt.Ne();return i&&o.length!==0&&(r+=`${o} `),n&&s&&(r+=this.Jt.Ft().He()?e.Ue:e.$e),r.trim()}Fe(e,n,i){return n?i?this.Jt.Ft().He()?e.$e:e.Ue:e.ri:""}}function xh(t,e,n,i){const s=Number.isFinite(e),r=Number.isFinite(n);return s&&r?t(e,n):s||r?s?e:n:i}class Oe{constructor(e,n){this.qe=e,this.je=n}Ye(e){return e!==null&&this.qe===e.qe&&this.je===e.je}Ke(){return new Oe(this.qe,this.je)}Ze(){return this.qe}Ge(){return this.je}Xe(){return this.je-this.qe}Gi(){return this.je===this.qe||Number.isNaN(this.je)||Number.isNaN(this.qe)}Sn(e){return e===null?this:new Oe(xh(Math.min,this.Ze(),e.Ze(),-1/0),xh(Math.max,this.Ge(),e.Ge(),1/0))}Je(e){if(!kn(e)||this.je-this.qe===0)return;const n=.5*(this.je+this.qe);let i=this.je-n,s=this.qe-n;i*=e,s*=e,this.je=n+i,this.qe=n+s}Qe(e){kn(e)&&(this.je+=e,this.qe+=e)}tr(){return{minValue:this.qe,maxValue:this.je}}static ir(e){return e===null?null:new Oe(e.minValue,e.maxValue)}}class Tr{constructor(e,n){this.sr=e,this.nr=n||null}er(){return this.sr}rr(){return this.nr}tr(){return{priceRange:this.sr===null?null:this.sr.tr(),margins:this.nr||void 0}}static ir(e){return e===null?null:new Tr(Oe.ir(e.priceRange),e.margins)}}const lv=[2,4,8,16,32,64,128,256,512],ov="Custom series with conflation reducer must have a priceValueBuilder method";class av extends Ha{constructor(e,n){super(e),this.hr=n}he(){const e=this.se;e.It=!1;const n=this.hr.N();if(!this.ee.It()||!n.lineVisible)return;const i=this.hr.ar();i!==null&&(e.It=!0,e.ut=i,e.R=n.color,e.ct=n.lineWidth,e.Zt=n.lineStyle,e.te=this.hr.N().id)}}class uv extends qr{constructor(e,n){super(),this.ye=e,this.hr=n}Yi(e,n,i){e.It=!1,n.It=!1;const s=this.hr.N(),r=s.axisLabelVisible,o=s.title!=="",a=this.ye;if(!r||!a.It())return;const u=this.hr.ar();if(u===null)return;o&&(n.ri=s.title,n.It=!0),n.Ht=a.Qt().Ut(u/a.Ft().$t()),e.ri=this.lr(s.price),e.It=!0;const h=this.ye.Qt().Xi().Z(s.axisLabelColor||s.color);i.G=h.G;const c=s.axisLabelTextColor||h.X;e.R=c,n.R=c,i.Ei=u}lr(e){const n=this.ye.Lt();return n===null?"":this.ye.Ft().Ji(e,n.Wt)}}class hv{constructor(e,n){this.ye=e,this.Ps=n,this._r=new av(e,this),this.jn=new uv(e,this),this.ur=new Lf(this.jn,e,e.Qt())}cr(e){Xe(this.Ps,e),this.kt(),this.ye.Qt().dr()}N(){return this.Ps}pr(){return this._r}vr(){return this.ur}mr(){return this.jn}kt(){this._r.kt(),this.jn.kt()}ar(){const e=this.ye,n=e.Ft();if(e.Qt().Et().Gi()||n.Gi())return null;const i=e.Lt();return i===null?null:n.Nt(this.Ps.price,i.Wt)}}class cv{constructor(){this.wr=new WeakMap}gr(e,n,i){const s=1/n*i;if(e>=s)return 1;const r=s/e,o=Math.pow(2,Math.floor(Math.log2(r)));return Math.min(o,512)}Mr(e,n,i,s=!1,r){if(e.length===0||n<=1)return e;const o=this.br(n);if(o<=1)return e;const a=this.Sr(e);let u=a.Cr.get(o);return u!==void 0||(u=this.yr(e,o,i,s,r,a.Cr),a.Cr.set(o,u)),u}kr(e,n,i,s,r=!1,o){if(i<1||e.length===0)return e;const a=this.Sr(e),u=a.Cr.get(i);if(!u)return this.Mr(e,i,s,r,o);const h=this.Pr(e,n,i,u,r,s,o);return a.Cr.set(i,h),h}br(e){if(e<=2)return 2;for(const n of lv)if(e<=n)return n;return 512}Tr(e){if(e.length===0)return 0;const n=e[0],i=e[e.length-1];return 31*e.length+17*n.js+13*i.js}yr(e,n,i,s=!1,r,o=new Map){if(n===2)return this.Rr(e,2,i,s,r);const a=n/2;let u=o.get(a);return u||(u=this.yr(e,a,i,s,r,o),o.set(a,u)),this.Dr(u,i,s,r)}Rr(e,n,i,s=!1,r){const o=this.Ir(e,n,i,s,r);return this.Vr(o,s)}Dr(e,n,i=!1,s){const r=this.Ir(e,2,n,i,s);return this.Vr(r,i)}Ir(e,n,i,s=!1,r){const o=[];for(let a=0;a<e.length;a+=n)if(e.length-a>=n){const u=this.Br(e[a],e[a+1],i,s,r);u.Er=!1,o.push(u)}else if(o.length===0)o.push(this.Ar(e[a],!0));else{const u=o[o.length-1];o[o.length-1]=this.Lr(u,e[a],i,s,r)}return o}zr(e,n){return(e??1)+(n??1)}Br(e,n,i,s=!1,r){if(!s||!i||!r){const h=e.Wt[1]>n.Wt[1]?e.Wt[1]:n.Wt[1],c=e.Wt[2]<n.Wt[2]?e.Wt[2]:n.Wt[2];return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:h,$r:c,qr:n.Wt[3],jr:this.zr(e.jr,n.jr),Yr:void 0,Er:!1}}const o=i(this.Kr(e,r),this.Kr(n,r)),a=r(o),u=a.length?a[a.length-1]:0;return{Or:e.js,Nr:n.js,Fr:e.wt,Wr:n.wt,Hr:e.Wt[0],Ur:Math.max(e.Wt[1],u),$r:Math.min(e.Wt[2],u),qr:u,jr:this.zr(e.jr,n.jr),Yr:o,Er:!1}}Lr(e,n,i,s=!1,r){if(!s||!i||!r)return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:e.Ur>n.Wt[1]?e.Ur:n.Wt[1],$r:e.$r<n.Wt[2]?e.$r:n.Wt[2],qr:n.Wt[3],jr:e.jr+(n.jr??1),Yr:e.Yr,Er:!1};const o=e.Yr,a=this.Kr(n,r),u=o?{data:o,index:e.Or,originalTime:e.Fr,time:e.Fr,priceValues:r(o)}:null,h=u?i(u,a):a.data,c=u?r(h):a.priceValues,d=c.length?c[c.length-1]:0;return{Or:e.Or,Nr:n.js,Fr:e.Fr,Wr:n.wt,Hr:e.Hr,Ur:Math.max(e.Ur,d),$r:Math.min(e.$r,d),qr:d,jr:e.jr+(n.jr??1),Yr:h,Er:!1}}Zr(e,n,i,s,r,o,a=!1,u){const h=n===s?r:e[n];if(i-n==1)return this.Ar(h,!0);const c=n+1===s?r:e[n+1];let d=this.Br(h,c,o,a,u);for(let f=n+2;f<i;f++){const m=f===s?r:e[f];d=this.Lr(d,m,o,a,u)}return d}Kr(e,n){const i=e.le??{};return{data:e.le,index:e.js,originalTime:e.Gr,time:e.wt,priceValues:n(i)}}Xr(e,n=!1){const i=n===!0,s=!!e.Yr;return{js:e.Or,wt:e.Fr,Gr:e.Fr,Wt:[i?e.qr:e.Hr,e.Ur,e.$r,e.qr],jr:e.jr,le:i?s?e.Yr:{wt:e.Fr}:void 0}}Vr(e,n=!1){return e.map(i=>this.Xr(i,n))}Pr(e,n,i,s,r=!1,o,a){if(s.length===0)return s;const u=e.length-1,h=Math.floor(u/i)*i;if(Math.min(h+i,e.length)-h<i&&e.length>i){const c=e.slice();return c[c.length-1]=n,this.Mr(c,i,o,r,a)}if(Math.floor((u-1)/i)===Math.floor(u/i)||s.length===1){const c=Math.min(h+i,e.length),d=c-h;if(d<=0)return s;const f=d===1?this.Ar(h===u?n:e[h],!0):this.Zr(e,h,c,u,n,o,r,a);return s[s.length-1]=this.Xr(f,r),s}{const c=e.slice();return c[c.length-1]=n,this.Mr(c,i,o,r,a)}}Ar(e,n=!1){return{Or:e.js,Nr:e.js,Fr:e.wt,Wr:e.wt,Hr:e.Wt[0],Ur:e.Wt[1],$r:e.Wt[2],qr:e.Wt[3],jr:e.jr??1,Yr:e.le,Er:n}}Sr(e){const n=this.Jr(e),i=this.Tr(e);return n.Qr!==i&&(n.Cr.clear(),n.Qr=i),n}Jr(e){let n=this.wr.get(e);return n===void 0&&(n={Qr:this.Tr(e),Cr:new Map},this.wr.set(e,n)),n}}class dv extends zf{constructor(e){super(),this.ns=e}Qt(){return this.ns}}const fv={Bar:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,o=z(t(n,i)),a=Qt(o.Wt[0])<=Qt(o.Wt[3]);return{th:o.R??(a?s:r)}},Candlestick:(t,e,n,i)=>{const s=e.upColor,r=e.downColor,o=e.borderUpColor,a=e.borderDownColor,u=e.wickUpColor,h=e.wickDownColor,c=z(t(n,i)),d=Qt(c.Wt[0])<=Qt(c.Wt[3]);return{th:c.R??(d?s:r),ih:c.Ht??(d?o:a),sh:c.nh??(d?u:h)}},Custom:(t,e,n,i)=>({th:z(t(n,i)).R??e.color}),Area:(t,e,n,i)=>{const s=z(t(n,i));return{th:s.vt??e.lineColor,vt:s.vt??e.lineColor,eh:s.eh??e.topColor,rh:s.rh??e.bottomColor}},Baseline:(t,e,n,i)=>{const s=z(t(n,i));return{th:s.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,hh:s.hh??e.topLineColor,ah:s.ah??e.bottomLineColor,oh:s.oh??e.topFillColor1,_h:s._h??e.topFillColor2,uh:s.uh??e.bottomFillColor1,dh:s.dh??e.bottomFillColor2}},Line:(t,e,n,i)=>{const s=z(t(n,i));return{th:s.R??e.color,vt:s.R??e.color}},Histogram:(t,e,n,i)=>({th:z(t(n,i)).R??e.color})};class pv{constructor(e){this.fh=(n,i)=>i!==void 0?i.Wt:this.ye.qs().ph(n),this.ye=e,this.mh=fv[e.wh()]}gh(e,n){return this.mh(this.fh,this.ye.N(),e,n)}}function If(t,e,n,i,s=0,r=e.length){let o=r-s;for(;0<o;){const a=o>>1,u=s+a;i(e[u],n)===t?(s=u+1,o-=a+1):o=a}return s}const ci=If.bind(null,!0),Ff=If.bind(null,!1);var wh;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(wh||(wh={}));const $t=30;class mv{constructor(){this.Mh=[],this.bh=new Map,this.Sh=new Map,this.xh=[]}Ch(){return this.yh()>0?this.Mh[this.Mh.length-1]:null}kh(){return this.yh()>0?this.Ph(0):null}sn(){return this.yh()>0?this.Ph(this.Mh.length-1):null}yh(){return this.Mh.length}Gi(){return this.yh()===0}Ee(e){return this.Th(e,0)!==null}ph(e){return this.$s(e)}$s(e,n=0){const i=this.Th(e,n);return i===null?null:{...this.Rh(i),js:this.Ph(i)}}Dh(){return this.Mh}Ih(e,n,i){if(this.Gi())return null;let s=null;for(const r of i)s=$s(s,this.Vh(e,n,r));return s}ht(e){this.Sh.clear(),this.bh.clear(),this.Mh=e,this.xh=e.map(n=>n.js)}Bh(){return this.xh}Ph(e){return this.Mh[e].js}Rh(e){return this.Mh[e]}Th(e,n){const i=this.Eh(e);if(i===null&&n!==0)switch(n){case-1:return this.Ah(e);case 1:return this.Lh(e);default:throw new TypeError("Unknown search mode")}return i}Ah(e){let n=this.zh(e);return n>0&&(n-=1),n!==this.Mh.length&&this.Ph(n)<e?n:null}Lh(e){const n=this.Oh(e);return n!==this.Mh.length&&e<this.Ph(n)?n:null}Eh(e){const n=this.zh(e);return n===this.Mh.length||e<this.Mh[n].js?null:n}zh(e){return ci(this.Mh,e,(n,i)=>n.js<i)}Oh(e){return Ff(this.Mh,e,(n,i)=>n.js>i)}Nh(e,n,i){let s=null;for(let r=e;r<n;r++){const o=this.Mh[r].Wt[i];Number.isNaN(o)||(s===null?s={Fh:o,Wh:o}:(o<s.Fh&&(s.Fh=o),o>s.Wh&&(s.Wh=o)))}return s}Vh(e,n,i){if(this.Gi())return null;let s=null;const r=z(this.kh()),o=z(this.sn()),a=Math.max(e,r),u=Math.min(n,o),h=Math.ceil(a/$t)*$t,c=Math.max(h,Math.floor(u/$t)*$t);{const f=this.zh(a),m=this.Oh(Math.min(u,h,n));s=$s(s,this.Nh(f,m,i))}let d=this.bh.get(i);d===void 0&&(d=new Map,this.bh.set(i,d));for(let f=Math.max(h+1,a);f<c;f+=$t){const m=Math.floor(f/$t);let y=d.get(m);if(y===void 0){const x=this.zh(m*$t),M=this.Oh((m+1)*$t-1);y=this.Nh(x,M,i),d.set(m,y)}s=$s(s,y)}{const f=this.zh(c),m=this.Oh(u);s=$s(s,this.Nh(f,m,i))}return s}}function $s(t,e){return t===null?e:e===null?t:{Fh:Math.min(t.Fh,e.Fh),Wh:Math.max(t.Wh,e.Wh)}}function Rl(){return new mv}const Rr={setLineStyle:bn};class gv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Rr)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Rr)}}class vv{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new gv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}class Bf{constructor(e){this.Kh=null,this.Zh=e}Gh(){return this.Zh}Ws(){var e,n;(n=(e=this.Zh).updateAllViews)==null||n.call(e)}Ys(){var i,s,r;const e=((s=(i=this.Zh).paneViews)==null?void 0:s.call(i))??[];if(((r=this.Kh)==null?void 0:r.qh)===e)return this.Kh.jh;const n=e.map(o=>new vv(o));return this.Kh={qh:e,jh:n},n}Qn(e,n){var i,s;return((s=(i=this.Zh).hitTest)==null?void 0:s.call(i,e,n))??null}}let yv=class extends Bf{ds(){return[]}};class xv{constructor(e){this.Hh=e}nt(e,n,i){this.Hh.draw(e,Rr)}Uh(e,n,i){var s,r;(r=(s=this.Hh).drawBackground)==null||r.call(s,e,Rr)}}class _h{constructor(e){this.Ln=null,this.$h=e}Tt(){var i;const e=this.$h.renderer();if(e===null)return null;if(((i=this.Ln)==null?void 0:i.qh)===e)return this.Ln.jh;const n=new xv(e);return this.Ln={qh:e,jh:n},n}Yh(){var e,n;return((n=(e=this.$h).zOrder)==null?void 0:n.call(e))??"normal"}}function Af(t){var e,n,i;return{ri:t.text(),Ei:t.coordinate(),Vi:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),G:t.backColor(),It:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((i=t.tickVisible)==null?void 0:i.call(t))??!0}}class wv{constructor(e,n){this.Xt=new Nf,this.Xh=e,this.Jh=n}Tt(){return this.Xt.ht({ss:this.Jh.ss(),...Af(this.Xh)}),this.Xt}}class _v extends qr{constructor(e,n){super(),this.Xh=e,this.Ki=n}Yi(e,n,i){const s=Af(this.Xh);i.G=s.G,e.R=s.R;const r=2/12*this.Ki.k();i.Ti=r,i.Ri=r,i.Ei=s.Ei,i.Vi=s.Vi,e.ri=s.ri,e.It=s.It,e.pi=s.pi}}class Sv extends Bf{constructor(e,n){super(e),this.Qh=null,this.ta=null,this.ia=null,this.sa=null,this.ye=n}fs(){var s,r,o;const e=((r=(s=this.Zh).timeAxisViews)==null?void 0:r.call(s))??[];if(((o=this.Qh)==null?void 0:o.qh)===e)return this.Qh.jh;const n=this.ye.Qt().Et(),i=e.map(a=>new wv(a,n));return this.Qh={qh:e,jh:i},i}Ks(){var s,r,o;const e=((r=(s=this.Zh).priceAxisViews)==null?void 0:r.call(s))??[];if(((o=this.ta)==null?void 0:o.qh)===e)return this.ta.jh;const n=this.ye.Ft(),i=e.map(a=>new _v(a,n));return this.ta={qh:e,jh:i},i}na(){var i,s,r;const e=((s=(i=this.Zh).priceAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.ia)==null?void 0:r.qh)===e)return this.ia.jh;const n=e.map(o=>new _h(o));return this.ia={qh:e,jh:n},n}ea(){var i,s,r;const e=((s=(i=this.Zh).timeAxisPaneViews)==null?void 0:s.call(i))??[];if(((r=this.sa)==null?void 0:r.qh)===e)return this.sa.jh;const n=e.map(o=>new _h(o));return this.sa={qh:e,jh:n},n}ra(e,n){var i,s;return((s=(i=this.Zh).autoscaleInfo)==null?void 0:s.call(i,e,n))??null}}function Ll(t,e,n,i){t.forEach(s=>{e(s).forEach(r=>{r.Yh()===n&&i.push(r)})})}function Il(t){return t.Ys()}function jv(t){return t.na()}function bv(t){return t.ea()}const kv=["Area","Line","Baseline"];class tl extends dv{constructor(e,n,i,s,r){super(e),this.jt=Rl(),this._r=new sv(this),this.ha=[],this.aa=new ev(this),this.la=null,this.oa=null,this._a=null,this.ua=[],this.ca=new cv,this.da=new Map,this.fa=null,this.Ps=i,this.pa=n;const o=new rv(this);if(this.gs=[o],this.ur=new Lf(o,this,e),kv.includes(this.pa)&&(this.la=new iv(this)),this.va(),this.$h=s(this,this.Qt(),r),this.pa==="Custom"){const a=this.$h;a.ma&&this.wa(a.ma)}}m(){this._a!==null&&clearTimeout(this._a)}Oe(e){return this.Ps.priceLineColor||e}Ve(e){const n={Be:!0},i=this.Ft();if(this.Qt().Et().Gi()||i.Gi()||this.jt.Gi())return n;const s=this.Qt().Et().Ie(),r=this.Lt();if(s===null||r===null)return n;let o,a;if(e){const d=this.jt.Ch();if(d===null)return n;o=d,a=d.js}else{const d=this.jt.$s(s.bi(),-1);if(d===null||(o=this.jt.ph(d.js),o===null))return n;a=d.js}const u=o.Wt[3],h=this.ga().gh(a,{Wt:o}),c=i.Nt(u,r.Wt);return{Be:!1,gt:u,ri:i.Ji(u,r.Wt),Ue:i.Ma(u),$e:i.ba(u,r.Wt),R:h.th,Ei:c,js:a}}ga(){return this.oa!==null||(this.oa=new pv(this)),this.oa}N(){return this.Ps}cr(e){const n=this.Qt(),{priceScaleId:i,visible:s,priceFormat:r}=e;i!==void 0&&i!==this.Ps.priceScaleId&&n.Sa(this,i),s!==void 0&&s!==this.Ps.visible&&n.xa();const o=e.conflationThresholdFactor!==void 0;Xe(this.Ps,e),o&&(this.da.clear(),this.Qt().dr()),r!==void 0&&(this.va(),n.Ca()),n.ya(this),n.ka(),this.$h.kt("options")}ht(e,n){this.jt.ht(e),this.da.clear();const i=this.Qt().Et().N();i.enableConflation&&i.precomputeConflationOnInit&&this.Pa(i.precomputeConflationPriority),this.$h.kt("data"),this.la!==null&&(n&&n.Ta?this.la.Pe():e.length===0&&this.la.ke());const s=this.Qt().Kn(this);this.Qt().Ra(s),this.Qt().ya(this),this.Qt().ka(),this.Qt().dr()}Da(e){const n=new hv(this,e);return this.ha.push(n),this.Qt().ya(this),n}Ia(e){const n=this.ha.indexOf(e);n!==-1&&this.ha.splice(n,1),this.Qt().ya(this)}Va(){return this.ha}wh(){return this.pa}Lt(){const e=this.Ba();return e===null?null:{Wt:e.Wt[3],Ea:e.wt}}Ba(){const e=this.Qt().Et().Ie();if(e===null)return null;const n=e.Aa();return this.jt.$s(n,1)}qs(){return this.jt}wa(e){this.fa=e,this.da.clear()}La(){return!!this.Qt().Et().N().enableConflation&&this.za()>1}kr(e){if(!this.La())return;const n=this.za();if(!this.da.has(n))return;const i=this.pa==="Custom",s=i&&this.fa||void 0,r=i&&this.$h.Oa?u=>{const h=u,c=this.$h.Oa(h);return Array.isArray(c)?c:[typeof c=="number"?c:0]}:void 0,o=this.ca.kr(this.jt.Dh(),e,n,s,i,r),a=Rl();a.ht(o),this.da.set(n,a)}Na(){const e=this.Qt().Et().N().enableConflation;if(this.pa==="Custom"&&this.fa===null)return this.jt;if(!e)return this.jt;const n=this.za(),i=this.da.get(n);return i||(this.Fa(n),this.da.get(n)??this.jt)}Wa(e){const n=this.jt.ph(e);return n===null?null:this.pa==="Bar"||this.pa==="Candlestick"||this.pa==="Custom"?{Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3]}:n.Wt[3]}Ha(e){const n=[];Ll(this.ua,Il,"top",n);const i=this.la;return i!==null&&i.It()&&(this._a===null&&i.Re()&&(this._a=setTimeout(()=>{this._a=null,this.Qt().Ua()},0)),i.Te(),n.unshift(i)),n}Ys(){const e=[];this.$a()||e.push(this.aa),e.push(this.$h,this._r);const n=this.ha.map(i=>i.pr());return e.push(...n),Ll(this.ua,Il,"normal",e),e}qa(){return this.ja(Il,"bottom")}Ya(e){return this.ja(jv,e)}Ka(e){return this.ja(bv,e)}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}ds(){return[this.ur,...this.ha.map(e=>e.vr())]}Ks(e,n){if(n!==this.hs&&!this.$a())return[];const i=[...this.gs];for(const s of this.ha)i.push(s.mr());return this.ua.forEach(s=>{i.push(...s.Ks())}),i}fs(){const e=[];return this.ua.forEach(n=>{e.push(...n.fs())}),e}ra(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const i=this.Ps.autoscaleInfoProvider(()=>{const s=this.Ga(e,n);return s===null?null:s.tr()});return Tr.ir(i)}return this.Ga(e,n)}qh(){const e=this.Ps.priceFormat;return e.base??1/e.minMove}Xa(){return this.Ja}Ws(){var e;this.$h.kt();for(const n of this.gs)n.kt();for(const n of this.ha)n.kt();this._r.kt(),this.aa.kt(),(e=this.la)==null||e.kt(),this.ua.forEach(n=>n.Ws())}Ft(){return z(super.Ft())}At(e){if(!((this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.jt.ph(e);return n===null?null:{gt:n.Wt[3],ft:this.Qa(),Ht:this.tl(),Ot:this.il(),zt:this.sl(e)}}Ne(){return this.Ps.title}It(){return this.Ps.visible}nl(e){this.ua.push(new Sv(e,this))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e)}rl(){if(this.pa==="Custom")return e=>this.$h.Oa(e)}hl(){if(this.pa==="Custom")return e=>this.$h.al(e)}ll(){return this.jt.Bh()}$a(){return!Zr(this.Ft().ol())}Ga(e,n){if(!us(e)||!us(n)||this.jt.Gi())return null;const i=this.pa==="Line"||this.pa==="Area"||this.pa==="Baseline"||this.pa==="Histogram"?[3]:[2,1],s=this.jt.Ih(e,n,i);let r=s!==null?new Oe(s.Fh,s.Wh):null,o=null;if(this.wh()==="Histogram"){const a=this.Ps.base,u=new Oe(a,a);r=r!==null?r.Sn(u):u}return this.ua.forEach(a=>{const u=a.ra(e,n);if(u!=null&&u.priceRange){const h=new Oe(u.priceRange.minValue,u.priceRange.maxValue);r=r!==null?r.Sn(h):h}u!=null&&u.margins&&(o=u.margins)}),new Tr(r,o)}Qa(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}tl(){switch(this.pa){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}il(){switch(this.pa){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}sl(e){switch(this.pa){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.ga().gh(e).th}va(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.Ja={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.Ja=new Gg(this.Ps.priceFormat.precision);break;case"percent":this.Ja=new Rf(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.Ja=new el(e,this.Ps.priceFormat.minMove*e)}}this.hs!==null&&this.hs._l()}ja(e,n){const i=[];return Ll(this.ua,e,n,i),i}za(){const{ul:e,cl:n,dl:i}=this.fl();return this.ca.gr(e,n,i)}fl(){const e=this.Qt().Et(),n=e.ul(),i=window.devicePixelRatio||1,s=e.N().conflationThresholdFactor;return{ul:n,cl:i,dl:this.Ps.conflationThresholdFactor??s??1}}pl(e){const n=this.jt.Dh();let i;if(this.pa==="Custom"&&this.fa!==null){const r=this.rl();if(!r)throw new Error(ov);i=this.ca.Mr(n,e,this.fa,!0,o=>r(o))}else i=this.ca.Mr(n,e);const s=Rl();return s.ht(i),s}Fa(e){const n=this.pl(e);this.da.set(e,n)}Pa(e){var i;if(this.pa==="Custom"&&(this.fa===null||!this.rl()))return;this.da.clear();const n=this.Qt().Et().vl();for(const s of n){const r=()=>{this.ml(s)},o=typeof window=="object"&&window||typeof self=="object"&&self;(i=o==null?void 0:o.gl)!=null&&i.wl?o.gl.wl(()=>{r()},{Ml:e}):Promise.resolve().then(()=>r())}}ml(e){if(this.da.has(e)||this.jt.Dh().length===0)return;const n=this.pl(e);this.da.set(e,n)}}const Mv=[3],Cv=[0,1,2,3];class Ev{constructor(e){this.Ps=e}bl(e,n,i){let s=e;if(this.Ps.mode===0)return s;const r=i.Rs(),o=r.Lt();if(o===null)return s;const a=r.Nt(e,o),u=i.Sl().filter(c=>c instanceof tl).reduce((c,d)=>{if(i.Zn(d)||!d.It())return c;const f=d.Ft(),m=d.qs();if(f.Gi()||!m.Ee(n))return c;const y=m.ph(n);if(y===null)return c;const x=Qt(d.Lt()),M=this.Ps.mode===3?Cv:Mv;return c.concat(M.map(g=>f.Nt(y.Wt[g],x.Wt)))},[]);if(u.length===0)return s;u.sort((c,d)=>Math.abs(c-a)-Math.abs(d-a));const h=u[0];return s=r.Ds(h,o),s}}function Wi(t,e,n){return Math.min(Math.max(t,e),n)}function Ws(t,e,n){return e-t<=n}function Ka(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Pv extends Nn{constructor(){super(...arguments),this.jt=null}ht(e){this.jt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(this.jt===null)return;const r=Math.max(1,Math.floor(i));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=z(this.jt);if(o.xl){e.strokeStyle=o.Cl,bn(e,o.yl),e.beginPath();for(const a of o.kl){const u=Math.round(a.Pl*i);e.moveTo(u,-r),e.lineTo(u,n.height+r)}e.stroke()}if(o.Tl){e.strokeStyle=o.Rl,bn(e,o.Dl),e.beginPath();for(const a of o.Il){const u=Math.round(a.Pl*s);e.moveTo(-r,u),e.lineTo(n.width+r,u)}e.stroke()}})}}class Nv{constructor(e){this.Xt=new Pv,this.xt=!0,this.yt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.yt.Qt().N().grid,n={Tl:e.horzLines.visible,xl:e.vertLines.visible,Rl:e.horzLines.color,Cl:e.vertLines.color,Dl:e.horzLines.style,yl:e.vertLines.style,Il:this.yt.Rs().Vl(),kl:(this.yt.Qt().Et().Vl()||[]).map(i=>({Pl:i.coord}))};this.Xt.ht(n),this.xt=!1}return this.Xt}}class zv{constructor(e){this.$h=new Nv(e)}pr(){return this.$h}}const Fl={Bl:4,El:1e-4};function Qn(t,e){const n=100*(t-e)/e;return e<0?-n:n}function Tv(t,e){const n=Qn(t.Ze(),e),i=Qn(t.Ge(),e);return new Oe(n,i)}function Ui(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function Rv(t,e){const n=Ui(t.Ze(),e),i=Ui(t.Ge(),e);return new Oe(n,i)}function Lr(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.log10(n+e.El)+e.Bl;return t<0?-i:i}function Vi(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const i=Math.pow(10,n-e.Bl)-e.El;return t<0?-i:i}function Ei(t,e){if(t===null)return null;const n=Lr(t.Ze(),e),i=Lr(t.Ge(),e);return new Oe(n,i)}function Jn(t,e){if(t===null)return null;const n=Vi(t.Ze(),e),i=Vi(t.Ge(),e);return new Oe(n,i)}function Bl(t){if(t===null)return Fl;const e=Math.abs(t.Ge()-t.Ze());if(e>=1||e<1e-15)return Fl;const n=Math.ceil(Math.abs(Math.log10(e))),i=Fl.Bl+n;return{Bl:i,El:1/Math.pow(10,i)}}class Al{constructor(e,n){if(this.Al=e,this.Ll=n,function(i){if(i<0)return!1;if(i>1e18)return!0;for(let s=i;s>1;s/=10)if(s%10!=0)return!1;return!0}(this.Al))this.zl=[2,2.5,2];else{this.zl=[];for(let i=this.Al;i!==1;){if(i%2==0)this.zl.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.zl.push(2,2.5),i/=5}if(this.zl.length>100)throw new Error("something wrong with base")}}}Ol(e,n,i){const s=this.Al===0?0:1/this.Al;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,a=this.Ll[0];for(;;){const d=Ws(r,s,1e-14)&&r>s+1e-14,f=Ws(r,i*a,1e-14),m=Ws(r,1,1e-14);if(!(d&&f&&m))break;r/=a,a=this.Ll[++o%this.Ll.length]}if(r<=s+1e-14&&(r=s),r=Math.max(1,r),this.zl.length>0&&(u=r,h=1,c=1e-14,Math.abs(u-h)<c))for(o=0,a=this.zl[0];Ws(r,i*a,1e-14)&&r>s+1e-14;)r/=a,a=this.zl[++o%this.zl.length];var u,h,c;return r}}class Sh{constructor(e,n,i,s){this.Nl=[],this.Ki=e,this.Al=n,this.Fl=i,this.Wl=s}Ol(e,n){if(e<n)throw new Error("high < low");const i=this.Ki.$t(),s=(e-n)*this.Hl()/i,r=new Al(this.Al,[2,2.5,2]),o=new Al(this.Al,[2,2,2.5]),a=new Al(this.Al,[2.5,2,2]),u=[];return u.push(r.Ol(e,n,s),o.Ol(e,n,s),a.Ol(e,n,s)),function(h){if(h.length<1)throw Error("array is empty");let c=h[0];for(let d=1;d<h.length;++d)h[d]<c&&(c=h[d]);return c}(u)}Ul(){const e=this.Ki,n=e.Lt();if(n===null)return void(this.Nl=[]);const i=e.$t(),s=this.Fl(i-1,n),r=this.Fl(0,n),o=this.Ki.N().entireTextOnly?this.$l()/2:0,a=o,u=i-1-o,h=Math.max(s,r),c=Math.min(s,r);if(h===c)return void(this.Nl=[]);const d=this.Ol(h,c);if(this.ql(n,d,h,c,a,u),e.jl()&&this.Yl(d,c,h)){const y=this.Ki.Kl();this.Zl(n,d,a,u,y,2*y)}const f=this.Nl.map(y=>y.Gl),m=this.Ki.Xl(f);for(let y=0;y<this.Nl.length;y++)this.Nl[y].Jl=m[y]}Vl(){return this.Nl}$l(){return this.Ki.k()}Hl(){return Math.ceil(2.5*this.$l())}ql(e,n,i,s,r,o){const a=this.Nl,u=this.Ki;let h=i%n;h+=h<0?n:0;const c=i>=s?1:-1;let d=null,f=0;for(let m=i-h;m>s;m-=n){const y=this.Wl(m,e,!0);d!==null&&Math.abs(y-d)<this.Hl()||y<r||y>o||(f<a.length?(a[f].Pl=y,a[f].Jl=u.Ql(m),a[f].Gl=m):a.push({Pl:y,Jl:u.Ql(m),Gl:m}),f++,d=y,u.io()&&(n=this.Ol(m*c,s)))}a.length=f}Zl(e,n,i,s,r,o){const a=this.Nl,u=this.so(e,i,r,o),h=this.so(e,s,-o,-r),c=this.Wl(0,e,!0)-this.Wl(n,e,!0);a.length>0&&a[0].Pl-u.Pl<c/2&&a.shift(),a.length>0&&h.Pl-a[a.length-1].Pl<c/2&&a.pop(),a.unshift(u),a.push(h)}so(e,n,i,s){const r=(i+s)/2,o=this.Fl(n+i,e),a=this.Fl(n+s,e),u=Math.min(o,a),h=Math.max(o,a),c=Math.max(.1,this.Ol(h,u)),d=this.Fl(n+r,e),f=d-d%c,m=this.Wl(f,e,!0);return{Jl:this.Ki.Ql(f),Pl:m,Gl:f}}Yl(e,n,i){let s=Qt(this.Ki.er());return this.Ki.io()&&(s=Jn(s,this.Ki.no())),s.Ze()-n<e&&i-s.Ge()<e}}function Of(t){return t.slice().sort((e,n)=>z(e._s())-z(n._s()))}var jh;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(jh||(jh={}));const bh=new Rf,kh=new el(100,1);class Lv{constructor(e,n,i,s,r){this.eo=0,this.ro=null,this.sr=null,this.ho=null,this.ao={lo:!1,oo:null},this._o=!1,this.uo=0,this.co=0,this.do=new fe,this.fo=new fe,this.po=[],this.vo=null,this.mo=null,this.wo=null,this.Mo=null,this.bo=null,this.Ja=kh,this.So=Bl(null),this.xo=e,this.Ps=n,this.Co=i,this.yo=s,this.ko=r,this.Po=new Sh(this,100,this.To.bind(this),this.Ro.bind(this))}ol(){return this.xo}N(){return this.Ps}cr(e){if(Xe(this.Ps,e),this._l(),e.mode!==void 0&&this.Do({ae:e.mode}),e.scaleMargins!==void 0){const n=Ye(e.scaleMargins.top),i=Ye(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(n+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+i}`);this.Io(),this.wo=null}}Vo(){return this.Ps.autoScale}Bo(){return this._o}io(){return this.Ps.mode===1}He(){return this.Ps.mode===2}Eo(){return this.Ps.mode===3}no(){return this.So}ae(){return{ln:this.Ps.autoScale,Ao:this.Ps.invertScale,ae:this.Ps.mode}}Do(e){const n=this.ae();let i=null;e.ln!==void 0&&(this.Ps.autoScale=e.ln),e.ae!==void 0&&(this.Ps.mode=e.ae,e.ae!==2&&e.ae!==3||(this.Ps.autoScale=!0),this.ao.lo=!1),n.ae===1&&e.ae!==n.ae&&(function(r,o){if(r===null)return!1;const a=Vi(r.Ze(),o),u=Vi(r.Ge(),o);return isFinite(a)&&isFinite(u)}(this.sr,this.So)?(i=Jn(this.sr,this.So),i!==null&&this.Lo(i)):this.Ps.autoScale=!0),e.ae===1&&e.ae!==n.ae&&(i=Ei(this.sr,this.So),i!==null&&this.Lo(i));const s=n.ae!==this.Ps.mode;s&&(n.ae===2||this.He())&&this._l(),s&&(n.ae===3||this.Eo())&&this._l(),e.Ao!==void 0&&n.Ao!==e.Ao&&(this.Ps.invertScale=e.Ao,this.zo()),this.fo.p(n,this.ae())}Oo(){return this.fo}k(){return this.Co.fontSize}$t(){return this.eo}No(e){this.eo!==e&&(this.eo=e,this.Io(),this.wo=null)}Fo(){if(this.ro)return this.ro;const e=this.$t()-this.Wo()-this.Ho();return this.ro=e,e}er(){return this.Uo(),this.sr}Lo(e,n){const i=this.sr;(n||i===null&&e!==null||i!==null&&!i.Ye(e))&&(this.wo=null,this.sr=e)}$o(e){this.Lo(e),this.qo(e!==null)}Gi(){return this.Uo(),this.eo===0||!this.sr||this.sr.Gi()}jo(e){return this.Ao()?e:this.$t()-1-e}Nt(e,n){return this.He()?e=Qn(e,n):this.Eo()&&(e=Ui(e,n)),this.Ro(e,n)}Yo(e,n,i){this.Uo();const s=this.Ho(),r=z(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-o),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,m=this.Ko();for(let y=d;y<f;y++){const x=e[y],M=x.gt;if(isNaN(M))continue;let g=M;m!==null&&(g=m(x.gt,n));const p=s+c*(g-o),v=h?p:this.eo-1-p;x.ut=v}}Zo(e,n,i){this.Uo();const s=this.Ho(),r=z(this.er()),o=r.Ze(),a=r.Ge(),u=this.Fo()-1,h=this.Ao(),c=u/(a-o),d=i===void 0?0:i.from,f=i===void 0?e.length:i.to,m=this.Ko();for(let y=d;y<f;y++){const x=e[y];let M=x.Hr,g=x.Ur,p=x.$r,v=x.qr;m!==null&&(M=m(x.Hr,n),g=m(x.Ur,n),p=m(x.$r,n),v=m(x.qr,n));let b=s+c*(M-o),P=h?b:this.eo-1-b;x.Go=P,b=s+c*(g-o),P=h?b:this.eo-1-b,x.Xo=P,b=s+c*(p-o),P=h?b:this.eo-1-b,x.Jo=P,b=s+c*(v-o),P=h?b:this.eo-1-b,x.Qo=P}}Ds(e,n){const i=this.To(e,n);return this.t_(i,n)}t_(e,n){let i=e;return this.He()?i=function(s,r){return r<0&&(s=-s),s/100*r+r}(i,n):this.Eo()&&(i=function(s,r){return s-=100,r<0&&(s=-s),s/100*r+r}(i,n)),i}Sl(){return this.po}Dt(){return this.mo||(this.mo=Of(this.po)),this.mo}i_(e){this.po.indexOf(e)===-1&&(this.po.push(e),this._l(),this.s_())}n_(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Do({ln:!0}),this.Lo(null)),this._l(),this.s_()}Lt(){let e=null;for(const n of this.po){const i=n.Lt();i!==null&&(e===null||i.Ea<e.Ea)&&(e=i)}return e===null?null:e.Wt}Ao(){return this.Ps.invertScale}Vl(){const e=this.Lt()===null;if(this.wo!==null&&(e||this.wo.e_===e))return this.wo.Vl;this.Po.Ul();const n=this.Po.Vl();return this.wo={Vl:n,e_:e},this.do.p(),n}r_(){return this.do}h_(e){this.He()||this.Eo()||this.Mo===null&&this.ho===null&&(this.Gi()||(this.Mo=this.eo-e,this.ho=z(this.er()).Ke()))}a_(e){if(this.He()||this.Eo()||this.Mo===null)return;this.Do({ln:!1}),(e=this.eo-e)<0&&(e=0);let n=(this.Mo+.2*(this.eo-1))/(e+.2*(this.eo-1));const i=z(this.ho).Ke();n=Math.max(n,.1),i.Je(n),this.Lo(i)}l_(){this.He()||this.Eo()||(this.Mo=null,this.ho=null)}o_(e){this.Vo()||this.bo===null&&this.ho===null&&(this.Gi()||(this.bo=e,this.ho=z(this.er()).Ke()))}__(e){if(this.Vo()||this.bo===null)return;const n=z(this.er()).Xe()/(this.Fo()-1);let i=e-this.bo;this.Ao()&&(i*=-1);const s=i*n,r=z(this.ho).Ke();r.Qe(s),this.Lo(r,!0),this.wo=null}u_(){this.Vo()||this.bo!==null&&(this.bo=null,this.ho=null)}Xa(){return this.Ja||this._l(),this.Ja}Ji(e,n){switch(this.Ps.mode){case 2:return this.c_(Qn(e,n));case 3:return this.Xa().format(Ui(e,n));default:return this.lr(e)}}Ql(e){switch(this.Ps.mode){case 2:return this.c_(e);case 3:return this.Xa().format(e);default:return this.lr(e)}}Xl(e){switch(this.Ps.mode){case 2:return this.d_(e);case 3:return this.Xa().formatTickmarks(e);default:return this.f_(e)}}Ma(e){return this.lr(e,z(this.vo).Xa())}ba(e,n){return e=Qn(e,n),this.c_(e,bh)}p_(){return this.po}v_(e){this.ao={oo:e,lo:!1}}Ws(){this.po.forEach(e=>e.Ws())}jl(){return this.Ps.ensureEdgeTickMarksVisible&&this.Vo()}Kl(){return this.k()/2}_l(){this.wo=null;let e=1/0;this.vo=null;for(const i of this.po)i._s()<e&&(e=i._s(),this.vo=i);let n=100;this.vo!==null&&(n=Math.round(this.vo.qh())),this.Ja=kh,this.He()?(this.Ja=bh,n=100):this.Eo()?(this.Ja=new el(100,1),n=100):this.vo!==null&&(this.Ja=this.vo.Xa()),this.Po=new Sh(this,n,this.To.bind(this),this.Ro.bind(this)),this.Po.Ul()}s_(){this.mo=null}m_(){return this.vo===null||this.He()||this.Eo()?1:1/this.vo.qh()}Xi(){return this.ko}qo(e){this._o=e}Wo(){return this.Ao()?this.Ps.scaleMargins.bottom*this.$t()+this.co:this.Ps.scaleMargins.top*this.$t()+this.uo}Ho(){return this.Ao()?this.Ps.scaleMargins.top*this.$t()+this.uo:this.Ps.scaleMargins.bottom*this.$t()+this.co}Uo(){this.ao.lo||(this.ao.lo=!0,this.w_())}Io(){this.ro=null}Ro(e,n){if(this.Uo(),this.Gi())return 0;e=this.io()&&e?Lr(e,this.So):e;const i=z(this.er()),s=this.Ho()+(this.Fo()-1)*(e-i.Ze())/i.Xe();return this.jo(s)}To(e,n){if(this.Uo(),this.Gi())return 0;const i=this.jo(e),s=z(this.er()),r=s.Ze()+s.Xe()*((i-this.Ho())/(this.Fo()-1));return this.io()?Vi(r,this.So):r}zo(){this.wo=null,this.Po.Ul()}w_(){if(this.Bo()&&!this.Vo())return;const e=this.ao.oo;if(e===null)return;let n=null;const i=this.p_();let s=0,r=0;for(const u of i){if(!u.It())continue;const h=u.Lt();if(h===null)continue;const c=u.ra(e.Aa(),e.bi());let d=c&&c.er();if(d!==null){switch(this.Ps.mode){case 1:d=Ei(d,this.So);break;case 2:d=Tv(d,h.Wt);break;case 3:d=Rv(d,h.Wt)}if(n=n===null?d:n.Sn(z(d)),c!==null){const f=c.rr();f!==null&&(s=Math.max(s,f.above),r=Math.max(r,f.below))}}}if(this.jl()&&(s=Math.max(s,this.Kl()),r=Math.max(r,this.Kl())),s===this.uo&&r===this.co||(this.uo=s,this.co=r,this.wo=null,this.Io()),n!==null){if(n.Ze()===n.Ge()){const u=5*this.m_();this.io()&&(n=Jn(n,this.So)),n=new Oe(n.Ze()-u,n.Ge()+u),this.io()&&(n=Ei(n,this.So))}if(this.io()){const u=Jn(n,this.So),h=Bl(u);if(o=h,a=this.So,o.Bl!==a.Bl||o.El!==a.El){const c=this.ho!==null?Jn(this.ho,this.So):null;this.So=h,n=Ei(u,h),c!==null&&(this.ho=Ei(c,h))}}this.Lo(n)}else this.sr===null&&(this.Lo(new Oe(-.5,.5)),this.So=Bl(null));var o,a}Ko(){return this.He()?Qn:this.Eo()?Ui:this.io()?e=>Lr(e,this.So):null}g_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.format(e)):n(e)}M_(e,n,i){return n===void 0?(i===void 0&&(i=this.Xa()),i.formatTickmarks(e)):n(e)}lr(e,n){return this.g_(e,this.yo.priceFormatter,n)}f_(e,n){const i=this.yo.priceFormatter;return this.M_(e,this.yo.tickmarksPriceFormatter??(i?s=>s.map(i):void 0),n)}c_(e,n){return this.g_(e,this.yo.percentageFormatter,n)}d_(e,n){const i=this.yo.percentageFormatter;return this.M_(e,this.yo.tickmarksPercentageFormatter??(i?s=>s.map(i):void 0),n)}}function Mh(t){return t instanceof tl}class Ch{constructor(e,n){this.po=[],this.b_=new Map,this.eo=0,this.S_=0,this.x_=1,this.mo=null,this.C_=!1,this.y_=new fe,this.ua=[],this.Jh=e,this.ns=n,this.k_=new zv(this);const i=n.N();this.P_=this.T_("left",i.leftPriceScale),this.R_=this.T_("right",i.rightPriceScale),this.P_.Oo().i(this.D_.bind(this,this.P_),this),this.R_.Oo().i(this.D_.bind(this,this.R_),this),this.I_(i)}I_(e){if(e.leftPriceScale&&this.P_.cr(e.leftPriceScale),e.rightPriceScale&&this.R_.cr(e.rightPriceScale),e.localization&&(this.P_._l(),this.R_._l()),e.overlayPriceScales){const n=Array.from(this.b_.values());for(const i of n){const s=z(i[0].Ft());s.cr(e.overlayPriceScales),e.localization&&s._l()}}}V_(e){switch(e){case"left":return this.P_;case"right":return this.R_}return this.b_.has(e)?Ye(this.b_.get(e))[0].Ft():null}m(){this.Qt().B_().u(this),this.P_.Oo().u(this),this.R_.Oo().u(this),this.po.forEach(e=>{e.m&&e.m()}),this.ua=this.ua.filter(e=>{const n=e.Gh();return n.detached&&n.detached(),!1}),this.y_.p()}E_(){return this.x_}A_(e){this.x_=e}Qt(){return this.ns}ss(){return this.S_}$t(){return this.eo}L_(e){this.S_=e,this.z_()}No(e){this.eo=e,this.P_.No(e),this.R_.No(e),this.po.forEach(n=>{if(this.Zn(n)){const i=n.Ft();i!==null&&i.No(e)}}),this.z_()}O_(e){this.C_=e}N_(){return this.C_}F_(){return this.po.filter(Mh)}Sl(){return this.po}Zn(e){const n=e.Ft();return n===null||this.P_!==n&&this.R_!==n}i_(e,n,i){this.W_(e,n,i?e._s():this.po.length)}n_(e,n){const i=this.po.indexOf(e);Ee(i!==-1,"removeDataSource: invalid data source"),this.po.splice(i,1),n||this.po.forEach((o,a)=>o.us(a));const s=z(e.Ft()).ol();if(this.b_.has(s)){const o=Ye(this.b_.get(s)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.b_.delete(s))}const r=e.Ft();r&&r.Sl().indexOf(e)>=0&&(r.n_(e),this.H_(r)),this.mo=null}Xn(e){return e===this.P_?"left":e===this.R_?"right":"overlay"}U_(){return this.P_}q_(){return this.R_}j_(e,n){e.h_(n)}Y_(e,n){e.a_(n),this.z_()}K_(e){e.l_()}Z_(e,n){e.o_(n)}G_(e,n){e.__(n),this.z_()}X_(e){e.u_()}z_(){this.po.forEach(e=>{e.Ws()})}Rs(){let e=null;return this.ns.N().rightPriceScale.visible&&this.R_.Sl().length!==0?e=this.R_:this.ns.N().leftPriceScale.visible&&this.P_.Sl().length!==0?e=this.P_:this.po.length!==0&&(e=this.po[0].Ft()),e===null&&(e=this.R_),e}Gn(){let e=null;return this.ns.N().rightPriceScale.visible?e=this.R_:this.ns.N().leftPriceScale.visible&&(e=this.P_),e}H_(e){e!==null&&e.Vo()&&this.J_(e)}Q_(e){const n=this.Jh.Ie();e.Do({ln:!0}),n!==null&&e.v_(n),this.z_()}tu(){this.J_(this.P_),this.J_(this.R_)}iu(){this.H_(this.P_),this.H_(this.R_),this.po.forEach(e=>{this.Zn(e)&&this.H_(e.Ft())}),this.z_(),this.ns.dr()}Dt(){return this.mo===null&&(this.mo=Of(this.po)),this.mo}su(e,n){n=Wi(n,0,this.po.length-1);const i=this.po.indexOf(e);Ee(i!==-1,"setSeriesOrder: invalid data source"),this.po.splice(i,1),this.po.splice(n,0,e),this.po.forEach((s,r)=>s.us(r)),this.mo=null;for(const s of[this.P_,this.R_])s.s_(),s._l();this.ns.dr()}Vt(){return this.Dt().filter(Mh)}nu(){return this.y_}eu(){return this.k_}nl(e){this.ua.push(new yv(e))}el(e){this.ua=this.ua.filter(n=>n.Gh()!==e),e.detached&&e.detached(),this.ns.dr()}ru(){return this.ua}Za(e,n){return this.ua.map(i=>i.Qn(e,n)).filter(i=>i!==null)}J_(e){const n=e.p_();if(n&&n.length>0&&!this.Jh.Gi()){const i=this.Jh.Ie();i!==null&&e.v_(i)}e.Ws()}W_(e,n,i){let s=this.V_(n);if(s===null&&(s=this.T_(n,this.ns.N().overlayPriceScales)),this.po.splice(i,0,e),!Zr(n)){const r=this.b_.get(n)||[];r.push(e),this.b_.set(n,r)}e.us(i),s.i_(e),e.cs(s),this.H_(s),this.mo=null}D_(e,n,i){n.ae!==i.ae&&this.J_(e)}T_(e,n){const i={visible:!0,autoScale:!0,...Et(n)},s=new Lv(e,i,this.ns.N().layout,this.ns.N().localization,this.ns.Xi());return s.No(this.$t()),s}}function Us(t){return{hu:t.hu,au:{te:t.lu.externalId},ou:t.lu.cursorStyle}}function Iv(t,e,n,i){for(const s of t){const r=s.Tt(i);if(r!==null&&r.Qn){const o=r.Qn(e,n);if(o!==null)return{_u:s,au:o}}}return null}function Fv(t){return t.Ys!==void 0}function Df(t,e,n){const i=[t,...t.Dt()],s=function(r,o,a){var f;let u,h;for(const m of r){const y=((f=m.Za)==null?void 0:f.call(m,o,a))??[];for(const x of y)c=x.zOrder,d=u==null?void 0:u.zOrder,(!d||c==="top"&&d!=="top"||c==="normal"&&d==="bottom")&&(u=x,h=m)}var c,d;return u&&h?{lu:u,hu:h}:null}(i,e,n);if((s==null?void 0:s.lu.zOrder)==="top")return Us(s);for(const r of i){if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&!s.lu.isBackground)return Us(s);if(Fv(r)){const o=Iv(r.Ys(t),e,n,t);if(o!==null)return{hu:r,_u:o._u,au:o.au}}if(s&&s.hu===r&&s.lu.zOrder!=="bottom"&&s.lu.isBackground)return Us(s)}return s!=null&&s.lu?Us(s):null}class Bv{constructor(e,n,i=50){this.Vn=0,this.Bn=1,this.En=1,this.Ln=new Map,this.An=new Map,this.uu=e,this.cu=n,this.zn=i}du(e){const n=e.time,i=this.cu.cacheKey(n),s=this.Ln.get(i);if(s!==void 0)return s.fu;if(this.Vn===this.zn){const o=this.An.get(this.En);this.An.delete(this.En),this.Ln.delete(Ye(o)),this.En++,this.Vn--}const r=this.uu(e);return this.Ln.set(i,{fu:r,Wn:this.Bn}),this.An.set(this.Bn,i),this.Vn++,this.Bn++,r}}class ni{constructor(e,n){Ee(e<=n,"right should be >= left"),this.pu=e,this.vu=n}Aa(){return this.pu}bi(){return this.vu}mu(){return this.vu-this.pu+1}Ee(e){return this.pu<=e&&e<=this.vu}Ye(e){return this.pu===e.Aa()&&this.vu===e.bi()}}function Eh(t,e){return t===null||e===null?t===e:t.Ye(e)}class Av{constructor(){this.wu=new Map,this.Ln=null,this.gu=!1}Mu(e){this.gu=e,this.Ln=null}bu(e,n){this.Su(n),this.Ln=null;for(let i=n;i<e.length;++i){const s=e[i];let r=this.wu.get(s.timeWeight);r===void 0&&(r=[],this.wu.set(s.timeWeight,r)),r.push({index:i,time:s.time,weight:s.timeWeight,originalTime:s.originalTime})}}xu(e,n,i,s,r){const o=Math.ceil(n/e);return this.Ln!==null&&this.Ln.Cu===o&&r===this.Ln.yu&&i===this.Ln.ku||(this.Ln={yu:r,ku:i,Vl:this.Pu(o,i,s),Cu:o}),this.Ln.Vl}Su(e){if(e===0)return void this.wu.clear();const n=[];this.wu.forEach((i,s)=>{e<=i[0].index?n.push(s):i.splice(ci(i,e,r=>r.index<e),1/0)});for(const i of n)this.wu.delete(i)}Pu(e,n,i){let s=[];const r=o=>!n||i.has(o.index);for(const o of Array.from(this.wu.keys()).sort((a,u)=>u-a)){if(!this.wu.get(o))continue;const a=s;s=[];const u=a.length;let h=0;const c=Ye(this.wu.get(o)),d=c.length;let f=1/0,m=-1/0;for(let y=0;y<d;y++){const x=c[y],M=x.index;for(;h<u;){const g=a[h],p=g.index;if(!(p<M&&r(g))){f=p;break}h++,s.push(g),m=p,f=1/0}if(f-M>=e&&M-m>=e&&r(x))s.push(x),m=M;else if(this.gu)return a}for(;h<u;h++)r(a[h])&&s.push(a[h])}return s}}class ii{constructor(e){this.Tu=e}Ru(){return this.Tu===null?null:new ni(Math.floor(this.Tu.Aa()),Math.ceil(this.Tu.bi()))}Du(){return this.Tu}static Iu(){return new ii(null)}}function Ov(t,e){return t.weight>e.weight?t:e}class Dv{constructor(e,n,i,s){this.S_=0,this.Vu=null,this.Bu=[],this.bo=null,this.Mo=null,this.Eu=new Av,this.Au=new Map,this.Lu=ii.Iu(),this.zu=!0,this.Ou=new fe,this.Nu=new fe,this.Fu=new fe,this.Wu=null,this.Hu=null,this.Uu=new Map,this.$u=-1,this.qu=[],this.ju=1,this.Ps=n,this.yo=i,this.Yu=n.rightOffset,this.Ku=n.barSpacing,this.ns=e,this.Zu(n),this.cu=s,this.Gu(),this.Eu.Mu(n.uniformDistribution),this.Xu(),this.Ju()}N(){return this.Ps}Qu(e){Xe(this.yo,e),this.tc(),this.Gu()}cr(e,n){Xe(this.Ps,e),this.Ps.fixLeftEdge&&this.sc(),this.Ps.fixRightEdge&&this.nc(),e.barSpacing!==void 0&&this.ns.gn(e.barSpacing),e.rightOffset!==void 0&&this.ns.Mn(e.rightOffset),this.Zu(e),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ns.gn(e.barSpacing??this.Ku),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.Ju(),this.tc(),this.Gu(),e.enableConflation===void 0&&e.conflationThresholdFactor===void 0||this.Xu(),this.Fu.p()}Is(e){var n;return((n=this.Bu[e])==null?void 0:n.time)??null}es(e){return this.Bu[e]??null}ec(e,n){if(this.Bu.length<1)return null;if(this.cu.key(e)>this.cu.key(this.Bu[this.Bu.length-1].time))return n?this.Bu.length-1:null;const i=ci(this.Bu,this.cu.key(e),(s,r)=>this.cu.key(s.time)<r);return this.cu.key(e)<this.cu.key(this.Bu[i].time)?n?i:null:i}Gi(){return this.S_===0||this.Bu.length===0||this.Vu===null}rc(){return this.Bu.length>0}Ie(){return this.hc(),this.Lu.Ru()}ac(){return this.hc(),this.Lu.Du()}lc(){const e=this.Ie();if(e===null)return null;const n={from:e.Aa(),to:e.bi()};return this.oc(n)}oc(e){const n=Math.round(e.from),i=Math.round(e.to),s=z(this._c()),r=z(this.uc());return{from:z(this.es(Math.max(s,n))),to:z(this.es(Math.min(r,i)))}}cc(e){return{from:z(this.ec(e.from,!0)),to:z(this.ec(e.to,!0))}}ss(){return this.S_}L_(e){if(!isFinite(e)||e<=0||this.S_===e)return;const n=this.ac(),i=this.S_;if(this.S_=e,this.zu=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){const s=this.Ku*e/i;this.Ku=s}if(this.Ps.fixLeftEdge&&n!==null&&n.Aa()<=0){const s=i-e;this.Yu-=Math.round(s/this.Ku)+1,this.zu=!0}this.dc(),this.fc()}qt(e){if(this.Gi()||!us(e))return 0;const n=this.vc()+this.Yu-e;return this.S_-(n+.5)*this.Ku-1}mc(e,n){const i=this.vc(),s=n===void 0?0:n.from,r=n===void 0?e.length:n.to;for(let o=s;o<r;o++){const a=e[o].wt,u=i+this.Yu-a,h=this.S_-(u+.5)*this.Ku-1;e[o]._t=h}}wc(e,n){const i=Math.ceil(this.gc(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.Mc(i)?this.bc(i):i}Mn(e){this.zu=!0,this.Yu=e,this.fc(),this.ns.Sc(),this.ns.dr()}ul(){return this.Ku}gn(e){const n=this.Ku;if(this.xc(e),this.Ps.rightOffsetPixels!==void 0&&n!==0){const i=this.Yu*n/this.Ku;this.Yu=i}this.fc(),this.ns.Sc(),this.ns.dr()}Cc(){return this.Yu}Vl(){if(this.Gi())return null;if(this.Hu!==null)return this.Hu;const e=this.Ku,n=5*(this.ns.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(n/e),s=z(this.Ie()),r=Math.max(s.Aa(),s.Aa()-i),o=Math.max(s.bi(),s.bi()-i),a=this.Eu.xu(e,n,this.Ps.ignoreWhitespaceIndices,this.Uu,this.$u),u=this._c()+i,h=this.uc()-i,c=this.yc(),d=this.Ps.fixLeftEdge||c,f=this.Ps.fixRightEdge||c;let m=0;for(const y of a){if(!(r<=y.index&&y.index<=o))continue;let x;m<this.qu.length?(x=this.qu[m],x.coord=this.qt(y.index),x.label=this.kc(y),x.weight=y.weight):(x={needAlignCoordinate:!1,coord:this.qt(y.index),label:this.kc(y),weight:y.weight},this.qu.push(x)),this.Ku>n/2&&!c?x.needAlignCoordinate=!1:x.needAlignCoordinate=d&&y.index<=u||f&&y.index>=h,m++}return this.qu.length=m,this.Hu=this.qu,this.qu}Pc(){let e;this.zu=!0,this.gn(this.Ps.barSpacing),e=this.Ps.rightOffsetPixels!==void 0?this.Ps.rightOffsetPixels/this.ul():this.Ps.rightOffset,this.Mn(e)}Tc(e){this.zu=!0,this.Vu=e,this.fc(),this.sc()}Rc(e,n){const i=this.gc(e),s=this.ul(),r=s+n*(s/10);this.gn(r),this.Ps.rightBarStaysOnScroll||this.Mn(this.Cc()+(i-this.gc(e)))}h_(e){this.bo&&this.u_(),this.Mo===null&&this.Wu===null&&(this.Gi()||(this.Mo=e,this.Dc()))}a_(e){if(this.Wu===null)return;const n=Wi(this.S_-e,0,this.S_),i=Wi(this.S_-z(this.Mo),0,this.S_);n!==0&&i!==0&&this.gn(this.Wu.ul*n/i)}l_(){this.Mo!==null&&(this.Mo=null,this.Ic())}o_(e){this.bo===null&&this.Wu===null&&(this.Gi()||(this.bo=e,this.Dc()))}__(e){if(this.bo===null)return;const n=(this.bo-e)/this.ul();this.Yu=z(this.Wu).Cc+n,this.zu=!0,this.fc()}u_(){this.bo!==null&&(this.bo=null,this.Ic())}Vc(){this.Bc(this.Ps.rightOffset)}Bc(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.Yu,s=performance.now();this.ns.vn({Ec:r=>(r-s)/n>=1,Ac:r=>{const o=(r-s)/n;return o>=1?e:i+(e-i)*o}})}kt(e,n){this.zu=!0,this.Bu=e,this.Eu.bu(e,n),this.fc()}Lc(){return this.Ou}zc(){return this.Nu}Oc(){return this.Fu}vc(){return this.Vu||0}Nc(e,n){const i=e.mu(),s=n&&this.Ps.rightOffsetPixels||0;this.xc((this.S_-s)/i),this.Yu=e.bi()-this.vc(),n&&(this.Yu=s?s/this.ul():this.Ps.rightOffset),this.fc(),this.zu=!0,this.ns.Sc(),this.ns.dr()}Fc(){const e=this._c(),n=this.uc();if(e===null||n===null)return;const i=!this.Ps.rightOffsetPixels&&this.Ps.rightOffset||0;this.Nc(new ni(e,n+i),!0)}Wc(e){const n=new ni(e.from,e.to);this.Nc(n)}rs(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.cu.formatHorzItem(e.time)}Ju(){if(!this.Ps.ignoreWhitespaceIndices)return;this.Uu.clear();const e=this.ns.tn();for(const n of e)for(const i of n.ll())this.Uu.set(i,!0);this.$u++}Hc(){return this.ju}vl(){const e=1/(window.devicePixelRatio||1),n=this.Ps.minBarSpacing;if(n>=e)return[1];const i=[1];let s=2;for(;s<=512;)n<e/s&&i.push(s),s*=2;return i}yc(){const e=this.ns.N().handleScroll,n=this.ns.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}_c(){return this.Bu.length===0?null:0}uc(){return this.Bu.length===0?null:this.Bu.length-1}Uc(e){return(this.S_-1-e)/this.Ku}gc(e){const n=this.Uc(e),i=this.vc()+this.Yu-n;return Math.round(1e6*i)/1e6}xc(e){const n=this.Ku;this.Ku=e,this.dc(),n!==this.Ku&&(this.zu=!0,this.$c(),this.Xu())}hc(){if(!this.zu)return;if(this.zu=!1,this.Gi())return void this.qc(ii.Iu());const e=this.vc(),n=this.S_/this.Ku,i=this.Yu+e,s=new ni(i-n+1,i);this.qc(new ii(s))}dc(){const e=Wi(this.Ku,this.jc(),this.Yc());this.Ku!==e&&(this.Ku=e,this.zu=!0)}Yc(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.S_}jc(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.Bu.length!==0?this.S_/this.Bu.length:this.Ps.minBarSpacing}Xu(){if(!this.Ps.enableConflation)return void(this.ju=1);const e=1/(window.devicePixelRatio||1)*(this.Ps.conflationThresholdFactor??1);if(this.Ku>=e)return void(this.ju=1);const n=e/this.Ku,i=Math.pow(2,Math.floor(Math.log2(n)));this.ju=Math.min(i,512)}fc(){const e=this.Kc();e!==null&&this.Yu<e&&(this.Yu=e,this.zu=!0);const n=this.Zc();this.Yu>n&&(this.Yu=n,this.zu=!0)}Kc(){const e=this._c(),n=this.Vu;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.S_/this.Ku:Math.min(2,this.Bu.length))}Zc(){return this.Ps.fixRightEdge?0:this.S_/this.Ku-Math.min(2,this.Bu.length)}Dc(){this.Wu={ul:this.ul(),Cc:this.Cc()}}Ic(){this.Wu=null}kc(e){let n=this.Au.get(e.weight);return n===void 0&&(n=new Bv(i=>this.Gc(i),this.cu),this.Au.set(e.weight,n)),n.du(e)}Gc(e){return this.cu.formatTickmark(e,this.yo)}qc(e){const n=this.Lu;this.Lu=e,Eh(n.Ru(),this.Lu.Ru())||this.Ou.p(),Eh(n.Du(),this.Lu.Du())||this.Nu.p(),this.$c()}$c(){this.Hu=null}tc(){this.$c(),this.Au.clear()}Gu(){this.cu.updateFormatter(this.yo)}sc(){if(!this.Ps.fixLeftEdge)return;const e=this._c();if(e===null)return;const n=this.Ie();if(n===null)return;const i=n.Aa()-e;if(i<0){const s=this.Yu-i-1;this.Mn(s)}this.dc()}nc(){this.fc(),this.dc()}Mc(e){return!this.Ps.ignoreWhitespaceIndices||this.Uu.get(e)||!1}bc(e){const n=function*(s){const r=Math.round(s),o=r<s;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(e),i=this.uc();for(;i;){const s=n.next().value;if(this.Uu.get(s))return s;if(s<0||s>i)break}return e}Zu(e){if(e.rightOffsetPixels!==void 0){const n=e.rightOffsetPixels/(e.barSpacing||this.Ku);this.ns.Mn(n)}}}var Ph,Nh,zh,Th,Rh;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Ph||(Ph={}));class $v{constructor(e,n,i){this.Xc=[],this.Jc=[],this.Qc=null,this.S_=0,this.td=null,this.sd=new fe,this.nd=new fe,this.ed=null,this.rd=e,this.Ps=n,this.cu=i,this.ko=new Bg(this.Ps.layout.colorParsers),this.hd=new Fg(this),this.Jh=new Dv(this,n.timeScale,this.Ps.localization,i),this.Ct=new Jg(this,n.crosshair),this.ad=new Ev(n.crosshair),n.addDefaultPane&&(this.ld(0),this.Xc[0].A_(2)),this.od=this._d(0),this.ud=this._d(1)}Ca(){this.dd(Ce.yn())}dr(){this.dd(Ce.Cn())}Ua(){this.dd(new Ce(1))}ya(e){const n=this.fd(e);this.dd(n)}pd(){return this.td}vd(e){var i,s,r,o;if(((i=this.td)==null?void 0:i.hu)===(e==null?void 0:e.hu)&&((r=(s=this.td)==null?void 0:s.au)==null?void 0:r.te)===((o=e==null?void 0:e.au)==null?void 0:o.te))return;const n=this.td;this.td=e,n!==null&&this.ya(n.hu),e!==null&&e.hu!==(n==null?void 0:n.hu)&&this.ya(e.hu)}N(){return this.Ps}cr(e){Xe(this.Ps,e),this.Xc.forEach(n=>n.I_(e)),e.timeScale!==void 0&&this.Jh.cr(e.timeScale),e.localization!==void 0&&this.Jh.Qu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.sd.p(),this.od=this._d(0),this.ud=this._d(1),this.Ca()}md(e,n,i=0){const s=this.Xc[i];if(s===void 0)return;if(e==="left")return Xe(this.Ps,{leftPriceScale:n}),s.I_({leftPriceScale:n}),this.sd.p(),void this.Ca();if(e==="right")return Xe(this.Ps,{rightPriceScale:n}),s.I_({rightPriceScale:n}),this.sd.p(),void this.Ca();const r=this.wd(e,i);r!==null&&(r.Ft.cr(n),this.sd.p())}wd(e,n){const i=this.Xc[n];if(i===void 0)return null;const s=i.V_(e);return s!==null?{Gs:i,Ft:s}:null}Et(){return this.Jh}Xs(){return this.Xc}gd(){return this.Ct}Md(){return this.nd}bd(e,n){e.No(n),this.Sc()}L_(e){this.S_=e,this.Jh.L_(this.S_),this.Xc.forEach(n=>n.L_(e)),this.Sc()}Sd(e){this.Xc.length!==1&&(Ee(e>=0&&e<this.Xc.length,"Invalid pane index"),this.Xc.splice(e,1),this.Ca())}xd(e,n){if(this.Xc.length<2)return;Ee(e>=0&&e<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc.reduce((d,f)=>d+f.E_(),0),r=this.Xc.reduce((d,f)=>d+f.$t(),0),o=r-30*(this.Xc.length-1);n=Math.min(o,Math.max(30,n));const a=s/r,u=i.$t();i.A_(n*a);let h=n-u,c=this.Xc.length-1;for(const d of this.Xc)if(d!==i){const f=Math.min(o,Math.max(30,d.$t()-h/c));h-=d.$t()-f,c-=1;const m=f*a;d.A_(m)}this.Ca()}Cd(e,n){Ee(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index");const i=this.Xc[e],s=this.Xc[n];this.Xc[e]=s,this.Xc[n]=i,this.Ca()}yd(e,n){if(Ee(e>=0&&e<this.Xc.length&&n>=0&&n<this.Xc.length,"Invalid pane index"),e===n)return;const[i]=this.Xc.splice(e,1);this.Xc.splice(n,0,i),this.Ca()}j_(e,n,i){e.j_(n,i)}Y_(e,n,i){e.Y_(n,i),this.ka(),this.dd(this.kd(e,2))}K_(e,n){e.K_(n),this.dd(this.kd(e,2))}Z_(e,n,i){n.Vo()||e.Z_(n,i)}G_(e,n,i){n.Vo()||(e.G_(n,i),this.ka(),this.dd(this.kd(e,2)))}X_(e,n){n.Vo()||(e.X_(n),this.dd(this.kd(e,2)))}Q_(e,n){e.Q_(n),this.dd(this.kd(e,2))}Pd(e){this.Jh.h_(e)}Td(e,n){const i=this.Et();if(i.Gi()||n===0)return;const s=i.ss();e=Math.max(1,Math.min(e,s)),i.Rc(e,n),this.Sc()}Rd(e){this.Dd(0),this.Id(e),this.Vd()}Bd(e){this.Jh.a_(e),this.Sc()}Ed(){this.Jh.l_(),this.dr()}Dd(e){this.Jh.o_(e)}Id(e){this.Jh.__(e),this.Sc()}Vd(){this.Jh.u_(),this.dr()}tn(){return this.Jc}Us(){return this.Qc===null&&(this.Qc=this.Jc.filter(e=>e.It())),this.Qc}xa(){this.Qc=null}Ad(e,n,i,s,r){this.Ct.Bs(e,n);let o=NaN,a=this.Jh.wc(e,!0);const u=this.Jh.Ie();u!==null&&(a=Math.min(Math.max(u.Aa(),a),u.bi())),a=this.Ct.Hs(a);const h=s.Rs(),c=h.Lt();if(c!==null&&(o=h.Ds(n,c)),o=this.ad.bl(o,a,s),this.Ct.zs(a,o,s),this.Ua(),!r){const d=Df(s,e,n);this.vd(d&&{hu:d.hu,au:d.au,ou:d.ou||null}),this.nd.p(this.Ct.Bt(),{x:e,y:n},i)}}Ld(e,n,i){const s=i.Rs(),r=s.Lt(),o=s.Nt(e,z(r)),a=this.Jh.ec(n,!0),u=this.Jh.qt(z(a));this.Ad(u,o,null,i,!0)}zd(e){this.gd().Ns(),this.Ua(),e||this.nd.p(null,null,null)}ka(){const e=this.Ct.Gs();if(e!==null){const n=this.Ct.As(),i=this.Ct.Ls();this.Ad(n,i,null,e)}this.Ct.Ws()}Od(e,n,i){const s=this.Jh.Is(0);n!==void 0&&i!==void 0&&this.Jh.kt(n,i);const r=this.Jh.Is(0),o=this.Jh.vc(),a=this.Jh.Ie();if(a!==null&&s!==null&&r!==null){const u=a.Ee(o),h=this.cu.key(s)>this.cu.key(r),c=e!==null&&e>o&&!h,d=this.Jh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=u&&(i!==void 0||d)&&this.Jh.N().shiftVisibleRangeOnNewBar;if(c&&!f){const m=e-o;this.Jh.Mn(this.Jh.Cc()-m)}}this.Jh.Tc(e)}Ra(e){e!==null&&e.iu()}Kn(e){if(function(i){return i instanceof Ch}(e))return e;const n=this.Xc.find(i=>i.Dt().includes(e));return n===void 0?null:n}Sc(){this.Xc.forEach(e=>e.iu()),this.ka()}m(){this.Xc.forEach(e=>e.m()),this.Xc.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Nd(){return this.hd}Jn(){return this.hd.N()}B_(){return this.sd}Fd(e,n){const i=this.ld(n);this.Wd(e,i),this.Jc.push(e),this.xa(),this.Jc.length===1?this.Ca():this.dr()}Hd(e){const n=this.Kn(e),i=this.Jc.indexOf(e);Ee(i!==-1,"Series not found");const s=z(n);this.Jc.splice(i,1),s.n_(e),e.m&&e.m(),this.xa(),this.Jh.Ju(),this.Ud(s)}Sa(e,n){const i=z(this.Kn(e));i.n_(e,!0),i.i_(e,n,!0)}Fc(){const e=Ce.Cn();e.cn(),this.dd(e)}$d(e){const n=Ce.Cn();n.pn(e),this.dd(n)}wn(){const e=Ce.Cn();e.wn(),this.dd(e)}gn(e){const n=Ce.Cn();n.gn(e),this.dd(n)}Mn(e){const n=Ce.Cn();n.Mn(e),this.dd(n)}vn(e){const n=Ce.Cn();n.vn(e),this.dd(n)}dn(){const e=Ce.Cn();e.dn(),this.dd(e)}qd(){return this.Ps.rightPriceScale.visible?"right":"left"}jd(e,n){if(Ee(n>=0,"Index should be greater or equal to 0"),n===this.Yd(e))return;const i=z(this.Kn(e));i.n_(e);const s=this.ld(n);this.Wd(e,s),i.Sl().length===0&&this.Ud(i),this.Ca()}Kd(){return this.ud}$(){return this.od}Ut(e){const n=this.ud,i=this.od;if(n===i)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.ed===null||this.ed.eh!==i||this.ed.rh!==n)this.ed={eh:i,rh:n,Zd:new Map};else{const r=this.ed.Zd.get(e);if(r!==void 0)return r}const s=this.ko.tt(i,n,e/100);return this.ed.Zd.set(e,s),s}Gd(e){return this.Xc.indexOf(e)}Xi(){return this.ko}Xd(){return this.Jd()}Jd(e){const n=new Ch(this.Jh,this);this.Xc.push(n);const i=e??this.Xc.length-1,s=Ce.yn();return s.hn(i,{an:0,ln:!0}),this.dd(s),n}ld(e){return Ee(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.Xc.length,e))<this.Xc.length?this.Xc[e]:this.Jd(e)}Yd(e){return this.Xc.findIndex(n=>n.F_().includes(e))}kd(e,n){const i=new Ce(n);if(e!==null){const s=this.Xc.indexOf(e);i.hn(s,{an:n})}return i}fd(e,n){return n===void 0&&(n=2),this.kd(this.Kn(e),n)}dd(e){this.rd&&this.rd(e),this.Xc.forEach(n=>n.eu().pr().kt())}Wd(e,n){const i=e.N().priceScaleId,s=i!==void 0?i:this.qd();n.i_(e,s),Zr(s)||e.cr(e.N())}_d(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}Ud(e){!e.N_()&&e.Sl().length===0&&this.Xc.length>1&&this.Xc.splice(this.Gd(e),1)}}function $f(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const n=Math.round(t);if(Math.abs(n-t)<1e-8)return e;t*=10}return e}function Ko(t){return!kn(t)&&!ys(t)}function Wf(t){return kn(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(Nh||(Nh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(zh||(zh={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Th||(Th={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Rh||(Rh={}));const Lh=t=>t.getUTCFullYear();function Wv(t,e,n){return e.replace(/yyyy/g,(i=>Pt(Lh(i),4))(t)).replace(/yy/g,(i=>Pt(Lh(i)%100,2))(t)).replace(/MMMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"long"}))(t,n)).replace(/MMM/g,((i,s)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(s,{month:"short"}))(t,n)).replace(/MM/g,(i=>Pt((s=>s.getUTCMonth()+1)(i),2))(t)).replace(/dd/g,(i=>Pt((s=>s.getUTCDate())(i),2))(t))}class Uf{constructor(e="yyyy-MM-dd",n="default"){this.Qd=e,this.tf=n}du(e){return Wv(e,this.Qd,this.tf)}}class Uv{constructor(e){this.if=e||"%h:%m:%s"}du(e){return this.if.replace("%h",Pt(e.getUTCHours(),2)).replace("%m",Pt(e.getUTCMinutes(),2)).replace("%s",Pt(e.getUTCSeconds(),2))}}const Vv={sf:"yyyy-MM-dd",nf:"%h:%m:%s",ef:" ",rf:"default"};class Hv{constructor(e={}){const n={...Vv,...e};this.hf=new Uf(n.sf,n.rf),this.af=new Uv(n.nf),this.lf=n.ef}du(e){return`${this.hf.du(e)}${this.lf}${this.af.du(e)}`}}function Vs(t){return 60*t*60*1e3}function Ol(t){return 60*t*1e3}const Hs=[{_f:(Ih=1,1e3*Ih),uf:10},{_f:Ol(1),uf:20},{_f:Ol(5),uf:21},{_f:Ol(30),uf:22},{_f:Vs(1),uf:30},{_f:Vs(3),uf:31},{_f:Vs(6),uf:32},{_f:Vs(12),uf:33}];var Ih;function Fh(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=Hs.length-1;n>=0;--n)if(Math.floor(e.getTime()/Hs[n]._f)!==Math.floor(t.getTime()/Hs[n]._f))return Hs[n].uf;return 0}function Dl(t){let e=t;if(ys(t)&&(e=Ya(t)),!Ko(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{cf:Math.round(n.getTime()/1e3),df:e}}function Bh(t){if(!Wf(t))throw new Error("time must be of type isUTCTimestamp");return{cf:t}}function Ya(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function Ah(t){ys(t.time)&&(t.time=Ya(t.time))}class Oh{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(Ah)}(e):Ah(e)}createConverterToInternalObj(e){return z(function(n){return n.length===0?null:Ko(n[0].time)||ys(n[0].time)?Dl:Bh}(e))}key(e){return typeof e=="object"&&"cf"in e?e.cf:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.df===void 0?new Date(1e3*n.cf).getTime():new Date(Date.UTC(n.df.year,n.df.month-1,n.df.day)).getTime()}convertHorzItemToInternal(e){return Wf(n=e)?Bh(n):Ko(n)?Dl(n):Dl(Ya(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.ff=new Hv({sf:n,nf:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",ef:"   ",rf:e.locale}):this.ff=new Uf(n,e.locale)}formatHorzItem(e){const n=e;return this.ff.du(new Date(1e3*n.cf))}formatTickmark(e,n){const i=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(s.tickMarkFormatter!==void 0){const r=s.tickMarkFormatter(e.originalTime,i,n.locale);if(r!==null)return r}return function(r,o,a){const u={};switch(o){case 0:u.year="numeric";break;case 1:u.month="short";break;case 2:u.day="numeric";break;case 3:u.hour12=!1,u.hour="2-digit",u.minute="2-digit";break;case 4:u.hour12=!1,u.hour="2-digit",u.minute="2-digit",u.second="2-digit"}const h=r.df===void 0?new Date(1e3*r.cf):new Date(Date.UTC(r.df.year,r.df.month-1,r.df.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(a,u)}(e.time,i,n.locale)}maxTickMarkWeight(e){let n=e.reduce(Ov,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(i,s=0){if(i.length===0)return;let r=s===0?null:i[s-1].time.cf,o=r!==null?new Date(1e3*r):null,a=0;for(let u=s;u<i.length;++u){const h=i[u],c=new Date(1e3*h.time.cf);o!==null&&(h.timeWeight=Fh(c,o)),a+=h.time.cf-(r||h.time.cf),r=h.time.cf,o=c}if(s===0&&i.length>1){const u=Math.ceil(a/(i.length-1)),h=new Date(1e3*(i[0].time.cf-u));i[0].timeWeight=Fh(new Date(1e3*i[0].time.cf),h)}})(e,n)}static pf(e){return Xe({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const di=typeof window<"u";function Dh(){return!!di&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function $l(){return!!di&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Yo(t){return t+t%2}function Kv(t){di&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class nl{constructor(e,n,i){this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Sf=null,this.xf=!1,this.Cf=null,this.yf=null,this.kf=!1,this.Pf=!1,this.Tf=!1,this.Rf=null,this.Df=null,this.If=null,this.Vf=null,this.Bf=null,this.Ef=null,this.Af=null,this.Lf=0,this.zf=!1,this.Of=!1,this.Nf=!1,this.Ff=0,this.Wf=null,this.Hf=!$l(),this.Uf=s=>{this.$f(s)},this.qf=s=>{if(this.jf(s)){const r=this.Yf(s);if(++this.gf,this.Mf&&this.gf>1){const{Kf:o}=this.Zf(yt(s),this.bf);o<30&&!this.Tf&&this.Gf(r,this.Jf.Xf),this.Qf()}}else{const r=this.Yf(s);if(++this.vf,this.mf&&this.vf>1){const{Kf:o}=this.Zf(yt(s),this.wf);o<5&&!this.Pf&&this.tp(r,this.Jf.ip),this.sp()}}},this.np=e,this.Jf=n,this.Ps=i,this.ep()}m(){this.Rf!==null&&(this.Rf(),this.Rf=null),this.Df!==null&&(this.Df(),this.Df=null),this.Vf!==null&&(this.Vf(),this.Vf=null),this.Bf!==null&&(this.Bf(),this.Bf=null),this.Ef!==null&&(this.Ef(),this.Ef=null),this.If!==null&&(this.If(),this.If=null),this.rp(),this.sp()}hp(e){this.Vf&&this.Vf();const n=this.ap.bind(this);if(this.Vf=()=>{this.np.removeEventListener("mousemove",n)},this.np.addEventListener("mousemove",n),this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.lp),this.Hf=!0}sp(){this.mf!==null&&clearTimeout(this.mf),this.vf=0,this.mf=null,this.wf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Qf(){this.Mf!==null&&clearTimeout(this.Mf),this.gf=0,this.Mf=null,this.bf={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}ap(e){if(this.Nf||this.yf!==null||this.jf(e))return;const n=this.Yf(e);this.tp(n,this.Jf.op),this.Hf=!0}_p(e){const n=Wl(e.changedTouches,z(this.Wf));if(n===null||(this.Ff=Ks(e),this.Af!==null)||this.Of)return;this.zf=!0;const i=this.Zf(yt(n),z(this.yf)),{up:s,cp:r,Kf:o}=i;if(this.kf||!(o<5)){if(!this.kf){const a=.5*s,u=r>=a&&!this.Ps.dp(),h=a>r&&!this.Ps.fp();u||h||(this.Of=!0),this.kf=!0,this.Tf=!0,this.rp(),this.Qf()}if(!this.Of){const a=this.Yf(e,n);this.Gf(a,this.Jf.pp),Ln(e)}}}vp(e){if(e.button!==0)return;const n=this.Zf(yt(e),z(this.Cf)),{Kf:i}=n;if(i>=5&&(this.Pf=!0,this.sp()),this.Pf){const s=this.Yf(e);this.tp(s,this.Jf.mp)}}Zf(e,n){const i=Math.abs(n._t-e._t),s=Math.abs(n.ut-e.ut);return{up:i,cp:s,Kf:i+s}}wp(e){let n=Wl(e.changedTouches,z(this.Wf));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Wf=null,this.Ff=Ks(e),this.rp(),this.yf=null,this.Ef&&(this.Ef(),this.Ef=null);const i=this.Yf(e,n);if(this.Gf(i,this.Jf.gp),++this.gf,this.Mf&&this.gf>1){const{Kf:s}=this.Zf(yt(n),this.bf);s<30&&!this.Tf&&this.Gf(i,this.Jf.Xf),this.Qf()}else this.Tf||(this.Gf(i,this.Jf.Mp),this.Jf.Mp&&Ln(e));this.gf===0&&Ln(e),e.touches.length===0&&this.xf&&(this.xf=!1,Ln(e))}$f(e){if(e.button!==0)return;const n=this.Yf(e);if(this.Cf=null,this.Nf=!1,this.Bf&&(this.Bf(),this.Bf=null),Dh()&&this.np.ownerDocument.documentElement.removeEventListener("mouseleave",this.Uf),!this.jf(e))if(this.tp(n,this.Jf.bp),++this.vf,this.mf&&this.vf>1){const{Kf:i}=this.Zf(yt(e),this.wf);i<5&&!this.Pf&&this.tp(n,this.Jf.ip),this.sp()}else this.Pf||this.tp(n,this.Jf.Sp)}rp(){this.Sf!==null&&(clearTimeout(this.Sf),this.Sf=null)}xp(e){if(this.Wf!==null)return;const n=e.changedTouches[0];this.Wf=n.identifier,this.Ff=Ks(e);const i=this.np.ownerDocument.documentElement;this.Tf=!1,this.kf=!1,this.Of=!1,this.yf=yt(n),this.Ef&&(this.Ef(),this.Ef=null);{const r=this._p.bind(this),o=this.wp.bind(this);this.Ef=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.rp(),this.Sf=setTimeout(this.Cp.bind(this,e),240)}const s=this.Yf(e,n);this.Gf(s,this.Jf.yp),this.Mf||(this.gf=0,this.Mf=setTimeout(this.Qf.bind(this),500),this.bf=yt(n))}kp(e){if(e.button!==0)return;const n=this.np.ownerDocument.documentElement;Dh()&&n.addEventListener("mouseleave",this.Uf),this.Pf=!1,this.Cf=yt(e),this.Bf&&(this.Bf(),this.Bf=null);{const s=this.vp.bind(this),r=this.$f.bind(this);this.Bf=()=>{n.removeEventListener("mousemove",s),n.removeEventListener("mouseup",r)},n.addEventListener("mousemove",s),n.addEventListener("mouseup",r)}if(this.Nf=!0,this.jf(e))return;const i=this.Yf(e);this.tp(i,this.Jf.Pp),this.mf||(this.vf=0,this.mf=setTimeout(this.sp.bind(this),500),this.wf=yt(e))}ep(){this.np.addEventListener("mouseenter",this.hp.bind(this)),this.np.addEventListener("touchcancel",this.rp.bind(this));{const e=this.np.ownerDocument,n=i=>{this.Jf.Tp&&(i.composed&&this.np.contains(i.composedPath()[0])||i.target&&this.np.contains(i.target)||this.Jf.Tp())};this.Df=()=>{e.removeEventListener("touchstart",n)},this.Rf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}$l()&&(this.If=()=>{this.np.removeEventListener("dblclick",this.qf)},this.np.addEventListener("dblclick",this.qf)),this.np.addEventListener("mouseleave",this.Rp.bind(this)),this.np.addEventListener("touchstart",this.xp.bind(this),{passive:!0}),Kv(this.np),this.np.addEventListener("mousedown",this.kp.bind(this)),this.Dp(),this.np.addEventListener("touchmove",()=>{},{passive:!1})}Dp(){this.Jf.Ip===void 0&&this.Jf.Vp===void 0&&this.Jf.Bp===void 0||(this.np.addEventListener("touchstart",e=>this.Ep(e.touches),{passive:!0}),this.np.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Af!==null&&this.Jf.Vp!==void 0){const n=$h(e.touches[0],e.touches[1])/this.Lf;this.Jf.Vp(this.Af,n),Ln(e)}},{passive:!1}),this.np.addEventListener("touchend",e=>{this.Ep(e.touches)}))}Ep(e){e.length===1&&(this.zf=!1),e.length!==2||this.zf||this.xf?this.Ap():this.Lp(e)}Lp(e){const n=this.np.getBoundingClientRect()||{left:0,top:0};this.Af={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Lf=$h(e[0],e[1]),this.Jf.Ip!==void 0&&this.Jf.Ip(),this.rp()}Ap(){this.Af!==null&&(this.Af=null,this.Jf.Bp!==void 0&&this.Jf.Bp())}Rp(e){if(this.Vf&&this.Vf(),this.jf(e)||!this.Hf)return;const n=this.Yf(e);this.tp(n,this.Jf.zp),this.Hf=!$l()}Cp(e){const n=Wl(e.touches,z(this.Wf));if(n===null)return;const i=this.Yf(e,n);this.Gf(i,this.Jf.Op),this.Tf=!0,this.xf=!0}jf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Ks(e)<this.Ff+500}Gf(e,n){n&&n.call(this.Jf,e)}tp(e,n){n&&n.call(this.Jf,e)}Yf(e,n){const i=n||e,s=this.np.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Np:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Fp:e.type,Wp:i.target,_u:e.view,Hp:()=>{e.type!=="touchstart"&&Ln(e)}}}}function $h(t,e){const n=t.clientX-e.clientX,i=t.clientY-e.clientY;return Math.sqrt(n*n+i*i)}function Ln(t){t.cancelable&&t.preventDefault()}function yt(t){return{_t:t.pageX,ut:t.pageY}}function Ks(t){return t.timeStamp||performance.now()}function Wl(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class Yv{constructor(e,n,i){this.Up=null,this.$p=null,this.qp=!0,this.jp=null,this.Yp=e,this.Kp=e.Zp()[n],this.Gp=e.Zp()[i],this.Xp=document.createElement("tr"),this.Xp.style.height="1px",this.Jp=document.createElement("td"),this.Jp.style.position="relative",this.Jp.style.padding="0",this.Jp.style.margin="0",this.Jp.setAttribute("colspan","3"),this.Qp(),this.Xp.appendChild(this.Jp),this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up=null,this.$p=null)}m(){this.$p!==null&&this.$p.m()}iv(){return this.Xp}sv(){return te({width:this.Kp.sv().width,height:1})}nv(){return te({width:this.Kp.nv().width,height:1*window.devicePixelRatio})}ev(e,n,i){const s=this.nv();e.fillStyle=this.Yp.N().layout.panes.separatorColor,e.fillRect(n,i,s.width,s.height)}kt(){this.Qp(),this.Yp.N().layout.panes.enableResize!==this.qp&&(this.qp=this.Yp.N().layout.panes.enableResize,this.qp?this.tv():(this.Up!==null&&(this.Jp.removeChild(this.Up.rv),this.Jp.removeChild(this.Up.hv),this.Up=null),this.$p!==null&&(this.$p.m(),this.$p=null)))}tv(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.Jp.appendChild(e);const i=document.createElement("div"),s=i.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Jp.appendChild(i);const r={lp:this.av.bind(this),zp:this.lv.bind(this),Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this)};this.$p=new nl(i,r,{dp:()=>!1,fp:()=>!0}),this.Up={hv:i,rv:e}}Qp(){this.Jp.style.background=this.Yp.N().layout.panes.separatorColor}av(e){this.Up!==null&&(this.Up.hv.style.backgroundColor=this.Yp.N().layout.panes.separatorHoverColor)}lv(e){this.Up!==null&&this.jp===null&&(this.Up.hv.style.backgroundColor="")}ov(e){if(this.Up===null)return;const n=this.Kp.cv().E_()+this.Gp.cv().E_(),i=n/(this.Kp.sv().height+this.Gp.sv().height),s=30*i;n<=2*s||(this.jp={dv:e.pageY,fv:this.Kp.cv().E_(),pv:n-s,vv:n,mv:i,wv:s},this.Up.rv.style.display="block")}_v(e){const n=this.jp;if(n===null)return;const i=(e.pageY-n.dv)*n.mv,s=Wi(n.fv+i,n.wv,n.pv);this.Kp.cv().A_(s),this.Gp.cv().A_(n.vv-s),this.Yp.Qt().Ca()}uv(e){this.jp!==null&&this.Up!==null&&(this.jp=null,this.Up.rv.style.display="none")}}function Ul(t,e){return t.gv-e.gv}function Vl(t,e,n){const i=(t.gv-e.gv)/(t.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),n)}class Qv{constructor(e,n,i,s){this.Mv=null,this.bv=null,this.Sv=null,this.xv=null,this.Cv=null,this.yv=0,this.kv=0,this.Pv=e,this.Tv=n,this.Rv=i,this.kn=s}Dv(e,n){if(this.Mv!==null){if(this.Mv.wt===n)return void(this.Mv.gv=e);if(Math.abs(this.Mv.gv-e)<this.kn)return}this.xv=this.Sv,this.Sv=this.bv,this.bv=this.Mv,this.Mv={wt:n,gv:e}}fe(e,n){if(this.Mv===null||this.bv===null||n-this.Mv.wt>50)return;let i=0;const s=Vl(this.Mv,this.bv,this.Tv),r=Ul(this.Mv,this.bv),o=[s],a=[r];if(i+=r,this.Sv!==null){const h=Vl(this.bv,this.Sv,this.Tv);if(Math.sign(h)===Math.sign(s)){const c=Ul(this.bv,this.Sv);if(o.push(h),a.push(c),i+=c,this.xv!==null){const d=Vl(this.Sv,this.xv,this.Tv);if(Math.sign(d)===Math.sign(s)){const f=Ul(this.Sv,this.xv);o.push(d),a.push(f),i+=f}}}}let u=0;for(let h=0;h<o.length;++h)u+=a[h]/i*o[h];Math.abs(u)<this.Pv||(this.Cv={gv:e,wt:n},this.kv=u,this.yv=function(h,c){const d=Math.log(c);return Math.log(1*d/-h)/d}(Math.abs(u),this.Rv))}Ac(e){const n=z(this.Cv),i=e-n.wt;return n.gv+this.kv*(Math.pow(this.Rv,i)-1)/Math.log(this.Rv)}Ec(e){return this.Cv===null||this.Iv(e)===this.yv}Iv(e){const n=e-z(this.Cv).wt;return Math.min(n,this.yv)}}class Jv{constructor(e,n){this.Vv=void 0,this.Bv=void 0,this.Ev=void 0,this.ws=!1,this.Av=e,this.Lv=n,this.zv()}kt(){this.zv()}Ov(){this.Vv&&this.Av.removeChild(this.Vv),this.Bv&&this.Av.removeChild(this.Bv),this.Vv=void 0,this.Bv=void 0}Nv(){return this.ws!==this.Fv()||this.Ev!==this.Wv()}Wv(){return this.Lv.Qt().Xi().J(this.Lv.N().layout.textColor)>160?"dark":"light"}Fv(){return this.Lv.N().layout.attributionLogo}Hv(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}zv(){this.Nv()&&(this.Ov(),this.ws=this.Fv(),this.ws&&(this.Ev=this.Wv(),this.Bv=document.createElement("style"),this.Bv.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Vv=document.createElement("a"),this.Vv.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.Hv()}`,this.Vv.title="Charting by TradingView",this.Vv.id="tv-attr-logo",this.Vv.target="_blank",this.Vv.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Vv.toggleAttribute("data-dark",this.Ev==="dark"),this.Av.appendChild(this.Bv),this.Av.appendChild(this.Vv)))}}function Mn(t,e){const n=z(t.ownerDocument).createElement("canvas");t.appendChild(n);const i=Tg(n,{options:{allowResizeObserver:!0},transform:(s,r)=>({width:Math.max(s.width,r.width),height:Math.max(s.height,r.height)})});return i.resizeCanvasElement(e),i}function Cn(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Qo(t,e,n,i){t.Uh&&t.Uh(e,n,i)}function lr(t,e,n,i){t.nt(e,n,i)}function Jo(t,e,n,i){const s=t(n,i);for(const r of s){const o=r.Tt(i);o!==null&&e(o)}}function Hl(t,e){return n=>{var i,s;return function(r){return r.Ft!==void 0}(n)?(((i=n.Ft())==null?void 0:i.ol())??"")!==e?[]:((s=n.Ya)==null?void 0:s.call(n,t))??[]:[]}}function Wh(t,e,n,i){if(!t.length)return;let s=0;const r=t[0].$t(i,!0);let o=e===1?n/2-(t[0].Hi()-r/2):t[0].Hi()-r/2-n/2;o=Math.max(0,o);for(let a=1;a<t.length;a++){const u=t[a],h=t[a-1],c=h.$t(i,!1),d=u.Hi(),f=h.Hi();if(e===1?d>f-c:d<f+c){const m=f-c*e;u.Ui(m);const y=m-e*c/2;if((e===1?y<0:y>n)&&o>0){const x=e===1?-1-y:y-n,M=Math.min(x,o);for(let g=s;g<t.length;g++)t[g].Ui(t[g].Hi()+e*M);o-=M}}else s=a,o=e===1?f-c-d:d-(f+c)}}class Uh{constructor(e,n,i,s){this.Ki=null,this.Uv=null,this.$v=!1,this.qv=new ds(200),this.jv=null,this.Yv=0,this.Kv=!1,this.Zv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.Xv=()=>{this.Kv||this.yt.Gv().Qt().dr()},this.yt=e,this.Ps=n,this.Co=n.layout,this.hd=i,this.Jv=s==="left",this.Qv=Hl("normal",s),this.tm=Hl("top",s),this.im=Hl("bottom",s),this.Jp=document.createElement("div"),this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.Jp.style.width="25px",this.Jp.style.left="0",this.Jp.style.position="relative",this.sm=Mn(this.Jp,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const r=this.sm.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.nm=Mn(this.Jp,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const o=this.nm.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={Pp:this.ov.bind(this),yp:this.ov.bind(this),mp:this._v.bind(this),pp:this._v.bind(this),Tp:this.rm.bind(this),bp:this.uv.bind(this),gp:this.uv.bind(this),ip:this.hm.bind(this),Xf:this.hm.bind(this),lp:this.am.bind(this),zp:this.lv.bind(this)};this.$p=new nl(this.nm.canvasElement,a,{dp:()=>!this.Ps.handleScroll.vertTouchDrag,fp:()=>!0})}m(){this.$p.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Cn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Cn(this.sm.canvasElement),this.sm.dispose(),this.Ki!==null&&this.Ki.r_().u(this),this.Ki=null}iv(){return this.Jp}k(){return this.Co.fontSize}lm(){const e=this.hd.N();return this.jv!==e.P&&(this.qv.On(),this.jv=e.P),e}om(){if(this.Ki===null)return 0;let e=0;const n=this.lm(),i=z(this.sm.canvasElement.getContext("2d",{colorSpace:this.yt.Gv().N().layout.colorSpace}));i.save();const s=this.Ki.Vl();i.font=this._m(),s.length>0&&(e=Math.max(this.qv.Ii(i,s[0].Jl),this.qv.Ii(i,s[s.length-1].Jl)));const r=this.um();for(let h=r.length;h--;){const c=this.qv.Ii(i,r[h].ri());c>e&&(e=c)}const o=this.Ki.Lt();if(o!==null&&this.Uv!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const h=this.Ki.Ds(1,o),c=this.Ki.Ds(this.Uv.height-2,o);e=Math.max(e,this.qv.Ii(i,this.Ki.Ji(Math.floor(Math.min(h,c))+.11111111111111,o)),this.qv.Ii(i,this.Ki.Ji(Math.ceil(Math.max(h,c))-.11111111111111,o)))}var a;i.restore();const u=e||34;return Yo(Math.ceil(n.S+n.C+n.V+n.B+5+u))}dm(e){this.Uv!==null&&vn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`)}fm(){return z(this.Uv).width}cs(e){this.Ki!==e&&(this.Ki!==null&&this.Ki.r_().u(this),this.Ki=e,e.r_().i(this.do.bind(this),this))}Ft(){return this.Ki}On(){const e=this.yt.cv();this.yt.Gv().Qt().Q_(e,z(this.Ft()))}pm(e){if(this.Uv===null)return;const n={colorSpace:this.yt.Gv().N().layout.colorSpace};if(e!==1){this.vm(),this.sm.applySuggestedBitmapSize();const s=jn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r)}),this.yt.Mm(s,this.im),this.bm(s),this.yt.Mm(s,this.Qv),this.Sm(s))}this.nm.applySuggestedBitmapSize();const i=jn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.xm(i),this.yt.Mm(i,this.tm))}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e.drawImage(o,n,i)}}kt(){var e;(e=this.Ki)==null||e.Vl()}ov(e){if(this.Ki===null||this.Ki.Gi()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!0,n.j_(i,this.Ki,e.localY)}_v(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv(),s=this.Ki;n.Y_(i,s,e.localY)}rm(){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Gv().Qt(),n=this.yt.cv(),i=this.Ki;this.$v&&(this.$v=!1,e.K_(n,i))}uv(e){if(this.Ki===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.yt.Gv().Qt(),i=this.yt.cv();this.$v=!1,n.K_(i,this.Ki)}hm(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.On()}am(e){this.Ki!==null&&(!this.yt.Gv().Qt().N().handleScale.axisPressedMouseMove.price||this.Ki.He()||this.Ki.Eo()||this.Cm(1))}lv(e){this.Cm(0)}um(){const e=[],n=this.Ki===null?void 0:this.Ki;return(i=>{for(let s=0;s<i.length;++s){const r=i[s].Ks(this.yt.cv(),n);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.yt.cv().Dt()),e}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.yt.cv().Qt(),o=r.$(),a=r.Kd();o===a?Xr(e,0,0,i,s,o):Pf(e,0,0,i,s,o,a)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i}){if(this.Uv===null||this.Ki===null||!this.Ki.N().borderVisible)return;e.fillStyle=this.Ki.N().borderColor;const s=Math.max(1,Math.floor(this.lm().S*i));let r;r=this.Jv?n.width-s:0,e.fillRect(r,0,s,n.height)}bm(e){if(this.Uv===null||this.Ki===null)return;const n=this.Ki.Vl(),i=this.Ki.N(),s=this.lm(),r=this.Jv?this.Uv.width-s.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:u})=>{o.fillStyle=i.borderColor;const h=Math.max(1,Math.floor(u)),c=Math.floor(.5*u),d=Math.round(s.C*a);o.beginPath();for(const f of n)o.rect(Math.floor(r*a),Math.round(f.Pl*u)-c,d,h);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this._m(),o.fillStyle=i.textColor??this.Co.textColor,o.textAlign=this.Jv?"right":"left",o.textBaseline="middle";const a=this.Jv?Math.round(r-s.V):Math.round(r+s.C+s.V),u=n.map(h=>this.qv.Di(o,h.Jl));for(let h=n.length;h--;){const c=n[h];o.fillText(c.Jl,a,c.Pl+u[h])}})}vm(){if(this.Uv===null||this.Ki===null)return;let e=this.Uv.height/2;const n=[],i=this.Ki.Dt().slice(),s=this.yt.cv(),r=this.lm();this.Ki===s.Gn()&&this.yt.cv().Dt().forEach(u=>{s.Zn(u)&&i.push(u)});const o=this.Ki.Sl()[0],a=this.Ki;i.forEach(u=>{const h=u.Ks(s,a);h.forEach(c=>{c.$i()&&c.Wi()===null&&(c.Ui(null),n.push(c))}),o===u&&h.length>0&&(e=h[0].Ei())}),this.Ki.N().alignLabels&&this.ym(n,r,e)}ym(e,n,i){if(this.Uv===null)return;const s=e.filter(o=>o.Ei()<=i),r=e.filter(o=>o.Ei()>i);s.sort((o,a)=>a.Ei()-o.Ei()),s.length&&r.length&&r.push(s[0]),r.sort((o,a)=>o.Ei()-a.Ei());for(const o of e){const a=Math.floor(o.$t(n)/2),u=o.Ei();u>-a&&u<a&&o.Ui(a),u>this.Uv.height-a&&u<this.Uv.height+a&&o.Ui(this.Uv.height-a)}Wh(s,1,this.Uv.height,n),Wh(r,-1,this.Uv.height,n)}Sm(e){if(this.Uv===null)return;const n=this.um(),i=this.lm(),s=this.Jv?"right":"left";n.forEach(r=>{r.qi()&&r.Tt(z(this.Ki)).nt(e,i,this.qv,s)})}xm(e){if(this.Uv===null||this.Ki===null)return;const n=this.yt.Gv().Qt(),i=[],s=this.yt.cv(),r=n.gd().Ks(s,this.Ki);r.length&&i.push(r);const o=this.lm(),a=this.Jv?"right":"left";i.forEach(u=>{u.forEach(h=>{h.Tt(z(this.Ki)).nt(e,o,this.qv,a)})})}Cm(e){this.Jp.style.cursor=e===1?"ns-resize":"default"}do(){const e=this.om();this.Yv<e&&this.yt.Gv().Qt().Ca(),this.Yv=e}_m(){return cs(this.Co.fontSize,this.Co.fontFamily)}}function Gv(t,e){var n;return((n=t.qa)==null?void 0:n.call(t,e))??[]}function Vh(t,e){var n;return((n=t.Ys)==null?void 0:n.call(t,e))??[]}function Hh(t,e){var n;return((n=t.ds)==null?void 0:n.call(t,e))??[]}function Xv(t,e){var n;return((n=t.Ha)==null?void 0:n.call(t,e))??[]}class Qa{constructor(e,n){this.Uv=te({width:0,height:0}),this.km=null,this.Pm=null,this.Tm=null,this.Rm=null,this.Dm=!1,this.Im=new fe,this.Vm=new fe,this.Bm=0,this.Em=!1,this.Am=null,this.Lm=!1,this.zm=null,this.Om=null,this.Kv=!1,this.Zv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Xv=()=>{this.Kv||this.Nm===null||this.ns().dr()},this.Lv=e,this.Nm=n,this.Nm.nu().i(this.Fm.bind(this),this,!0),this.Wm=document.createElement("td"),this.Wm.style.padding="0",this.Wm.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Hm=document.createElement("td"),this.Hm.style.padding="0",this.Um=document.createElement("td"),this.Um.style.padding="0",this.Wm.appendChild(i),this.sm=Mn(i,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const s=this.sm.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.nm=Mn(i,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const r=this.nm.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Xp=document.createElement("tr"),this.Xp.appendChild(this.Hm),this.Xp.appendChild(this.Wm),this.Xp.appendChild(this.Um),this.$m(),this.$p=new nl(this.nm.canvasElement,this,{dp:()=>this.Am===null&&!this.Lv.N().handleScroll.vertTouchDrag,fp:()=>this.Am===null&&!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.km!==null&&this.km.m(),this.Pm!==null&&this.Pm.m(),this.Tm=null,this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Cn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Cn(this.sm.canvasElement),this.sm.dispose(),this.Nm!==null&&(this.Nm.nu().u(this),this.Nm.m()),this.$p.m()}cv(){return z(this.Nm)}qm(e){var n;this.Nm!==null&&this.Nm.nu().u(this),this.Nm=e,this.Nm!==null&&this.Nm.nu().i(Qa.prototype.Fm.bind(this),this,!0),this.$m(),this.Lv.Zp().indexOf(this)===this.Lv.Zp().length-1?(this.Tm=this.Tm??new Jv(this.Wm,this.Lv),this.Tm.kt()):((n=this.Tm)==null||n.Ov(),this.Tm=null)}Gv(){return this.Lv}iv(){return this.Xp}$m(){if(this.Nm!==null&&(this.jm(),this.ns().tn().length!==0)){if(this.km!==null){const e=this.Nm.U_();this.km.cs(z(e))}if(this.Pm!==null){const e=this.Nm.q_();this.Pm.cs(z(e))}}}Ym(){this.km!==null&&this.km.kt(),this.Pm!==null&&this.Pm.kt()}E_(){return this.Nm!==null?this.Nm.E_():0}A_(e){this.Nm&&this.Nm.A_(e)}lp(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Pp(e){this.Km(),this.Gm(),this.Zm(e.localX,e.localY,e)}op(e){if(!this.Nm)return;this.Km();const n=e.localX,i=e.localY;this.Zm(n,i,e)}Sp(e){this.Nm!==null&&(this.Km(),this.Xm(e))}ip(e){this.Nm!==null&&this.Jm(this.Vm,e)}Xf(e){this.ip(e)}mp(e){this.Km(),this.Qm(e),this.Zm(e.localX,e.localY,e)}bp(e){this.Nm!==null&&(this.Km(),this.Em=!1,this.tw(e))}Mp(e){this.Nm!==null&&this.Xm(e)}Op(e){if(this.Em=!0,this.Am===null){const n={x:e.localX,y:e.localY};this.iw(n,n,e)}}zp(e){this.Nm!==null&&(this.Km(),this.Nm.Qt().vd(null),this.sw())}nw(){return this.Im}ew(){return this.Vm}Ip(){this.Bm=1,this.ns().dn()}Vp(e,n){if(!this.Lv.N().handleScale.pinch)return;const i=5*(n-this.Bm);this.Bm=n,this.ns().Td(e._t,i)}yp(e){this.Em=!1,this.Lm=this.Am!==null,this.Gm();const n=this.ns().gd();this.Am!==null&&n.It()&&(this.zm={x:n.si(),y:n.ni()},this.Am={x:e.localX,y:e.localY})}pp(e){if(this.Nm===null)return;const n=e.localX,i=e.localY;if(this.Am===null)this.Qm(e);else{this.Lm=!1;const s=z(this.zm),r=s.x+(n-this.Am.x),o=s.y+(i-this.Am.y);this.Zm(r,o,e)}}gp(e){this.Gv().N().trackingMode.exitMode===0&&(this.Lm=!0),this.rw(),this.tw(e)}Qn(e,n){const i=this.Nm;return i===null?null:Df(i,e,n)}hw(e,n){z(n==="left"?this.km:this.Pm).dm(te({width:e,height:this.Uv.height}))}sv(){return this.Uv}dm(e){vn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Wm.style.width=e.width+"px",this.Wm.style.height=e.height+"px")}aw(){const e=z(this.Nm);e.H_(e.U_()),e.H_(e.q_());for(const n of e.Sl())if(e.Zn(n)){const i=n.Ft();i!==null&&e.H_(i),n.Ws()}for(const n of e.ru())n.Ws()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e!==null&&e.drawImage(o,n,i)}}pm(e){if(e===0||this.Nm===null)return;e>1&&this.aw(),this.km!==null&&this.km.pm(e),this.Pm!==null&&this.Pm.pm(e);const n={colorSpace:this.Lv.N().layout.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=jn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r)}),this.Nm&&(this.lw(s,Gv),this.ow(s),this.lw(s,Vh),this.lw(s,Hh)))}this.nm.applySuggestedBitmapSize();const i=jn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this._w(i),this.lw(i,Xv),this.lw(i,Hh))}uw(){return this.km}cw(){return this.Pm}Mm(e,n){this.lw(e,n)}Fm(){this.Nm!==null&&this.Nm.nu().u(this),this.Nm=null}Xm(e){this.Jm(this.Im,e)}Jm(e,n){const i=n.localX,s=n.localY;e.v()&&e.p(this.ns().Et().wc(i),{x:i,y:s},n)}wm({context:e,bitmapSize:n}){const{width:i,height:s}=n,r=this.ns(),o=r.$(),a=r.Kd();o===a?Xr(e,0,0,i,s,a):Pf(e,0,0,i,s,o,a)}ow(e){const n=z(this.Nm),i=n.eu().pr().Tt(n);i!==null&&i.nt(e,!1)}_w(e){this.dw(e,Vh,lr,this.ns().gd())}lw(e,n){const i=z(this.Nm),s=i.Dt(),r=i.ru();for(const o of r)this.dw(e,n,Qo,o);for(const o of s)this.dw(e,n,Qo,o);for(const o of r)this.dw(e,n,lr,o);for(const o of s)this.dw(e,n,lr,o)}dw(e,n,i,s){const r=z(this.Nm),o=r.Qt().pd(),a=o!==null&&o.hu===s,u=o!==null&&a&&o.au!==void 0?o.au.ie:void 0;Jo(n,h=>i(h,e,a,u),s,r)}jm(){if(this.Nm===null)return;const e=this.Lv,n=this.Nm.U_().N().visible,i=this.Nm.q_().N().visible;n||this.km===null||(this.Hm.removeChild(this.km.iv()),this.km.m(),this.km=null),i||this.Pm===null||(this.Um.removeChild(this.Pm.iv()),this.Pm.m(),this.Pm=null);const s=e.Qt().Nd();n&&this.km===null&&(this.km=new Uh(this,e.N(),s,"left"),this.Hm.appendChild(this.km.iv())),i&&this.Pm===null&&(this.Pm=new Uh(this,e.N(),s,"right"),this.Um.appendChild(this.Pm.iv()))}fw(e){return e.Np&&this.Em||this.Am!==null}Zm(e,n,i){e=Math.max(0,Math.min(e,this.Uv.width-1)),n=Math.max(0,Math.min(n,this.Uv.height-1)),this.ns().Ad(e,n,i,z(this.Nm))}sw(){this.ns().zd()}rw(){this.Lm&&(this.Am=null,this.sw())}iw(e,n,i){this.Am=e,this.Lm=!1,this.Zm(n.x,n.y,i);const s=this.ns().gd();this.zm={x:s.si(),y:s.ni()}}ns(){return this.Lv.Qt()}tw(e){if(!this.Dm)return;const n=this.ns(),i=this.cv();if(n.X_(i,i.Rs()),this.Rm=null,this.Dm=!1,n.Vd(),this.Om!==null){const s=performance.now(),r=n.Et();this.Om.fe(r.Cc(),s),this.Om.Ec(s)||n.vn(this.Om)}}Km(){this.Am=null}Gm(){if(this.Nm){if(this.ns().dn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)z(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Nm.Rs().Gi()&&this.ns().Et().Gi()}}Qm(e){if(this.Nm===null)return;const n=this.ns(),i=n.Et();if(i.Gi())return;const s=this.Lv.N(),r=s.handleScroll,o=s.kineticScroll;if((!r.pressedMouseMove||e.Np)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Np))return;const a=this.Nm.Rs(),u=performance.now();if(this.Rm!==null||this.fw(e)||(this.Rm={x:e.clientX,y:e.clientY,cf:u,pw:e.localX,mw:e.localY}),this.Rm!==null&&!this.Dm&&(this.Rm.x!==e.clientX||this.Rm.y!==e.clientY)){if(e.Np&&o.touch||!e.Np&&o.mouse){const h=i.ul();this.Om=new Qv(.2/h,7/h,.997,15/h),this.Om.Dv(i.Cc(),this.Rm.cf)}else this.Om=null;a.Gi()||n.Z_(this.Nm,a,e.localY),n.Dd(e.localX),this.Dm=!0}this.Dm&&(a.Gi()||n.G_(this.Nm,a,e.localY),n.Id(e.localX),this.Om!==null&&this.Om.Dv(i.Cc(),u))}}class Kh{constructor(e,n,i,s,r){this.xt=!0,this.Uv=te({width:0,height:0}),this.Zv=()=>this.pm(3),this.Jv=e==="left",this.hd=i.Nd,this.Ps=n,this.ww=s,this.gw=r,this.Jp=document.createElement("div"),this.Jp.style.width="25px",this.Jp.style.height="100%",this.Jp.style.overflow="hidden",this.sm=Mn(this.Jp,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv)}m(){this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Cn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Jp}sv(){return this.Uv}dm(e){vn(this.Uv,e)||(this.Uv=e,this.sm.resizeCanvasElement(e),this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xt=!0)}pm(e){if(e<3&&!this.xt||this.Uv.width===0||this.Uv.height===0)return;this.xt=!1,this.sm.applySuggestedBitmapSize();const n=jn(this.sm,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(i=>{this.wm(i),this.gm(i)})}nv(){return this.sm.bitmapSize}ev(e,n,i){const s=this.nv();s.width>0&&s.height>0&&e.drawImage(this.sm.canvasElement,n,i)}gm({context:e,bitmapSize:n,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.ww())return;e.fillStyle=this.Ps.timeScale.borderColor;const r=Math.floor(this.hd.N().S*i),o=Math.floor(this.hd.N().S*s),a=this.Jv?n.width-r:0;e.fillRect(a,0,r,o)}wm({context:e,bitmapSize:n}){Xr(e,0,0,n.width,n.height,this.gw())}}function Ja(t){return e=>{var n;return((n=e.Ka)==null?void 0:n.call(e,t))??[]}}const qv=Ja("normal"),Zv=Ja("top"),ey=Ja("bottom");class ty{constructor(e,n){this.Mw=null,this.bw=null,this.M=null,this.Sw=!1,this.Uv=te({width:0,height:0}),this.xw=new fe,this.qv=new ds(5),this.Kv=!1,this.Zv=()=>{this.Kv||this.Lv.Qt().dr()},this.Xv=()=>{this.Kv||this.Lv.Qt().dr()},this.Lv=e,this.cu=n,this.Ps=e.N().layout,this.Vv=document.createElement("tr"),this.Cw=document.createElement("td"),this.Cw.style.padding="0",this.yw=document.createElement("td"),this.yw.style.padding="0",this.Jp=document.createElement("td"),this.Jp.style.height="25px",this.Jp.style.padding="0",this.kw=document.createElement("div"),this.kw.style.width="100%",this.kw.style.height="100%",this.kw.style.position="relative",this.kw.style.overflow="hidden",this.Jp.appendChild(this.kw),this.sm=Mn(this.kw,te({width:16,height:16})),this.sm.subscribeSuggestedBitmapSizeChanged(this.Zv);const i=this.sm.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.nm=Mn(this.kw,te({width:16,height:16})),this.nm.subscribeSuggestedBitmapSizeChanged(this.Xv);const s=this.nm.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Vv.appendChild(this.Cw),this.Vv.appendChild(this.Jp),this.Vv.appendChild(this.yw),this.Pw(),this.Lv.Qt().B_().i(this.Pw.bind(this),this),this.$p=new nl(this.nm.canvasElement,this,{dp:()=>!0,fp:()=>!this.Lv.N().handleScroll.horzTouchDrag})}m(){this.$p.m(),this.Mw!==null&&this.Mw.m(),this.bw!==null&&this.bw.m(),this.nm.unsubscribeSuggestedBitmapSizeChanged(this.Xv),Cn(this.nm.canvasElement),this.nm.dispose(),this.sm.unsubscribeSuggestedBitmapSizeChanged(this.Zv),Cn(this.sm.canvasElement),this.sm.dispose()}iv(){return this.Vv}Tw(){return this.Mw}Rw(){return this.bw}Pp(e){if(this.Sw)return;this.Sw=!0;const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Pd(e.localX)}yp(e){this.Pp(e)}Tp(){const e=this.Lv.Qt();!e.Et().Gi()&&this.Sw&&(this.Sw=!1,this.Lv.N().handleScale.axisPressedMouseMove.time&&e.Ed())}mp(e){const n=this.Lv.Qt();!n.Et().Gi()&&this.Lv.N().handleScale.axisPressedMouseMove.time&&n.Bd(e.localX)}pp(e){this.mp(e)}bp(){this.Sw=!1;const e=this.Lv.Qt();e.Et().Gi()&&!this.Lv.N().handleScale.axisPressedMouseMove.time||e.Ed()}gp(){this.bp()}ip(){this.Lv.N().handleScale.axisDoubleClickReset.time&&this.Lv.Qt().wn()}Xf(){this.ip()}lp(){this.Lv.Qt().N().handleScale.axisPressedMouseMove.time&&this.Cm(1)}zp(){this.Cm(0)}sv(){return this.Uv}Dw(){return this.xw}Iw(e,n,i){vn(this.Uv,e)||(this.Uv=e,this.Kv=!0,this.sm.resizeCanvasElement(e),this.nm.resizeCanvasElement(e),this.Kv=!1,this.Jp.style.width=`${e.width}px`,this.Jp.style.height=`${e.height}px`,this.xw.p(e)),this.Mw!==null&&this.Mw.dm(te({width:n,height:e.height})),this.bw!==null&&this.bw.dm(te({width:i,height:e.height}))}Vw(){const e=this.Bw();return Math.ceil(e.S+e.C+e.k+e.A+e.I+e.Ew)}kt(){this.Lv.Qt().Et().Vl()}nv(){return this.sm.bitmapSize}ev(e,n,i,s){const r=this.nv();if(r.width>0&&r.height>0&&(e.drawImage(this.sm.canvasElement,n,i),s)){const o=this.nm.canvasElement;e.drawImage(o,n,i)}}pm(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.sm.applySuggestedBitmapSize();const s=jn(this.sm,n);s!==null&&(s.useBitmapCoordinateSpace(r=>{this.wm(r),this.gm(r),this.Aw(s,ey)}),this.bm(s),this.Aw(s,qv)),this.Mw!==null&&this.Mw.pm(e),this.bw!==null&&this.bw.pm(e)}this.nm.applySuggestedBitmapSize();const i=jn(this.nm,n);i!==null&&(i.useBitmapCoordinateSpace(({context:s,bitmapSize:r})=>{s.clearRect(0,0,r.width,r.height)}),this.Lw([...this.Lv.Qt().tn(),this.Lv.Qt().gd()],i),this.Aw(i,Zv))}Aw(e,n){const i=this.Lv.Qt().tn();for(const s of i)Jo(n,r=>Qo(r,e,!1,void 0),s,void 0);for(const s of i)Jo(n,r=>lr(r,e,!1,void 0),s,void 0)}wm({context:e,bitmapSize:n}){Xr(e,0,0,n.width,n.height,this.Lv.Qt().Kd())}gm({context:e,bitmapSize:n,verticalPixelRatio:i}){if(this.Lv.N().timeScale.borderVisible){e.fillStyle=this.zw();const s=Math.max(1,Math.floor(this.Bw().S*i));e.fillRect(0,0,n.width,s)}}bm(e){const n=this.Lv.Qt().Et(),i=n.Vl();if(!i||i.length===0)return;const s=this.cu.maxTickMarkWeight(i),r=this.Bw(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:u,verticalPixelRatio:h})=>{a.strokeStyle=this.zw(),a.fillStyle=this.zw();const c=Math.max(1,Math.floor(u)),d=Math.floor(.5*u);a.beginPath();const f=Math.round(r.C*h);for(let m=i.length;m--;){const y=Math.round(i[m].coord*u);a.rect(y-d,0,c,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const u=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this._m();for(const h of i)if(h.weight<s){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}this.Lv.N().timeScale.allowBoldLabels&&(a.font=this.Nw());for(const h of i)if(h.weight>=s){const c=h.needAlignCoordinate?this.Ow(a,h.coord,h.label):h.coord;a.fillText(h.label,c,u)}})}Ow(e,n,i){const s=this.qv.Ii(e,i),r=s/2,o=Math.floor(n-r)+.5;return o<0?n+=Math.abs(0-o):o+s>this.Uv.width&&(n-=Math.abs(this.Uv.width-(o+s))),n}Lw(e,n){const i=this.Bw();for(const s of e)for(const r of s.fs())r.Tt().nt(n,i)}zw(){return this.Lv.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}_m(){return cs(this.F(),this.Ps.fontFamily)}Nw(){return cs(this.F(),this.Ps.fontFamily,"bold")}Bw(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,I:NaN,ts:NaN,C:5,k:NaN,P:"",Qi:new ds,Ew:0});const e=this.M,n=this._m();if(e.P!==n){const i=this.F();e.k=i,e.P=n,e.A=3*i/12,e.I=3*i/12,e.ts=9*i/12,e.L=0,e.Ew=4*i/12,e.Qi.On()}return this.M}Cm(e){this.Jp.style.cursor=e===1?"ew-resize":"default"}Pw(){const e=this.Lv.Qt(),n=e.N();n.leftPriceScale.visible||this.Mw===null||(this.Cw.removeChild(this.Mw.iv()),this.Mw.m(),this.Mw=null),n.rightPriceScale.visible||this.bw===null||(this.yw.removeChild(this.bw.iv()),this.bw.m(),this.bw=null);const i={Nd:this.Lv.Qt().Nd()},s=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,r=()=>e.Kd();n.leftPriceScale.visible&&this.Mw===null&&(this.Mw=new Kh("left",n,i,s,r),this.Cw.appendChild(this.Mw.iv())),n.rightPriceScale.visible&&this.bw===null&&(this.bw=new Kh("right",n,i,s,r),this.yw.appendChild(this.bw.iv()))}}var dc;const ny=!!di&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!di&&((dc=navigator==null?void 0:navigator.userAgentData)!=null&&dc.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class iy{constructor(e,n,i){var s;this.Fw=[],this.Ww=[],this.Hw=0,this.eo=0,this.S_=0,this.Uw=0,this.$w=0,this.qw=null,this.jw=!1,this.Im=new fe,this.Vm=new fe,this.nd=new fe,this.Yw=null,this.Kw=null,this.Av=e,this.Ps=n,this.cu=i,this.Vv=document.createElement("div"),this.Vv.classList.add("tv-lightweight-charts"),this.Vv.style.overflow="hidden",this.Vv.style.direction="ltr",this.Vv.style.width="100%",this.Vv.style.height="100%",(s=this.Vv).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.Zw=document.createElement("table"),this.Zw.setAttribute("cellspacing","0"),this.Vv.appendChild(this.Zw),this.Gw=this.Xw.bind(this),Kl(this.Ps)&&this.Jw(!0),this.ns=new $v(this.rd.bind(this),this.Ps,i),this.Qt().Md().i(this.Qw.bind(this),this),this.tg=new ty(this,this.cu),this.Zw.appendChild(this.tg.iv());const r=n.autoSize&&this.ig();let o=this.Ps.width,a=this.Ps.height;if(r||o===0||a===0){const u=e.getBoundingClientRect();o=o||u.width,a=a||u.height}this.sg(o,a),this.ng(),e.appendChild(this.Vv),this.eg(),this.ns.Et().Oc().i(this.ns.Ca.bind(this.ns),this),this.ns.B_().i(this.ns.Ca.bind(this.ns),this)}Qt(){return this.ns}N(){return this.Ps}Zp(){return this.Fw}rg(){return this.tg}m(){this.Jw(!1),this.Hw!==0&&window.cancelAnimationFrame(this.Hw),this.ns.Md().u(this),this.ns.Et().Oc().u(this),this.ns.B_().u(this),this.ns.m();for(const e of this.Fw)this.Zw.removeChild(e.iv()),e.nw().u(this),e.ew().u(this),e.m();this.Fw=[];for(const e of this.Ww)this.hg(e);this.Ww=[],z(this.tg).m(),this.Vv.parentElement!==null&&this.Vv.parentElement.removeChild(this.Vv),this.nd.m(),this.Im.m(),this.Vm.m(),this.ag()}sg(e,n,i=!1){if(this.eo===n&&this.S_===e)return;const s=function(a){const u=Math.floor(a.width),h=Math.floor(a.height);return te({width:u-u%2,height:h-h%2})}(te({width:e,height:n}));this.eo=s.height,this.S_=s.width;const r=this.eo+"px",o=this.S_+"px";z(this.Vv).style.height=r,z(this.Vv).style.width=o,this.Zw.style.height=r,this.Zw.style.width=o,i?this.lg(Ce.yn(),performance.now()):this.ns.Ca()}pm(e){e===void 0&&(e=Ce.yn());for(let n=0;n<this.Fw.length;n++)this.Fw[n].pm(e.un(n).an);this.Ps.timeScale.visible&&this.tg.pm(e._n())}cr(e){var s;const n=Kl(this.Ps);this.ns.cr(e);const i=Kl(this.Ps);i!==n&&this.Jw(i),(s=e.layout)!=null&&s.panes&&this.og(),this.eg(),this._g(e)}nw(){return this.Im}ew(){return this.Vm}Md(){return this.nd}ug(e=!1){this.qw!==null&&(this.lg(this.qw,performance.now()),this.qw=null);const n=this.cg(null),i=document.createElement("canvas");i.width=n.width,i.height=n.height;const s=z(i.getContext("2d"));return this.cg(s,e),i}dg(e){return e==="left"&&!this.fg()||e==="right"&&!this.pg()||this.Fw.length===0?0:z(e==="left"?this.Fw[0].uw():this.Fw[0].cw()).fm()}vg(){return this.Ps.autoSize&&this.Yw!==null}hv(){return this.Vv}mg(e){this.Kw=e,this.Kw?this.hv().style.setProperty("cursor",e):this.hv().style.removeProperty("cursor")}wg(){return this.Kw}gg(e){return Ye(this.Fw[e]).sv()}og(){this.Ww.forEach(e=>{e.kt()})}_g(e){(e.autoSize!==void 0||!this.Yw||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Yw&&this.ig(),e.autoSize===!1&&this.Yw!==null&&this.ag(),e.autoSize||e.width===void 0&&e.height===void 0||this.sg(e.width||this.S_,e.height||this.eo))}cg(e,n){let i=0,s=0;const r=this.Fw[0],o=(u,h)=>{let c=0;for(let d=0;d<this.Fw.length;d++){const f=this.Fw[d],m=z(u==="left"?f.uw():f.cw()),y=m.nv();if(e!==null&&m.ev(e,h,c,n),c+=y.height,d<this.Fw.length-1){const x=this.Ww[d],M=x.nv();e!==null&&x.ev(e,h,c),c+=M.height}}};this.fg()&&(o("left",0),i+=z(r.uw()).nv().width);for(let u=0;u<this.Fw.length;u++){const h=this.Fw[u],c=h.nv();if(e!==null&&h.ev(e,i,s,n),s+=c.height,u<this.Fw.length-1){const d=this.Ww[u],f=d.nv();e!==null&&d.ev(e,i,s),s+=f.height}}i+=r.nv().width,this.pg()&&(o("right",i),i+=z(r.cw()).nv().width);const a=(u,h,c)=>{z(u==="left"?this.tg.Tw():this.tg.Rw()).ev(z(e),h,c)};if(this.Ps.timeScale.visible){const u=this.tg.nv();if(e!==null){let h=0;this.fg()&&(a("left",h,s),h=z(r.uw()).nv().width),this.tg.ev(e,h,s,n),h+=u.width,this.pg()&&a("right",h,s)}s+=u.height}return te({width:i,height:s})}Mg(){let e=0,n=0,i=0;for(const M of this.Fw)this.fg()&&(n=Math.max(n,z(M.uw()).om(),this.Ps.leftPriceScale.minimumWidth)),this.pg()&&(i=Math.max(i,z(M.cw()).om(),this.Ps.rightPriceScale.minimumWidth)),e+=M.E_();n=Yo(n),i=Yo(i);const s=this.S_,r=this.eo,o=Math.max(s-n-i,0),a=1*this.Ww.length,u=this.Ps.timeScale.visible;let h=u?Math.max(this.tg.Vw(),this.Ps.timeScale.minimumHeight):0;var c;h=(c=h)+c%2;const d=a+h,f=r<d?0:r-d,m=f/e;let y=0;const x=window.devicePixelRatio||1;for(let M=0;M<this.Fw.length;++M){const g=this.Fw[M];g.qm(this.ns.Xs()[M]);let p=0,v=0;v=M===this.Fw.length-1?Math.ceil((f-y)*x)/x:Math.round(g.E_()*m*x)/x,p=Math.max(v,2),y+=p,g.dm(te({width:o,height:p})),this.fg()&&g.hw(n,"left"),this.pg()&&g.hw(i,"right"),g.cv()&&this.ns.bd(g.cv(),p)}this.tg.Iw(te({width:u?o:0,height:h}),u?n:0,u?i:0),this.ns.L_(o),this.Uw!==n&&(this.Uw=n),this.$w!==i&&(this.$w=i)}Jw(e){e?this.Vv.addEventListener("wheel",this.Gw,{passive:!1}):this.Vv.removeEventListener("wheel",this.Gw)}bg(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return ny?1/window.devicePixelRatio:1}Xw(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.bg(e),i=n*e.deltaX/100,s=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),s!==0&&this.Ps.handleScale.mouseWheel){const r=Math.sign(s)*Math.min(1,Math.abs(s)),o=e.clientX-this.Vv.getBoundingClientRect().left;this.Qt().Td(o,r)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().Rd(-80*i)}lg(e,n){var s;const i=e._n();i===3&&this.Sg(),i!==3&&i!==2||(this.xg(e),this.Cg(e,n),this.tg.kt(),this.Fw.forEach(r=>{r.Ym()}),((s=this.qw)==null?void 0:s._n())===3&&(this.qw.Sn(e),this.Sg(),this.xg(this.qw),this.Cg(this.qw,n),e=this.qw,this.qw=null)),this.pm(e)}Cg(e,n){for(const i of e.bn())this.xn(i,n)}xg(e){const n=this.ns.Xs();for(let i=0;i<n.length;i++)e.un(i).ln&&n[i].tu()}xn(e,n){const i=this.ns.Et();switch(e.fn){case 0:i.Fc();break;case 1:i.Wc(e.Wt);break;case 2:i.gn(e.Wt);break;case 3:i.Mn(e.Wt);break;case 4:i.Pc();break;case 5:e.Wt.Ec(n)||i.Mn(e.Wt.Ac(n))}}rd(e){this.qw!==null?this.qw.Sn(e):this.qw=e,this.jw||(this.jw=!0,this.Hw=window.requestAnimationFrame(n=>{if(this.jw=!1,this.Hw=0,this.qw!==null){const i=this.qw;this.qw=null,this.lg(i,n);for(const s of i.bn())if(s.fn===5&&!s.Wt.Ec(n)){this.Qt().vn(s.Wt);break}}}))}Sg(){this.ng()}hg(e){this.Zw.removeChild(e.iv()),e.m()}ng(){const e=this.ns.Xs(),n=e.length,i=this.Fw.length;for(let s=n;s<i;s++){const r=Ye(this.Fw.pop());this.Zw.removeChild(r.iv()),r.nw().u(this),r.ew().u(this),r.m();const o=this.Ww.pop();o!==void 0&&this.hg(o)}for(let s=i;s<n;s++){const r=new Qa(this,e[s]);if(r.nw().i(this.yg.bind(this,r),this),r.ew().i(this.kg.bind(this,r),this),this.Fw.push(r),s>0){const o=new Yv(this,s-1,s);this.Ww.push(o),this.Zw.insertBefore(o.iv(),this.tg.iv())}this.Zw.insertBefore(r.iv(),this.tg.iv())}for(let s=0;s<n;s++){const r=e[s],o=this.Fw[s];o.cv()!==r?o.qm(r):o.$m()}this.eg(),this.Mg()}Pg(e,n,i,s){var d;const r=new Map;e!==null&&this.ns.tn().forEach(f=>{const m=f.qs().$s(e);m!==null&&r.set(f,m)});let o;if(e!==null){const f=(d=this.ns.Et().es(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const a=this.Qt().pd(),u=a!==null&&a.hu instanceof tl?a.hu:void 0,h=a!==null&&a.au!==void 0?a.au.te:void 0,c=this.Tg(s);return{Gr:o,js:e??void 0,Rg:n??void 0,Dg:c!==-1?c:void 0,Ig:u,Vg:r,Bg:h,Eg:i??void 0}}Tg(e){let n=-1;if(e)n=this.Fw.indexOf(e);else{const i=this.Qt().gd().Gs();i!==null&&(n=this.Qt().Xs().indexOf(i))}return n}yg(e,n,i,s){this.Im.p(()=>this.Pg(n,i,s,e))}kg(e,n,i,s){this.Vm.p(()=>this.Pg(n,i,s,e))}Qw(e,n,i){var s;this.mg(((s=this.Qt().pd())==null?void 0:s.ou)??null),this.nd.p(()=>this.Pg(e,n,i))}eg(){const e=this.Ps.timeScale.visible?"":"none";this.tg.iv().style.display=e}fg(){return this.Fw[0].cv().U_().N().visible}pg(){return this.Fw[0].cv().q_().N().visible}ig(){return"ResizeObserver"in window&&(this.Yw=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.sg(n.contentRect.width,n.contentRect.height)}),this.Yw.observe(this.Av,{box:"border-box"}),!0)}ag(){this.Yw!==null&&this.Yw.disconnect(),this.Yw=null}}function Kl(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function sy(t){return t.open===void 0&&t.value===void 0}function ry(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Yh(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.color!==void 0&&(r.R=n.color),r}function ly(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.lineColor!==void 0&&(r.vt=n.lineColor),n.topColor!==void 0&&(r.eh=n.topColor),n.bottomColor!==void 0&&(r.rh=n.bottomColor),r}function oy(t,e,n,i){const s=n.value,r={js:e,wt:t,Wt:[s,s,s,s],Gr:i};return n.topLineColor!==void 0&&(r.hh=n.topLineColor),n.bottomLineColor!==void 0&&(r.ah=n.bottomLineColor),n.topFillColor1!==void 0&&(r.oh=n.topFillColor1),n.topFillColor2!==void 0&&(r._h=n.topFillColor2),n.bottomFillColor1!==void 0&&(r.uh=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(r.dh=n.bottomFillColor2),r}function ay(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),s}function uy(t,e,n,i){const s={js:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Gr:i};return n.color!==void 0&&(s.R=n.color),n.borderColor!==void 0&&(s.Ht=n.borderColor),n.wickColor!==void 0&&(s.nh=n.wickColor),s}function hy(t,e,n,i,s){const r=Ye(s)(n),o=Math.max(...r),a=Math.min(...r),u=r[r.length-1],h=[u,o,a,u],{time:c,color:d,...f}=n;return{js:e,wt:t,Wt:h,Gr:i,le:f,R:d}}function In(t){return t.Wt!==void 0}function Qh(t,e){return e.customValues!==void 0&&(t.Ag=e.customValues),t}function un(t){return(e,n,i,s,r,o)=>function(a,u){return u?u(a):sy(a)}(i,o)?Qh({wt:e,js:n,Gr:s},i):Qh(t(e,n,i,s,r),i)}function Jh(t){return{Candlestick:un(uy),Bar:un(ay),Area:un(ly),Baseline:un(oy),Histogram:un(Yh),Line:un(Yh),Custom:un(hy)}[t]}function Gh(t){return{js:0,Lg:new Map,Ea:t}}function Xh(t,e){if(t!==void 0&&t.length!==0)return{zg:e.key(t[0].wt),Og:e.key(t[t.length-1].wt)}}function qh(t){let e;return t.forEach(n=>{e===void 0&&(e=n.Gr)}),Ye(e)}class cy{constructor(e){this.Ng=new Map,this.Fg=new Map,this.Wg=new Map,this.Hg=[],this.cu=e}m(){this.Ng.clear(),this.Fg.clear(),this.Wg.clear(),this.Hg=[]}Ug(e,n){let i=this.Ng.size!==0,s=!1;const r=this.Fg.get(e);if(r!==void 0)if(this.Fg.size===1)i=!1,s=!0,this.Ng.clear();else for(const u of this.Hg)u.pointData.Lg.delete(e)&&(s=!0);let o=[];if(n.length!==0){const u=n.map(m=>m.time),h=this.cu.createConverterToInternalObj(n),c=Jh(e.wh()),d=e.rl(),f=e.hl();o=n.map((m,y)=>{const x=h(m.time),M=this.cu.key(x);let g=this.Ng.get(M);g===void 0&&(g=Gh(x),this.Ng.set(M,g),s=!0);const p=c(x,g.js,m,u[y],d,f);return g.Lg.set(e,p),p})}i&&this.$g(),this.qg(e,o);let a=-1;if(s){const u=[];this.Ng.forEach(h=>{u.push({timeWeight:0,time:h.Ea,pointData:h,originalTime:qh(h.Lg)})}),u.sort((h,c)=>this.cu.key(h.time)-this.cu.key(c.time)),a=this.jg(u)}return this.Yg(e,a,function(u,h,c){const d=Xh(u,c),f=Xh(h,c);if(d!==void 0&&f!==void 0)return{Kg:!1,Ta:d.Og>=f.Og&&d.zg>=f.zg}}(this.Fg.get(e),r,this.cu))}Hd(e){return this.Ug(e,[])}Zg(e,n,i){if(i&&e.La())throw new Error("Historical updates are not supported when conflation is enabled. Conflation requires data to be processed in order.");const s=n;(function(g){g.Gr===void 0&&(g.Gr=g.time)})(s),this.cu.preprocessData(n);const r=this.cu.createConverterToInternalObj([n])(n.time),o=this.Wg.get(e);if(!i&&o!==void 0&&this.cu.key(r)<this.cu.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.Ng.get(this.cu.key(r));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const u=a===void 0;a===void 0&&(a=Gh(r),this.Ng.set(this.cu.key(r),a));const h=Jh(e.wh()),c=e.rl(),d=e.hl(),f=h(r,a.js,n,s.Gr,c,d),m=!i&&!u&&o!==void 0&&this.cu.key(r)===this.cu.key(o);a.Lg.set(e,f),i?this.Gg(e,f,a.js):m&&e.La()&&In(f)?(e.kr(f),this.Xg(e,f)):this.Xg(e,f);const y={Ta:In(f),Kg:i};if(!u)return this.Yg(e,-1,y);const x={timeWeight:0,time:a.Ea,pointData:a,originalTime:qh(a.Lg)},M=ci(this.Hg,this.cu.key(x.time),(g,p)=>this.cu.key(g.time)<p);this.Hg.splice(M,0,x);for(let g=M;g<this.Hg.length;++g)Ys(this.Hg[g].pointData,g);return this.cu.fillWeightsForPoints(this.Hg,M),this.Yg(e,M,y)}Jg(e,n){const i=this.Fg.get(e);if(i===void 0||n<=0)return[[],this.Qg()];n=Math.min(n,i.length);const s=i.splice(-n).reverse();i.length===0?this.Wg.delete(e):this.Wg.set(e,i[i.length-1].wt);for(const r of s){const o=this.Ng.get(this.cu.key(r.wt));if(o&&(o.Lg.delete(e),o.Lg.size===0)){this.Ng.delete(this.cu.key(o.Ea)),this.Hg.splice(o.js,1);for(let a=o.js;a<this.Hg.length;++a)Ys(this.Hg[a].pointData,a)}}return[s,this.Yg(e,this.Hg.length-1,{Kg:!1,Ta:!1})]}Xg(e,n){let i=this.Fg.get(e);i===void 0&&(i=[],this.Fg.set(e,i));const s=i.length!==0?i[i.length-1]:null;s===null||this.cu.key(n.wt)>this.cu.key(s.wt)?In(n)&&i.push(n):In(n)?i[i.length-1]=n:i.splice(-1,1),this.Wg.set(e,n.wt)}Gg(e,n,i){const s=this.Fg.get(e);if(s===void 0)return;const r=ci(s,i,(o,a)=>o.js<a);In(n)?s[r]=n:s.splice(r,1)}qg(e,n){n.length!==0?(this.Fg.set(e,n.filter(In)),this.Wg.set(e,n[n.length-1].wt)):(this.Fg.delete(e),this.Wg.delete(e))}$g(){for(const e of this.Hg)e.pointData.Lg.size===0&&this.Ng.delete(this.cu.key(e.time))}jg(e){let n=-1;for(let i=0;i<this.Hg.length&&i<e.length;++i){const s=this.Hg[i],r=e[i];if(this.cu.key(s.time)!==this.cu.key(r.time)){n=i;break}r.timeWeight=s.timeWeight,Ys(r.pointData,i)}if(n===-1&&this.Hg.length!==e.length&&(n=Math.min(this.Hg.length,e.length)),n===-1)return-1;for(let i=n;i<e.length;++i)Ys(e[i].pointData,i);return this.cu.fillWeightsForPoints(e,n),this.Hg=e,n}tM(){if(this.Fg.size===0)return null;let e=0;return this.Fg.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].js))}),e}Yg(e,n,i){const s=this.Qg();if(n!==-1)this.Fg.forEach((r,o)=>{s.F_.set(o,{le:r,iM:o===e?i:void 0})}),this.Fg.has(e)||s.F_.set(e,{le:[],iM:i}),s.Et.sM=this.Hg,s.Et.nM=n;else{const r=this.Fg.get(e);s.F_.set(e,{le:r||[],iM:i})}return s}Qg(){return{F_:new Map,Et:{vc:this.tM()}}}}function Ys(t,e){t.js=e,t.Lg.forEach(n=>{n.js=e})}function dy(t,e){return t.wt<e}function fy(t,e){return e<t.wt}function Vf(t,e,n){const i=e.Aa(),s=e.bi(),r=ci(t,i,dy),o=Ff(t,s,fy);if(!n)return{from:r,to:o};let a=r,u=o;return r>0&&r<t.length&&t[r].wt>=i&&(a=r-1),o>0&&o<t.length&&t[o-1].wt<=s&&(u=o+1),{from:a,to:u}}class Ga{constructor(e,n,i){this.eM=!0,this.rM=!0,this.hM=!0,this.aM=[],this.lM=null,this.oM=-1,this.ee=e,this.re=n,this._M=i}kt(e){this.eM=!0,e==="data"&&(this.rM=!0),e==="options"&&(this.hM=!0)}Tt(){return this.ee.It()?(this.uM(),this.lM===null?null:this.cM):null}dM(){this.aM=this.aM.map(e=>({...e,...this.ee.ga().gh(e.wt)}))}fM(){this.lM=null}uM(){const e=this.re.Et(),n=e.N().enableConflation?e.Hc():0;n!==this.oM&&(this.rM=!0,this.oM=n),this.rM&&(this.pM(),this.rM=!1),this.hM&&(this.dM(),this.hM=!1),this.eM&&(this.vM(),this.eM=!1)}vM(){const e=this.ee.Ft(),n=this.re.Et();if(this.fM(),n.Gi()||e.Gi())return;const i=n.Ie();if(i===null||this.ee.qs().yh()===0)return;const s=this.ee.Lt();s!==null&&(this.lM=Vf(this.aM,i,this._M),this.mM(e,n,s.Wt),this.wM())}}class py{constructor(e,n){this.gM=e,this.Ki=n}nt(e,n,i){this.gM.draw(e,this.Ki,n,i)}}class my extends Ga{constructor(e,n,i){super(e,n,!1),this.$h=i,this.cM=new py(this.$h.renderer(),s=>{const r=e.Lt();return r===null?null:e.Ft().Nt(s,r.Wt)})}get ma(){return this.$h.conflationReducer}Oa(e){return this.$h.priceValueBuilder(e)}al(e){return this.$h.isWhitespace(e)}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>({wt:n.js,_t:NaN,...e.gh(n.js),MM:n.le}))}mM(e,n){n.mc(this.aM,hs(this.lM))}wM(){this.$h.update({bars:this.aM.map(gy),barSpacing:this.re.Et().ul(),visibleRange:this.lM,conflationFactor:this.re.Et().Hc()},this.ee.N())}}function gy(t){return{x:t._t,time:t.wt,originalData:t.MM,barColor:t.th}}const vy={color:"#2196f3"},yy=(t,e,n)=>{const i=Qt(n);return new my(t,e,i)};function Xa(t){const e={value:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function Zh(t){const e=Xa(t);return t.R!==void 0&&(e.color=t.R),e}function xy(t){const e=Xa(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.eh!==void 0&&(e.topColor=t.eh),t.rh!==void 0&&(e.bottomColor=t.rh),e}function wy(t){const e=Xa(t);return t.hh!==void 0&&(e.topLineColor=t.hh),t.ah!==void 0&&(e.bottomLineColor=t.ah),t.oh!==void 0&&(e.topFillColor1=t.oh),t._h!==void 0&&(e.topFillColor2=t._h),t.uh!==void 0&&(e.bottomFillColor1=t.uh),t.dh!==void 0&&(e.bottomFillColor2=t.dh),e}function Hf(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Gr};return t.Ag!==void 0&&(e.customValues=t.Ag),e}function _y(t){const e=Hf(t);return t.R!==void 0&&(e.color=t.R),e}function Sy(t){const e=Hf(t),{R:n,Ht:i,nh:s}=t;return n!==void 0&&(e.color=n),i!==void 0&&(e.borderColor=i),s!==void 0&&(e.wickColor=s),e}function or(t){return{Area:xy,Line:Zh,Baseline:wy,Histogram:Zh,Bar:_y,Candlestick:Sy,Custom:jy}[t]}function jy(t){const e=t.Gr;return{...t.le,time:e}}const by={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1,doNotSnapToHiddenSeriesIndices:!1},ky={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},My={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ef,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Yl={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Cy={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1,enableConflation:!1,conflationThresholdFactor:1,precomputeConflationOnInit:!1,precomputeConflationPriority:"background"};function ec(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:My,crosshair:by,grid:ky,overlayPriceScales:{...Yl},leftPriceScale:{...Yl,visible:!1},rightPriceScale:{...Yl,visible:!0},timeScale:Cy,localization:{locale:di?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Kf{constructor(e,n,i){this.Yp=e,this.bM=n,this.SM=i??0}applyOptions(e){this.Yp.Qt().md(this.bM,e,this.SM)}options(){return this.Ki().N()}width(){return Zr(this.bM)?this.Yp.dg(this.bM):0}setVisibleRange(e){this.setAutoScale(!1),this.Ki().$o(new Oe(e.from,e.to))}getVisibleRange(){let e,n,i=this.Ki().er();if(i===null)return null;if(this.Ki().io()){const s=this.Ki().m_(),r=$f(s);i=Jn(i,this.Ki().no()),e=Number((Math.round(i.Ze()/s)*s).toFixed(r)),n=Number((Math.round(i.Ge()/s)*s).toFixed(r))}else e=i.Ze(),n=i.Ge();return{from:e,to:n}}setAutoScale(e){this.applyOptions({autoScale:e})}Ki(){return z(this.Yp.Qt().wd(this.bM,this.SM)).Ft}}class Ey{constructor(e,n,i,s){this.Yp=e,this.yt=i,this.xM=n,this.CM=s}getHeight(){return this.yt.$t()}setHeight(e){const n=this.Yp.Qt(),i=n.Gd(this.yt);n.xd(i,e)}getStretchFactor(){return this.yt.E_()}setStretchFactor(e){this.yt.A_(e),this.Yp.Qt().Ca()}paneIndex(){return this.Yp.Qt().Gd(this.yt)}moveTo(e){const n=this.paneIndex();n!==e&&(Ee(e>=0&&e<this.Yp.Zp().length,"Invalid pane index"),this.Yp.Qt().yd(n,e))}getSeries(){return this.yt.F_().map(e=>this.xM(e))??[]}getHTMLElement(){const e=this.Yp.Zp();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].iv():null}attachPrimitive(e){this.yt.nl(e),e.attached&&e.attached({chart:this.CM,requestUpdate:()=>this.yt.Qt().Ca()})}detachPrimitive(e){this.yt.el(e)}priceScale(e){if(this.yt.V_(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new Kf(this.Yp,e,this.paneIndex())}setPreserveEmptyPane(e){this.yt.O_(e)}preserveEmptyPane(){return this.yt.N_()}addCustomSeries(e,n={},i=0){return this.CM.addCustomSeries(e,n,i)}addSeries(e,n={}){return this.CM.addSeries(e,n,this.paneIndex())}}const Py={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class tc{constructor(e){this.hr=e}applyOptions(e){this.hr.cr(e)}options(){return this.hr.N()}yM(){return this.hr}}class Ny{constructor(e,n,i,s,r,o){this.kM=new fe,this.ee=e,this.PM=n,this.TM=i,this.cu=r,this.CM=s,this.RM=o}m(){this.kM.m()}priceFormatter(){return this.ee.Xa()}priceToCoordinate(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.ee.Lt();return n===null?null:this.ee.Ft().Ds(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ii(new ni(e.from,e.to)).Ru(),i=this.ee.qs();if(i.Gi())return null;const s=i.$s(n.Aa(),1),r=i.$s(n.bi(),-1),o=z(i.kh()),a=z(i.sn());if(s!==null&&r!==null&&s.js>r.js)return{barsBefore:e.from-o,barsAfter:a-e.to};const u={barsBefore:s===null||s.js===o?e.from-o:s.js-o,barsAfter:r===null||r.js===a?a-e.to:a-r.js};return s!==null&&r!==null&&(u.from=s.Gr,u.to=r.Gr),u}setData(e){this.cu,this.ee.wh(),this.PM.DM(this.ee,e),this.IM("full")}update(e,n=!1){this.ee.wh(),this.PM.VM(this.ee,e,n),this.IM("update")}pop(e=1){const n=this.PM.BM(this.ee,e);n.length!==0&&this.IM("update");const i=or(this.seriesType());return n.map(s=>i(s))}dataByIndex(e,n){const i=this.ee.qs().$s(e,n);return i===null?null:or(this.seriesType())(i)}data(){const e=or(this.seriesType());return this.ee.qs().Dh().map(n=>e(n))}subscribeDataChanged(e){this.kM.i(e)}unsubscribeDataChanged(e){this.kM._(e)}applyOptions(e){this.ee.cr(e)}options(){return Et(this.ee.N())}priceScale(){return this.TM.priceScale(this.ee.Ft().ol(),this.getPane().paneIndex())}createPriceLine(e){const n=Xe(Et(Py),e),i=this.ee.Da(n);return new tc(i)}removePriceLine(e){this.ee.Ia(e.yM())}priceLines(){return this.ee.Va().map(e=>new tc(e))}seriesType(){return this.ee.wh()}lastValueData(e){const n=this.ee.Ve(e);return n.Be?{noData:!0}:{noData:!1,price:n.gt,color:n.R}}attachPrimitive(e){this.ee.nl(e),e.attached&&e.attached({chart:this.CM,series:this,requestUpdate:()=>this.ee.Qt().Ca(),horzScaleBehavior:this.cu})}detachPrimitive(e){this.ee.el(e),e.detached&&e.detached(),this.ee.Qt().Ca()}getPane(){const e=this.ee,n=z(this.ee.Qt().Kn(e));return this.RM(n)}moveToPane(e){this.ee.Qt().jd(this.ee,e)}seriesOrder(){const e=this.ee.Qt().Kn(this.ee);return e===null?-1:e.F_().indexOf(this.ee)}setSeriesOrder(e){const n=this.ee.Qt().Kn(this.ee);n!==null&&n.su(this.ee,e)}IM(e){this.kM.v()&&this.kM.p(e)}}class zy{constructor(e,n,i){this.EM=new fe,this.Nu=new fe,this.xw=new fe,this.ns=e,this.Jh=e.Et(),this.tg=n,this.Jh.Lc().i(this.AM.bind(this)),this.Jh.zc().i(this.LM.bind(this)),this.tg.Dw().i(this.zM.bind(this)),this.cu=i}m(){this.Jh.Lc().u(this),this.Jh.zc().u(this),this.tg.Dw().u(this),this.EM.m(),this.Nu.m(),this.xw.m()}scrollPosition(){return this.Jh.Cc()}scrollToPosition(e,n){n?this.Jh.Bc(e,1e3):this.ns.Mn(e)}scrollToRealTime(){this.Jh.Vc()}getVisibleRange(){const e=this.Jh.lc();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.cu.convertHorzItemToInternal(e.from),to:this.cu.convertHorzItemToInternal(e.to)},i=this.Jh.cc(n);this.ns.$d(i)}getVisibleLogicalRange(){const e=this.Jh.ac();return e===null?null:{from:e.Aa(),to:e.bi()}}setVisibleLogicalRange(e){Ee(e.from<=e.to,"The from index cannot be after the to index."),this.ns.$d(e)}resetTimeScale(){this.ns.wn()}fitContent(){this.ns.Fc()}logicalToCoordinate(e){const n=this.ns.Et();return n.Gi()?null:n.qt(e)}coordinateToLogical(e){return this.Jh.Gi()?null:this.Jh.wc(e)}timeToIndex(e,n){const i=this.cu.convertHorzItemToInternal(e);return this.Jh.ec(i,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.Jh.qt(n)}coordinateToTime(e){const n=this.ns.Et(),i=n.wc(e),s=n.es(i);return s===null?null:s.originalTime}width(){return this.tg.sv().width}height(){return this.tg.sv().height}subscribeVisibleTimeRangeChange(e){this.EM.i(e)}unsubscribeVisibleTimeRangeChange(e){this.EM._(e)}subscribeVisibleLogicalRangeChange(e){this.Nu.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.Nu._(e)}subscribeSizeChange(e){this.xw.i(e)}unsubscribeSizeChange(e){this.xw._(e)}applyOptions(e){this.Jh.cr(e)}options(){return{...Et(this.Jh.N()),barSpacing:this.Jh.ul()}}AM(){this.EM.v()&&this.EM.p(this.getVisibleRange())}LM(){this.Nu.v()&&this.Nu.p(this.getVisibleLogicalRange())}zM(e){this.xw.p(e.width,e.height)}}function nc(t){return function(e){if(Ds(e.handleScale)){const i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:s}=e.handleScale;Ds(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),Ds(s)&&(e.handleScale.axisDoubleClickReset={time:s,price:s})}const n=e.handleScroll;Ds(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class Ty{constructor(e,n,i){this.OM=new Map,this.NM=new Map,this.FM=new fe,this.WM=new fe,this.HM=new fe,this.Xc=new WeakMap,this.UM=new cy(n);const s=i===void 0?Et(ec()):Xe(Et(ec()),nc(i));this.$M=n,this.Yp=new iy(e,s,n),this.Yp.nw().i(o=>{this.FM.v()&&this.FM.p(this.qM(o()))},this),this.Yp.ew().i(o=>{this.WM.v()&&this.WM.p(this.qM(o()))},this),this.Yp.Md().i(o=>{this.HM.v()&&this.HM.p(this.qM(o()))},this);const r=this.Yp.Qt();this.jM=new zy(r,this.Yp.rg(),this.$M)}remove(){this.Yp.nw().u(this),this.Yp.ew().u(this),this.Yp.Md().u(this),this.jM.m(),this.Yp.m(),this.OM.clear(),this.NM.clear(),this.FM.m(),this.WM.m(),this.HM.m(),this.UM.m()}resize(e,n,i){this.autoSizeActive()||this.Yp.sg(e,n,i)}addCustomSeries(e,n={},i=0){const s=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...vy,...r.defaultOptions()},YM:yy,KM:r}))(Qt(e));return this.ZM(s,n,i)}addSeries(e,n={},i=0){return this.ZM(e,n,i)}removeSeries(e){const n=Ye(this.OM.get(e)),i=this.UM.Hd(n);this.Yp.Qt().Hd(n),this.GM(i),this.OM.delete(e),this.NM.delete(n)}DM(e,n){this.GM(this.UM.Ug(e,n))}VM(e,n,i){this.GM(this.UM.Zg(e,n,i))}BM(e,n){const[i,s]=this.UM.Jg(e,n);return i.length!==0&&this.GM(s),i}subscribeClick(e){this.FM.i(e)}unsubscribeClick(e){this.FM._(e)}subscribeCrosshairMove(e){this.HM.i(e)}unsubscribeCrosshairMove(e){this.HM._(e)}subscribeDblClick(e){this.WM.i(e)}unsubscribeDblClick(e){this.WM._(e)}priceScale(e,n=0){return new Kf(this.Yp,e,n)}timeScale(){return this.jM}applyOptions(e){this.Yp.cr(nc(e))}options(){return this.Yp.N()}takeScreenshot(e=!1,n=!1){let i,s;try{n||(i=this.Yp.Qt().N().crosshair.mode,this.Yp.cr({crosshair:{mode:2}})),s=this.Yp.ug(e)}finally{n||i===void 0||this.Yp.Qt().cr({crosshair:{mode:i}})}return s}addPane(e=!1){const n=this.Yp.Qt().Xd();return n.O_(e),this.XM(n)}removePane(e){this.Yp.Qt().Sd(e)}swapPanes(e,n){this.Yp.Qt().Cd(e,n)}autoSizeActive(){return this.Yp.vg()}chartElement(){return this.Yp.hv()}panes(){return this.Yp.Qt().Xs().map(e=>this.XM(e))}paneSize(e=0){const n=this.Yp.gg(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,i){const s=this.OM.get(i);if(s===void 0)return;const r=this.Yp.Qt().Kn(s);r!==null&&this.Yp.Qt().Ld(e,n,r)}clearCrosshairPosition(){this.Yp.Qt().zd(!0)}horzBehaviour(){return this.$M}ZM(e,n={},i=0){Ee(e.YM!==void 0),function(u){if(u===void 0||u.type==="custom")return;const h=u;h.minMove!==void 0&&h.precision===void 0&&(h.precision=$f(h.minMove))}(n.priceFormat),e.type==="Candlestick"&&function(u){u.borderColor!==void 0&&(u.borderUpColor=u.borderColor,u.borderDownColor=u.borderColor),u.wickColor!==void 0&&(u.wickUpColor=u.wickColor,u.wickDownColor=u.wickColor)}(n);const s=Xe(Et(Mf),Et(e.defaultOptions),n),r=e.YM,o=new tl(this.Yp.Qt(),e.type,s,r,e.KM);this.Yp.Qt().Fd(o,i);const a=new Ny(o,this,this,this,this.$M,u=>this.XM(u));return this.OM.set(a,o),this.NM.set(o,a),a}GM(e){const n=this.Yp.Qt();n.Od(e.Et.vc,e.Et.sM,e.Et.nM),e.F_.forEach((i,s)=>s.ht(i.le,i.iM)),n.Et().Ju(),n.Sc()}JM(e){return Ye(this.NM.get(e))}qM(e){const n=new Map;e.Vg.forEach((s,r)=>{const o=r.wh(),a=or(o)(s);if(o!=="Custom")Ee(ry(a));else{const u=r.hl();Ee(!u||u(a)===!1)}n.set(this.JM(r),a)});const i=e.Ig!==void 0&&this.NM.has(e.Ig)?this.JM(e.Ig):void 0;return{time:e.Gr,logical:e.js,point:e.Rg,paneIndex:e.Dg,hoveredSeries:i,hoveredObjectId:e.Bg,seriesData:n,sourceEvent:e.Eg}}XM(e){let n=this.Xc.get(e);return n||(n=new Ey(this.Yp,i=>this.JM(i),e,this),this.Xc.set(e,n)),n}}function Ry(t){if(ys(t)){const e=document.getElementById(t);return Ee(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function Ly(t,e,n){const i=Ry(t),s=new Ty(i,e,n);return e.setOptions(s.options()),s}function Iy(t,e){return Ly(t,new Oh,Oh.pf(e))}class Fy extends Ga{constructor(e,n){super(e,n,!0)}mM(e,n,i){n.mc(this.aM,hs(this.lM)),e.Yo(this.aM,i,hs(this.lM))}QM(e,n){return{wt:e,gt:n,_t:NaN,ut:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>{let i;if((n.jr??1)>1){const s=n.Wt[1],r=n.Wt[2],o=n.Wt[3];i=Math.abs(s-o)>Math.abs(r-o)?s:r}else i=n.Wt[3];return this.tb(n.js,i,e)})}}function By(t,e,n,i,s,r,o){if(e.length===0||i.from>=e.length||i.to<=0)return;const{context:a,horizontalPixelRatio:u,verticalPixelRatio:h}=t,c=e[i.from];let d=r(t,c),f=c;if(i.to-i.from<2){const m=s/2;a.beginPath();const y={_t:c._t-m,ut:c.ut},x={_t:c._t+m,ut:c.ut};a.moveTo(y._t*u,y.ut*h),a.lineTo(x._t*u,x.ut*h),o(t,d,y,x)}else{const m=(x,M)=>{o(t,d,f,M),a.beginPath(),d=x,f=M};let y=f;a.beginPath(),a.moveTo(c._t*u,c.ut*h);for(let x=i.from+1;x<i.to;++x){y=e[x];const M=r(t,y);switch(n){case 0:a.lineTo(y._t*u,y.ut*h);break;case 1:a.lineTo(y._t*u,e[x-1].ut*h),M!==d&&(m(M,y),a.lineTo(y._t*u,e[x-1].ut*h)),a.lineTo(y._t*u,y.ut*h);break;case 2:{const[g,p]=Ay(e,x-1,x);a.bezierCurveTo(g._t*u,g.ut*h,p._t*u,p.ut*h,y._t*u,y.ut*h);break}}n!==1&&M!==d&&(m(M,y),a.moveTo(y._t*u,y.ut*h))}(f!==y||f===y&&n===1)&&o(t,d,f,y)}}const ic=6;function Ql(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function sc(t,e){return{_t:t._t/e,ut:t.ut/e}}function Ay(t,e,n){const i=Math.max(0,e-1),s=Math.min(t.length-1,n+1);var r,o;return[(r=t[e],o=sc(Ql(t[n],t[i]),ic),{_t:r._t+o._t,ut:r.ut+o.ut}),Ql(t[n],sc(Ql(t[s],t[e]),ic))]}function Oy(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class Dy extends Nn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:i,ib:s,sb:r,ct:o,Zt:a,nb:u}=this.rt;if(i===null)return;const h=e.context;h.lineCap="butt",h.lineWidth=o*e.verticalPixelRatio,bn(h,a),h.lineJoin="round";const c=this.eb.bind(this);r!==void 0&&By(e,n,r,i,s,c,Oy),u&&function(d,f,m,y,x){if(y.to-y.from<=0)return;const{horizontalPixelRatio:M,verticalPixelRatio:g,context:p}=d;let v=null;const b=Math.max(1,Math.floor(M))%2/2,P=m*g+b;for(let E=y.to-1;E>=y.from;--E){const k=f[E];if(k){const L=x(d,k);L!==v&&(p.beginPath(),v!==null&&p.fill(),p.fillStyle=L,v=L);const W=Math.round(k._t*M)+b,O=k.ut*g;p.moveTo(W,O),p.arc(W,O,P,0,2*Math.PI)}}p.fill()}(e,n,u,i,c)}}class $y extends Dy{eb(e,n){return n.vt}}class Wy extends Fy{constructor(){super(...arguments),this.cM=new $y}tb(e,n,i){return{...this.QM(e,n),...i.gh(e)}}wM(){const e=this.ee.N(),n={ot:this.aM,Zt:e.lineStyle,sb:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,nb:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.lM,ib:this.re.Et().ul()};this.cM.ht(n)}}const Jl={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},YM:(t,e)=>new Wy(t,e)};class Uy extends Ga{constructor(e,n){super(e,n,!1)}mM(e,n,i){n.mc(this.aM,hs(this.lM)),e.Zo(this.aM,i,hs(this.lM))}Lb(e,n,i){return{wt:e,Hr:n.Wt[0],Ur:n.Wt[1],$r:n.Wt[2],qr:n.Wt[3],_t:NaN,Go:NaN,Xo:NaN,Jo:NaN,Qo:NaN}}pM(){const e=this.ee.ga();this.aM=this.ee.Na().Dh().map(n=>this.tb(n.js,n,e))}}class Vy extends Nn{constructor(){super(...arguments),this.jt=null,this.Ib=0}ht(e){this.jt=e}et(e){if(this.jt===null||this.jt.qs.length===0||this.jt.lt===null)return;const{horizontalPixelRatio:n}=e;this.Ib=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),u=Math.floor(r*a*o),h=Math.floor(r*o),c=Math.min(u,h);return Math.max(Math.floor(o),c)}(this.jt.ul,n),this.Ib>=2&&Math.floor(n)%2!=this.Ib%2&&this.Ib--;const i=this.jt.qs;this.jt.zb&&this.Ob(e,i,this.jt.lt),this.jt.Mi&&this.gm(e,i,this.jt.lt);const s=this.Nb(n);(!this.jt.Mi||this.Ib>2*s)&&this.Fb(e,i,this.jt.lt)}Ob(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",u=Math.min(Math.floor(r),Math.floor(this.jt.ul*r));u=Math.max(Math.floor(r),Math.min(u,this.Ib));const h=Math.floor(.5*u);let c=null;for(let d=i.from;d<i.to;d++){const f=n[d];f.sh!==a&&(s.fillStyle=f.sh,a=f.sh);const m=Math.round(Math.min(f.Go,f.Qo)*o),y=Math.round(Math.max(f.Go,f.Qo)*o),x=Math.round(f.Xo*o),M=Math.round(f.Jo*o);let g=Math.round(r*f._t)-h;const p=g+u-1;c!==null&&(g=Math.max(c+1,g),g=Math.min(g,p));const v=p-g+1;s.fillRect(g,x,v,m-x),s.fillRect(g,y+1,v,M-y),c=p}}Nb(e){let n=Math.floor(1*e);this.Ib<=2*n&&(n=Math.floor(.5*(this.Ib-1)));const i=Math.max(Math.floor(e),n);return this.Ib<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}gm(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);let h=null;for(let c=i.from;c<i.to;c++){const d=n[c];d.ih!==a&&(s.fillStyle=d.ih,a=d.ih);let f=Math.round(d._t*r)-Math.floor(.5*this.Ib);const m=f+this.Ib-1,y=Math.round(Math.min(d.Go,d.Qo)*o),x=Math.round(Math.max(d.Go,d.Qo)*o);if(h!==null&&(f=Math.max(h+1,f),f=Math.min(f,m)),this.jt.ul*r>2*u)Hg(s,f,y,m-f+1,x-y+1,u);else{const M=m-f+1;s.fillRect(f,y,M,x-y+1)}h=m}}Fb(e,n,i){if(this.jt===null)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const u=this.Nb(r);for(let h=i.from;h<i.to;h++){const c=n[h];let d=Math.round(Math.min(c.Go,c.Qo)*o),f=Math.round(Math.max(c.Go,c.Qo)*o),m=Math.round(c._t*r)-Math.floor(.5*this.Ib),y=m+this.Ib-1;if(c.th!==a){const x=c.th;s.fillStyle=x,a=x}this.jt.Mi&&(m+=u,d+=u,y-=u,f-=u),d>f||s.fillRect(m,d,y-m+1,f-d+1)}}}class Hy extends Uy{constructor(){super(...arguments),this.cM=new Vy}tb(e,n,i){return{...this.Lb(e,n,i),...i.gh(e)}}wM(){const e=this.ee.N();this.cM.ht({qs:this.aM,ul:this.re.Et().ul(),zb:e.wickVisible,Mi:e.borderVisible,lt:this.lM})}}const Ky={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},YM:(t,e)=>new Hy(t,e)};class Yy{constructor(e,n){this.ee=e,this.Zh=n,this.jb()}detach(){this.ee.detachPrimitive(this.Zh)}getSeries(){return this.ee}applyOptions(e){this.Zh&&this.Zh.cr&&this.Zh.cr(e)}jb(){this.ee.attachPrimitive(this.Zh)}}const Qy={autoScale:!0,zOrder:"normal"};function Hi(t,e){return Ka(Math.min(Math.max(t,12),30)*e)}function fi(t,e){switch(t){case"arrowDown":case"arrowUp":return Hi(e,1);case"circle":return Hi(e,.8);case"square":return Hi(e,.7)}}function Yf(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(Hi(t,1))}function Qf(t){return Math.max(Hi(t,.1),3)}function rc(t,e,n){return e?t:n?Math.ceil(t/2):0}function lc(t,e,n,i){const s=(fi("arrowUp",i)-1)/2*n.pS,r=(Ka(i/2)-1)/2*n.pS;e.beginPath(),t?(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut-s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut+s),e.lineTo(n._t-r,n.ut+s),e.lineTo(n._t-r,n.ut)):(e.moveTo(n._t-s,n.ut),e.lineTo(n._t,n.ut+s),e.lineTo(n._t+s,n.ut),e.lineTo(n._t+r,n.ut),e.lineTo(n._t+r,n.ut-s),e.lineTo(n._t-r,n.ut-s),e.lineTo(n._t-r,n.ut)),e.fill()}function oc(t,e,n,i,s,r){const o=(fi("arrowUp",i)-1)/2,a=(Ka(i/2)-1)/2;return s>=e-a-2&&s<=e+a+2&&r>=(t?n:n-o)-2&&r<=(t?n+o:n)+2?!0:(()=>{if(s<e-o-3||s>e+o+3||r<(t?n-o-3:n)||r>(t?n:n+o+3))return!1;const u=Math.abs(s-e);return Math.abs(r-n)+3>=u/2})()}class Jy{constructor(){this.jt=null,this.$n=new ds,this.F=-1,this.W="",this.jv="",this.vS="normal"}ht(e){this.jt=e}qn(e,n,i){this.F===e&&this.W===n||(this.F=e,this.W=n,this.jv=cs(e,n),this.$n.On()),this.vS=i}Qn(e,n){if(this.jt===null||this.jt.lt===null)return null;for(let i=this.jt.lt.from;i<this.jt.lt.to;i++){const s=this.jt.ot[i];if(s&&Xy(s,e,n))return{zOrder:"normal",externalId:s.te??""}}return null}draw(e){this.vS!=="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}drawBackground(e){this.vS==="aboveSeries"&&e.useBitmapCoordinateSpace(n=>{this.et(n)})}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.jt!==null&&this.jt.lt!==null){e.textBaseline="middle",e.font=this.jv;for(let s=this.jt.lt.from;s<this.jt.lt.to;s++){const r=this.jt.ot[s];r.ri!==void 0&&(r.ri.ss=this.$n.Ii(e,r.ri.mS),r.ri.$t=this.F,r.ri._t=r._t-r.ri.ss/2),Gy(r,e,n,i)}}}}function Gy(t,e,n,i){e.fillStyle=t.R,t.ri!==void 0&&function(s,r,o,a,u,h){s.save(),s.scale(u,h),s.fillText(r,o,a),s.restore()}(e,t.ri.mS,t.ri._t,t.ri.ut,n,i),function(s,r,o){if(s.yh!==0){switch(s.wS){case"arrowDown":return void lc(!1,r,o,s.yh);case"arrowUp":return void lc(!0,r,o,s.yh);case"circle":return void function(a,u,h){const c=(fi("circle",h)-1)/2;a.beginPath(),a.arc(u._t,u.ut,c*u.pS,0,2*Math.PI,!1),a.fill()}(r,o,s.yh);case"square":return void function(a,u,h){const c=fi("square",h),d=(c-1)*u.pS/2,f=u._t-d,m=u.ut-d;a.fillRect(f,m,c*u.pS,c*u.pS)}(r,o,s.yh)}s.wS}}(t,e,function(s,r,o){const a=Math.max(1,Math.floor(r))%2/2;return{_t:Math.round(s._t*r)+a,ut:s.ut*o,pS:r}}(t,n,i))}function Xy(t,e,n){return!(t.ri===void 0||!function(i,s,r,o,a,u){const h=o/2;return a>=i&&a<=i+r&&u>=s-h&&u<=s+h}(t.ri._t,t.ri.ut,t.ri.ss,t.ri.$t,e,n))||function(i,s,r){if(i.yh===0)return!1;switch(i.wS){case"arrowDown":return oc(!0,i._t,i.ut,i.yh,s,r);case"arrowUp":return oc(!1,i._t,i.ut,i.yh,s,r);case"circle":return function(o,a,u,h,c){const d=2+fi("circle",u)/2,f=o-h,m=a-c;return Math.sqrt(f*f+m*m)<=d}(i._t,i.ut,i.yh,s,r);case"square":return function(o,a,u,h,c){const d=fi("square",u),f=(d-1)/2,m=o-f,y=a-f;return h>=m&&h<=m+d&&c>=y&&c<=y+d}(i._t,i.ut,i.yh,s,r)}}(t,e,n)}function ac(t){return t==="atPriceTop"||t==="atPriceBottom"||t==="atPriceMiddle"}function qy(t,e,n,i,s,r,o,a){const u=function(y,x,M){if(ac(x.position)&&x.price!==void 0)return x.price;if("value"in(g=y)&&typeof g.value=="number")return y.value;var g;if(function(p){return"open"in p&&"high"in p&&"low"in p&&"close"in p}(y)){if(x.position==="inBar")return y.close;if(x.position==="aboveBar")return M?y.low:y.high;if(x.position==="belowBar")return M?y.high:y.low}}(n,e,o.priceScale().options().invertScale);if(u===void 0)return;const h=ac(e.position),c=a.timeScale(),d=kn(e.size)?Math.max(e.size,0):1,f=Yf(c.options().barSpacing)*d,m=f/2;switch(t.yh=f,e.position){case"inBar":case"atPriceMiddle":return t.ut=z(o.priceToCoordinate(u)),void(t.ri!==void 0&&(t.ri.ut=t.ut+m+r+.6*s));case"aboveBar":case"atPriceTop":{const y=h?0:i.gS;return t.ut=z(o.priceToCoordinate(u))-m-y,t.ri!==void 0&&(t.ri.ut=t.ut-m-.6*s,i.gS+=1.2*s),void(h||(i.gS+=f+r))}case"belowBar":case"atPriceBottom":{const y=h?0:i.MS;return t.ut=z(o.priceToCoordinate(u))+m+y,t.ri!==void 0&&(t.ri.ut=t.ut+m+r+.6*s,i.MS+=1.2*s),void(h||(i.MS+=f+r))}}}class Zy{constructor(e,n,i){this.bS=[],this.xt=!0,this.SS=!0,this.Xt=new Jy,this.ye=e,this.Lv=n,this.jt={ot:[],lt:null},this.Ps=i}renderer(){if(!this.ye.options().visible)return null;this.xt&&this.xS();const e=this.Lv.options().layout;return this.Xt.qn(e.fontSize,e.fontFamily,this.Ps.zOrder),this.Xt.ht(this.jt),this.Xt}CS(e){this.bS=e,this.kt("data")}kt(e){this.xt=!0,e==="data"&&(this.SS=!0)}yS(e){this.xt=!0,this.Ps=e}zOrder(){return this.Ps.zOrder==="aboveSeries"?"top":this.Ps.zOrder}xS(){const e=this.Lv.timeScale(),n=this.bS;this.SS&&(this.jt.ot=n.map(h=>({wt:h.time,_t:0,ut:0,yh:0,wS:h.shape,R:h.color,te:h.id,kS:h.kS,ri:void 0})),this.SS=!1);const i=this.Lv.options().layout;this.jt.lt=null;const s=e.getVisibleLogicalRange();if(s===null)return;const r=new ni(Math.floor(s.from),Math.ceil(s.to));if(this.ye.data()[0]===null||this.jt.ot.length===0)return;let o=NaN;const a=Qf(e.options().barSpacing),u={gS:a,MS:a};this.jt.lt=Vf(this.jt.ot,r,!0);for(let h=this.jt.lt.from;h<this.jt.lt.to;h++){const c=n[h];c.time!==o&&(u.gS=a,u.MS=a,o=c.time);const d=this.jt.ot[h];d._t=z(e.logicalToCoordinate(c.time)),c.text!==void 0&&c.text.length>0&&(d.ri={mS:c.text,_t:0,ut:0,ss:0,$t:0});const f=this.ye.dataByIndex(c.time,0);f!==null&&qy(d,c,f,u,i.fontSize,a,this.ye,this.Lv)}this.xt=!1}}function uc(t){return{...Qy,...t}}class e0{constructor(e){this.$h=null,this.bS=[],this.PS=[],this.TS=null,this.ye=null,this.Lv=null,this.RS=!0,this.DS=null,this.IS=null,this.VS=null,this.BS=!0,this.Ps=uc(e)}attached(e){this.ES(),this.Lv=e.chart,this.ye=e.series,this.$h=new Zy(this.ye,z(this.Lv),this.Ps),this.dS=e.requestUpdate,this.ye.subscribeDataChanged(n=>this.IM(n)),this.BS=!0,this.Jb()}Jb(){this.dS&&this.dS()}detached(){this.ye&&this.TS&&this.ye.unsubscribeDataChanged(this.TS),this.Lv=null,this.ye=null,this.$h=null,this.TS=null}CS(e){this.BS=!0,this.bS=e,this.ES(),this.RS=!0,this.IS=null,this.Jb()}AS(){return this.bS}paneViews(){return this.$h?[this.$h]:[]}updateAllViews(){this.LS()}hitTest(e,n){var i;return this.$h?((i=this.$h.renderer())==null?void 0:i.Qn(e,n))??null:null}autoscaleInfo(e,n){if(this.Ps.autoScale&&this.$h){const i=this.zS();if(i)return{priceRange:null,margins:i}}return null}cr(e){this.Ps=uc({...this.Ps,...e}),this.Jb&&this.Jb()}zS(){const e=z(this.Lv).timeScale().options().barSpacing;if(this.RS||e!==this.VS){if(this.VS=e,this.bS.length>0){const n=Qf(e),i=1.5*Yf(e)+2*n,s=this.OS();this.DS={above:rc(i,s.aboveBar,s.inBar),below:rc(i,s.belowBar,s.inBar)}}else this.DS=null;this.RS=!1}return this.DS}OS(){return this.IS===null&&(this.IS=this.bS.reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1,atPriceTop:!1,atPriceBottom:!1,atPriceMiddle:!1})),this.IS}ES(){var s;if(!this.BS||!this.Lv||!this.ye)return;const e=this.Lv.timeScale(),n=(s=this.ye)==null?void 0:s.data();if(e.getVisibleLogicalRange()==null||!this.ye||n.length===0)return void(this.PS=[]);const i=e.timeToIndex(z(n[0].time),!0);this.PS=this.bS.map((r,o)=>{const a=e.timeToIndex(r.time,!0),u=a<i?1:-1,h=z(this.ye).dataByIndex(a,u),c={time:e.timeToIndex(z(h).time,!1),position:r.position,shape:r.shape,color:r.color,id:r.id,kS:o,text:r.text,size:r.size,price:r.price,Gr:r.time};if(r.position==="atPriceTop"||r.position==="atPriceBottom"||r.position==="atPriceMiddle"){if(r.price===void 0)throw new Error(`Price is required for position ${r.position}`);return{...c,position:r.position,price:r.price}}return{...c,position:r.position,price:r.price}}),this.BS=!1}LS(e){this.$h&&(this.ES(),this.$h.CS(this.PS),this.$h.yS(this.Ps),this.$h.kt(e))}IM(e){this.BS=!0,this.Jb()}}class t0 extends Yy{constructor(e,n,i){super(e,n),i&&this.setMarkers(i)}setMarkers(e){this.Zh.CS(e)}markers(){return this.Zh.AS()}}function n0(t,e,n){return new t0(t,new e0({}))}({...Mf});const Z="/api";async function re(t,e){const n=await fetch(t,e);if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return n.json()}async function i0(){return re(`${Z}/profiles`)}async function Jf(t){return re(`${Z}/profiles/${encodeURIComponent(t)}`)}async function qa(t,e){await re(`${Z}/profiles/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_data:e})})}async function s0(t){return re(`${Z}/profiles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})})}async function r0(t){return re(`${Z}/profiles?path=${encodeURIComponent(t)}`,{method:"DELETE"})}async function l0(t){return re(`${Z}/auth/check?profile_path=${encodeURIComponent(t)}`)}async function o0(t,e){return re(`${Z}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function Go(t,e,n){return re(`${Z}/auth/set-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,current_password:e,new_password:n})})}async function a0(t,e){return re(`${Z}/auth/remove-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_path:t,password:e})})}async function u0(){return re(`${Z}/presets`)}async function h0(t,e){return re(`${Z}/presets/${t}/preview?profile_path=${encodeURIComponent(e)}`)}async function c0(t,e,n){const i={preset_id:t};return n&&Object.keys(n).length>0&&(i.options=n),re(`${Z}/presets/${t}/apply?profile_path=${encodeURIComponent(e)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})}async function d0(t){return re(`${Z}/runtime/${t}`)}async function hc(t,e,n){await re(`${Z}/runtime/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:e,kill_switch:n})})}async function f0(t,e){return re(`${Z}/loop/${t}/start?profile_path=${encodeURIComponent(e)}`,{method:"POST"})}async function p0(t){return re(`${Z}/loop/${t}/stop`,{method:"POST"})}async function m0(t,e=100){return re(`${Z}/loop/${t}/log?lines=${e}`)}async function Gf(t,e=50,n){const i=new URLSearchParams({limit:String(e)});n&&i.set("profile_path",n);const s=`${Z}/data/${t}/trades?${i}`,r=await re(s);return r!=null&&typeof r=="object"&&"trades"in r&&Array.isArray(r.trades)?{trades:r.trades,display_currency:r.display_currency}:{trades:Array.isArray(r)?r:[],display_currency:void 0}}async function g0(t,e=50){return re(`${Z}/data/${t}/executions?limit=${e}`)}async function v0(t){return re(`${Z}/data/${t}/rejection-breakdown`)}async function y0(t,e){const n=e?`${Z}/data/${t}/stats?profile_path=${encodeURIComponent(e)}`:`${Z}/data/${t}/stats`;return re(n)}async function x0(t,e){const n=e?`${Z}/data/${t}/stats-by-preset?profile_path=${encodeURIComponent(e)}`:`${Z}/data/${t}/stats-by-preset`;return re(n)}async function w0(t,e){const n=e?`${Z}/data/${t}/mt5-report?profile_path=${encodeURIComponent(e)}`:`${Z}/data/${t}/mt5-report`,i=await fetch(n);if(!i.ok)return null;const s=await i.json();return(s==null?void 0:s.source)==="mt5"?s:null}async function Xf(t,e,n){return re(`${Z}/trades/${t}/${e}/close?profile_path=${encodeURIComponent(n)}`,{method:"POST"})}async function _0(t,e,n=!0){const i=new URLSearchParams({profile_path:e});return n&&i.set("force_profit_refresh","true"),re(`${Z}/data/${t}/sync-trades?${i}`,{method:"POST"})}async function S0(t,e){return re(`${Z}/data/${t}/technical-analysis?profile_path=${encodeURIComponent(e)}`)}const j0=()=>{try{const t=sessionStorage.getItem("unlockedProfiles");return t?new Set(JSON.parse(t)):new Set}catch{return new Set}},Gl=t=>{sessionStorage.setItem("unlockedProfiles",JSON.stringify([...t]))};function b0(){const[t,e]=R.useState("run"),[n,i]=R.useState([]),[s,r]=R.useState(null),[o,a]=R.useState(null),[u,h]=R.useState(!1),[c,d]=R.useState(""),[f,m]=R.useState(null),[y,x]=R.useState(!1),[M,g]=R.useState(!1),[p,v]=R.useState(""),[b,P]=R.useState(""),[E,k]=R.useState(null),[L,W]=R.useState(!1),[O,D]=R.useState({}),[H,J]=R.useState(j0),[G,N]=R.useState(""),[S,C]=R.useState(null),[w,_]=R.useState(!1),I=async()=>{try{const F=await i0();i(F);const ee={};await Promise.all(F.map(async me=>{try{const{has_password:Ft}=await l0(me.path);ee[me.path]=Ft}catch{ee[me.path]=!1}})),D(ee),r(me=>F.length===0?null:me&&F.some(Ft=>Ft.path===me.path)?me:F[0])}catch(F){a(F.message)}};R.useEffect(()=>{I()},[]);const U=s&&O[s.path]&&!H.has(s.path),V=async()=>{if(s){C(null),_(!0);try{const{success:F}=await o0(s.path,G);if(F){const ee=new Set(H);ee.add(s.path),J(ee),Gl(ee),N("")}else C("Incorrect password")}catch(F){C(F.message)}finally{_(!1)}}},pe=()=>{if(!s)return;const F=new Set(H);F.delete(s.path),J(F),Gl(F),N(""),C(null)},oe=async()=>{const F=c.trim();if(!F){m("Enter a name");return}if(M){if(!p||p.length<4){m("Password must be at least 4 characters");return}if(p!==b){m("Passwords do not match");return}}m(null),x(!0);try{const ee=await s0(F);if(M&&p){await Go(ee.path,null,p);const me=new Set(H);me.add(ee.path),J(me),Gl(me)}await I(),r(ee),d(""),v(""),P(""),g(!1),h(!1)}catch(ee){m(ee.message)}finally{x(!1)}},we=async()=>{if(E){W(!0);try{await r0(E.path),I(),k(null)}catch(F){a(F.message)}finally{W(!1)}}};return l.jsxs("div",{className:"app",children:[l.jsxs("aside",{className:"sidebar",children:[l.jsx("h1",{children:"USDJPY Assistant"}),l.jsx("p",{className:"subtitle",children:"Trading Bot Dashboard"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Account"}),l.jsx("select",{value:(s==null?void 0:s.path)||"",onChange:F=>{const ee=n.find(me=>me.path===F.target.value);r(ee||null),N(""),C(null)},children:n.map(F=>l.jsxs("option",{value:F.path,children:[O[F.path]?" ":"",F.name]},F.path))}),l.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{h(!u),m(null),d(""),v(""),P(""),g(!1)},children:"Add account"}),l.jsx("button",{type:"button",className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>s&&k(s),disabled:!s||n.length===0,children:"Remove account"}),s&&O[s.path]&&H.has(s.path)&&l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:pe,children:"Lock"})]})]}),u&&l.jsxs("div",{className:"card",style:{marginTop:12,padding:12},children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"New account name"}),l.jsx("input",{type:"text",value:c,onChange:F=>d(F.target.value),placeholder:"e.g. uncle_demo"})]}),l.jsx("div",{className:"form-group",style:{marginBottom:8},children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:M,onChange:F=>g(F.target.checked),style:{width:"auto"}}),"Set password (recommended)"]})}),M&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:p,onChange:F=>v(F.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:8},children:[l.jsx("label",{children:"Confirm password"}),l.jsx("input",{type:"password",value:b,onChange:F=>P(F.target.value),placeholder:"Confirm password"})]}),l.jsx("p",{style:{fontSize:"0.7rem",color:"var(--warning)",marginBottom:8,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."})]}),f&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.8rem",marginBottom:8},children:f}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-primary",style:{fontSize:"0.8rem"},onClick:oe,disabled:y,children:y?"Creating":"Create"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.8rem"},onClick:()=>{h(!1),m(null),d(""),v(""),P(""),g(!1)},disabled:y,children:"Cancel"})]})]}),E&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsx("h3",{className:"card-title",children:"Remove account"}),l.jsxs("p",{style:{marginBottom:16},children:["Remove ",l.jsx("strong",{children:E.name}),"? This will delete the profile file. Logs and trade history for this account are kept."]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{type:"button",className:"btn btn-danger",onClick:we,disabled:L,children:L?"Removing":"Remove"}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(null),disabled:L,children:"Cancel"})]})]})}),l.jsxs("nav",{style:{marginTop:24},children:[l.jsx("button",{className:`nav-item ${t==="run"?"active":""}`,onClick:()=>e("run"),children:"Run / Status"}),l.jsx("button",{className:`nav-item ${t==="analysis"?"active":""}`,onClick:()=>e("analysis"),children:"Analysis"}),l.jsx("button",{className:`nav-item ${t==="presets"?"active":""}`,onClick:()=>e("presets"),children:"Presets"}),l.jsx("button",{className:`nav-item ${t==="profile"?"active":""}`,onClick:()=>e("profile"),children:"Profile Editor"}),l.jsx("button",{className:`nav-item ${t==="logs"?"active":""}`,onClick:()=>e("logs"),children:"Logs & Stats"}),l.jsx("button",{className:`nav-item ${t==="guide"?"active":""}`,onClick:()=>e("guide"),children:"Help / Guide"})]})]}),l.jsxs("main",{className:"main-content",children:[o&&l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",o]}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>a(null),children:"Dismiss"})]}),s?U?l.jsxs("div",{className:"card",style:{maxWidth:400,margin:"40px auto",textAlign:"center"},children:[l.jsx("h2",{style:{marginBottom:16},children:"Profile Locked"}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:[l.jsx("strong",{children:s.name})," is password-protected. Enter your password to continue."]}),l.jsxs("div",{className:"form-group",style:{marginBottom:16,textAlign:"left"},children:[l.jsx("label",{children:"Password"}),l.jsx("input",{type:"password",value:G,onChange:F=>N(F.target.value),onKeyDown:F=>F.key==="Enter"&&V(),placeholder:"Enter password",autoFocus:!0})]}),S&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:S}),l.jsx("button",{className:"btn btn-primary",onClick:V,disabled:w||!G,style:{width:"100%",marginBottom:16},children:w?"Unlocking...":"Unlock"}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"There is no forgot-password option. If you've lost your password, contact the administrator."})]}):l.jsxs(l.Fragment,{children:[t==="run"&&l.jsx(k0,{profile:s}),t==="analysis"&&l.jsx(M0,{profile:s}),t==="presets"&&l.jsx(E0,{profile:s}),t==="profile"&&l.jsx(P0,{profile:s,authStatus:O,onAuthChange:I}),t==="logs"&&l.jsx(N0,{profile:s}),t==="guide"&&l.jsx(z0,{})]}):l.jsx("div",{className:"card",children:l.jsxs("p",{children:["No accounts yet. Use ",l.jsx("strong",{children:"Add account"})," in the sidebar to create one, or add a profile JSON in the profiles/ folder."]})})]})]})}function k0({profile:t}){const[e,n]=R.useState(null),[i,s]=R.useState(""),[r,o]=R.useState(!1),a=()=>{d0(t.name).then(n).catch(console.error),m0(t.name,50).then(f=>s(f.content)).catch(console.error)};R.useEffect(()=>{a();const f=setInterval(a,3e3);return()=>clearInterval(f)},[t.name]);const u=async f=>{e&&(await hc(t.name,f,e.kill_switch),a())},h=async f=>{e&&(await hc(t.name,e.mode,f),a())},c=async()=>{o(!0);try{await f0(t.name,t.path),a()}finally{o(!1)}},d=async()=>{o(!0);try{await p0(t.name),a()}finally{o(!1)}};return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Run / Status"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Loop Control"}),l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("span",{children:"Status:"}),e!=null&&e.loop_running?l.jsxs("span",{className:"status status-running",children:[l.jsx("span",{className:"status-dot"}),"Running"]}):l.jsxs("span",{className:"status status-stopped",children:[l.jsx("span",{className:"status-dot"}),"Stopped"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-success",onClick:c,disabled:r||(e==null?void 0:e.loop_running),children:"Start Loop"}),l.jsx("button",{className:"btn btn-danger",onClick:d,disabled:r||!(e!=null&&e.loop_running),children:"Stop Loop"})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Runtime Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Mode"}),l.jsxs("select",{value:(e==null?void 0:e.mode)||"DISARMED",onChange:f=>u(f.target.value),children:[l.jsx("option",{value:"DISARMED",children:"DISARMED"}),l.jsx("option",{value:"ARMED_MANUAL_CONFIRM",children:"ARMED_MANUAL_CONFIRM"}),l.jsx("option",{value:"ARMED_AUTO_DEMO",children:"ARMED_AUTO_DEMO"})]})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer"},children:[l.jsx("input",{type:"checkbox",checked:(e==null?void 0:e.kill_switch)||!1,onChange:f=>h(f.target.checked),style:{width:"auto"}}),"Kill Switch (disable all execution)"]})})]})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Loop Log (last 50 lines)"}),l.jsx("div",{className:"log-viewer",children:i||"(no log yet)"})]})]})}function cc({ohlc:t,trades:e,emaFast:n,emaSlow:i,emaStack:s,height:r=300,onCloseTrade:o}){const a=R.useRef(null),u=R.useRef(null),h=R.useRef(null);if(R.useEffect(()=>{if(!a.current||t.length===0)return;const d=Iy(a.current,{width:a.current.clientWidth,height:r,layout:{background:{color:"#1a1a2e"},textColor:"#d1d5db"},grid:{vertLines:{color:"#2d2d44"},horzLines:{color:"#2d2d44"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#2d2d44"},timeScale:{borderColor:"#2d2d44",timeVisible:!0,secondsVisible:!1}});u.current=d;const f=d.addSeries(Ky,{upColor:"#10b981",downColor:"#ef4444",borderUpColor:"#10b981",borderDownColor:"#ef4444",wickUpColor:"#10b981",wickDownColor:"#ef4444"});h.current=f;const m=t.map(p=>({time:p.time,open:p.open,high:p.high,low:p.low,close:p.close}));f.setData(m);const y={lastValueVisible:!1,priceLineVisible:!1},x={ema8:"#f59e0b",ema13:"#3b82f6",ema21:"#8b5cf6",ema34:"#06b6d4",ema50:"#10b981",ema89:"#6366f1",ema200:"#a855f7"};n&&n.length>0&&d.addSeries(Jl,{color:"#3b82f6",lineWidth:2,title:"EMA Fast",...y}).setData(n.map(v=>({time:v.time,value:v.value}))),i&&i.length>0&&d.addSeries(Jl,{color:"#10b981",lineWidth:2,title:"SMA Slow",...y}).setData(i.map(v=>({time:v.time,value:v.value}))),s&&Object.entries(s).forEach(([p,v])=>{if(v&&v.length>0){const b=x[p]||"#94a3b8";d.addSeries(Jl,{color:b,lineWidth:1,title:p.toUpperCase(),...y}).setData(v.map(E=>({time:E.time,value:E.value})))}});const M=[];e.forEach(p=>{const v=p.side.toLowerCase()==="buy",E=v?"#3b82f6":"#ef4444";p.entry_time!=null&&M.push({time:p.entry_time,position:v?"belowBar":"aboveBar",color:E,shape:v?"arrowUp":"arrowDown",text:""}),p.exit_time!=null&&M.push({time:p.exit_time,position:v?"aboveBar":"belowBar",color:E,shape:"circle",text:""})}),M.length>0&&n0(f).setMarkers(M),d.timeScale().fitContent();const g=()=>{a.current&&u.current&&u.current.applyOptions({width:a.current.clientWidth})};return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),d.remove()}},[t,e,n,i,s,r]),t.length===0)return l.jsx("div",{style:{height:r,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)",borderRadius:6,color:"var(--text-secondary)"},children:"No chart data available"});const c=e.filter(d=>!d.exit_time&&!d.exit_price);return l.jsxs("div",{style:{position:"relative",width:"100%",height:r},children:[l.jsx("div",{ref:a,style:{width:"100%",height:r,borderRadius:6,overflow:"hidden"}}),o&&c.length>0&&l.jsxs("div",{style:{position:"absolute",top:8,right:8,background:"rgba(26, 26, 46, 0.9)",border:"1px solid var(--border)",borderRadius:6,padding:8,fontSize:"0.75rem",maxWidth:180,zIndex:10},children:[l.jsx("div",{style:{fontWeight:600,marginBottom:6,color:"var(--text-secondary)"},children:"Active Trades"}),c.map(d=>l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,padding:"4px 0",borderTop:"1px solid var(--border)"},children:[l.jsxs("span",{style:{color:d.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:500},children:[d.side.toUpperCase()," @ ",d.entry_price.toFixed(3)]}),l.jsx("button",{onClick:()=>o(d),style:{background:"var(--danger)",border:"none",borderRadius:3,color:"white",padding:"2px 6px",fontSize:"0.65rem",cursor:"pointer"},children:"Close"})]},d.trade_id))]})]})}function M0({profile:t}){const[e,n]=R.useState(null),[i,s]=R.useState(!0),[r,o]=R.useState(null),[a,u]=R.useState(null),[h,c]=R.useState(null),[d,f]=R.useState(null),[m,y]=R.useState([]),[x,M]=R.useState(null),[g,p]=R.useState(null),[v,b]=R.useState(!1),P=async()=>{try{const[N,S]=await Promise.all([S0(t.name,t.path),Gf(t.name,50).then(w=>w.trades).catch(()=>[])]);n(N);const C=S.filter(w=>w.trade_id&&w.entry_price).map(w=>{const _=w.timestamp_utc,I=w.exit_timestamp_utc,U=_?Math.floor(new Date(_).getTime()/1e3):void 0,V=I?Math.floor(new Date(I).getTime()/1e3):void 0;return{trade_id:String(w.trade_id),entry_price:Number(w.entry_price),stop_price:w.stop_price!=null?Number(w.stop_price):null,target_price:w.target_price!=null?Number(w.target_price):null,side:String(w.side||"buy"),entry_time:U,exit_time:V,exit_price:w.exit_price!=null?Number(w.exit_price):void 0}});y(C),o(null),f(new Date)}catch(N){o(N.message)}finally{s(!1)}};R.useEffect(()=>{s(!0),P();const N=setInterval(P,3e4);return()=>clearInterval(N)},[t.name,t.path]),R.useEffect(()=>{const N=S=>{S.key==="Escape"&&x&&M(null)};return window.addEventListener("keydown",N),()=>window.removeEventListener("keydown",N)},[x]);const E=async N=>{b(!0);try{await Xf(t.name,N.trade_id,t.path),p(null),P()}catch(S){alert(`Failed to close trade: ${S.message}`)}finally{b(!1)}},k=N=>{u(a===N?null:N)},L=N=>{const S={bull:{bg:"rgba(16, 185, 129, 0.2)",color:"var(--success)"},bear:{bg:"rgba(239, 68, 68, 0.2)",color:"var(--danger)"},sideways:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"},unknown:{bg:"rgba(156, 163, 175, 0.2)",color:"var(--text-secondary)"}},C=S[N]||S.unknown;return l.jsx("span",{style:{padding:"4px 10px",borderRadius:4,background:C.bg,color:C.color,fontWeight:600,fontSize:"0.85rem",textTransform:"uppercase"},children:N})},W=N=>{const S={oversold:"var(--success)",overbought:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:S[N.zone]||"inherit"},children:N.zone.charAt(0).toUpperCase()+N.zone.slice(1)}),N.value!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",N.value.toFixed(1),")"]})]})},O=N=>{const S={positive:"var(--success)",negative:"var(--danger)",neutral:"var(--text-secondary)"};return l.jsx("span",{style:{color:S[N.direction]||"inherit"},children:N.direction.charAt(0).toUpperCase()+N.direction.slice(1)})},D=N=>{const S={elevated:"var(--warning)",low:"var(--accent)",normal:"var(--text-secondary)"};return l.jsxs("span",{children:[l.jsx("span",{style:{color:S[N.state]||"inherit"},children:N.state.charAt(0).toUpperCase()+N.state.slice(1)}),N.value_pips!==null&&l.jsxs("span",{style:{color:"var(--text-secondary)",marginLeft:4},children:["(",N.value_pips," pips)"]})]})},H=["H4","H1","M30","M15","M5","M3","M1"],J={H4:"4H",H1:"1H",M30:"30m",M15:"15m",M5:"5m",M3:"3m",M1:"1m"},G=N=>{const S=[];if(N.ema_stack&&Object.keys(N.ema_stack).length>0){const C=Object.keys(N.ema_stack).map(w=>w.replace(/^ema/i,"")).filter(Boolean).sort((w,_)=>parseInt(w,10)-parseInt(_,10));C.length>0&&S.push(`EMA ${C.join("/")}`)}return N.ema_fast&&N.ema_fast.length>0&&N.ema_slow&&N.ema_slow.length>0&&S.push("SMA slow"),S.length>0?S.join("  "):""};return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Technical Analysis"}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[d&&l.jsxs("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:["Updated: ",d.toLocaleTimeString()]}),l.jsx("button",{className:"btn btn-secondary",onClick:P,disabled:i,children:i?"Loading...":"Refresh"})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16,fontSize:"0.9rem"},children:"Real-time technical analysis across multiple timeframes. Auto-refreshes every 30 seconds. Click on a timeframe to expand detailed view."}),r&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--danger)"},children:l.jsxs("p",{style:{color:"var(--danger)"},children:["Error: ",r]})}),(e==null?void 0:e.current_tick)&&l.jsx("div",{className:"card mb-4",children:l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.bid.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Bid"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:e.current_tick.ask.toFixed(3)}),l.jsx("div",{className:"stat-label",children:"Ask"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsxs("div",{className:"stat-value",style:{color:e.current_tick.spread_pips>1?"var(--warning)":"var(--success)"},children:[e.current_tick.spread_pips," pips"]}),l.jsx("div",{className:"stat-label",children:"Spread"})]})]})}),e&&H.map(N=>{var w,_,I,U,V,pe,oe,we;const S=e.timeframes[N];if(!S)return null;const C=a===N;return l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{className:"flex-between",style:{marginBottom:C?16:0},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[l.jsxs("div",{children:[l.jsx("h3",{style:{margin:0,fontSize:"1.1rem",minWidth:40},children:N}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:J[N]||N})]}),L(S.regime)]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:24},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),W(S.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),O(S.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),D(S.atr)]}),l.jsx("button",{type:"button",onClick:()=>k(N),style:{background:"none",border:"none",padding:4,cursor:"pointer",color:"var(--accent)",fontSize:"0.9rem"},"aria-label":C?"Collapse chart":"Expand chart",children:C?"":""})]})]}),!C&&l.jsx("p",{style:{margin:"12px 0 0 0",color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:S.summary}),C&&l.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:16},onClick:F=>F.stopPropagation(),children:[l.jsxs("div",{style:{marginBottom:16},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",flexWrap:"wrap",gap:8,marginBottom:12},children:[l.jsxs("h4",{style:{margin:0,color:"var(--accent)",fontSize:"0.9rem"},children:[N," Chart (",J[N]||N,")"]}),G(S)&&l.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:G(S)}),m.length>0&&l.jsxs("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:["(",m.filter(F=>!F.exit_time).length," open, ",m.length," total)"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem",marginLeft:"auto"},onClick:()=>c(h===N?null:N),children:h===N?"Shrink":"Enlarge"}),l.jsx("button",{type:"button",className:"btn btn-secondary",style:{fontSize:"0.75rem"},onClick:()=>M(N),children:"Fullscreen"})]}),l.jsx(cc,{ohlc:S.ohlc||[],trades:m,emaFast:S.ema_fast,emaSlow:S.ema_slow,emaStack:S.ema_stack,height:h===N?520:280,onCloseTrade:F=>p(F)})]}),l.jsx("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:16,borderLeft:"4px solid var(--accent)"},children:l.jsx("p",{style:{margin:0,fontSize:"0.95rem"},children:S.summary})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"RSI (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((w=S.rsi.value)==null?void 0:w.toFixed(2))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Zone:"}),l.jsx("span",{style:{marginLeft:8},children:W(S.rsi)})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[S.rsi.zone==="oversold"&&"Price may be undervalued. Potential buy opportunity if trend supports.",S.rsi.zone==="overbought"&&"Price may be overextended. Consider caution with longs.",S.rsi.zone==="neutral"&&"Momentum is balanced. Follow the trend direction."]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"MACD (12,26,9)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Line:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((_=S.macd.line)==null?void 0:_.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Signal:"}),l.jsx("span",{style:{marginLeft:8},children:((I=S.macd.signal)==null?void 0:I.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Histogram:"}),l.jsx("span",{style:{marginLeft:8,color:S.macd.histogram&&S.macd.histogram>0?"var(--success)":"var(--danger)"},children:((U=S.macd.histogram)==null?void 0:U.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Direction:"}),l.jsx("span",{style:{marginLeft:8},children:O(S.macd)})]})]})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"ATR (14)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((V=S.atr.value)==null?void 0:V.toFixed(5))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Pips:"}),l.jsx("span",{style:{marginLeft:8},children:S.atr.value_pips??"-"})]})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:[S.atr.state==="elevated"&&"Volatility is high. Consider wider stops and smaller position sizes.",S.atr.state==="low"&&"Volatility is low. Smaller moves expected, watch for breakouts.",S.atr.state==="normal"&&"Volatility is within normal range."]})]}),(()=>{const F=S.bollinger;return!F||typeof F!="object"?null:l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Bollinger Bands (20, 2)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Upper:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:F.upper!=null?Number(F.upper).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Middle:"}),l.jsx("span",{style:{marginLeft:8},children:F.middle!=null?Number(F.middle).toFixed(5):"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Lower:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:F.lower!=null?Number(F.lower).toFixed(5):"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Price relative to bands indicates volatility and potential mean reversion. For display only; not used in automation."})]})})(),typeof S.vwap=="number"&&l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"VWAP"}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Value:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:Number(S.vwap).toFixed(5)})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Volume-weighted average price (uses tick volume when available). For display only; not used in automation."})]}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)",fontSize:"0.9rem"},children:"Price Levels (100-bar)"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Current:"}),l.jsx("span",{style:{marginLeft:8,fontWeight:600},children:((pe=S.price.current)==null?void 0:pe.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent High:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--success)"},children:((oe=S.price.recent_high)==null?void 0:oe.toFixed(3))??"-"})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem"},children:"Recent Low:"}),l.jsx("span",{style:{marginLeft:8,color:"var(--danger)"},children:((we=S.price.recent_low)==null?void 0:we.toFixed(3))??"-"})]})]}),l.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:S.price.current&&S.price.recent_high&&S.price.recent_low&&l.jsxs(l.Fragment,{children:["Price is ",((S.price.current-S.price.recent_low)/(S.price.recent_high-S.price.recent_low)*100).toFixed(0),"% of the way from recent low to high."]})})]})]})]})]},N)}),i&&!e&&l.jsx("div",{className:"card",children:l.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center"},children:"Loading technical analysis..."})}),x&&e&&e.timeframes[x]&&(()=>{const N=e.timeframes[x],S=typeof window<"u"?window.innerHeight-200:500;return l.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"var(--bg-primary)",zIndex:1e3,display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 20px",borderBottom:"1px solid var(--border)",background:"var(--bg-secondary)"},children:[l.jsxs("h2",{style:{margin:0,fontSize:"1.2rem"},children:[x," Chart (",J[x]||x,")"]}),l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(null),children:"Close (ESC)"})]}),l.jsx("div",{style:{flex:1,padding:16,overflow:"hidden"},children:l.jsx(cc,{ohlc:N.ohlc||[],trades:m,emaFast:N.ema_fast,emaSlow:N.ema_slow,emaStack:N.ema_stack,height:S,onCloseTrade:C=>p(C)})}),l.jsxs("div",{style:{padding:"12px 20px",borderTop:"1px solid var(--border)",background:"var(--bg-secondary)",display:"flex",flexWrap:"wrap",gap:20,alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"Regime:"}),L(N.regime)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"RSI:"}),W(N.rsi)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"MACD:"}),O(N.macd)]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.8rem",marginRight:8},children:"ATR:"}),D(N.atr)]}),l.jsx("div",{style:{flex:1,minWidth:200},children:l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem",fontStyle:"italic"},children:N.summary})})]})]})})(),g&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",zIndex:1100,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{background:"var(--bg-secondary)",borderRadius:8,padding:24,maxWidth:400,width:"90%",border:"1px solid var(--border)"},children:[l.jsx("h3",{style:{margin:"0 0 16px 0"},children:"Close Trade?"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:8},children:"Are you sure you want to close this trade?"}),l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,marginBottom:20},children:[l.jsxs("div",{style:{color:g.side.toLowerCase()==="buy"?"#3b82f6":"#ef4444",fontWeight:600,fontSize:"1rem"},children:[g.side.toUpperCase()," @ ",g.entry_price.toFixed(3)]}),g.stop_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:4},children:["SL: ",g.stop_price.toFixed(3)]}),g.target_price&&l.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:["TP: ",g.target_price.toFixed(3)]})]}),l.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"},children:[l.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(null),disabled:v,children:"Cancel"}),l.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>E(g),disabled:v,style:{background:"var(--danger)"},children:v?"Closing...":"Close Trade"})]})]})})]})}const Xl={scalper:{default:{label:"Default (5, 9, 13)",values:[5,9,13]},alt1:{label:"Ultra-fast (3, 5, 8)",values:[3,5,8]},alt2:{label:"Standard (8, 13, 21)",values:[8,13,21]}},day_trader:{default:{label:"Default (13, 21, 34)",values:[13,21,34]},alt1:{label:"Faster (8, 13, 21)",values:[8,13,21]},alt2:{label:"Slower (21, 34, 55)",values:[21,34,55]}},swing_trader:{default:{label:"Default (21, 50, 100)",values:[21,50,100]},alt1:{label:"Classic (20, 50, 200)",values:[20,50,200]},alt2:{label:"Medium (34, 89, 144)",values:[34,89,144]}}};function Re({label:t,value:e,onAdjust:n,onChange:i,step:s=1,min:r,max:o}){if(e==null)return null;const a=u=>{const h=parseFloat(u.target.value);if(!isNaN(h)&&i){let c=h;r!==void 0&&(c=Math.max(r,c)),o!==void 0&&(c=Math.min(o,c)),i(c)}};return l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 12px",background:"var(--bg-secondary)",borderRadius:6,border:"1px solid var(--border)"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:t}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("button",{onClick:()=>n(-1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"}),l.jsx("input",{type:"number",value:s<1?e.toFixed(2):e,onChange:a,step:s,min:r,max:o,style:{width:60,textAlign:"center",fontWeight:600,fontFamily:"monospace",padding:"4px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",fontSize:"0.85rem"}}),l.jsx("button",{onClick:()=>n(1),style:{width:28,height:28,borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-tertiary)",color:"var(--text-primary)",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})}function C0({profile:t,currentProfile:e,onComplete:n}){var N,S,C,w,_,I,U,V,pe,oe,we,F,ee,me,Ft,xs,ws,Bt,_s,zn,Za;const[i,s]=R.useState(1),[r,o]=R.useState({tradingStyle:null,riskTolerance:null,entryStyle:null,emaStack:"default",multipleStrategyA:null,multipleStrategyB:null}),[a,u]=R.useState(!1),[h,c]=R.useState(!1),[d,f]=R.useState(!1),[m,y]=R.useState(null),[x,M]=R.useState(null),g=r.entryStyle==="multiple"?[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Choose Strategies",description:"Pick two strategies to combine"},{num:5,title:"Review",description:"Review your configuration"},{num:6,title:"Fine-Tune",description:"Adjust individual settings"}]:[{num:1,title:"Trading Style",description:"How do you want to trade?"},{num:2,title:"Risk Tolerance",description:"How much risk per trade?"},{num:3,title:"Entry Style",description:"How should the bot enter trades?"},{num:4,title:"Review",description:"Review your configuration"},{num:5,title:"Fine-Tune",description:"Adjust individual settings"}],[p,v]=R.useState(null),b=r.entryStyle==="multiple"?6:5;R.useEffect(()=>{r.entryStyle!=="multiple"&&i>5&&s(5)},[r.entryStyle,i]);const P=()=>{switch(i){case 1:return r.tradingStyle!==null;case 2:return r.riskTolerance!==null;case 3:return r.entryStyle!==null;case 4:return r.entryStyle==="multiple"?r.multipleStrategyA!==null&&r.multipleStrategyB!==null&&r.multipleStrategyA!==r.multipleStrategyB:!0;default:return!0}},E=()=>{const j=e,K={schema_version:1,profile_name:t.name,symbol:(j==null?void 0:j.symbol)??"USDJPY",pip_size:.01,broker_type:(j==null?void 0:j.broker_type)??"mt5",oanda_token:(j==null?void 0:j.oanda_token)??null,oanda_account_id:(j==null?void 0:j.oanda_account_id)??null,oanda_environment:(j==null?void 0:j.oanda_environment)??"practice",display_currency:(j==null?void 0:j.display_currency)??"USD",deposit_amount:(j==null?void 0:j.deposit_amount)??null,leverage_ratio:(j==null?void 0:j.leverage_ratio)??null,created_utc:(j==null?void 0:j.created_utc)??new Date().toISOString().slice(0,19).replace("T"," ")+"Z",risk:{},strategy:{timeframes:{},setups:{},filters:{alignment:{enabled:!1,method:"score",weights:{H4:1,M15:1,M1:1},min_score_to_trade:-3},ema_stack_filter:{enabled:!1,timeframe:"M1",periods:[8,13,21],min_separation_pips:0},atr_filter:{enabled:!1,timeframe:"M1",atr_period:14,min_atr_pips:0,max_atr_pips:null}}},trade_management:{target:{}},execution:{policies:[],loop_poll_seconds:5,loop_poll_seconds_fast:2}},B=K.risk,$=K.strategy,X=$.timeframes,ge=$.setups,ve=K.trade_management.target,ye=K.execution,_e=(()=>{var jt;if(!r.tradingStyle)return[8,13,21];const xi=Xl[r.tradingStyle],Tn=r.emaStack||"default";return((jt=xi[Tn])==null?void 0:jt.values)||xi.default.values})();switch(r.tradingStyle){case"scalper":X.M1={ema_fast:9,sma_slow:21,ema_stack:_e},X.M15={ema_fast:9,sma_slow:21,ema_stack:_e},X.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ge.m1_cross_entry={enabled:!0,timeframe:"M1",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:3}},ve.mode="fixed_pips",ve.pips_default=8,ve.rr_default=1,ye.loop_poll_seconds=3,ye.loop_poll_seconds_fast=1;break;case"day_trader":X.M1={ema_fast:13,sma_slow:30,ema_stack:_e},X.M15={ema_fast:13,sma_slow:30,ema_stack:_e},X.H4={ema_fast:13,sma_slow:30,ema_stack:_e},ge.m15_cross_entry={enabled:!0,timeframe:"M15",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:5}},ve.mode="fixed_pips",ve.pips_default=15,ve.rr_default=1.5,ye.loop_poll_seconds=10,ye.loop_poll_seconds_fast=5;break;case"swing_trader":X.M1={ema_fast:21,sma_slow:50,ema_stack:_e},X.M15={ema_fast:21,sma_slow:50,ema_stack:_e},X.H4={ema_fast:21,sma_slow:50,ema_stack:_e},ge.h4_cross_entry={enabled:!0,timeframe:"H4",ema:_e[0],sma:_e[2],confirmation:{confirm_bars:1,require_close_on_correct_side:!0,min_distance_pips:0,max_wait_bars:2}},ve.mode="fixed_pips",ve.pips_default=30,ve.rr_default=2,ye.loop_poll_seconds=60,ye.loop_poll_seconds_fast=30;break}const Ot=(e==null?void 0:e.risk)||{},vi=Ot.max_lots??.1,yi=Ot.max_spread_pips??2,il=Ot.max_trades_per_day??10,sl=Ot.min_stop_pips,rl=typeof sl=="number"&&sl>=0?Math.max(1,Math.min(100,sl)):10;switch(r.riskTolerance){case"conservative":B.max_lots=Math.round(vi*.35*100)/100||.05,B.max_spread_pips=Math.round(yi*.25*10)/10||.5,B.min_stop_pips=rl,B.max_trades_per_day=Math.max(1,Math.round(il*.5)),B.max_open_trades=1,B.cooldown_minutes_after_loss=15,B.require_stop=!0,B.risk_per_trade_pct=.5,B.max_daily_loss_pct=2;break;case"moderate":B.max_lots=Math.round(vi*.67*100)/100||.1,B.max_spread_pips=Math.round(yi*.5*10)/10||.8,B.min_stop_pips=rl,B.max_trades_per_day=Math.max(1,Math.round(il*1)),B.max_open_trades=2,B.cooldown_minutes_after_loss=5,B.require_stop=!0,B.risk_per_trade_pct=1,B.max_daily_loss_pct=4;break;case"aggressive":B.max_lots=Math.round(vi*1*100)/100||.15,B.max_spread_pips=Math.round(yi*.6*10)/10||1.2,B.min_stop_pips=rl,B.max_trades_per_day=Math.max(1,Math.round(il*1)),B.max_open_trades=3,B.cooldown_minutes_after_loss=0,B.require_stop=!0,B.risk_per_trade_pct=2,B.max_daily_loss_pct=6;break}const Fe=[],Ss=Object.keys(ge)[0]||"m1_cross_entry",pt=r.tradingStyle==="swing_trader"?"H4":r.tradingStyle==="day_trader"?"M15":"M1",mt=ve.pips_default,gt=B.min_stop_pips;switch(r.entryStyle){case"ema_cross":Fe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:Ss});break;case"rsi_dips":Fe.push({type:"indicator_based",id:"custom_rsi_buy",enabled:!0,timeframe:pt,regime:"bull",side:"buy",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"oversold",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:mt,sl_pips:gt}),Fe.push({type:"indicator_based",id:"custom_rsi_sell",enabled:!0,timeframe:pt,regime:"bear",side:"sell",rsi_period:14,rsi_oversold:30,rsi_overbought:70,rsi_zone:"overbought",use_macd_cross:!0,macd_fast:12,macd_slow:26,macd_signal:9,tp_pips:mt,sl_pips:gt});break;case"price_levels":$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Fe.push({type:"confirmed_cross",id:"custom_confirmed_cross",enabled:!0,setup_id:Ss});break;case"bollinger_bands":Fe.push({type:"bollinger_bands",id:"custom_bb_buy",enabled:!0,timeframe:pt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:mt,sl_pips:gt}),Fe.push({type:"bollinger_bands",id:"custom_bb_sell",enabled:!0,timeframe:pt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:mt,sl_pips:gt});break;case"vwap":Fe.push({type:"vwap",id:"custom_vwap_buy",enabled:!0,timeframe:pt,trigger:"cross_above",side:"buy",tp_pips:mt,sl_pips:gt}),Fe.push({type:"vwap",id:"custom_vwap_sell",enabled:!0,timeframe:pt,trigger:"cross_below",side:"sell",tp_pips:mt,sl_pips:gt});break;case"multiple":{const xi=(Tn,jt)=>{if(Tn==="ema_cross"){Fe.push({type:"confirmed_cross",id:`${jt}_ema_cross`,enabled:!0,setup_id:Ss});return}if(Tn==="price_levels"){$.filters.alignment={enabled:!0,method:"score",weights:{H4:2,M15:1,M1:1},min_score_to_trade:1},Fe.push({type:"confirmed_cross",id:`${jt}_confirmed_cross`,enabled:!0,setup_id:Ss});return}if(Tn==="bollinger_bands"){Fe.push({type:"bollinger_bands",id:`${jt}_bb_buy`,enabled:!0,timeframe:pt,period:20,std_dev:2,trigger:"lower_band_buy",regime:"bull",side:"buy",tp_pips:mt,sl_pips:gt}),Fe.push({type:"bollinger_bands",id:`${jt}_bb_sell`,enabled:!0,timeframe:pt,period:20,std_dev:2,trigger:"upper_band_sell",regime:"bear",side:"sell",tp_pips:mt,sl_pips:gt});return}Tn==="vwap"&&(Fe.push({type:"vwap",id:`${jt}_vwap_buy`,enabled:!0,timeframe:pt,trigger:"cross_above",side:"buy",tp_pips:mt,sl_pips:gt}),Fe.push({type:"vwap",id:`${jt}_vwap_sell`,enabled:!0,timeframe:pt,trigger:"cross_below",side:"sell",tp_pips:mt,sl_pips:gt}))};r.multipleStrategyA&&xi(r.multipleStrategyA,"custom_ms_a"),r.multipleStrategyB&&xi(r.multipleStrategyB,"custom_ms_b");break}}ye.policies=Fe;const qf=r.tradingStyle==="scalper"?"Scalp":r.tradingStyle==="day_trader"?"DayT":"Swing",Zf=r.riskTolerance==="conservative"?"Cons":r.riskTolerance==="moderate"?"Mod":"Agg",ep=r.entryStyle==="ema_cross"?"EMAC":r.entryStyle==="rsi_dips"?"RSI":r.entryStyle==="price_levels"?"PL":r.entryStyle==="bollinger_bands"?"BB":r.entryStyle==="vwap"?"VWAP":"MS";return K.active_preset_name=`Custom: ${qf}/${Zf}/${ep}`,K},k=()=>{if(i<b&&s(i+1),i===3&&r.entryStyle!=="multiple"||i===4&&r.entryStyle==="multiple"){const j=E();M(j),v(JSON.parse(JSON.stringify(j)))}},L=()=>{i>1&&s(i-1)},W=async()=>{f(!0),y(null);try{const j=JSON.parse(JSON.stringify(p||x||E())),K=(e==null?void 0:e.risk)||{},B=j.risk||{};j.risk=K;const $=(X,ge)=>typeof X=="number"&&typeof ge=="number"?Math.min(X,ge):X;j.effective_risk={...B,max_lots:$(B.max_lots??.1,K.max_lots??1),max_spread_pips:$(B.max_spread_pips??2,K.max_spread_pips??5),max_trades_per_day:$(B.max_trades_per_day??10,K.max_trades_per_day??100),max_open_trades:$(B.max_open_trades??2,K.max_open_trades??10)},j.broker_type=(e==null?void 0:e.broker_type)??"mt5",j.oanda_token=(e==null?void 0:e.oanda_token)??null,j.oanda_account_id=(e==null?void 0:e.oanda_account_id)??null,j.oanda_environment=(e==null?void 0:e.oanda_environment)??"practice",j.display_currency=(e==null?void 0:e.display_currency)??"USD",j.deposit_amount=(e==null?void 0:e.deposit_amount)??null,j.leverage_ratio=(e==null?void 0:e.leverage_ratio)??null,e!=null&&e.created_utc&&(j.created_utc=e.created_utc),await qa(t.path,j),n()}catch(j){y(j.message)}finally{f(!1)}},O=()=>{x&&v(JSON.parse(JSON.stringify(x)))},D=(j,K)=>{if(!p)return;const B=JSON.parse(JSON.stringify(p));let $=B;for(let X=0;X<j.length-1;X++)$[j[X]]===void 0&&($[j[X]]={}),$=$[j[X]];$[j[j.length-1]]=K,v(B)},H=(j,K,B,$,X)=>{if(!p)return;let ge=p;for(let At=0;At<j.length-1;At++)if(ge=ge[j[At]],!ge)return;const ve=ge[j[j.length-1]];if(typeof ve!="number")return;let ye=ve+K*(X||1);B!==void 0&&(ye=Math.max(B,ye)),$!==void 0&&(ye=Math.min($,ye)),D(j,Number(ye.toFixed(4)))},J=(()=>{if(i!==5||!p||!e)return!1;const j=e.risk||{},K=j.max_lots,B=j.max_spread_pips,$=j.max_trades_per_day,X=p.risk||{},ge=X.max_lots,ve=X.max_spread_pips,ye=X.max_trades_per_day,At=K!=null&&ge!=null&&ge>K,_e=B!=null&&ve!=null&&ve>B,Ot=$!=null&&ye!=null&&ye>$;return At||_e||Ot})(),G=({selected:j,onClick:K,title:B,description:$,icon:X,details:ge})=>l.jsxs("div",{onClick:K,style:{padding:20,borderRadius:8,border:`2px solid ${j?"var(--accent)":"var(--border)"}`,background:j?"rgba(59, 130, 246, 0.1)":"var(--bg-secondary)",cursor:"pointer",transition:"all 0.2s ease"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:8},children:[l.jsx("span",{style:{fontSize:"1.5rem"},children:X}),l.jsx("h4",{style:{margin:0,color:j?"var(--accent)":"var(--text-primary)"},children:B})]}),l.jsx("p",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)",fontSize:"0.9rem"},children:$}),ge&&l.jsx("ul",{style:{margin:0,paddingLeft:20,fontSize:"0.8rem",color:"var(--text-secondary)"},children:ge.map((ve,ye)=>l.jsx("li",{children:ve},ye))})]});return l.jsxs("div",{children:[l.jsx("div",{className:"card mb-4",children:l.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:16},children:g.map(j=>l.jsxs("div",{style:{flex:1,textAlign:"center",opacity:j.num<=i?1:.5},children:[l.jsx("div",{style:{width:36,height:36,borderRadius:"50%",background:j.num<i?"var(--success)":j.num===i?"var(--accent)":"var(--bg-tertiary)",color:j.num<=i?"white":"var(--text-secondary)",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:600,marginBottom:8},children:j.num<i?"":j.num}),l.jsx("div",{style:{fontSize:"0.85rem",fontWeight:j.num===i?600:400},children:j.title})]},j.num))})}),i===1&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 1: Trading Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How do you want to trade? This determines the timeframe focus and trade duration."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.tradingStyle==="scalper",onClick:()=>o({...r,tradingStyle:"scalper"}),title:"Scalper",icon:"",description:"Quick trades (1-5 minutes), small profits, many opportunities",details:["Focuses on M1 (1-minute) chart","8 pip profit targets","Fast polling (1-3 seconds)","Best for active monitoring"]}),l.jsx(G,{selected:r.tradingStyle==="day_trader",onClick:()=>o({...r,tradingStyle:"day_trader"}),title:"Day Trader",icon:"",description:"Trades within the day (5-60 minutes), moderate targets",details:["Focuses on M15 (15-minute) chart","15 pip profit targets","Moderate polling (5-10 seconds)","Good balance of activity and patience"]}),l.jsx(G,{selected:r.tradingStyle==="swing_trader",onClick:()=>o({...r,tradingStyle:"swing_trader"}),title:"Swing Trader",icon:"",description:"Hold for hours or days, larger moves, fewer trades",details:["Focuses on H4 (4-hour) chart","30+ pip profit targets","Slow polling (30-60 seconds)","Minimal monitoring needed"]})]}),r.tradingStyle&&l.jsxs("div",{style:{marginTop:20},children:[l.jsxs("button",{type:"button",onClick:()=>c(!h),style:{background:"transparent",border:"none",color:"var(--accent)",cursor:"pointer",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:8,padding:0},children:[l.jsx("span",{style:{transform:h?"rotate(90deg)":"rotate(0)",transition:"transform 0.2s"},children:""}),"Advanced: EMA Stack (optional)"]}),h&&l.jsxs("div",{style:{marginTop:12,padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"3px solid var(--accent)"},children:[l.jsx("p",{style:{margin:"0 0 12px 0",fontSize:"0.85rem",color:"var(--text-secondary)"},children:"The EMA Stack defines the moving average periods used for trend detection. Leave as default unless you have a specific preference."}),l.jsxs("div",{className:"form-group",style:{marginBottom:0},children:[l.jsxs("label",{children:["EMA Stack for ",r.tradingStyle==="scalper"?"Scalping":r.tradingStyle==="day_trader"?"Day Trading":"Swing Trading"]}),l.jsx("select",{value:r.emaStack||"default",onChange:j=>o({...r,emaStack:j.target.value}),children:r.tradingStyle&&Object.entries(Xl[r.tradingStyle]).map(([j,K])=>l.jsx("option",{value:j,children:K.label},j))})]}),l.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Current selection: ",r.tradingStyle&&r.emaStack&&((N=Xl[r.tradingStyle][r.emaStack])==null?void 0:N.values.join(", "))," EMA periods"]})]})]})]}),i===2&&(()=>{const j=(e==null?void 0:e.risk)||{},K=j.max_lots??.1,B=j.max_spread_pips??2,$=j.max_trades_per_day??10,X=Math.round(K*.35*100)/100||.05,ge=Math.max(1,Math.round($*.5)),ve=Math.round(B*.25*10)/10||.5,ye=Math.round(K*.67*100)/100||.1,At=Math.max(1,Math.round($*1)),_e=Math.round(B*.5*10)/10||.8,Ot=Math.round(K*1*100)/100||.15,vi=Math.max(1,Math.round($*1)),yi=Math.round(B*.6*10)/10||1.2;return l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 2: Risk Tolerance"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How much risk are you comfortable with per trade? Values scale from your Profile Editor limits."}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.riskTolerance==="conservative",onClick:()=>o({...r,riskTolerance:"conservative"}),title:"Conservative",icon:"",description:"Lower risk, smaller positions, strict filters",details:[`${X} lots per trade`,`Max ${ge} trades per day`,`${ve} pip max spread`,"15 min cooldown after loss","2% max daily loss"]}),l.jsx(G,{selected:r.riskTolerance==="moderate",onClick:()=>o({...r,riskTolerance:"moderate"}),title:"Moderate",icon:"",description:"Balanced risk and reward",details:[`${ye} lots per trade`,`Max ${At} trades per day`,`${_e} pip max spread`,"5 min cooldown after loss","4% max daily loss"]}),l.jsx(G,{selected:r.riskTolerance==="aggressive",onClick:()=>o({...r,riskTolerance:"aggressive"}),title:"Aggressive",icon:"",description:"Higher risk for potentially higher returns",details:[`${Ot} lots per trade`,`Max ${vi} trades per day`,`${yi} pip max spread`,"No cooldown after loss","6% max daily loss"]})]})]})})(),i===3&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 3: Entry Style"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"How should the bot decide when to enter a trade?"}),l.jsxs("div",{style:{display:"grid",gap:16},children:[l.jsx(G,{selected:r.entryStyle==="ema_cross",onClick:()=>o({...r,entryStyle:"ema_cross",multipleStrategyA:null,multipleStrategyB:null}),title:"EMA Cross",icon:"",description:"Buy or sell based on EMA/SMA cross direction",details:["BUY: EMA crosses above SMA","SELL: EMA crosses below SMA","Waits for confirmation bar","Works in both trends"]}),l.jsx(G,{selected:r.entryStyle==="rsi_dips",onClick:()=>o({...r,entryStyle:"rsi_dips",multipleStrategyA:null,multipleStrategyB:null}),title:"RSI Dips",icon:"",description:"Buy oversold dips, sell overbought rallies",details:["BUY: RSI < 30 in uptrend","SELL: RSI > 70 in downtrend","Mean-reversion style","MACD confirmation included"]}),l.jsx(G,{selected:r.entryStyle==="price_levels",onClick:()=>o({...r,entryStyle:"price_levels",multipleStrategyA:null,multipleStrategyB:null}),title:"Price Levels",icon:"",description:"EMA cross with multi-timeframe alignment filter",details:["Bi-directional EMA cross","Requires H4/M15/M1 agreement","Higher quality signals","Fewer but better trades"]}),l.jsx(G,{selected:r.entryStyle==="bollinger_bands",onClick:()=>o({...r,entryStyle:"bollinger_bands",multipleStrategyA:null,multipleStrategyB:null}),title:"Bollinger Bands",icon:"",description:"Mean reversion at lower/upper band",details:["BUY: price at/below lower band in uptrend","SELL: price at/above upper band in downtrend","M15, 20-period, 2 std dev","Clear levels for entry"]}),l.jsx(G,{selected:r.entryStyle==="vwap",onClick:()=>o({...r,entryStyle:"vwap",multipleStrategyA:null,multipleStrategyB:null}),title:"VWAP",icon:"",description:"Entries on price vs VWAP",details:["BUY: price crosses above VWAP","SELL: price crosses below VWAP","Volume-weighted average price","Good for intraday trend"]}),l.jsx(G,{selected:r.entryStyle==="multiple",onClick:()=>o({...r,entryStyle:"multiple"}),title:"Multiple Strategies",icon:"",description:"Combine two strategies of your choice (EMA Cross, Price Levels, Bollinger Bands, or VWAP)",details:["Pick Strategy A and Strategy B in the next step","EMA Cross, Price Levels, Bollinger Bands, VWAP","Maximum flexibility","Good for active traders"]})]})]}),i===4&&r.entryStyle==="multiple"&&l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Step 4: Choose two strategies to combine"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Select Strategy A and Strategy B. They must be different. RSI is not available in combinations."}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:24,marginBottom:16},children:[l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy A"}),l.jsxs("select",{value:r.multipleStrategyA??"",onChange:j=>o({...r,multipleStrategyA:j.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]}),l.jsxs("div",{children:[l.jsx("label",{style:{display:"block",marginBottom:8,fontWeight:600},children:"Strategy B"}),l.jsxs("select",{value:r.multipleStrategyB??"",onChange:j=>o({...r,multipleStrategyB:j.target.value||null}),style:{width:"100%",padding:"10px 12px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontSize:"0.95rem"},children:[l.jsx("option",{value:"",children:" Select "}),l.jsx("option",{value:"ema_cross",children:"EMA Cross"}),l.jsx("option",{value:"price_levels",children:"Price Levels"}),l.jsx("option",{value:"bollinger_bands",children:"Bollinger Bands"}),l.jsx("option",{value:"vwap",children:"VWAP"})]})]})]}),r.multipleStrategyA&&r.multipleStrategyB&&r.multipleStrategyA===r.multipleStrategyB&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.9rem",marginTop:8},children:"Please choose two different strategies."})]}),(i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple")&&l.jsx("div",{children:l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:r.entryStyle==="multiple"?"Step 5: Review & Save":"Step 4: Review & Save"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Review your custom configuration before saving."}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,borderLeft:"4px solid var(--accent)",marginBottom:20},children:[l.jsx("h4",{style:{margin:"0 0 12px 0"},children:"Your Configuration Summary"}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Style:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.tradingStyle==="scalper"&&" Scalper",r.tradingStyle==="day_trader"&&" Day Trader",r.tradingStyle==="swing_trader"&&" Swing Trader"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Risk:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.riskTolerance==="conservative"&&" Conservative",r.riskTolerance==="moderate"&&" Moderate",r.riskTolerance==="aggressive"&&" Aggressive"]})]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Entry:"}),l.jsxs("div",{style:{fontWeight:600,marginTop:4},children:[r.entryStyle==="ema_cross"&&" EMA Cross",r.entryStyle==="rsi_dips"&&" RSI Dips",r.entryStyle==="price_levels"&&" Price Levels",r.entryStyle==="bollinger_bands"&&" Bollinger Bands",r.entryStyle==="vwap"&&" VWAP",r.entryStyle==="multiple"&&r.multipleStrategyA&&r.multipleStrategyB&&l.jsxs(l.Fragment,{children:[" Multiple (",r.multipleStrategyA.replace("_"," "),"+",r.multipleStrategyB.replace("_"," "),")"]}),r.entryStyle==="multiple"&&(!r.multipleStrategyA||!r.multipleStrategyB)&&" Multiple"]})]})]})]}),x&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"What this means:"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,color:"var(--text-secondary)",lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Position Size:"})," ",String(((S=x.risk)==null?void 0:S.max_lots)??"-")," lots per trade"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Profit Target:"})," ",String(((w=(C=x.trade_management)==null?void 0:C.target)==null?void 0:w.pips_default)??"-")," pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Max Trades/Day:"})," ",String(((_=x.risk)==null?void 0:_.max_trades_per_day)??"-")]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Polling Speed:"})," Every ",String(((I=x.execution)==null?void 0:I.loop_poll_seconds)??"-")," seconds"]})]})]}),l.jsx("div",{style:{marginBottom:20},children:l.jsxs("button",{className:"btn btn-secondary",style:{fontSize:"0.85rem"},onClick:()=>u(!a),children:[a?"Hide":"Show"," Advanced Settings"]})}),a&&x&&l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{marginBottom:12},children:"Full Configuration (JSON):"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(x,null,2)}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:"For advanced customization, edit the profile directly in the Profile Editor after saving."})]}),m&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",m]})})]})}),(i===5&&r.entryStyle!=="multiple"||i===6&&r.entryStyle==="multiple")&&p&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:r.entryStyle==="multiple"?"Step 6: Fine-Tune Settings":"Step 5: Fine-Tune Settings"}),l.jsx("button",{className:"btn btn-secondary",onClick:O,style:{fontSize:"0.8rem"},children:"Reset to Wizard Defaults"})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:20},children:"Adjust any settings using the +/- buttons or type directly. These values come from your wizard choices."}),J&&l.jsxs("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.15)",border:"1px solid var(--danger)",borderRadius:8,marginBottom:20},children:[l.jsx("strong",{style:{color:"var(--danger)"},children:"Profile limit exceeded"}),l.jsx("p",{style:{margin:"8px 0 0",fontSize:"0.9rem",color:"var(--text-secondary)"},children:"You have violated your Profile Editor risk settings. This change cannot be made until you update your risk settings in the Profile Editor."})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Risk Settings"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Max Lots",value:(U=p.risk)==null?void 0:U.max_lots,onAdjust:j=>H(["risk","max_lots"],j,.01,10,.01),onChange:j=>D(["risk","max_lots"],j),step:.01,min:.01,max:10}),l.jsx(Re,{label:"Min Stop Pips",value:(V=p.risk)==null?void 0:V.min_stop_pips,onAdjust:j=>H(["risk","min_stop_pips"],j,1,100,1),onChange:j=>D(["risk","min_stop_pips"],j),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Spread Pips",value:(pe=p.risk)==null?void 0:pe.max_spread_pips,onAdjust:j=>H(["risk","max_spread_pips"],j,.1,5,.1),onChange:j=>D(["risk","max_spread_pips"],j),step:.1,min:.1,max:5}),l.jsx(Re,{label:"Max Trades/Day",value:(oe=p.risk)==null?void 0:oe.max_trades_per_day,onAdjust:j=>H(["risk","max_trades_per_day"],j,1,100,1),onChange:j=>D(["risk","max_trades_per_day"],j),step:1,min:1,max:100}),l.jsx(Re,{label:"Max Open Trades",value:(we=p.risk)==null?void 0:we.max_open_trades,onAdjust:j=>H(["risk","max_open_trades"],j,1,10,1),onChange:j=>D(["risk","max_open_trades"],j),step:1,min:1,max:10}),l.jsx(Re,{label:"Loss Cooldown (min)",value:(F=p.risk)==null?void 0:F.cooldown_minutes_after_loss,onAdjust:j=>H(["risk","cooldown_minutes_after_loss"],j,0,60,1),onChange:j=>D(["risk","cooldown_minutes_after_loss"],j),step:1,min:0,max:60}),l.jsx(Re,{label:"Max Daily Loss %",value:(ee=p.risk)==null?void 0:ee.max_daily_loss_pct,onAdjust:j=>H(["risk","max_daily_loss_pct"],j,.5,20,.5),onChange:j=>D(["risk","max_daily_loss_pct"],j),step:.5,min:.5,max:20})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Profit Target"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Target Pips",value:(Ft=(me=p.trade_management)==null?void 0:me.target)==null?void 0:Ft.pips_default,onAdjust:j=>H(["trade_management","target","pips_default"],j,1,100,1),onChange:j=>D(["trade_management","target","pips_default"],j),step:1,min:1,max:100}),l.jsx(Re,{label:"R:R Ratio",value:(ws=(xs=p.trade_management)==null?void 0:xs.target)==null?void 0:ws.rr_default,onAdjust:j=>H(["trade_management","target","rr_default"],j,.5,5,.1),onChange:j=>D(["trade_management","target","rr_default"],j),step:.1,min:.5,max:5})]})]}),l.jsxs("div",{style:{marginBottom:20},children:[l.jsx("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.95rem"},children:"Execution"}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:12},children:[l.jsx(Re,{label:"Poll Interval (sec)",value:(Bt=p.execution)==null?void 0:Bt.loop_poll_seconds,onAdjust:j=>H(["execution","loop_poll_seconds"],j,1,120,1),onChange:j=>D(["execution","loop_poll_seconds"],j),step:1,min:1,max:120}),l.jsx(Re,{label:"Fast Poll (sec)",value:(_s=p.execution)==null?void 0:_s.loop_poll_seconds_fast,onAdjust:j=>H(["execution","loop_poll_seconds_fast"],j,1,60,1),onChange:j=>D(["execution","loop_poll_seconds_fast"],j),step:1,min:1,max:60})]})]}),(Za=(zn=p.execution)==null?void 0:zn.policies)==null?void 0:Za.map((j,K)=>l.jsxs("div",{style:{marginBottom:16,padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("h4",{style:{color:"var(--accent)",marginBottom:12,fontSize:"0.9rem"},children:["Policy: ",j.id," (",j.type,")"]}),l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:10},children:[j.type==="indicator_based"&&l.jsxs(l.Fragment,{children:[l.jsx(Re,{label:"RSI Period",value:j.rsi_period,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_period=Math.max(2,Math.min(50,j.rsi_period+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_period=Math.max(2,Math.min(50,B)),D(["execution","policies"],$)},step:1,min:2,max:50}),l.jsx(Re,{label:"RSI Oversold",value:j.rsi_oversold,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_oversold=Math.max(10,Math.min(50,j.rsi_oversold+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_oversold=Math.max(10,Math.min(50,B)),D(["execution","policies"],$)},step:1,min:10,max:50}),l.jsx(Re,{label:"RSI Overbought",value:j.rsi_overbought,onAdjust:B=>{const $=p.execution.policies;$[K].rsi_overbought=Math.max(50,Math.min(90,j.rsi_overbought+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].rsi_overbought=Math.max(50,Math.min(90,B)),D(["execution","policies"],$)},step:1,min:50,max:90}),l.jsx(Re,{label:"TP Pips",value:j.tp_pips,onAdjust:B=>{const $=p.execution.policies;$[K].tp_pips=Math.max(1,Math.min(100,j.tp_pips+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].tp_pips=Math.max(1,Math.min(100,B)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsx(Re,{label:"SL Pips",value:j.sl_pips,onAdjust:B=>{const $=p.execution.policies;$[K].sl_pips=Math.max(1,Math.min(100,j.sl_pips+B)),D(["execution","policies"],$)},onChange:B=>{const $=p.execution.policies;$[K].sl_pips=Math.max(1,Math.min(100,B)),D(["execution","policies"],$)},step:1,min:1,max:100}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Side:"}),l.jsx("span",{style:{fontWeight:600,color:j.side==="buy"?"var(--success)":"var(--danger)"},children:j.side.toUpperCase()})]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Regime:"}),l.jsx("span",{style:{fontWeight:600},children:j.regime})]})]}),j.type==="confirmed_cross"&&l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"8px 0"},children:[l.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)"},children:"Setup:"}),l.jsx("span",{style:{fontWeight:600},children:j.setup_id}),l.jsx("span",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"(bi-directional)"})]})]})]},K)),m&&l.jsx("div",{style:{padding:12,background:"rgba(239, 68, 68, 0.1)",borderRadius:6,marginTop:16},children:l.jsxs("p",{style:{color:"var(--danger)",margin:0},children:["Error: ",m]})})]}),l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:20},children:[l.jsx("button",{className:"btn btn-secondary",onClick:L,disabled:i===1,children:" Back"}),l.jsxs("div",{style:{display:"flex",gap:12},children:[i<b&&l.jsx("button",{className:"btn btn-primary",onClick:k,disabled:!P(),children:i===4&&r.entryStyle!=="multiple"||i===5&&r.entryStyle==="multiple"?"Fine-Tune Settings ":"Next "}),(i>=4&&r.entryStyle!=="multiple"||i>=5&&r.entryStyle==="multiple")&&l.jsx("button",{className:"btn btn-success",onClick:W,disabled:d||J,style:{minWidth:160},children:d?"Saving...":" Save Configuration"})]})]})]})}function E0({profile:t}){var S,C;const[e,n]=R.useState([]),[i,s]=R.useState(null),[r,o]=R.useState(null),[a,u]=R.useState(null),[h,c]=R.useState(!1),[d,f]=R.useState(null),[m,y]=R.useState(null),[x,M]=R.useState(!1),[g,p]=R.useState(!0),[v,b]=R.useState(null),[P,E]=R.useState(!1),k=()=>{Jf(t.path).then(y).catch(console.error)};R.useEffect(()=>{u0().then(w=>{n(w)}).catch(console.error),k()},[t.path]),R.useEffect(()=>{i&&i!=="custom"?h0(i,t.path).then(w=>u(w)).catch(console.error):u(null)},[i,t.path]),R.useEffect(()=>{if(x&&m){const w=m.effective_risk,_=m.risk,I=m.execution,U=m.trade_management,V=U==null?void 0:U.target,pe=I==null?void 0:I.policies;let oe=0;if(pe){for(const we of pe)if("cooldown_minutes"in we){oe=we.cooldown_minutes;break}}b({max_lots:(w==null?void 0:w.max_lots)??(_==null?void 0:_.max_lots)??.01,min_stop_pips:(w==null?void 0:w.min_stop_pips)??(_==null?void 0:_.min_stop_pips)??5,max_spread_pips:(w==null?void 0:w.max_spread_pips)??(_==null?void 0:_.max_spread_pips)??2,max_trades_per_day:(w==null?void 0:w.max_trades_per_day)??(_==null?void 0:_.max_trades_per_day)??10,max_open_trades:(w==null?void 0:w.max_open_trades)??(_==null?void 0:_.max_open_trades)??5,cooldown_minutes_after_loss:(w==null?void 0:w.cooldown_minutes_after_loss)??(_==null?void 0:_.cooldown_minutes_after_loss)??0,target_pips:(V==null?void 0:V.pips_default)??.5,loop_poll_seconds:(I==null?void 0:I.loop_poll_seconds)??5,policy_cooldown_minutes:oe})}},[x,m]);const L=async()=>{var w;if(!(!v||!m)){E(!0);try{const _=m.risk,I=m.effective_risk,U=m.execution,V=m.trade_management,pe=Math.min(v.max_lots,(_==null?void 0:_.max_lots)??v.max_lots),oe=Math.min(v.max_spread_pips,(_==null?void 0:_.max_spread_pips)??v.max_spread_pips),we=Math.min(v.max_trades_per_day,(_==null?void 0:_.max_trades_per_day)??v.max_trades_per_day),F=Math.min(v.max_open_trades,(_==null?void 0:_.max_open_trades)??v.max_open_trades),ee=Math.max(v.min_stop_pips,(_==null?void 0:_.min_stop_pips)??0),me={...I||{},max_lots:pe,min_stop_pips:ee,max_spread_pips:oe,max_trades_per_day:we,max_open_trades:F,cooldown_minutes_after_loss:Math.max(0,v.cooldown_minutes_after_loss)},Ft={...V||{},target:{...(V==null?void 0:V.target)||{},pips_default:v.target_pips}},xs=((w=U==null?void 0:U.policies)==null?void 0:w.map(zn=>"cooldown_minutes"in zn?{...zn,cooldown_minutes:Math.max(0,v.policy_cooldown_minutes)}:zn))||[],ws={...U||{},loop_poll_seconds:Math.max(.5,v.loop_poll_seconds),policies:xs};let Bt=m.active_preset_name||"";Bt.includes("(customized)")||(Bt=Bt?`${Bt} (customized)`:"custom (customized)");const _s={...m,active_preset_name:Bt,effective_risk:me,trade_management:Ft,execution:ws};await qa(t.path,_s),f("Temporary settings applied successfully!"),k(),setTimeout(()=>f(null),3e3)}catch(_){f(`Error: ${_.message}`)}finally{E(!1)}}},W=async()=>{if(!(!i||i==="custom")){c(!0);try{const w=i==="vwap_trend"?{vwap_session_filter_enabled:g}:void 0;await c0(i,t.path,w),f(`Preset "${i}" applied successfully!`),k(),setTimeout(()=>f(null),3e3)}catch(w){f(`Error: ${w.message}`)}finally{c(!1)}}},O=(w,_)=>{_.stopPropagation(),o(r===w?null:w)},D=e.find(w=>w.id===i),H=m==null?void 0:m.active_preset_name,J=m==null?void 0:m.risk,G=m==null?void 0:m.effective_risk,N=m==null?void 0:m.execution;return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Presets"}),l.jsx("p",{className:"mb-4",style:{color:"var(--text-secondary)"},children:'Select a preset to preview changes, then apply to your profile. Click "Pros & Cons" to see details.'}),H&&l.jsxs("div",{className:"card mb-4",style:{borderColor:"var(--accent)",borderWidth:2,background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, var(--bg-secondary) 100%)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:4},children:"ACTIVE PRESET"}),l.jsx("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"var(--accent)"},children:H})]}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>M(!x),style:{fontSize:"0.8rem"},children:x?"Hide Settings":"View Settings"}),x&&l.jsx("button",{className:"btn btn-primary",onClick:L,disabled:P||!v,style:{fontSize:"0.8rem"},children:P?"Applying...":"Apply Temporary Settings"})]})]}),x&&J&&l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)"},children:[G&&l.jsx("div",{style:{marginBottom:12,fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Effective (used when running): preset risk capped by Profile Editor limits."}),v&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Lots (effective)"}),l.jsx("input",{type:"number",step:"0.01",min:"0.01",value:v.max_lots,onChange:w=>b({...v,max_lots:parseFloat(w.target.value)||.01}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_lots]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Min Stop Pips"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:v.min_stop_pips,onChange:w=>b({...v,min_stop_pips:parseFloat(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Floor: ",J.min_stop_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:v.max_spread_pips,onChange:w=>b({...v,max_spread_pips:parseFloat(w.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_spread_pips]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Trades/Day"}),l.jsx("input",{type:"number",step:"1",min:"1",value:v.max_trades_per_day,onChange:w=>b({...v,max_trades_per_day:parseInt(w.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_trades_per_day]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Max Open Trades"}),l.jsx("input",{type:"number",step:"1",min:"1",value:v.max_open_trades,onChange:w=>b({...v,max_open_trades:parseInt(w.target.value)||1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}}),l.jsxs("div",{style:{fontSize:"0.65rem",color:"var(--text-secondary)",marginTop:2},children:["Max: ",J.max_open_trades]})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Loss (min)"}),l.jsx("input",{type:"number",step:"1",min:"0",value:v.cooldown_minutes_after_loss,onChange:w=>b({...v,cooldown_minutes_after_loss:parseInt(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Target Pips"}),l.jsx("input",{type:"number",step:"0.1",min:"0.1",value:v.target_pips,onChange:w=>b({...v,target_pips:parseFloat(w.target.value)||.1}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Poll Interval (s)"}),l.jsx("input",{type:"number",step:"0.5",min:"0.5",value:v.loop_poll_seconds,onChange:w=>b({...v,loop_poll_seconds:parseFloat(w.target.value)||.5}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]}),l.jsxs("div",{style:{padding:8,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginBottom:4},children:"Cooldown After Trade (min)"}),l.jsx("input",{type:"number",step:"0.5",min:"0",value:v.policy_cooldown_minutes,onChange:w=>b({...v,policy_cooldown_minutes:parseFloat(w.target.value)||0}),style:{width:"100%",padding:"4px 8px",borderRadius:4,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)",fontWeight:600}})]})]}),((S=N==null?void 0:N.policies)==null?void 0:S.length)>0&&l.jsxs("div",{style:{marginTop:12},children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:8},children:"Active Policies:"}),l.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:(C=N==null?void 0:N.policies)==null?void 0:C.map((w,_)=>l.jsxs("span",{style:{padding:"4px 8px",background:"var(--bg-tertiary)",borderRadius:4,fontSize:"0.75rem",fontWeight:600},children:[w.type,": ",w.id]},_))})]})]})]}),d&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:d})}),l.jsxs("div",{className:"grid-3 mb-4",children:[e.map(w=>{const _=H===w.id;return l.jsxs("div",{className:`preset-card ${i===w.id?"selected":""}`,onClick:()=>s(w.id),style:_?{borderColor:"var(--success)",borderWidth:2}:{},children:[_&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:w.name}),l.jsx("div",{className:"preset-description",children:w.description}),l.jsx("button",{className:"btn btn-secondary",style:{marginTop:8,fontSize:"0.75rem",padding:"4px 8px"},onClick:I=>O(w.id,I),children:r===w.id?"Hide":"Pros & Cons"}),r===w.id&&l.jsxs("div",{className:"proscons-dropdown",style:{marginTop:12,textAlign:"left"},children:[w.pros.length>0&&l.jsxs("div",{style:{marginBottom:8},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",fontSize:"0.8rem",marginBottom:4},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:w.pros.map((I,U)=>l.jsx("li",{style:{marginBottom:2},children:I},U))})]}),w.cons.length>0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",fontSize:"0.8rem",marginBottom:4},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.75rem",color:"var(--text-secondary)"},children:w.cons.map((I,U)=>l.jsx("li",{style:{marginBottom:2},children:I},U))})]})]})]},w.id)}),(()=>{const w=H==null?void 0:H.startsWith("Custom:");return l.jsxs("div",{className:`preset-card ${i==="custom"?"selected":""}`,onClick:()=>s("custom"),style:{borderStyle:"dashed",...w?{borderColor:"var(--success)",borderWidth:2}:{}},children:[w&&l.jsx("div",{style:{position:"absolute",top:-10,right:10,background:"var(--success)",color:"white",fontSize:"0.65rem",fontWeight:700,padding:"2px 8px",borderRadius:4},children:"ACTIVE"}),l.jsx("div",{className:"preset-name",children:"Custom"}),l.jsx("div",{className:"preset-description",children:w?`Currently running: ${H}`:"Use the wizard to create a custom configuration."})]})})()]}),i&&i!=="custom"&&a&&l.jsxs("div",{className:"card",children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsxs("h3",{className:"card-title",style:{margin:0},children:["Preview: ",(D==null?void 0:D.name)||i]}),l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[i==="vwap_trend"&&l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:"0.9rem"},children:[l.jsx("span",{style:{color:"var(--text-secondary)"},children:"Optional: Session Filter (London + NY)"}),l.jsxs("select",{value:g?"on":"off",onChange:w=>p(w.target.value==="on"),title:"Turn On to only allow trades during London (816 UTC) or NY (1321 UTC) sessions; Off to trade any time.",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border)",background:"var(--bg-secondary)",color:"var(--text-primary)"},children:[l.jsx("option",{value:"on",children:"On"}),l.jsx("option",{value:"off",children:"Off"})]})]}),l.jsx("button",{className:"btn btn-primary",onClick:W,disabled:h,children:h?"Applying...":"Apply Preset"})]})]}),D&&(D.pros.length>0||D.cons.length>0)&&l.jsxs("div",{className:"grid-2 mb-4",children:[D.pros.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(16, 185, 129, 0.1)",borderRadius:6,border:"1px solid var(--success)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--success)",marginBottom:8,fontSize:"0.85rem"},children:"Pros"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.pros.map((w,_)=>l.jsx("li",{style:{marginBottom:4},children:w},_))})]}),D.cons.length>0&&l.jsxs("div",{style:{padding:12,background:"rgba(245, 158, 11, 0.1)",borderRadius:6,border:"1px solid var(--warning)"},children:[l.jsx("div",{style:{fontWeight:600,color:"var(--warning)",marginBottom:8,fontSize:"0.85rem"},children:"Cons"}),l.jsx("ul",{style:{margin:0,paddingLeft:16,fontSize:"0.8rem"},children:D.cons.map((w,_)=>l.jsx("li",{style:{marginBottom:4},children:w},_))})]})]}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12,fontSize:"0.8rem"},children:"These settings will be changed when you apply:"}),l.jsx("pre",{style:{background:"var(--bg-primary)",padding:12,borderRadius:6,fontSize:"0.75rem",overflow:"auto",maxHeight:300},children:JSON.stringify(a.changes||a,null,2)})]}),i==="custom"&&l.jsx(C0,{profile:t,currentProfile:m,onComplete:()=>{f("Custom configuration saved!"),setTimeout(()=>f(null),3e3)}})]})}function P0({profile:t,authStatus:e,onAuthChange:n}){const[i,s]=R.useState(null),[r,o]=R.useState(!1),[a,u]=R.useState(null),[h,c]=R.useState(null),[d,f]=R.useState(0),[m,y]=R.useState(null),[x,M]=R.useState(""),[g,p]=R.useState(""),[v,b]=R.useState(""),[P,E]=R.useState(null),[k,L]=R.useState(!1),W=e[t.path]||!1,O=()=>{y(null),M(""),p(""),b(""),E(null)},D=async()=>{if(!g||g.length<4){E("Password must be at least 4 characters");return}if(g!==v){E("Passwords do not match");return}L(!0),E(null);try{await Go(t.path,null,g),n(),O(),u("Password set successfully!"),setTimeout(()=>u(null),3e3)}catch(_){E(_.message)}finally{L(!1)}},H=async()=>{if(!x){E("Enter current password");return}if(!g||g.length<4){E("New password must be at least 4 characters");return}if(g!==v){E("New passwords do not match");return}L(!0),E(null);try{await Go(t.path,x,g),n(),O(),u("Password changed successfully!"),setTimeout(()=>u(null),3e3)}catch(_){E(_.message)}finally{L(!1)}},J=async()=>{if(!x){E("Enter current password");return}L(!0),E(null);try{await a0(t.path,x),n(),O(),u("Password removed. Profile is now non-secure."),setTimeout(()=>u(null),3e3)}catch(_){E(_.message)}finally{L(!1)}};R.useEffect(()=>{s(null),c(null),Jf(t.path).then(_=>{s(_),c(null)}).catch(_=>{c(_.message),s(null)})},[t.path,d]);const G=async()=>{if(i){o(!0),u(null);try{await qa(t.path,i),u("Profile saved!"),setTimeout(()=>u(null),2e3)}catch(_){u(`Error: ${_.message}`)}finally{o(!1)}}};if(!i)return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),h?l.jsxs("div",{className:"card",style:{borderColor:"var(--danger)"},children:[l.jsxs("p",{style:{color:"var(--danger)"},children:["Failed to load profile: ",h]}),l.jsx("button",{className:"btn btn-primary",onClick:()=>f(_=>_+1),children:"Retry"})]}):l.jsx("div",{className:"card",children:"Loading profile..."})]});const N=i.risk||{},S=i.execution||{},C=(_,I,U)=>{s({...i,[_]:{...i[_]||{},[I]:U}})},w=(_,I)=>{s({...i,[_]:I})};return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Profile Editor"}),a&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--success)"},children:l.jsx("p",{children:a})}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Basic Settings"}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Symbol"}),l.jsx("input",{value:i.symbol||"",onChange:_=>s({...i,symbol:_.target.value})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Pip Size"}),l.jsx("input",{type:"number",step:"0.001",value:i.pip_size||.01,onChange:_=>s({...i,pip_size:parseFloat(_.target.value)})})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Account Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Deposit amount and leverage ratio for your reference."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Deposit Amount ($)"}),l.jsx("input",{type:"number",placeholder:"e.g., 100000",value:i.deposit_amount||"",onChange:_=>w("deposit_amount",_.target.value?parseFloat(_.target.value):null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Leverage Ratio"}),l.jsxs("select",{value:i.leverage_ratio||"",onChange:_=>w("leverage_ratio",_.target.value?parseInt(_.target.value):null),children:[l.jsx("option",{value:"",children:"Select leverage..."}),l.jsx("option",{value:"50",children:"1:50"}),l.jsx("option",{value:"100",children:"1:100"}),l.jsx("option",{value:"200",children:"1:200"}),l.jsx("option",{value:"400",children:"1:400"}),l.jsx("option",{value:"500",children:"1:500"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Display Currency (Stats & Logs)"}),l.jsxs("select",{value:i.display_currency||"USD",onChange:_=>w("display_currency",_.target.value),children:[l.jsx("option",{value:"USD",children:"USD"}),l.jsx("option",{value:"JPY",children:"JPY"})]}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Profits and balances will be shown in this currency. JPY uses current rate from your symbol."})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Broker Connection"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Choose MetaTrader 5 (Windows) or OANDA (works on Mac/Linux and PaaS like Railway). OANDA is available in Japan and Canada."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Broker Type"}),l.jsxs("select",{value:i.broker_type||"mt5",onChange:_=>w("broker_type",_.target.value),children:[l.jsx("option",{value:"mt5",children:"MetaTrader 5 (MT5)"}),l.jsx("option",{value:"oanda",children:"OANDA"})]})]}),i.broker_type==="oanda"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA API Key"}),l.jsx("input",{type:"password",autoComplete:"off",placeholder:"Paste your OANDA API token",value:i.oanda_token||"",onChange:_=>w("oanda_token",_.target.value||null)}),l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:"Create a token in OANDA Practice or Live account: Account  Manage API Access."})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Account ID (optional)"}),l.jsx("input",{type:"text",placeholder:"Leave blank to use first account",value:i.oanda_account_id||"",onChange:_=>w("oanda_account_id",_.target.value||null)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"OANDA Environment"}),l.jsxs("select",{value:i.oanda_environment||"practice",onChange:_=>w("oanda_environment",_.target.value),children:[l.jsx("option",{value:"practice",children:"Practice (demo)"}),l.jsx("option",{value:"live",children:"Live"})]})]})]})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Risk Settings"}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16,marginTop:-8},children:"These limits are final and cannot be overridden by presets or the custom wizard."}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Lots"}),l.jsx("input",{type:"number",step:"0.01",value:N.max_lots||.1,onChange:_=>C("risk","max_lots",parseFloat(_.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Spread (pips)"}),l.jsx("input",{type:"number",step:"0.1",value:N.max_spread_pips||2,onChange:_=>C("risk","max_spread_pips",parseFloat(_.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Trades/Day"}),l.jsx("input",{type:"number",value:N.max_trades_per_day||10,onChange:_=>C("risk","max_trades_per_day",parseInt(_.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Max Open Trades"}),l.jsx("input",{type:"number",min:1,max:20,value:N.max_open_trades??2,onChange:_=>C("risk","max_open_trades",parseInt(_.target.value)||1)})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Cooldown After Loss (minutes)"}),l.jsx("input",{type:"number",min:0,max:120,value:N.cooldown_minutes_after_loss??0,onChange:_=>C("risk","cooldown_minutes_after_loss",parseInt(_.target.value)||0)})]}),l.jsx("div",{className:"form-group",children:l.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("input",{type:"checkbox",checked:N.require_stop||!1,onChange:_=>C("risk","require_stop",_.target.checked),style:{width:"auto"}}),"Require Stop Loss"]})})]})]}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Profile Security"}),W?l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile is protected by a password."}),l.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[l.jsx("button",{className:"btn btn-secondary",onClick:()=>y("change"),children:"Change Password"}),l.jsx("button",{className:"btn btn-danger",onClick:()=>y("remove"),children:"Remove Password"})]})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:16},children:"This profile has no password. Anyone with access to this computer can open it."}),l.jsx("button",{className:"btn btn-primary",onClick:()=>y("add"),children:"Add Password"})]})]}),m&&l.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:16},children:[l.jsxs("h3",{className:"card-title",children:[m==="add"&&"Add Password",m==="change"&&"Change Password",m==="remove"&&"Remove Password"]}),(m==="change"||m==="remove")&&l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:"Current Password"}),l.jsx("input",{type:"password",value:x,onChange:_=>M(_.target.value),placeholder:"Enter current password"})]}),(m==="add"||m==="change")&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsx("label",{children:m==="change"?"New Password":"Password"}),l.jsx("input",{type:"password",value:g,onChange:_=>p(_.target.value),placeholder:"Min 4 characters"})]}),l.jsxs("div",{className:"form-group",style:{marginBottom:12},children:[l.jsxs("label",{children:["Confirm ",m==="change"?"New ":"","Password"]}),l.jsx("input",{type:"password",value:v,onChange:_=>b(_.target.value),placeholder:"Confirm password"})]})]}),m==="remove"&&l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:12},children:"This will remove password protection. Anyone with access to this computer will be able to open this profile."}),(m==="add"||m==="change")&&l.jsx("p",{style:{fontSize:"0.75rem",color:"var(--warning)",marginBottom:12,background:"rgba(234, 179, 8, 0.1)",padding:8,borderRadius:4},children:"Write your password down in a safe location. There is no forgot-password option."}),P&&l.jsx("p",{style:{color:"var(--danger)",fontSize:"0.85rem",marginBottom:12},children:P}),l.jsxs("div",{style:{display:"flex",gap:8},children:[l.jsx("button",{className:m==="remove"?"btn btn-danger":"btn btn-primary",onClick:m==="add"?D:m==="change"?H:J,disabled:k,children:k?"Processing...":m==="add"?"Set Password":m==="change"?"Change Password":"Remove Password"}),l.jsx("button",{className:"btn btn-secondary",onClick:O,disabled:k,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mt-4",children:[l.jsx("h3",{className:"card-title",children:"Execution Settings"}),l.jsxs("div",{className:"grid-2",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Loop Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:S.loop_poll_seconds||5,onChange:_=>C("execution","loop_poll_seconds",parseFloat(_.target.value))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Fast Poll Seconds"}),l.jsx("input",{type:"number",step:"0.5",value:S.loop_poll_seconds_fast||2,onChange:_=>C("execution","loop_poll_seconds_fast",parseFloat(_.target.value))})]})]}),l.jsxs("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:8},children:["Policies: ",(S.policies||[]).length," configured. Use the Streamlit UI or edit JSON directly for full policy management."]})]}),l.jsx("div",{className:"mt-4",children:l.jsx("button",{className:"btn btn-primary",onClick:G,disabled:r,children:r?"Saving...":"Save Profile"})})]})}function N0({profile:t}){const[e,n]=R.useState(null),[i,s]=R.useState({}),[r,o]=R.useState([]),[a,u]=R.useState(void 0),[h,c]=R.useState([]),[d,f]=R.useState(!1),[m,y]=R.useState(null),[x,M]=R.useState(null),[g,p]=R.useState(null),[v,b]=R.useState(null),[P,E]=R.useState(null),[k,L]=R.useState(null),[W,O]=R.useState("summary"),D=()=>{y0(t.name,t.path).then(n).catch(console.error),v0(t.name).then(s).catch(console.error),Gf(t.name,20,t.path).then(S=>{o(S.trades),u(S.display_currency)}).catch(console.error),g0(t.name,20).then(c).catch(console.error),x0(t.name,t.path).then(b).catch(console.error),w0(t.name,t.path).then(S=>L(S??null)).catch(()=>L(null))};R.useEffect(()=>{D()},[t.name,t.path]);const H=async()=>{f(!0),y(null);try{const S=await _0(t.name,t.path),C=[];S.trades_updated>0&&C.push(`${S.trades_updated} trade(s) synced`),S.trades_imported&&S.trades_imported>0&&C.push(`${S.trades_imported} trade(s) imported from broker history`),S.position_ids_backfilled&&S.position_ids_backfilled>0&&C.push(`${S.position_ids_backfilled} position ID(s) backfilled`),S.profit_backfilled&&S.profit_backfilled>0&&C.push(`${S.profit_backfilled} profit(s) updated from broker`),C.length>0?(y(C.join(", ")),D()):y("All trades up to date"),setTimeout(()=>y(null),4e3)}catch(S){y(`Sync error: ${S.message}`)}finally{f(!1)}},J=async S=>{const C=String(S.trade_id||"");if(C){M(C);try{const w=await Xf(t.name,C,t.path);y(`Closed trade: ${w.pips>=0?"+":""}${w.pips.toFixed(2)} pips`),D(),setTimeout(()=>y(null),3e3)}catch(w){y(`Close error: ${w.message}`)}finally{M(null),p(null)}}},G=Object.values(i).reduce((S,C)=>S+C,0),N=S=>S.exit_price===null||S.exit_price===void 0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex-between mb-4",children:[l.jsx("h2",{className:"page-title",style:{marginBottom:0,borderBottom:"none",paddingBottom:0},children:"Logs & Stats"}),l.jsx("button",{className:"btn btn-secondary",onClick:H,disabled:d,children:d?"Syncing...":"Sync from broker"})]}),m&&l.jsx("div",{className:"card mb-4",style:{borderColor:"var(--accent)"},children:l.jsx("p",{children:m})}),g&&l.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:l.jsxs("div",{className:"card",style:{maxWidth:400,margin:0},children:[l.jsx("h3",{className:"card-title",children:"Confirm Close Trade"}),l.jsx("p",{style:{marginBottom:16},children:"Are you sure you want to close this trade?"}),l.jsx("div",{style:{background:"var(--bg-tertiary)",padding:12,borderRadius:6,marginBottom:16},children:l.jsxs("p",{style:{margin:0,fontSize:"0.9rem"},children:[l.jsx("strong",{children:"Side:"})," ",String(g.side||"").toUpperCase(),l.jsx("br",{}),l.jsx("strong",{children:"Entry:"})," ",typeof g.entry_price=="number"?g.entry_price.toFixed(3):"-",l.jsx("br",{}),l.jsx("strong",{children:"Size:"})," ",typeof g.size_lots=="number"?g.size_lots:"-"," lots"]})}),l.jsx("p",{style:{color:"var(--warning)",fontSize:"0.85rem",marginBottom:16},children:"This will send a close order to your broker immediately."}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:"btn btn-danger",onClick:()=>J(g),disabled:x!==null,children:x?"Closing...":"Close Trade"}),l.jsx("button",{className:"btn btn-secondary",onClick:()=>p(null),disabled:x!==null,children:"Cancel"})]})]})}),l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:8},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Quick Stats"}),e&&e.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.7rem",background:"var(--success)",color:"white",padding:"4px 8px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4,marginBottom:16},children:e&&e.source==="mt5"?"Stats from broker deal history (same as View  Reports in MT5)":"Stats from local records. Use a broker connection (MT5 or OANDA) to see live report data."}),l.jsxs("div",{className:"grid-3",children:[l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.closed_trades)||0}),l.jsx("div",{className:"stat-label",children:"Closed Trades"}),e&&e.wins!=null&&e.losses!=null&&l.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:4},children:[l.jsxs("span",{style:{color:"var(--success)"},children:[e.wins," W"]})," / ",l.jsxs("span",{style:{color:"var(--danger)"},children:[e.losses," L"]})]})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.win_rate)!=null?`${(e.win_rate*100).toFixed(1)}%`:"-"}),l.jsx("div",{className:"stat-label",children:"Win Rate"})]}),l.jsxs("div",{className:"stat-box",children:[l.jsx("div",{className:"stat-value",children:(e==null?void 0:e.avg_pips)!=null?e.avg_pips.toFixed(3):"-"}),l.jsx("div",{className:"stat-label",children:"Avg Pips"})]})]}),e&&e.total_profit!=null||e&&(e.total_commission!=null||e.total_swap!=null)?l.jsxs("div",{style:{marginTop:16,paddingTop:16,borderTop:"1px solid var(--border)",display:"flex",flexWrap:"wrap",gap:24},children:[e&&e.total_profit!=null&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:700,color:e.total_profit>=0?"var(--success)":"var(--danger)"},children:[e.total_profit>=0?"+":"",e.total_profit.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_commission!=null&&e.total_commission!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_commission.toFixed(2)," ",e.display_currency||"USD"]})]}),e&&e.total_swap!=null&&e.total_swap!==0&&l.jsxs("div",{children:[l.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Swap"}),l.jsxs("div",{style:{fontSize:"1.1rem",fontWeight:600,color:"var(--text-secondary)"},children:[e.total_swap.toFixed(2)," ",e.display_currency||"USD"]})]})]}):null,e&&e.source==="database"&&e.trades_without_profit!=null&&e.trades_without_profit>0&&l.jsx("p",{style:{marginTop:12,marginBottom:0,fontSize:"0.85rem",color:"var(--warning)"},children:"Some trades lack profit data. Sync from broker and refresh to see stats from broker report."})]}),k&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Account Report"}),l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsx("p",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginBottom:16},children:"Balance, equity, and closed P/L from your broker (MT5 or OANDA)"}),l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[l.jsxs("div",{onClick:()=>O(W==="summary"?null:"summary"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Summary"}),l.jsx("span",{children:W==="summary"?"":""})]}),W==="summary"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Balance"}),l.jsx("br",{}),k.summary.balance.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Equity"}),l.jsx("br",{}),k.summary.equity.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Margin"}),l.jsx("br",{}),k.summary.margin.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:[l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.85rem"},children:"Free Margin"}),l.jsx("br",{}),k.summary.free_margin.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>O(W==="closed"?null:"closed"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Closed P/L"}),l.jsx("span",{children:W==="closed"?"":""})]}),W==="closed"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12,fontSize:"0.9rem"},children:[l.jsxs("div",{children:["Total Profit: ",l.jsxs("span",{style:{color:k.closed_pl.total_profit>=0?"var(--success)":"var(--danger)",fontWeight:600},children:[k.closed_pl.total_profit>=0?"+":"",k.closed_pl.total_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Commission: ",k.closed_pl.total_commission.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Swap: ",k.closed_pl.total_swap.toFixed(2)," ",k.display_currency||"USD"]}),l.jsxs("div",{children:["Gross Profit: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.gross_profit.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Gross Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.gross_loss.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Profit Factor: ",k.closed_pl.profit_factor.toFixed(2)]}),l.jsxs("div",{children:["Largest Win: ",l.jsxs("span",{style:{color:"var(--success)"},children:[k.closed_pl.largest_profit_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Largest Loss: ",l.jsxs("span",{style:{color:"var(--danger)"},children:[k.closed_pl.largest_loss_trade.toFixed(2)," ",k.display_currency||"USD"]})]}),l.jsxs("div",{children:["Expected Payoff: ",k.closed_pl.expected_payoff.toFixed(2)," ",k.display_currency||"USD"]})]})]}),l.jsxs("div",{onClick:()=>O(W==="longshort"?null:"longshort"),style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6,cursor:"pointer",border:"1px solid var(--border)"},children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsx("strong",{children:"Long / Short"}),l.jsx("span",{children:W==="longshort"?"":""})]}),W==="longshort"&&l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginTop:12},children:[l.jsxs("div",{children:["Long: ",k.long_short.long_wins,"W / ",k.long_short.long_trades-k.long_short.long_wins,"L (",(k.long_short.long_win_pct*100).toFixed(0),"% win)"]}),l.jsxs("div",{children:["Short: ",k.long_short.short_wins,"W / ",k.long_short.short_trades-k.long_short.short_wins,"L (",(k.long_short.short_win_pct*100).toFixed(0),"% win)"]})]})]})]})]}),v&&Object.keys(v.presets).length>0&&l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[l.jsx("h3",{className:"card-title",style:{margin:0},children:"Performance by Preset"}),v.source==="mt5"&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"3px 6px",borderRadius:4,fontWeight:600},children:"FROM BROKER"})]}),l.jsxs("p",{style:{color:"var(--text-secondary)",marginBottom:16,marginTop:8,fontSize:"0.85rem"},children:["Preset names come from your local DB; win/loss and profit use broker history when available. For best accuracy, run ",l.jsx("strong",{children:"Sync from broker"})," so closed trades have position IDs, then refresh."]}),l.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:Object.entries(v.presets).sort(([,S],[,C])=>(C.total_pips||0)-(S.total_pips||0)).map(([S,C])=>{var I,U,V,pe,oe,we,F;const w=P===S,_=((I=Object.entries(v.presets).sort(([,ee],[,me])=>(me.total_pips||0)-(ee.total_pips||0))[0])==null?void 0:I[0])===S;return l.jsxs("div",{style:{border:`1px solid ${_?"var(--success)":"var(--border)"}`,borderRadius:8,overflow:"hidden",background:_?"rgba(34, 197, 94, 0.05)":"var(--bg-secondary)"},children:[l.jsxs("div",{onClick:()=>E(w?null:S),style:{padding:16,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs("div",{children:[l.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[l.jsx("span",{style:{fontWeight:600},children:S}),_&&l.jsx("span",{style:{fontSize:"0.65rem",background:"var(--success)",color:"white",padding:"2px 6px",borderRadius:4,fontWeight:700},children:"BEST"})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:4},children:[C.total_trades," trades | Win: ",C.win_rate!=null?`${(C.win_rate*100).toFixed(0)}%`:"-"," | Total: ",l.jsxs("span",{style:{color:(C.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[C.total_pips>=0?"+":"",((U=C.total_pips)==null?void 0:U.toFixed(1))||0," pips"]}),C.total_profit!=null&&l.jsxs(l.Fragment,{children:[" | Profit: ",l.jsxs("span",{style:{color:C.total_profit>=0?"var(--success)":"var(--danger)"},children:[C.total_profit>=0?"+":"",C.total_profit.toFixed(2)," ",v.display_currency||"USD"]})]}),C.total_commission!=null&&C.total_commission!==0&&l.jsxs(l.Fragment,{children:[" | Commission: ",C.total_commission.toFixed(2)," ",v.display_currency||"USD"]})]})]}),l.jsx("span",{style:{fontSize:"1.2rem"},children:w?"":""})]}),w&&l.jsx("div",{style:{padding:"0 16px 16px 16px",borderTop:"1px solid var(--border)",paddingTop:16},children:l.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:12},children:[l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Trades"}),l.jsx("div",{style:{fontWeight:700},children:C.total_trades})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win / Loss"}),l.jsxs("div",{style:{fontWeight:700},children:[l.jsx("span",{style:{color:"var(--success)"},children:C.wins})," /",l.jsx("span",{style:{color:"var(--danger)"},children:C.losses})]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Rate"}),l.jsx("div",{style:{fontWeight:700,color:(C.win_rate||0)>=.5?"var(--success)":"var(--warning)"},children:C.win_rate!=null?`${(C.win_rate*100).toFixed(1)}%`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Pips"}),l.jsxs("div",{style:{fontWeight:700,color:(C.total_pips||0)>=0?"var(--success)":"var(--danger)"},children:[C.total_pips>=0?"+":"",((V=C.total_pips)==null?void 0:V.toFixed(2))||0]})]}),C.total_profit!=null&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Total Profit"}),l.jsxs("div",{style:{fontWeight:700,color:C.total_profit>=0?"var(--success)":"var(--danger)"},children:[C.total_profit>=0?"+":"",C.total_profit.toFixed(2)," ",v.display_currency||"USD"]})]}),C.total_commission!=null&&C.total_commission!==0&&l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Commission"}),l.jsxs("div",{style:{fontWeight:700},children:[C.total_commission.toFixed(2)," ",v.display_currency||"USD"]})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg Pips"}),l.jsx("div",{style:{fontWeight:700},children:((pe=C.avg_pips)==null?void 0:pe.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Avg R:R"}),l.jsx("div",{style:{fontWeight:700},children:((oe=C.avg_rr)==null?void 0:oe.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Best Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--success)"},children:C.best_trade!=null?`+${C.best_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Worst Trade"}),l.jsx("div",{style:{fontWeight:700,color:"var(--danger)"},children:C.worst_trade!=null?`${C.worst_trade.toFixed(1)} pips`:"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Win Streak"}),l.jsx("div",{style:{fontWeight:700},children:C.win_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Loss Streak"}),l.jsx("div",{style:{fontWeight:700},children:C.loss_streak})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Profit Factor"}),l.jsx("div",{style:{fontWeight:700,color:(C.profit_factor||0)>=1?"var(--success)":"var(--danger)"},children:((we=C.profit_factor)==null?void 0:we.toFixed(2))||"-"})]}),l.jsxs("div",{style:{padding:10,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:"Max Drawdown"}),l.jsxs("div",{style:{fontWeight:700,color:"var(--warning)"},children:[((F=C.max_drawdown)==null?void 0:F.toFixed(1))||0," pips"]})]})]})})]},S)})})]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Rejection Breakdown"}),Object.entries(i).length===0?l.jsx("p",{style:{color:"var(--text-secondary)"},children:"No executions yet."}):Object.entries(i).map(([S,C])=>l.jsxs("div",{className:"breakdown-bar",children:[l.jsx("span",{className:"breakdown-label",children:S}),l.jsxs("div",{className:"breakdown-value",children:[l.jsx("div",{className:"breakdown-fill",style:{width:`${C/G*100}%`}}),l.jsx("span",{className:"breakdown-count",children:C})]})]},S))]}),l.jsxs("div",{className:"card mb-4",children:[l.jsx("h3",{className:"card-title",children:"Recent Trades"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Side"}),l.jsx("th",{children:"Entry"}),l.jsx("th",{children:"Exit"}),l.jsx("th",{children:"Pips"}),l.jsx("th",{children:"R"}),l.jsx("th",{children:"Profit"}),l.jsx("th",{children:"Source"}),l.jsx("th",{children:"Exit Reason"}),l.jsx("th",{children:"Action"})]})}),l.jsx("tbody",{children:r.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:10,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No trades yet."})}):r.map((S,C)=>{const w=String(S.opened_by||""),_=String(S.exit_reason||""),U=(V=>{if(!V)return{text:"-",color:"inherit"};switch(V){case"hit_take_profit":return{text:"TP",color:"var(--success)"};case"hit_stop_loss":return{text:"SL",color:"var(--danger)"};case"user_closed_early":return{text:"User",color:"var(--warning)"};case"UI_manual_close":return{text:"UI",color:"var(--accent)"};case"mt5_history_import":return{text:"Imported",color:"var(--text-secondary)"};default:return{text:V.replace(/_/g," "),color:"var(--text-secondary)"}}})(_);return l.jsxs("tr",{children:[l.jsx("td",{children:String(S.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(S.side||"")}),l.jsx("td",{children:typeof S.entry_price=="number"?S.entry_price.toFixed(3):"-"}),l.jsx("td",{children:typeof S.exit_price=="number"?S.exit_price.toFixed(3):"-"}),l.jsx("td",{style:{color:typeof S.pips=="number"?S.pips>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof S.pips=="number"?S.pips.toFixed(2):"-"}),l.jsx("td",{children:typeof S.r_multiple=="number"?S.r_multiple.toFixed(2):"-"}),l.jsx("td",{style:{color:typeof S.profit_display=="number"?S.profit_display>=0?"var(--success)":"var(--danger)":"inherit"},children:typeof S.profit_display=="number"?`${S.profit_display>=0?"+":""}${S.profit_display.toFixed(2)} ${a||(e==null?void 0:e.display_currency)||"USD"}`:"-"}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",padding:"2px 6px",borderRadius:4,background:w==="program"?"rgba(59, 130, 246, 0.2)":"rgba(156, 163, 175, 0.2)",color:w==="program"?"var(--accent)":"var(--text-secondary)"},children:w==="program"?"Bot":w==="manual"?"Manual":"-"})}),l.jsx("td",{children:l.jsx("span",{style:{fontSize:"0.75rem",color:U.color},children:U.text})}),l.jsx("td",{children:N(S)&&(S.mt5_order_id||S.mt5_position_id)?l.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"0.75rem"},onClick:()=>p(S),disabled:x===String(S.trade_id),children:"Close"}):N(S)?l.jsx("span",{style:{color:"var(--text-secondary)",fontSize:"0.75rem"},children:"No position ID"}):l.jsx("span",{style:{color:"var(--success)",fontSize:"0.75rem"},children:"Closed"})})]},C)})})]})})]}),l.jsxs("div",{className:"card",children:[l.jsx("h3",{className:"card-title",children:"Recent Executions"}),l.jsx("div",{className:"table-container",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Time"}),l.jsx("th",{children:"Mode"}),l.jsx("th",{children:"Placed"}),l.jsx("th",{children:"Reason"})]})}),l.jsx("tbody",{children:h.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:4,style:{textAlign:"center",color:"var(--text-secondary)"},children:"No executions yet."})}):h.map((S,C)=>l.jsxs("tr",{children:[l.jsx("td",{children:String(S.timestamp_utc||"").slice(0,19)}),l.jsx("td",{children:String(S.mode||"")}),l.jsx("td",{children:S.placed?"Yes":"No"}),l.jsx("td",{style:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis"},children:String(S.reason||"")})]},C))})]})})]})]})}function z0(){const[t,e]=R.useState("quickstart"),n=s=>{e(t===s?null:s)},i=({id:s,title:r,icon:o,children:a})=>l.jsxs("div",{className:"card mb-4",children:[l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},onClick:()=>n(s),children:[l.jsxs("h3",{className:"card-title",style:{margin:0,display:"flex",alignItems:"center",gap:12},children:[l.jsx("span",{style:{fontSize:"1.3rem"},children:o}),r]}),l.jsx("span",{style:{color:"var(--accent)",fontSize:"1.2rem"},children:t===s?"":"+"})]}),t===s&&l.jsx("div",{style:{marginTop:16},children:a})]});return l.jsxs("div",{children:[l.jsx("h2",{className:"page-title",children:"Help / Guide"}),l.jsx("p",{style:{color:"var(--text-secondary)",marginBottom:24},children:"Welcome to the USDJPY Trading Assistant! This guide will help you get started and understand how to use the bot effectively."}),l.jsxs(i,{id:"quickstart",title:"Quick Start (5 Steps)",icon:"",children:[l.jsx("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8,marginBottom:16},children:l.jsxs("ol",{style:{margin:0,paddingLeft:24,lineHeight:2.2},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Select or create an account"})," using the sidebar dropdown. Each account has its own settings and trade history."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Presets"})," and pick a preset that matches your style (start with ",l.jsx("em",{children:"Conservative Scalping"})," if unsure), then click ",l.jsx("strong",{children:"Apply Preset"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Go to Run / Status"}),", set the mode to ",l.jsx("strong",{children:"ARMED_AUTO_DEMO"}),", then click ",l.jsx("strong",{children:"Start Loop"}),"."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Watch the log"})," - the bot will show heartbeats every few seconds and log its trading decisions."]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Check Logs & Stats"})," to see your trades, win rate, and performance metrics."]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Tip:"})," The bot only trades on demo accounts for safety. For MT5, have the terminal running and connected; for OANDA, set your API key in Profile Editor."]})]}),l.jsxs(i,{id:"presets",title:"Understanding Presets",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"Presets are pre-configured trading strategies. Each preset has different characteristics:"}),l.jsx("div",{className:"table-container",style:{marginBottom:16},children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Preset"}),l.jsx("th",{children:"Style"}),l.jsx("th",{children:"Trades/Day"}),l.jsx("th",{children:"Target"}),l.jsx("th",{children:"Risk Level"})]})}),l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Conservative Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--success)"},children:"Low"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Aggressive Scalping"})}),l.jsx("td",{children:"Quick trades"}),l.jsx("td",{children:"15-25"}),l.jsx("td",{children:"8 pips"}),l.jsx("td",{style:{color:"var(--danger)"},children:"High"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Moderate Swing"})}),l.jsx("td",{children:"Longer holds"}),l.jsx("td",{children:"2-5"}),l.jsx("td",{children:"20 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"RSI Mean Reversion"})}),l.jsx("td",{children:"Counter-trend"}),l.jsx("td",{children:"5-10"}),l.jsx("td",{children:"10 pips"}),l.jsx("td",{style:{color:"var(--warning)"},children:"Medium"})]}),l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx("strong",{children:"Custom"})}),l.jsx("td",{children:"Your choice"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Variable"}),l.jsx("td",{children:"Configurable"})]})]})]})}),l.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:[l.jsx("strong",{children:"Recommendation:"})," Start with ",l.jsx("em",{children:"Conservative Scalping"})," to see how the bot works with minimal risk. Once comfortable, try other presets or create a custom configuration."]})]}),l.jsx(i,{id:"dashboard",title:"Reading the Dashboard",icon:"",children:l.jsxs("div",{className:"grid-2",style:{gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Run / Status Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Status:"})," Shows if the trading loop is running or stopped"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Mode:"})," DISARMED (no trades), ARMED_MANUAL_CONFIRM (prompts before trading), ARMED_AUTO_DEMO (fully automated)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Kill Switch:"})," Emergency stop - prevents any new trades"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Loop Log:"})," Real-time output showing heartbeats and decisions"]})]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 12px 0",color:"var(--accent)"},children:"Logs & Stats Page"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Quick Stats:"})," Closed trades, win rate, average pips"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Rejection Breakdown:"})," Why trades weren't taken (spread, filters, etc.)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Recent Trades:"})," Your trade history with P/L"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Sync from broker:"})," Updates trade data from your broker (MT5 or OANDA)"]})]})]})]})}),l.jsxs(i,{id:"analysis",title:"Technical Analysis Page",icon:"",children:[l.jsx("p",{style:{marginBottom:16},children:"The Analysis page provides real-time technical analysis across three timeframes (H4, M15, M1):"}),l.jsxs("ul",{style:{margin:"0 0 16px 0",paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Regime:"})," Current market trend - BULL (uptrend), BEAR (downtrend), or SIDEWAYS"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"RSI:"})," Relative Strength Index - Oversold (below 30, potential buy), Overbought (above 70, potential sell), Neutral"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"MACD:"})," Momentum indicator - Positive (bullish momentum), Negative (bearish momentum)"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"ATR:"})," Average True Range - Elevated (high volatility), Normal, Low (quiet market)"]})]}),l.jsx("p",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:"Click on any timeframe card to expand and see detailed indicator values. The page auto-refreshes every 30 seconds."})]}),l.jsx(i,{id:"faq",title:"Common Questions",icon:"",children:l.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"Why isn't the bot trading?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Check these common reasons:",l.jsx("br",{})," ",l.jsx("strong",{children:"Spread too wide:"})," The bot waits for good spreads to avoid slippage",l.jsx("br",{})," ",l.jsx("strong",{children:"Alignment filters:"})," Multi-timeframe conditions must match",l.jsx("br",{})," ",l.jsx("strong",{children:"Max trades reached:"})," Daily trade limit hit",l.jsx("br",{})," ",l.jsx("strong",{children:"Kill switch on:"})," Check the Run page",l.jsx("br",{})," ",l.jsx("strong",{children:"Market closed:"})," Forex markets close on weekends"]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"How do I close a trade?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Go to ",l.jsx("strong",{children:"Logs & Stats"}),", find your open trade in the Recent Trades table, and click the ",l.jsx("strong",{children:"Close"})," button. You'll be asked to confirm before the close order is sent."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"What does the kill switch do?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["The kill switch ",l.jsx("strong",{children:"immediately stops all new trades"})," from being placed. It does not close existing positions - use the Close button for that. Toggle it on if you need to pause the bot quickly."]})]}),l.jsxs("div",{style:{padding:16,background:"var(--bg-tertiary)",borderRadius:8},children:[l.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--warning)"},children:"My trade history is missing?"}),l.jsxs("p",{style:{margin:0,lineHeight:1.6},children:["Click ",l.jsx("strong",{children:"Sync from broker"})," on the Logs & Stats page. This will import any trades that were opened or closed in your broker platform, including trades closed by hitting TP/SL."]})]})]})}),l.jsx(i,{id:"glossary",title:"Glossary",icon:"",children:l.jsx("div",{className:"grid-2",style:{gap:12},children:[{term:"Pip",def:"Smallest price move. For USDJPY, 1 pip = 0.01 (e.g., 154.50 to 154.51)"},{term:"Lot",def:"Trade size. 0.01 = micro lot (1,000 units), 0.1 = mini lot (10,000 units), 1.0 = standard lot (100,000 units)"},{term:"Spread",def:"Difference between buy (ask) and sell (bid) price. Lower = better."},{term:"EMA",def:"Exponential Moving Average - weighted average of recent prices, responds quickly to changes"},{term:"SMA",def:"Simple Moving Average - equal-weighted average of prices over a period"},{term:"RSI",def:"Relative Strength Index (0-100). Below 30 = oversold, above 70 = overbought"},{term:"MACD",def:"Moving Average Convergence Divergence - momentum indicator showing trend direction"},{term:"ATR",def:"Average True Range - measures market volatility"},{term:"Regime",def:"Current market trend: bullish (up), bearish (down), or sideways"},{term:"Stop Loss (SL)",def:"Price level where trade closes to limit losses"},{term:"Take Profit (TP)",def:"Price level where trade closes to lock in profits"},{term:"R-Multiple",def:"Risk-adjusted return. R of 2 means you made 2x your risked amount"}].map((s,r)=>l.jsxs("div",{style:{padding:12,background:"var(--bg-tertiary)",borderRadius:6},children:[l.jsxs("strong",{style:{color:"var(--accent)"},children:[s.term,":"]}),l.jsx("span",{style:{marginLeft:8,color:"var(--text-secondary)",fontSize:"0.9rem"},children:s.def})]},r))})}),l.jsxs("div",{className:"card",style:{borderColor:"var(--warning)",background:"rgba(245, 158, 11, 0.1)"},children:[l.jsx("h3",{style:{margin:"0 0 12px 0",color:"var(--warning)",display:"flex",alignItems:"center",gap:8},children:" Important Safety Notice"}),l.jsxs("ul",{style:{margin:0,paddingLeft:20,lineHeight:1.8},children:[l.jsxs("li",{children:["This bot is designed for ",l.jsx("strong",{children:"demo trading only"}),". It will refuse to trade on live accounts."]}),l.jsx("li",{children:"Trading carries risk. Past performance does not guarantee future results."}),l.jsx("li",{children:"Always monitor the bot and understand what it's doing before trusting it with larger positions."}),l.jsx("li",{children:"Start with conservative settings and small position sizes while you learn."})]})]})]})}ql.createRoot(document.getElementById("root")).render(l.jsx(vp.StrictMode,{children:l.jsx(b0,{})}));
